var eh=Object.defineProperty;var th=(s,t,r)=>t in s?eh(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var Vt=(s,t,r)=>th(s,typeof t!="symbol"?t+"":t,r);import{c as sh,r as p,R as yo,g as rh}from"./vendor-o6zXO7vr.js";import{u as cn,a as Je,L as It,N as Wo,b as gd,c as nh,B as oh,R as ih,d as Me}from"./router-C42SdLRF.js";import{A as $t,C as ah,a as lh,b as ch,c as dh,d as uh,D as hh,e as ph,E as fh,f as gh,g as mh,F as xh,P as yh,Q as jh,R as bh,h as vh,i as wh,S as Sh,j as kh,Z as Ch,T as Fe,L as Zs,k as rt,M as en,l as Z,B as L,m as Er,n as We,o as Mn,p as Wt,q as le,r as Ue,s as Ah,t as B,u as zt,I as ue,v as ce,w as W,x as V,y as _r,z as ve,G,H as ys,J as Pe,K as Ao,U as dr,N as nr,O as md,V as dt,W as Ke,X as Jr,Y as Yt,_ as gt,$ as xd,a0 as Gt,a1 as yd,a2 as Pt,a3 as ar,a4 as Ye,a5 as ql,a6 as tn,a7 as Wn,a8 as Ph,a9 as pi,aa as Th,ab as Rh,ac as Ih}from"./antd-DTenvSkY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var fi={},Hl=sh;fi.createRoot=Hl.createRoot,fi.hydrateRoot=Hl.hydrateRoot;var jd={exports:{}},Po={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh=p,Eh=Symbol.for("react.element"),_h=Symbol.for("react.fragment"),Oh=Object.prototype.hasOwnProperty,Fh=zh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nh={key:!0,ref:!0,__self:!0,__source:!0};function bd(s,t,r){var n,o={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Oh.call(t,n)&&!Nh.hasOwnProperty(n)&&(o[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:Eh,type:s,key:i,ref:l,props:o,_owner:Fh.current}}Po.Fragment=_h;Po.jsx=bd;Po.jsxs=bd;jd.exports=Po;var e=jd.exports;const xr=(s="1",t="user",r="user@example.com",n="Test User")=>{const o={userId:s,role:t,email:r,name:n,type:"access",iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+86400,iss:"itwos-ai",aud:"itwos-ai-users"};return`mock-${btoa(JSON.stringify(o))}`},Vl=(s="1",t="user")=>{const r={userId:s,role:t,type:"refresh",iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+604800,iss:"itwos-ai",aud:"itwos-ai-users"};return`mock-refresh-${btoa(JSON.stringify(r))}`},Mh=(s,t,r="user")=>({_id:`mock-${r}-id`,id:`mock-${r}-id`,name:t||s.split("@")[0]||"Test User",email:s,role:r,avatarUrl:null,bio:`Mock ${r} for testing`,isOnline:!0,lastSeen:new Date().toISOString()}),Gl=(s,t,r)=>{localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("token",t),localStorage.setItem("accessToken",t),r&&localStorage.setItem("refreshToken",r)},qn=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},$h="611643417807-5lqdmud2ui6sd7rf8k4hg5ocr2gi6gk4.apps.googleusercontent.com";class Bh{constructor(){this.clientId=$h,this.isInitialized=!1}async initializeGoogleAuth(){try{return this.isInitialized||(window.google||await this.loadGoogleScript(),window.google.accounts.id.initialize({client_id:this.clientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),this.isInitialized=!0,console.log("‚úÖ Google Identity Services initialized")),!0}catch(t){return console.error("‚ùå Failed to initialize Google Auth:",t),!1}}loadGoogleScript(){return new Promise((t,r)=>{if(window.google&&window.google.accounts){t();return}const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.async=!0,n.defer=!0,n.onload=()=>{console.log("‚úÖ Google Identity Services script loaded"),t()},n.onerror=o=>{console.error("‚ùå Failed to load Google script:",o),r(o)},document.head.appendChild(n)})}handleCredentialResponse(t){return console.log("üîê Google credential response received"),t.credential}async signInWithGoogle(){try{if(this.isInitialized||await this.initializeGoogleAuth(),!window.google||!window.google.accounts)throw new Error("Google Identity Services not loaded");return new Promise((t,r)=>{window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:"openid email profile",callback:o=>{o.error?(console.error("‚ùå Google OAuth error:",o.error),r(new Error(o.error))):(console.log("‚úÖ Google OAuth token received"),this.getUserInfo(o.access_token).then(i=>{t({access_token:o.access_token,userInfo:i})}).catch(i=>{console.error("‚ùå Failed to get user info:",i),r(i)}))}}).requestAccessToken()})}catch(t){throw console.error("‚ùå Google Sign-In error:",t),t}}async getUserInfo(t){try{const r=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${t}`);if(!r.ok)throw new Error("Failed to fetch user info");return await r.json()}catch(r){throw console.error("‚ùå Failed to get user info:",r),r}}async signInWithGoogleRedirect(){try{this.isInitialized||await this.initializeGoogleAuth();const t=window.location.origin,o=`https://accounts.google.com/oauth/authorize?client_id=${this.clientId}&redirect_uri=${encodeURIComponent(t)}&scope=${encodeURIComponent("openid email profile")}&response_type=code&access_type=offline&prompt=consent`;window.location.href=o}catch(t){throw console.error("‚ùå Google redirect sign-in error:",t),t}}signOut(){try{window.google&&window.google.accounts&&(window.google.accounts.id.disableAutoSelect(),console.log("‚úÖ Google sign-out completed"))}catch(t){console.error("‚ùå Google sign-out error:",t)}}isGoogleAvailable(){return!!(window.google&&window.google.accounts)}parseCredential(t){try{const r=t.split(".");if(r.length!==3)throw new Error("Invalid JWT token format");const n=JSON.parse(atob(r[1]));return{sub:n.sub,email:n.email,name:n.name,picture:n.picture,email_verified:n.email_verified}}catch(r){throw console.error("‚ùå Failed to parse Google credential:",r),r}}}const Jl=new Bh,vd=p.createContext(),qe=()=>{const s=p.useContext(vd);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Dh=({children:s})=>{let t=null;try{t=$t.useApp().message}catch{console.warn("AuthProvider: App.useApp() not available, using fallback"),t={success:w=>console.log("Success:",w),error:w=>console.error("Error:",w),warning:w=>console.warn("Warning:",w),info:w=>console.info("Info:",w)}}const[r,n]=p.useState({user:null,isLoading:!0,isAuthenticated:!1,authInitialized:!1}),{user:o,isLoading:i,isAuthenticated:l,authInitialized:c}=r,[u,m]=p.useState(!1);p.useEffect(()=>{if(u)return;(async()=>{console.log("AuthContext: Initializing authentication..."),m(!0);try{const w=localStorage.getItem("user"),b=localStorage.getItem("token")||localStorage.getItem("accessToken"),C=localStorage.getItem("adminUser"),O=localStorage.getItem("adminToken");if(console.log("AuthContext: Auth data check:",{hasUser:!!w,hasToken:!!b,hasAdminUser:!!C,hasAdminToken:!!O}),w&&b){const F=JSON.parse(w);if(console.log("AuthContext: Found regular user:",F.email),F.email==="admin@itwos.ai"||F.role==="admin"){console.log("AuthContext: Converting to admin user:",F.email);const N=xr(F._id,"admin",F.email,F.name);console.log("AuthContext: Created new admin token:",N.substring(0,50)+"..."),localStorage.setItem("adminUser",JSON.stringify({...F,role:"admin"})),localStorage.setItem("adminToken",N),localStorage.setItem("token",N),localStorage.setItem("accessToken",N),n({user:{...F,role:"admin"},isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Admin user authentication initialized");return}try{if(b.includes("mock-")){const N=JSON.parse(atob(b.split("-")[1])),E=Math.floor(Date.now()/1e3);if(N.exp&&N.exp<E){console.log("Mock token expired, creating new one");const _=xr(F._id,F.role,F.email,F.name);localStorage.setItem("token",_),localStorage.setItem("accessToken",_)}}}catch(N){console.error("Error validating token:",N),qn(),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1});return}n({user:F,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Regular user authentication initialized");return}if(C&&O){const F=JSON.parse(C);console.log("AuthContext: Found admin user:",F.email),localStorage.setItem("token",O),localStorage.setItem("accessToken",O);try{if(O.includes("mock-")){const N=JSON.parse(atob(O.split("-")[1])),E=Math.floor(Date.now()/1e3);if(N.exp&&N.exp<E){console.log("Admin mock token expired, creating new one");const _=xr(F._id,F.role,F.email,F.name);localStorage.setItem("token",_),localStorage.setItem("accessToken",_),localStorage.setItem("adminToken",_)}}}catch(N){console.error("Error validating admin token:",N),qn(),localStorage.removeItem("adminUser"),localStorage.removeItem("adminToken"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1});return}n({user:F,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Admin user authentication initialized");return}console.log("AuthContext: No valid authentication found"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1})}catch(w){console.error("AuthContext: Authentication initialization error:",w),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("adminUser"),localStorage.removeItem("adminToken"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1})}})()},[u]);const d=p.useCallback(async(R=3e3)=>{try{const w="http://localhost:7000/api",b=new AbortController,C=setTimeout(()=>b.abort(),R),O=await fetch(`${w}/health`,{method:"GET",signal:b.signal});return clearTimeout(C),O.ok}catch{return!1}},[]),f=p.useCallback(async R=>{try{if(n(O=>({...O,isLoading:!0})),!await d(3e3)){console.warn("Backend server not available, using mock login");const O=Mh(R.email),F=xr(O._id,O.role,O.email,O.name),N=Vl(O._id,O.role);return Gl(O,F,N),n({user:O,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Mock login successful:",O.email),t.success("Login successful! (Mock mode)"),{success:!0,user:O,redirectTo:"/dashboard"}}const b=await fetch("http://localhost:7000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(R)});if(!b.ok)throw new Error(`HTTP ${b.status}: ${b.statusText}`);const C=await b.json();if(C.success)return localStorage.setItem("user",JSON.stringify(C.user)),localStorage.setItem("token",C.tokens.accessToken),localStorage.setItem("accessToken",C.tokens.accessToken),localStorage.setItem("refreshToken",C.tokens.refreshToken),n({user:C.user,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Real login successful:",C.user.email),t.success("Login successful!"),{success:!0,user:C.user,redirectTo:C.user.role==="admin"?"/admin/dashboard":"/dashboard"};throw console.warn("Backend login failed, falling back to mock login:",C.message),new Error(C.message||"Login failed")}catch(w){return console.error("Login error:",w),t.error("Login failed. Please check your credentials and try again."),{success:!1,error:"Login failed"}}},[d]),g=p.useCallback(async R=>{try{if(n(O=>({...O,isLoading:!0})),!await d(5e3))return console.warn("Backend server not available, using mock registration"),t.success("Registration successful! Please log in. (Mock mode)"),{success:!0};const C=await(await fetch("http://localhost:7000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();return C.success?(t.success("Registration successful! Please log in."),{success:!0}):(t.error(C.message||"Registration failed"),{success:!1,error:C.message})}catch(w){return console.error("Registration error:",w),t.error("Network error. Please try again."),{success:!1,error:w.message}}finally{n(w=>({...w,isLoading:!1}))}},[]),y=p.useCallback(async()=>{try{const R=localStorage.getItem("refreshToken");if(!R)throw new Error("No refresh token available");const w=await fetch("http://localhost:7000/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:R})});if(w.ok){const b=await w.json();if(b.success)return localStorage.setItem("token",b.tokens.accessToken),localStorage.setItem("accessToken",b.tokens.accessToken),localStorage.setItem("refreshToken",b.tokens.refreshToken),!0}return!1}catch(R){return console.error("Token refresh failed:",R),!1}},[]),h=p.useCallback(async()=>{try{const R=localStorage.getItem("token")||localStorage.getItem("accessToken");if(!R)return!1;if(R.includes("mock-"))try{const w=JSON.parse(atob(R.split("-")[1])),b=Math.floor(Date.now()/1e3);if(w.exp&&w.exp<b){console.log("Mock token expired, creating new one");const C=JSON.parse(localStorage.getItem("user")||"{}"),O=xr(C._id,C.role,C.email,C.name);return localStorage.setItem("token",O),localStorage.setItem("accessToken",O),!0}return!0}catch(w){return console.error("Error parsing mock token:",w),!1}return await y()}catch(R){return console.error("Token check failed:",R),!1}},[y]),x=p.useCallback(()=>{try{const R=localStorage.getItem("user");if(R){const w=JSON.parse(R);if(w.email==="admin@itwos.ai"||w.role==="admin"){console.log("üîÑ Force refreshing admin token for:",w.email);const b=xr(w._id,"admin",w.email,w.name);return localStorage.setItem("adminUser",JSON.stringify({...w,role:"admin"})),localStorage.setItem("adminToken",b),localStorage.setItem("token",b),localStorage.setItem("accessToken",b),console.log("‚úÖ Admin token force refreshed"),{success:!0,token:b}}}return{success:!1,error:"No admin user found"}}catch(R){return console.error("‚ùå Force refresh admin token failed:",R),{success:!1,error:R.message}}},[]);typeof window<"u"&&(window.forceRefreshAdminToken=x,window.clearAuthAndRefresh=()=>{console.log("üßπ Clearing auth data and refreshing..."),qn(),localStorage.removeItem("adminUser"),localStorage.removeItem("adminToken"),window.location.reload()});const P=p.useCallback(async()=>{try{return qn(),localStorage.removeItem("adminUser"),localStorage.removeItem("adminToken"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1}),t.success("Logged out successfully!"),{success:!0}}catch(R){return console.error("Logout error:",R),t.error("Logout failed"),{success:!1,error:R.message}}},[]),S=p.useCallback(async R=>{try{n(C=>({...C,isLoading:!0}));const w=await fetch("http://localhost:7000/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(R)});if(!w.ok)throw new Error(`HTTP ${w.status}: ${w.statusText}`);const b=await w.json();if(b.success)return localStorage.setItem("adminToken",b.data.accessToken),localStorage.setItem("adminUser",JSON.stringify(b.data.user)),n({user:b.data.user,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),t.success("Admin login successful!"),{success:!0,user:b.data.user};throw new Error(b.message||"Admin login failed")}catch(w){return console.error("Admin login error:",w),t.error("Login failed. Please check your credentials and try again."),{success:!1,error:w.message}}finally{n(w=>({...w,isLoading:!1}))}},[]),M=p.useCallback(async()=>{try{if(await d(5e3))try{await fetch("http://localhost:7000/api/admin/auth/logout",{method:"POST",credentials:"include"})}catch{}return localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1}),t.success("Admin logout successful!"),{success:!0}}catch(R){return console.error("Admin logout error:",R),localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),n({user:null,isAuthenticated:!1,authInitialized:!0,isLoading:!1}),t.success("Logged out successfully!"),{success:!0}}},[]),j=p.useCallback(async()=>{try{n(F=>({...F,isLoading:!0})),console.log("üîê Starting Google OAuth login..."),await Jl.initializeGoogleAuth();const R=await Jl.signInWithGoogle();if(!R||!R.access_token)throw new Error("Failed to get Google access token");console.log("üîê Google OAuth response received:",R);const w=R.userInfo;if(console.log("üîê Google user info:",w),!await d(3e3)){console.warn("Backend server not available, using mock Google login");const F={_id:"google-user-"+Date.now(),name:w.name,email:w.email,avatarUrl:w.picture,role:"user",googleId:w.sub,isEmailVerified:w.email_verified,createdAt:new Date().toISOString()},N=xr(F._id,F.role,F.email,F.name),E=Vl(F._id,F.role);return Gl(F,N,E),n({user:F,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Mock Google login successful:",F.email),t.success("Google login successful! (Mock mode)"),{success:!0,user:F,redirectTo:"/dashboard"}}const C=await fetch("http://localhost:7000/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({access_token:R.access_token,userInfo:w})});if(!C.ok)throw new Error(`HTTP ${C.status}: ${C.statusText}`);const O=await C.json();if(O.success)return localStorage.setItem("user",JSON.stringify(O.user)),localStorage.setItem("token",O.tokens.accessToken),localStorage.setItem("accessToken",O.tokens.accessToken),localStorage.setItem("refreshToken",O.tokens.refreshToken),n({user:O.user,isAuthenticated:!0,authInitialized:!0,isLoading:!1}),console.log("AuthContext: Real Google login successful:",O.user.email),t.success("Google login successful!"),{success:!0,user:O.user,redirectTo:O.user.role==="admin"?"/admin/dashboard":"/dashboard"};throw new Error(O.message||"Google login failed")}catch(R){return console.error("Google login error:",R),t.error("Google login failed. Please try again."),{success:!1,error:"Google login failed"}}finally{n(R=>({...R,isLoading:!1}))}},[t]),z=p.useCallback(async R=>{try{if(console.log("AuthContext: Updating profile:",R),!o)throw new Error("No user logged in");const w={...o,...R};return n(b=>({...b,user:w})),localStorage.setItem("user",JSON.stringify(w)),console.log("AuthContext: Profile updated successfully"),t.success("Profile updated successfully!"),{success:!0,user:w}}catch(w){return console.error("AuthContext: Profile update error:",w),t.error("Profile update failed. Please try again."),{success:!1,error:w.message}}},[o,t]),T=p.useCallback(async()=>{try{console.log("AuthContext: Refreshing authentication");const R=localStorage.getItem("token")||localStorage.getItem("accessToken"),w=localStorage.getItem("user");if(!R||!w)return console.log("AuthContext: No stored auth data found"),{success:!1,error:"No stored authentication data"};const b=JSON.parse(w);return n({user:b,isLoading:!1,isAuthenticated:!0,authInitialized:!0}),console.log("AuthContext: Authentication refreshed successfully"),{success:!0,user:b}}catch(R){return console.error("AuthContext: Refresh auth error:",R),{success:!1,error:R.message}}},[]),k=p.useMemo(()=>({user:o,isLoading:i&&!o,isAuthenticated:l,authInitialized:c,login:f,register:g,logout:P,googleLogin:j,refreshToken:y,checkAndRefreshToken:h,forceRefreshAdminToken:x,adminLogin:S,adminLogout:M,updateProfile:z,refreshAuth:T,setUser:R=>n(w=>({...w,user:R})),updateUser:R=>{console.log("üîÑ AuthContext: updateUser called with:",R),n(w=>{const b={...w.user,...R};return console.log("üîÑ AuthContext: New user state:",b),localStorage.setItem("user",JSON.stringify(b)),console.log("üîÑ AuthContext: Updated localStorage immediately"),{...w,user:b}})},setIsAuthenticated:R=>n(w=>({...w,isAuthenticated:R}))}),[o,i,l,c,f,g,P,j,y,h,S,M,z,T]);return e.jsx(vd.Provider,{value:k,children:s})},wd=p.createContext({});function Sd(s){var t,r,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(t=0;t<o;t++)s[t]&&(r=Sd(s[t]))&&(n&&(n+=" "),n+=r)}else for(r in s)s[r]&&(n&&(n+=" "),n+=r);return n}function Uh(){for(var s,t,r=0,n="",o=arguments.length;r<o;r++)(s=arguments[r])&&(t=Sd(s))&&(n&&(n+=" "),n+=t);return n}const Lh={aliceblue:"9ehhb",antiquewhite:"9sgk7",aqua:"1ekf",aquamarine:"4zsno",azure:"9eiv3",beige:"9lhp8",bisque:"9zg04",black:"0",blanchedalmond:"9zhe5",blue:"73",blueviolet:"5e31e",brown:"6g016",burlywood:"8ouiv",cadetblue:"3qba8",chartreuse:"4zshs",chocolate:"87k0u",coral:"9yvyo",cornflowerblue:"3xael",cornsilk:"9zjz0",crimson:"8l4xo",cyan:"1ekf",darkblue:"3v",darkcyan:"rkb",darkgoldenrod:"776yz",darkgray:"6mbhl",darkgreen:"jr4",darkgrey:"6mbhl",darkkhaki:"7ehkb",darkmagenta:"5f91n",darkolivegreen:"3bzfz",darkorange:"9yygw",darkorchid:"5z6x8",darkred:"5f8xs",darksalmon:"9441m",darkseagreen:"5lwgf",darkslateblue:"2th1n",darkslategray:"1ugcv",darkslategrey:"1ugcv",darkturquoise:"14up",darkviolet:"5rw7n",deeppink:"9yavn",deepskyblue:"11xb",dimgray:"442g9",dimgrey:"442g9",dodgerblue:"16xof",firebrick:"6y7tu",floralwhite:"9zkds",forestgreen:"1cisi",fuchsia:"9y70f",gainsboro:"8m8kc",ghostwhite:"9pq0v",goldenrod:"8j4f4",gold:"9zda8",gray:"50i2o",green:"pa8",greenyellow:"6senj",grey:"50i2o",honeydew:"9eiuo",hotpink:"9yrp0",indianred:"80gnw",indigo:"2xcoy",ivory:"9zldc",khaki:"9edu4",lavenderblush:"9ziet",lavender:"90c8q",lawngreen:"4vk74",lemonchiffon:"9zkct",lightblue:"6s73a",lightcoral:"9dtog",lightcyan:"8s1rz",lightgoldenrodyellow:"9sjiq",lightgray:"89jo3",lightgreen:"5nkwg",lightgrey:"89jo3",lightpink:"9z6wx",lightsalmon:"9z2ii",lightseagreen:"19xgq",lightskyblue:"5arju",lightslategray:"4nwk9",lightslategrey:"4nwk9",lightsteelblue:"6wau6",lightyellow:"9zlcw",lime:"1edc",limegreen:"1zcxe",linen:"9shk6",magenta:"9y70f",maroon:"4zsow",mediumaquamarine:"40eju",mediumblue:"5p",mediumorchid:"79qkz",mediumpurple:"5r3rv",mediumseagreen:"2d9ip",mediumslateblue:"4tcku",mediumspringgreen:"1di2",mediumturquoise:"2uabw",mediumvioletred:"7rn9h",midnightblue:"z980",mintcream:"9ljp6",mistyrose:"9zg0x",moccasin:"9zfzp",navajowhite:"9zest",navy:"3k",oldlace:"9wq92",olive:"50hz4",olivedrab:"472ub",orange:"9z3eo",orangered:"9ykg0",orchid:"8iu3a",palegoldenrod:"9bl4a",palegreen:"5yw0o",paleturquoise:"6v4ku",palevioletred:"8k8lv",papayawhip:"9zi6t",peachpuff:"9ze0p",peru:"80oqn",pink:"9z8wb",plum:"8nba5",powderblue:"6wgdi",purple:"4zssg",rebeccapurple:"3zk49",red:"9y6tc",rosybrown:"7cv4f",royalblue:"2jvtt",saddlebrown:"5fmkz",salmon:"9rvci",sandybrown:"9jn1c",seagreen:"1tdnb",seashell:"9zje6",sienna:"6973h",silver:"7ir40",skyblue:"5arjf",slateblue:"45e4t",slategray:"4e100",slategrey:"4e100",snow:"9zke2",springgreen:"1egv",steelblue:"2r1kk",tan:"87yx8",teal:"pds",thistle:"8ggk8",tomato:"9yqfb",turquoise:"2j4r4",violet:"9b10u",wheat:"9ld4j",white:"9zldr",whitesmoke:"9lhpx",yellow:"9zl6o",yellowgreen:"61fzm"},Ot=Math.round;function qo(s,t){const r=s.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],n=r.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)n[o]=t(n[o]||0,r[o]||"",o);return r[3]?n[3]=r[3].includes("%")?n[3]/100:n[3]:n[3]=1,n}const Yl=(s,t,r)=>r===0?s:s/100;function xn(s,t){const r=t||255;return s>r?r:s<0?0:s}class Yr{constructor(t){Vt(this,"isValid",!0);Vt(this,"r",0);Vt(this,"g",0);Vt(this,"b",0);Vt(this,"a",1);Vt(this,"_h");Vt(this,"_s");Vt(this,"_l");Vt(this,"_v");Vt(this,"_max");Vt(this,"_min");Vt(this,"_brightness");function r(n){return n[0]in t&&n[1]in t&&n[2]in t}if(t)if(typeof t=="string"){let o=function(i){return n.startsWith(i)};const n=t.trim();if(/^#?[A-F\d]{3,8}$/i.test(n))this.fromHexString(n);else if(o("rgb"))this.fromRgbString(n);else if(o("hsl"))this.fromHslString(n);else if(o("hsv")||o("hsb"))this.fromHsvString(n);else{const i=Lh[n.toLowerCase()];i&&this.fromHexString(parseInt(i,36).toString(16).padStart(6,"0"))}}else if(t instanceof Yr)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._h=t._h,this._s=t._s,this._l=t._l,this._v=t._v;else if(r("rgb"))this.r=xn(t.r),this.g=xn(t.g),this.b=xn(t.b),this.a=typeof t.a=="number"?xn(t.a,1):1;else if(r("hsl"))this.fromHsl(t);else if(r("hsv"))this.fromHsv(t);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(t))}setR(t){return this._sc("r",t)}setG(t){return this._sc("g",t)}setB(t){return this._sc("b",t)}setA(t){return this._sc("a",t,1)}setHue(t){const r=this.toHsv();return r.h=t,this._c(r)}getLuminance(){function t(i){const l=i/255;return l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}const r=t(this.r),n=t(this.g),o=t(this.b);return .2126*r+.7152*n+.0722*o}getHue(){if(typeof this._h>"u"){const t=this.getMax()-this.getMin();t===0?this._h=0:this._h=Ot(60*(this.r===this.getMax()?(this.g-this.b)/t+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/t+2:(this.r-this.g)/t+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const t=this.getMax()-this.getMin();t===0?this._s=0:this._s=t/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(t=10){const r=this.getHue(),n=this.getSaturation();let o=this.getLightness()-t/100;return o<0&&(o=0),this._c({h:r,s:n,l:o,a:this.a})}lighten(t=10){const r=this.getHue(),n=this.getSaturation();let o=this.getLightness()+t/100;return o>1&&(o=1),this._c({h:r,s:n,l:o,a:this.a})}mix(t,r=50){const n=this._c(t),o=r/100,i=c=>(n[c]-this[c])*o+this[c],l={r:Ot(i("r")),g:Ot(i("g")),b:Ot(i("b")),a:Ot(i("a")*100)/100};return this._c(l)}tint(t=10){return this.mix({r:255,g:255,b:255,a:1},t)}shade(t=10){return this.mix({r:0,g:0,b:0,a:1},t)}onBackground(t){const r=this._c(t),n=this.a+r.a*(1-this.a),o=i=>Ot((this[i]*this.a+r[i]*r.a*(1-this.a))/n);return this._c({r:o("r"),g:o("g"),b:o("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}clone(){return this._c(this)}toHexString(){let t="#";const r=(this.r||0).toString(16);t+=r.length===2?r:"0"+r;const n=(this.g||0).toString(16);t+=n.length===2?n:"0"+n;const o=(this.b||0).toString(16);if(t+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const i=Ot(this.a*255).toString(16);t+=i.length===2?i:"0"+i}return t}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const t=this.getHue(),r=Ot(this.getSaturation()*100),n=Ot(this.getLightness()*100);return this.a!==1?`hsla(${t},${r}%,${n}%,${this.a})`:`hsl(${t},${r}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(t,r,n){const o=this.clone();return o[t]=xn(r,n),o}_c(t){return new this.constructor(t)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(t){const r=t.replace("#","");function n(o,i){return parseInt(r[o]+r[i||o],16)}r.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=r[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=r[6]?n(6,7)/255:1)}fromHsl({h:t,s:r,l:n,a:o}){if(this._h=t%360,this._s=r,this._l=n,this.a=typeof o=="number"?o:1,r<=0){const g=Ot(n*255);this.r=g,this.g=g,this.b=g}let i=0,l=0,c=0;const u=t/60,m=(1-Math.abs(2*n-1))*r,d=m*(1-Math.abs(u%2-1));u>=0&&u<1?(i=m,l=d):u>=1&&u<2?(i=d,l=m):u>=2&&u<3?(l=m,c=d):u>=3&&u<4?(l=d,c=m):u>=4&&u<5?(i=d,c=m):u>=5&&u<6&&(i=m,c=d);const f=n-m/2;this.r=Ot((i+f)*255),this.g=Ot((l+f)*255),this.b=Ot((c+f)*255)}fromHsv({h:t,s:r,v:n,a:o}){this._h=t%360,this._s=r,this._v=n,this.a=typeof o=="number"?o:1;const i=Ot(n*255);if(this.r=i,this.g=i,this.b=i,r<=0)return;const l=t/60,c=Math.floor(l),u=l-c,m=Ot(n*(1-r)*255),d=Ot(n*(1-r*u)*255),f=Ot(n*(1-r*(1-u))*255);switch(c){case 0:this.g=f,this.b=m;break;case 1:this.r=d,this.b=m;break;case 2:this.r=m,this.b=f;break;case 3:this.r=m,this.g=d;break;case 4:this.r=f,this.g=m;break;case 5:default:this.g=m,this.b=d;break}}fromHsvString(t){const r=qo(t,Yl);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(t){const r=qo(t,Yl);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(t){const r=qo(t,(n,o)=>o.includes("%")?Ot(n/100*255):n);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}const Hn=2,Kl=.16,Wh=.05,qh=.05,Hh=.15,kd=5,Cd=4,Vh=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function Ql(s,t,r){let n;return Math.round(s.h)>=60&&Math.round(s.h)<=240?n=r?Math.round(s.h)-Hn*t:Math.round(s.h)+Hn*t:n=r?Math.round(s.h)+Hn*t:Math.round(s.h)-Hn*t,n<0?n+=360:n>=360&&(n-=360),n}function Zl(s,t,r){if(s.h===0&&s.s===0)return s.s;let n;return r?n=s.s-Kl*t:t===Cd?n=s.s+Kl:n=s.s+Wh*t,n>1&&(n=1),r&&t===kd&&n>.1&&(n=.1),n<.06&&(n=.06),Math.round(n*100)/100}function Xl(s,t,r){let n;return r?n=s.v+qh*t:n=s.v-Hh*t,n=Math.max(0,Math.min(1,n)),Math.round(n*100)/100}function Gh(s,t={}){const r=[],n=new Yr(s),o=n.toHsv();for(let i=kd;i>0;i-=1){const l=new Yr({h:Ql(o,i,!0),s:Zl(o,i,!0),v:Xl(o,i,!0)});r.push(l)}r.push(n);for(let i=1;i<=Cd;i+=1){const l=new Yr({h:Ql(o,i),s:Zl(o,i),v:Xl(o,i)});r.push(l)}return t.theme==="dark"?Vh.map(({index:i,amount:l})=>new Yr(t.backgroundColor||"#141414").mix(r[i],l).toHexString()):r.map(i=>i.toHexString())}const gi=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];gi.primary=gi[5];function Jh(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Yh(s,t){if(!s)return!1;if(s.contains)return s.contains(t);let r=t;for(;r;){if(r===s)return!0;r=r.parentNode}return!1}const ec="data-rc-order",tc="data-rc-priority",Kh="rc-util-key",mi=new Map;function Ad({mark:s}={}){return s?s.startsWith("data-")?s:`data-${s}`:Kh}function kl(s){return s.attachTo?s.attachTo:document.querySelector("head")||document.body}function Qh(s){return s==="queue"?"prependQueue":s?"prepend":"append"}function Cl(s){return Array.from((mi.get(s)||s).children).filter(t=>t.tagName==="STYLE")}function Pd(s,t={}){if(!Jh())return null;const{csp:r,prepend:n,priority:o=0}=t,i=Qh(n),l=i==="prependQueue",c=document.createElement("style");c.setAttribute(ec,i),l&&o&&c.setAttribute(tc,`${o}`),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=s;const u=kl(t),{firstChild:m}=u;if(n){if(l){const d=(t.styles||Cl(u)).filter(f=>{if(!["prepend","prependQueue"].includes(f.getAttribute(ec)))return!1;const g=Number(f.getAttribute(tc)||0);return o>=g});if(d.length)return u.insertBefore(c,d[d.length-1].nextSibling),c}u.insertBefore(c,m)}else u.appendChild(c);return c}function Zh(s,t={}){let{styles:r}=t;return r||(r=Cl(kl(t))),r.find(n=>n.getAttribute(Ad(t))===s)}function Xh(s,t){const r=mi.get(s);if(!r||!Yh(document,r)){const n=Pd("",t),{parentNode:o}=n;mi.set(s,o),s.removeChild(n)}}function ep(s,t,r={}){var u,m,d;const n=kl(r),o=Cl(n),i={...r,styles:o};Xh(n,i);const l=Zh(t,i);if(l)return(u=i.csp)!=null&&u.nonce&&l.nonce!==((m=i.csp)==null?void 0:m.nonce)&&(l.nonce=(d=i.csp)==null?void 0:d.nonce),l.innerHTML!==s&&(l.innerHTML=s),l;const c=Pd(s,i);return c.setAttribute(Ad(i),t),c}function Td(s){var t;return(t=s==null?void 0:s.getRootNode)==null?void 0:t.call(s)}function tp(s){return Td(s)instanceof ShadowRoot}function sp(s){return tp(s)?Td(s):null}let xi={};const rp=s=>{};function np(s,t){}function op(s,t){}function ip(){xi={}}function Rd(s,t,r){!t&&!xi[r]&&(s(!1,r),xi[r]=!0)}function To(s,t){Rd(np,s,t)}function ap(s,t){Rd(op,s,t)}To.preMessage=rp;To.resetWarned=ip;To.noteOnce=ap;function lp(s){return s.replace(/-(.)/g,(t,r)=>r.toUpperCase())}function cp(s,t){To(s,`[@ant-design/icons] ${t}`)}function sc(s){return typeof s=="object"&&typeof s.name=="string"&&typeof s.theme=="string"&&(typeof s.icon=="object"||typeof s.icon=="function")}function rc(s={}){return Object.keys(s).reduce((t,r)=>{const n=s[r];switch(r){case"class":t.className=n,delete t.class;break;default:delete t[r],t[lp(r)]=n}return t},{})}function yi(s,t,r){return r?yo.createElement(s.tag,{key:t,...rc(s.attrs),...r},(s.children||[]).map((n,o)=>yi(n,`${t}-${s.tag}-${o}`))):yo.createElement(s.tag,{key:t,...rc(s.attrs)},(s.children||[]).map((n,o)=>yi(n,`${t}-${s.tag}-${o}`)))}function Id(s){return Gh(s)[0]}function zd(s){return s?Array.isArray(s)?s:[s]:[]}const dp=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
  vertical-align: inherit;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,up=s=>{const{csp:t,prefixCls:r,layer:n}=p.useContext(wd);let o=dp;r&&(o=o.replace(/anticon/g,r)),n&&(o=`@layer ${n} {
${o}
}`),p.useEffect(()=>{const i=s.current,l=sp(i);ep(o,"@ant-design-icons",{prepend:!n,csp:t,attachTo:l})},[])},zn={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function hp({primaryColor:s,secondaryColor:t}){zn.primaryColor=s,zn.secondaryColor=t||Id(s),zn.calculated=!!t}function pp(){return{...zn}}const dn=s=>{const{icon:t,className:r,onClick:n,style:o,primaryColor:i,secondaryColor:l,...c}=s,u=p.useRef(null);let m=zn;if(i&&(m={primaryColor:i,secondaryColor:l||Id(i)}),up(u),cp(sc(t),`icon should be icon definiton, but got ${t}`),!sc(t))return null;let d=t;return d&&typeof d.icon=="function"&&(d={...d,icon:d.icon(m.primaryColor,m.secondaryColor)}),yi(d.icon,`svg-${d.name}`,{className:r,onClick:n,style:o,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...c,ref:u})};dn.displayName="IconReact";dn.getTwoToneColors=pp;dn.setTwoToneColors=hp;function Ed(s){const[t,r]=zd(s);return dn.setTwoToneColors({primaryColor:t,secondaryColor:r})}function fp(){const s=dn.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}function ji(){return ji=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ji.apply(this,arguments)}Ed(gi.primary);const be=p.forwardRef((s,t)=>{const{className:r,icon:n,spin:o,rotate:i,tabIndex:l,onClick:c,twoToneColor:u,...m}=s,{prefixCls:d="anticon",rootClassName:f}=p.useContext(wd),g=Uh(f,d,{[`${d}-${n.name}`]:!!n.name,[`${d}-spin`]:!!o||n.name==="loading"},r);let y=l;y===void 0&&c&&(y=-1);const h=i?{msTransform:`rotate(${i}deg)`,transform:`rotate(${i}deg)`}:void 0,[x,P]=zd(u);return p.createElement("span",ji({role:"img","aria-label":n.name},m,{ref:t,tabIndex:y,onClick:c,className:g}),p.createElement(dn,{icon:n,primaryColor:x,secondaryColor:P,style:h}))});be.getTwoToneColor=fp;be.setTwoToneColor=Ed;var gp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function bi(){return bi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},bi.apply(this,arguments)}const mp=(s,t)=>p.createElement(be,bi({},s,{ref:t,icon:gp})),xp=p.forwardRef(mp);var yp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};function vi(){return vi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},vi.apply(this,arguments)}const jp=(s,t)=>p.createElement(be,vi({},s,{ref:t,icon:yp})),Al=p.forwardRef(jp);var bp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};function wi(){return wi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},wi.apply(this,arguments)}const vp=(s,t)=>p.createElement(be,wi({},s,{ref:t,icon:bp})),wp=p.forwardRef(vp);var Sp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function Si(){return Si=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Si.apply(this,arguments)}const kp=(s,t)=>p.createElement(be,Si({},s,{ref:t,icon:Sp})),ki=p.forwardRef(kp);var Cp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"};function Ci(){return Ci=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ci.apply(this,arguments)}const Ap=(s,t)=>p.createElement(be,Ci({},s,{ref:t,icon:Cp})),js=p.forwardRef(Ap);var Pp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"};function Ai(){return Ai=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ai.apply(this,arguments)}const Tp=(s,t)=>p.createElement(be,Ai({},s,{ref:t,icon:Pp})),Rp=p.forwardRef(Tp);var Ip={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};function Pi(){return Pi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Pi.apply(this,arguments)}const zp=(s,t)=>p.createElement(be,Pi({},s,{ref:t,icon:Ip})),bs=p.forwardRef(zp);function Ti(){return Ti=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ti.apply(this,arguments)}const Ep=(s,t)=>p.createElement(be,Ti({},s,{ref:t,icon:ah})),Ds=p.forwardRef(Ep);var _p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};function Ri(){return Ri=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ri.apply(this,arguments)}const Op=(s,t)=>p.createElement(be,Ri({},s,{ref:t,icon:_p})),Pl=p.forwardRef(Op);var Fp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};function Ii(){return Ii=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ii.apply(this,arguments)}const Np=(s,t)=>p.createElement(be,Ii({},s,{ref:t,icon:Fp})),Ee=p.forwardRef(Np);function zi(){return zi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},zi.apply(this,arguments)}const Mp=(s,t)=>p.createElement(be,zi({},s,{ref:t,icon:lh})),ur=p.forwardRef(Mp);function Ei(){return Ei=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ei.apply(this,arguments)}const $p=(s,t)=>p.createElement(be,Ei({},s,{ref:t,icon:ch})),Ze=p.forwardRef($p);var Bp={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function _i(){return _i=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},_i.apply(this,arguments)}const Dp=(s,t)=>p.createElement(be,_i({},s,{ref:t,icon:Bp})),Or=p.forwardRef(Dp);function Oi(){return Oi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Oi.apply(this,arguments)}const Up=(s,t)=>p.createElement(be,Oi({},s,{ref:t,icon:dh})),sn=p.forwardRef(Up);function Fi(){return Fi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Fi.apply(this,arguments)}const Lp=(s,t)=>p.createElement(be,Fi({},s,{ref:t,icon:uh})),nc=p.forwardRef(Lp);var Wp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};function Ni(){return Ni=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ni.apply(this,arguments)}const qp=(s,t)=>p.createElement(be,Ni({},s,{ref:t,icon:Wp})),En=p.forwardRef(qp);var Hp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zm-126 534.1H250.3l-53.8-409.4 139.8 86.1L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4zM512 509c-62.1 0-112.6 50.5-112.6 112.6S449.9 734.2 512 734.2s112.6-50.5 112.6-112.6S574.1 509 512 509zm0 160.9c-26.6 0-48.2-21.6-48.2-48.3 0-26.6 21.6-48.3 48.2-48.3s48.2 21.6 48.2 48.3c0 26.6-21.6 48.3-48.2 48.3z"}}]},name:"crown",theme:"outlined"};function Mi(){return Mi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Mi.apply(this,arguments)}const Vp=(s,t)=>p.createElement(be,Mi({},s,{ref:t,icon:Hp})),Rn=p.forwardRef(Vp);var Gp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"};function $i(){return $i=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},$i.apply(this,arguments)}const Jp=(s,t)=>p.createElement(be,$i({},s,{ref:t,icon:Gp})),Yp=p.forwardRef(Jp);function Bi(){return Bi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Bi.apply(this,arguments)}const Kp=(s,t)=>p.createElement(be,Bi({},s,{ref:t,icon:hh})),Tt=p.forwardRef(Kp);var Qp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z"}}]},name:"dislike",theme:"outlined"};function Di(){return Di=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Di.apply(this,arguments)}const Zp=(s,t)=>p.createElement(be,Di({},s,{ref:t,icon:Qp})),_d=p.forwardRef(Zp);var Xp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};function Ui(){return Ui=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ui.apply(this,arguments)}const ef=(s,t)=>p.createElement(be,Ui({},s,{ref:t,icon:Xp})),kt=p.forwardRef(ef);function Li(){return Li=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Li.apply(this,arguments)}const tf=(s,t)=>p.createElement(be,Li({},s,{ref:t,icon:ph})),Tl=p.forwardRef(tf);function Wi(){return Wi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Wi.apply(this,arguments)}const sf=(s,t)=>p.createElement(be,Wi({},s,{ref:t,icon:fh})),qt=p.forwardRef(sf);var rf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"};function qi(){return qi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},qi.apply(this,arguments)}const nf=(s,t)=>p.createElement(be,qi({},s,{ref:t,icon:rf})),Fr=p.forwardRef(nf);var of={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};function Hi(){return Hi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Hi.apply(this,arguments)}const af=(s,t)=>p.createElement(be,Hi({},s,{ref:t,icon:of})),rn=p.forwardRef(af);function Vi(){return Vi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Vi.apply(this,arguments)}const lf=(s,t)=>p.createElement(be,Vi({},s,{ref:t,icon:gh})),Od=p.forwardRef(lf);function Gi(){return Gi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Gi.apply(this,arguments)}const cf=(s,t)=>p.createElement(be,Gi({},s,{ref:t,icon:mh})),it=p.forwardRef(cf);var df={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:r}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:r}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:t}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:t}}]}},name:"eye",theme:"twotone"};function Ji(){return Ji=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ji.apply(this,arguments)}const uf=(s,t)=>p.createElement(be,Ji({},s,{ref:t,icon:df})),Fd=p.forwardRef(uf);function Yi(){return Yi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Yi.apply(this,arguments)}const hf=(s,t)=>p.createElement(be,Yi({},s,{ref:t,icon:xh})),Ys=p.forwardRef(hf);var pf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function Ki(){return Ki=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ki.apply(this,arguments)}const ff=(s,t)=>p.createElement(be,Ki({},s,{ref:t,icon:pf})),Nd=p.forwardRef(ff);var gf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0058.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0012.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0024.4 59.8 73.36 73.36 0 0053.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"}}]},name:"fire",theme:"outlined"};function Qi(){return Qi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Qi.apply(this,arguments)}const mf=(s,t)=>p.createElement(be,Qi({},s,{ref:t,icon:gf})),Qr=p.forwardRef(mf);var xf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"};function Zi(){return Zi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Zi.apply(this,arguments)}const yf=(s,t)=>p.createElement(be,Zi({},s,{ref:t,icon:xf})),vs=p.forwardRef(yf);var jf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"};function Xi(){return Xi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Xi.apply(this,arguments)}const bf=(s,t)=>p.createElement(be,Xi({},s,{ref:t,icon:jf})),Md=p.forwardRef(bf);var vf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};function ea(){return ea=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ea.apply(this,arguments)}const wf=(s,t)=>p.createElement(be,ea({},s,{ref:t,icon:vf})),Sf=p.forwardRef(wf);var kf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function ta(){return ta=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ta.apply(this,arguments)}const Cf=(s,t)=>p.createElement(be,ta({},s,{ref:t,icon:kf})),ws=p.forwardRef(Cf);var Af={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};function sa(){return sa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},sa.apply(this,arguments)}const Pf=(s,t)=>p.createElement(be,sa({},s,{ref:t,icon:Af})),$d=p.forwardRef(Pf);var Tf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function ra(){return ra=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ra.apply(this,arguments)}const Rf=(s,t)=>p.createElement(be,ra({},s,{ref:t,icon:Tf})),Rl=p.forwardRef(Rf);var If={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"};function na(){return na=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},na.apply(this,arguments)}const zf=(s,t)=>p.createElement(be,na({},s,{ref:t,icon:If})),Ef=p.forwardRef(zf);var _f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};function oa(){return oa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},oa.apply(this,arguments)}const Of=(s,t)=>p.createElement(be,oa({},s,{ref:t,icon:_f})),ia=p.forwardRef(Of);var Ff={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};function aa(){return aa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},aa.apply(this,arguments)}const Nf=(s,t)=>p.createElement(be,aa({},s,{ref:t,icon:Ff})),Il=p.forwardRef(Nf);var Mf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function la(){return la=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},la.apply(this,arguments)}const $f=(s,t)=>p.createElement(be,la({},s,{ref:t,icon:Mf})),bt=p.forwardRef($f);var Bf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};function ca(){return ca=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ca.apply(this,arguments)}const Df=(s,t)=>p.createElement(be,ca({},s,{ref:t,icon:Bf})),Ro=p.forwardRef(Df);var Uf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function da(){return da=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},da.apply(this,arguments)}const Lf=(s,t)=>p.createElement(be,da({},s,{ref:t,icon:Uf})),as=p.forwardRef(Lf);var Wf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};function ua(){return ua=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ua.apply(this,arguments)}const qf=(s,t)=>p.createElement(be,ua({},s,{ref:t,icon:Wf})),Io=p.forwardRef(qf);var Hf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};function ha(){return ha=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ha.apply(this,arguments)}const Vf=(s,t)=>p.createElement(be,ha({},s,{ref:t,icon:Hf})),Mt=p.forwardRef(Vf);var Gf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M692.8 412.7l.2-.2-34.6-44.3a7.97 7.97 0 00-11.2-1.4l-50.4 39.3-70.5-90.1a7.97 7.97 0 00-11.2-1.4l-37.9 29.7a7.97 7.97 0 00-1.4 11.2l70.5 90.2-.2.1 34.6 44.3c2.7 3.5 7.7 4.1 11.2 1.4l50.4-39.3 64.1 82c2.7 3.5 7.7 4.1 11.2 1.4l37.9-29.6c3.5-2.7 4.1-7.7 1.4-11.2l-64.1-82.1zM608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5L114.3 856.1a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6C473 696.1 537.7 720 608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644s-118.2-23.7-161.2-66.8C403.7 534.2 380 476.9 380 416s23.7-118.2 66.8-161.2c43-43.1 100.3-66.8 161.2-66.8s118.2 23.7 161.2 66.8c43.1 43 66.8 100.3 66.8 161.2s-23.7 118.2-66.8 161.2z"}}]},name:"monitor",theme:"outlined"};function pa(){return pa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},pa.apply(this,arguments)}const Jf=(s,t)=>p.createElement(be,pa({},s,{ref:t,icon:Gf})),Yf=p.forwardRef(Jf);var Kf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};function fa(){return fa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},fa.apply(this,arguments)}const Qf=(s,t)=>p.createElement(be,fa({},s,{ref:t,icon:Kf})),nn=p.forwardRef(Qf);var Zf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"};function ga(){return ga=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ga.apply(this,arguments)}const Xf=(s,t)=>p.createElement(be,ga({},s,{ref:t,icon:Zf})),eg=p.forwardRef(Xf);var tg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"};function ma(){return ma=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ma.apply(this,arguments)}const sg=(s,t)=>p.createElement(be,ma({},s,{ref:t,icon:tg})),Ss=p.forwardRef(sg);var rg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};function xa(){return xa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},xa.apply(this,arguments)}const ng=(s,t)=>p.createElement(be,xa({},s,{ref:t,icon:rg})),Fn=p.forwardRef(ng);var og={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};function ya(){return ya=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ya.apply(this,arguments)}const ig=(s,t)=>p.createElement(be,ya({},s,{ref:t,icon:og})),ag=p.forwardRef(ig);function ja(){return ja=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ja.apply(this,arguments)}const lg=(s,t)=>p.createElement(be,ja({},s,{ref:t,icon:yh})),hs=p.forwardRef(lg);var cg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};function ba(){return ba=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ba.apply(this,arguments)}const dg=(s,t)=>p.createElement(be,ba({},s,{ref:t,icon:cg})),ug=p.forwardRef(dg);function va(){return va=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},va.apply(this,arguments)}const hg=(s,t)=>p.createElement(be,va({},s,{ref:t,icon:jh})),oc=p.forwardRef(hg);function wa(){return wa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},wa.apply(this,arguments)}const pg=(s,t)=>p.createElement(be,wa({},s,{ref:t,icon:bh})),Mr=p.forwardRef(pg);var fg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"};function Sa(){return Sa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Sa.apply(this,arguments)}const gg=(s,t)=>p.createElement(be,Sa({},s,{ref:t,icon:fg})),Zr=p.forwardRef(gg);var mg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};function ka(){return ka=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},ka.apply(this,arguments)}const xg=(s,t)=>p.createElement(be,ka({},s,{ref:t,icon:mg})),yg=p.forwardRef(xg);function Ca(){return Ca=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ca.apply(this,arguments)}const jg=(s,t)=>p.createElement(be,Ca({},s,{ref:t,icon:vh})),bg=p.forwardRef(jg);function Aa(){return Aa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Aa.apply(this,arguments)}const vg=(s,t)=>p.createElement(be,Aa({},s,{ref:t,icon:wh})),wg=p.forwardRef(vg);var Sg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};function Pa(){return Pa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Pa.apply(this,arguments)}const kg=(s,t)=>p.createElement(be,Pa({},s,{ref:t,icon:Sg})),Bd=p.forwardRef(kg);var Cg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function Ta(){return Ta=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ta.apply(this,arguments)}const Ag=(s,t)=>p.createElement(be,Ta({},s,{ref:t,icon:Cg})),Nn=p.forwardRef(Ag);function Ra(){return Ra=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ra.apply(this,arguments)}const Pg=(s,t)=>p.createElement(be,Ra({},s,{ref:t,icon:Sh})),Kt=p.forwardRef(Pg);var Tg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"};function Ia(){return Ia=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ia.apply(this,arguments)}const Rg=(s,t)=>p.createElement(be,Ia({},s,{ref:t,icon:Tg})),ic=p.forwardRef(Rg);var Ig={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function za(){return za=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},za.apply(this,arguments)}const zg=(s,t)=>p.createElement(be,za({},s,{ref:t,icon:Ig})),lr=p.forwardRef(zg);var Eg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};function Ea(){return Ea=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ea.apply(this,arguments)}const _g=(s,t)=>p.createElement(be,Ea({},s,{ref:t,icon:Eg})),hr=p.forwardRef(_g);var Og={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"};function _a(){return _a=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},_a.apply(this,arguments)}const Fg=(s,t)=>p.createElement(be,_a({},s,{ref:t,icon:Og})),Oa=p.forwardRef(Fg);var Ng={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};function Fa(){return Fa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Fa.apply(this,arguments)}const Mg=(s,t)=>p.createElement(be,Fa({},s,{ref:t,icon:Ng})),vt=p.forwardRef(Mg);var $g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"};function Na(){return Na=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Na.apply(this,arguments)}const Bg=(s,t)=>p.createElement(be,Na({},s,{ref:t,icon:$g})),jo=p.forwardRef(Bg);var Dg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"};function Ma(){return Ma=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ma.apply(this,arguments)}const Ug=(s,t)=>p.createElement(be,Ma({},s,{ref:t,icon:Dg})),Lg=p.forwardRef(Ug);var Wg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"};function $a(){return $a=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},$a.apply(this,arguments)}const qg=(s,t)=>p.createElement(be,$a({},s,{ref:t,icon:Wg})),Dd=p.forwardRef(qg);var Hg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};function Ba(){return Ba=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ba.apply(this,arguments)}const Vg=(s,t)=>p.createElement(be,Ba({},s,{ref:t,icon:Hg})),ir=p.forwardRef(Vg);var Gg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};function Da(){return Da=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Da.apply(this,arguments)}const Jg=(s,t)=>p.createElement(be,Da({},s,{ref:t,icon:Gg})),ac=p.forwardRef(Jg);function Ua(){return Ua=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ua.apply(this,arguments)}const Yg=(s,t)=>p.createElement(be,Ua({},s,{ref:t,icon:kh})),Kg=p.forwardRef(Yg);var Qg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"};function La(){return La=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},La.apply(this,arguments)}const Zg=(s,t)=>p.createElement(be,La({},s,{ref:t,icon:Qg})),lc=p.forwardRef(Zg);var Xg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"};function Wa(){return Wa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Wa.apply(this,arguments)}const em=(s,t)=>p.createElement(be,Wa({},s,{ref:t,icon:Xg})),Ir=p.forwardRef(em);var tm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function qa(){return qa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},qa.apply(this,arguments)}const sm=(s,t)=>p.createElement(be,qa({},s,{ref:t,icon:tm})),Ud=p.forwardRef(sm);var rm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"};function Ha(){return Ha=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ha.apply(this,arguments)}const nm=(s,t)=>p.createElement(be,Ha({},s,{ref:t,icon:rm})),zo=p.forwardRef(nm);var om={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"};function Va(){return Va=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Va.apply(this,arguments)}const im=(s,t)=>p.createElement(be,Va({},s,{ref:t,icon:om})),am=p.forwardRef(im);var lm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Ga(){return Ga=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ga.apply(this,arguments)}const cm=(s,t)=>p.createElement(be,Ga({},s,{ref:t,icon:lm})),zl=p.forwardRef(cm);var dm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function Ja(){return Ja=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ja.apply(this,arguments)}const um=(s,t)=>p.createElement(be,Ja({},s,{ref:t,icon:dm})),Ks=p.forwardRef(um);var hm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"};function Ya(){return Ya=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ya.apply(this,arguments)}const pm=(s,t)=>p.createElement(be,Ya({},s,{ref:t,icon:hm})),_n=p.forwardRef(pm);var fm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};function Ka(){return Ka=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Ka.apply(this,arguments)}const gm=(s,t)=>p.createElement(be,Ka({},s,{ref:t,icon:fm})),Re=p.forwardRef(gm);var mm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"};function Qa(){return Qa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Qa.apply(this,arguments)}const xm=(s,t)=>p.createElement(be,Qa({},s,{ref:t,icon:mm})),ym=p.forwardRef(xm);var jm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};function Za(){return Za=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Za.apply(this,arguments)}const bm=(s,t)=>p.createElement(be,Za({},s,{ref:t,icon:jm})),Eo=p.forwardRef(bm);var vm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function Xa(){return Xa=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},Xa.apply(this,arguments)}const wm=(s,t)=>p.createElement(be,Xa({},s,{ref:t,icon:vm})),Ld=p.forwardRef(wm);function el(){return el=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},el.apply(this,arguments)}const Sm=(s,t)=>p.createElement(be,el({},s,{ref:t,icon:Ch})),km=p.forwardRef(Sm);function Wd(s,t){return function(){return s.apply(t,arguments)}}const{toString:Cm}=Object.prototype,{getPrototypeOf:El}=Object,{iterator:_o,toStringTag:qd}=Symbol,Oo=(s=>t=>{const r=Cm.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Rs=s=>(s=s.toLowerCase(),t=>Oo(t)===s),Fo=s=>t=>typeof t===s,{isArray:un}=Array,on=Fo("undefined");function $n(s){return s!==null&&!on(s)&&s.constructor!==null&&!on(s.constructor)&&os(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Hd=Rs("ArrayBuffer");function Am(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&Hd(s.buffer),t}const Pm=Fo("string"),os=Fo("function"),Vd=Fo("number"),Bn=s=>s!==null&&typeof s=="object",Tm=s=>s===!0||s===!1,io=s=>{if(Oo(s)!=="object")return!1;const t=El(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(qd in s)&&!(_o in s)},Rm=s=>{if(!Bn(s)||$n(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Im=Rs("Date"),zm=Rs("File"),Em=Rs("Blob"),_m=Rs("FileList"),Om=s=>Bn(s)&&os(s.pipe),Fm=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||os(s.append)&&((t=Oo(s))==="formdata"||t==="object"&&os(s.toString)&&s.toString()==="[object FormData]"))},Nm=Rs("URLSearchParams"),[Mm,$m,Bm,Dm]=["ReadableStream","Request","Response","Headers"].map(Rs),Um=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dn(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let n,o;if(typeof s!="object"&&(s=[s]),un(s))for(n=0,o=s.length;n<o;n++)t.call(null,s[n],n,s);else{if($n(s))return;const i=r?Object.getOwnPropertyNames(s):Object.keys(s),l=i.length;let c;for(n=0;n<l;n++)c=i[n],t.call(null,s[c],c,s)}}function Gd(s,t){if($n(s))return null;t=t.toLowerCase();const r=Object.keys(s);let n=r.length,o;for(;n-- >0;)if(o=r[n],t===o.toLowerCase())return o;return null}const Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jd=s=>!on(s)&&s!==Tr;function tl(){const{caseless:s,skipUndefined:t}=Jd(this)&&this||{},r={},n=(o,i)=>{const l=s&&Gd(r,i)||i;io(r[l])&&io(o)?r[l]=tl(r[l],o):io(o)?r[l]=tl({},o):un(o)?r[l]=o.slice():(!t||!on(o))&&(r[l]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Dn(arguments[o],n);return r}const Lm=(s,t,r,{allOwnKeys:n}={})=>(Dn(t,(o,i)=>{r&&os(o)?s[i]=Wd(o,r):s[i]=o},{allOwnKeys:n}),s),Wm=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),qm=(s,t,r,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},Hm=(s,t,r,n)=>{let o,i,l;const c={};if(t=t||{},s==null)return t;do{for(o=Object.getOwnPropertyNames(s),i=o.length;i-- >0;)l=o[i],(!n||n(l,s,t))&&!c[l]&&(t[l]=s[l],c[l]=!0);s=r!==!1&&El(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},Vm=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const n=s.indexOf(t,r);return n!==-1&&n===r},Gm=s=>{if(!s)return null;if(un(s))return s;let t=s.length;if(!Vd(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},Jm=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&El(Uint8Array)),Ym=(s,t)=>{const n=(s&&s[_o]).call(s);let o;for(;(o=n.next())&&!o.done;){const i=o.value;t.call(s,i[0],i[1])}},Km=(s,t)=>{let r;const n=[];for(;(r=s.exec(t))!==null;)n.push(r);return n},Qm=Rs("HTMLFormElement"),Zm=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),cc=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),Xm=Rs("RegExp"),Yd=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),n={};Dn(r,(o,i)=>{let l;(l=t(o,i,s))!==!1&&(n[i]=l||o)}),Object.defineProperties(s,n)},ex=s=>{Yd(s,(t,r)=>{if(os(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=s[r];if(os(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tx=(s,t)=>{const r={},n=o=>{o.forEach(i=>{r[i]=!0})};return un(s)?n(s):n(String(s).split(t)),r},sx=()=>{},rx=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function nx(s){return!!(s&&os(s.append)&&s[qd]==="FormData"&&s[_o])}const ox=s=>{const t=new Array(10),r=(n,o)=>{if(Bn(n)){if(t.indexOf(n)>=0)return;if($n(n))return n;if(!("toJSON"in n)){t[o]=n;const i=un(n)?[]:{};return Dn(n,(l,c)=>{const u=r(l,o+1);!on(u)&&(i[c]=u)}),t[o]=void 0,i}}return n};return r(s,0)},ix=Rs("AsyncFunction"),ax=s=>s&&(Bn(s)||os(s))&&os(s.then)&&os(s.catch),Kd=((s,t)=>s?setImmediate:t?((r,n)=>(Tr.addEventListener("message",({source:o,data:i})=>{o===Tr&&i===r&&n.length&&n.shift()()},!1),o=>{n.push(o),Tr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",os(Tr.postMessage)),lx=typeof queueMicrotask<"u"?queueMicrotask.bind(Tr):typeof process<"u"&&process.nextTick||Kd,cx=s=>s!=null&&os(s[_o]),oe={isArray:un,isArrayBuffer:Hd,isBuffer:$n,isFormData:Fm,isArrayBufferView:Am,isString:Pm,isNumber:Vd,isBoolean:Tm,isObject:Bn,isPlainObject:io,isEmptyObject:Rm,isReadableStream:Mm,isRequest:$m,isResponse:Bm,isHeaders:Dm,isUndefined:on,isDate:Im,isFile:zm,isBlob:Em,isRegExp:Xm,isFunction:os,isStream:Om,isURLSearchParams:Nm,isTypedArray:Jm,isFileList:_m,forEach:Dn,merge:tl,extend:Lm,trim:Um,stripBOM:Wm,inherits:qm,toFlatObject:Hm,kindOf:Oo,kindOfTest:Rs,endsWith:Vm,toArray:Gm,forEachEntry:Ym,matchAll:Km,isHTMLForm:Qm,hasOwnProperty:cc,hasOwnProp:cc,reduceDescriptors:Yd,freezeMethods:ex,toObjectSet:tx,toCamelCase:Zm,noop:sx,toFiniteNumber:rx,findKey:Gd,global:Tr,isContextDefined:Jd,isSpecCompliantForm:nx,toJSONObject:ox,isAsyncFn:ix,isThenable:ax,setImmediate:Kd,asap:lx,isIterable:cx};function Le(s,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}oe.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const Qd=Le.prototype,Zd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Zd[s]={value:s}});Object.defineProperties(Le,Zd);Object.defineProperty(Qd,"isAxiosError",{value:!0});Le.from=(s,t,r,n,o,i)=>{const l=Object.create(Qd);oe.toFlatObject(s,l,function(d){return d!==Error.prototype},m=>m!=="isAxiosError");const c=s&&s.message?s.message:"Error",u=t==null&&s?s.code:t;return Le.call(l,c,u,r,n,o),s&&l.cause==null&&Object.defineProperty(l,"cause",{value:s,configurable:!0}),l.name=s&&s.name||"Error",i&&Object.assign(l,i),l};const dx=null;function sl(s){return oe.isPlainObject(s)||oe.isArray(s)}function Xd(s){return oe.endsWith(s,"[]")?s.slice(0,-2):s}function dc(s,t,r){return s?s.concat(t).map(function(o,i){return o=Xd(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function ux(s){return oe.isArray(s)&&!s.some(sl)}const hx=oe.toFlatObject(oe,{},null,function(t){return/^is[A-Z]/.test(t)});function No(s,t,r){if(!oe.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=oe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,P){return!oe.isUndefined(P[x])});const n=r.metaTokens,o=r.visitor||d,i=r.dots,l=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(t);if(!oe.isFunction(o))throw new TypeError("visitor must be a function");function m(h){if(h===null)return"";if(oe.isDate(h))return h.toISOString();if(oe.isBoolean(h))return h.toString();if(!u&&oe.isBlob(h))throw new Le("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(h)||oe.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,x,P){let S=h;if(h&&!P&&typeof h=="object"){if(oe.endsWith(x,"{}"))x=n?x:x.slice(0,-2),h=JSON.stringify(h);else if(oe.isArray(h)&&ux(h)||(oe.isFileList(h)||oe.endsWith(x,"[]"))&&(S=oe.toArray(h)))return x=Xd(x),S.forEach(function(j,z){!(oe.isUndefined(j)||j===null)&&t.append(l===!0?dc([x],z,i):l===null?x:x+"[]",m(j))}),!1}return sl(h)?!0:(t.append(dc(P,x,i),m(h)),!1)}const f=[],g=Object.assign(hx,{defaultVisitor:d,convertValue:m,isVisitable:sl});function y(h,x){if(!oe.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(h),oe.forEach(h,function(S,M){(!(oe.isUndefined(S)||S===null)&&o.call(t,S,oe.isString(M)?M.trim():M,x,g))===!0&&y(S,x?x.concat(M):[M])}),f.pop()}}if(!oe.isObject(s))throw new TypeError("data must be an object");return y(s),t}function uc(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _l(s,t){this._pairs=[],s&&No(s,this,t)}const eu=_l.prototype;eu.append=function(t,r){this._pairs.push([t,r])};eu.toString=function(t){const r=t?function(n){return t.call(this,n,uc)}:uc;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function px(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tu(s,t,r){if(!t)return s;const n=r&&r.encode||px;oe.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(t,r):i=oe.isURLSearchParams(t)?t.toString():new _l(t,r).toString(n),i){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class hc{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){oe.forEach(this.handlers,function(n){n!==null&&t(n)})}}const su={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fx=typeof URLSearchParams<"u"?URLSearchParams:_l,gx=typeof FormData<"u"?FormData:null,mx=typeof Blob<"u"?Blob:null,xx={isBrowser:!0,classes:{URLSearchParams:fx,FormData:gx,Blob:mx},protocols:["http","https","file","blob","url","data"]},Ol=typeof window<"u"&&typeof document<"u",rl=typeof navigator=="object"&&navigator||void 0,yx=Ol&&(!rl||["ReactNative","NativeScript","NS"].indexOf(rl.product)<0),jx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bx=Ol&&window.location.href||"http://localhost",vx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ol,hasStandardBrowserEnv:yx,hasStandardBrowserWebWorkerEnv:jx,navigator:rl,origin:bx},Symbol.toStringTag,{value:"Module"})),Jt={...vx,...xx};function wx(s,t){return No(s,new Jt.classes.URLSearchParams,{visitor:function(r,n,o,i){return Jt.isNode&&oe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Sx(s){return oe.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function kx(s){const t={},r=Object.keys(s);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=s[i];return t}function ru(s){function t(r,n,o,i){let l=r[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=i>=r.length;return l=!l&&oe.isArray(o)?o.length:l,u?(oe.hasOwnProp(o,l)?o[l]=[o[l],n]:o[l]=n,!c):((!o[l]||!oe.isObject(o[l]))&&(o[l]=[]),t(r,n,o[l],i)&&oe.isArray(o[l])&&(o[l]=kx(o[l])),!c)}if(oe.isFormData(s)&&oe.isFunction(s.entries)){const r={};return oe.forEachEntry(s,(n,o)=>{t(Sx(n),o,r,0)}),r}return null}function Cx(s,t,r){if(oe.isString(s))try{return(t||JSON.parse)(s),oe.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(s)}const Un={transitional:su,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=oe.isObject(t);if(i&&oe.isHTMLForm(t)&&(t=new FormData(t)),oe.isFormData(t))return o?JSON.stringify(ru(t)):t;if(oe.isArrayBuffer(t)||oe.isBuffer(t)||oe.isStream(t)||oe.isFile(t)||oe.isBlob(t)||oe.isReadableStream(t))return t;if(oe.isArrayBufferView(t))return t.buffer;if(oe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return wx(t,this.formSerializer).toString();if((c=oe.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return No(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),Cx(t)):t}],transformResponse:[function(t){const r=this.transitional||Un.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(oe.isResponse(t)||oe.isReadableStream(t))return t;if(t&&oe.isString(t)&&(n&&!this.responseType||o)){const l=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?Le.from(c,Le.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],s=>{Un.headers[s]={}});const Ax=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Px=s=>{const t={};let r,n,o;return s&&s.split(`
`).forEach(function(l){o=l.indexOf(":"),r=l.substring(0,o).trim().toLowerCase(),n=l.substring(o+1).trim(),!(!r||t[r]&&Ax[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},pc=Symbol("internals");function yn(s){return s&&String(s).trim().toLowerCase()}function ao(s){return s===!1||s==null?s:oe.isArray(s)?s.map(ao):String(s)}function Tx(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(s);)t[n[1]]=n[2];return t}const Rx=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ho(s,t,r,n,o){if(oe.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!oe.isString(t)){if(oe.isString(n))return t.indexOf(n)!==-1;if(oe.isRegExp(n))return n.test(t)}}function Ix(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function zx(s,t){const r=oe.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+r,{value:function(o,i,l){return this[n].call(this,t,o,i,l)},configurable:!0})})}let is=class{constructor(t){t&&this.set(t)}set(t,r,n){const o=this;function i(c,u,m){const d=yn(u);if(!d)throw new Error("header name must be a non-empty string");const f=oe.findKey(o,d);(!f||o[f]===void 0||m===!0||m===void 0&&o[f]!==!1)&&(o[f||u]=ao(c))}const l=(c,u)=>oe.forEach(c,(m,d)=>i(m,d,u));if(oe.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(oe.isString(t)&&(t=t.trim())&&!Rx(t))l(Px(t),r);else if(oe.isObject(t)&&oe.isIterable(t)){let c={},u,m;for(const d of t){if(!oe.isArray(d))throw TypeError("Object iterator must return a key-value pair");c[m=d[0]]=(u=c[m])?oe.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}l(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=yn(t),t){const n=oe.findKey(this,t);if(n){const o=this[n];if(!r)return o;if(r===!0)return Tx(o);if(oe.isFunction(r))return r.call(this,o,n);if(oe.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=yn(t),t){const n=oe.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ho(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let o=!1;function i(l){if(l=yn(l),l){const c=oe.findKey(n,l);c&&(!r||Ho(n,n[c],c,r))&&(delete n[c],o=!0)}}return oe.isArray(t)?t.forEach(i):i(t),o}clear(t){const r=Object.keys(this);let n=r.length,o=!1;for(;n--;){const i=r[n];(!t||Ho(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const r=this,n={};return oe.forEach(this,(o,i)=>{const l=oe.findKey(n,i);if(l){r[l]=ao(o),delete r[i];return}const c=t?Ix(i):String(i).trim();c!==i&&delete r[i],r[c]=ao(o),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return oe.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&oe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[pc]=this[pc]={accessors:{}}).accessors,o=this.prototype;function i(l){const c=yn(l);n[c]||(zx(o,l),n[c]=!0)}return oe.isArray(t)?t.forEach(i):i(t),this}};is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(is.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[r]=n}}});oe.freezeMethods(is);function Vo(s,t){const r=this||Un,n=t||r,o=is.from(n.headers);let i=n.data;return oe.forEach(s,function(c){i=c.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function nu(s){return!!(s&&s.__CANCEL__)}function hn(s,t,r){Le.call(this,s??"canceled",Le.ERR_CANCELED,t,r),this.name="CanceledError"}oe.inherits(hn,Le,{__CANCEL__:!0});function ou(s,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?s(r):t(new Le("Request failed with status code "+r.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ex(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function _x(s,t){s=s||10;const r=new Array(s),n=new Array(s);let o=0,i=0,l;return t=t!==void 0?t:1e3,function(u){const m=Date.now(),d=n[i];l||(l=m),r[o]=u,n[o]=m;let f=i,g=0;for(;f!==o;)g+=r[f++],f=f%s;if(o=(o+1)%s,o===i&&(i=(i+1)%s),m-l<t)return;const y=d&&m-d;return y?Math.round(g*1e3/y):void 0}}function Ox(s,t){let r=0,n=1e3/t,o,i;const l=(m,d=Date.now())=>{r=d,o=null,i&&(clearTimeout(i),i=null),s(...m)};return[(...m)=>{const d=Date.now(),f=d-r;f>=n?l(m,d):(o=m,i||(i=setTimeout(()=>{i=null,l(o)},n-f)))},()=>o&&l(o)]}const bo=(s,t,r=3)=>{let n=0;const o=_x(50,250);return Ox(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,u=l-n,m=o(u),d=l<=c;n=l;const f={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:m||void 0,estimated:m&&c&&d?(c-l)/m:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};s(f)},r)},fc=(s,t)=>{const r=s!=null;return[n=>t[0]({lengthComputable:r,total:s,loaded:n}),t[1]]},gc=s=>(...t)=>oe.asap(()=>s(...t)),Fx=Jt.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,Jt.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(Jt.origin),Jt.navigator&&/(msie|trident)/i.test(Jt.navigator.userAgent)):()=>!0,Nx=Jt.hasStandardBrowserEnv?{write(s,t,r,n,o,i){const l=[s+"="+encodeURIComponent(t)];oe.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),oe.isString(n)&&l.push("path="+n),oe.isString(o)&&l.push("domain="+o),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Mx(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function $x(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function iu(s,t,r){let n=!Mx(t);return s&&(n||r==!1)?$x(s,t):t}const mc=s=>s instanceof is?{...s}:s;function Nr(s,t){t=t||{};const r={};function n(m,d,f,g){return oe.isPlainObject(m)&&oe.isPlainObject(d)?oe.merge.call({caseless:g},m,d):oe.isPlainObject(d)?oe.merge({},d):oe.isArray(d)?d.slice():d}function o(m,d,f,g){if(oe.isUndefined(d)){if(!oe.isUndefined(m))return n(void 0,m,f,g)}else return n(m,d,f,g)}function i(m,d){if(!oe.isUndefined(d))return n(void 0,d)}function l(m,d){if(oe.isUndefined(d)){if(!oe.isUndefined(m))return n(void 0,m)}else return n(void 0,d)}function c(m,d,f){if(f in t)return n(m,d);if(f in s)return n(void 0,m)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(m,d,f)=>o(mc(m),mc(d),f,!0)};return oe.forEach(Object.keys({...s,...t}),function(d){const f=u[d]||o,g=f(s[d],t[d],d);oe.isUndefined(g)&&f!==c||(r[d]=g)}),r}const au=s=>{const t=Nr({},s);let{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:l,auth:c}=t;if(t.headers=l=is.from(l),t.url=tu(iu(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),oe.isFormData(r)){if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(oe.isFunction(r.getHeaders)){const u=r.getHeaders(),m=["content-type","content-length"];Object.entries(u).forEach(([d,f])=>{m.includes(d.toLowerCase())&&l.set(d,f)})}}if(Jt.hasStandardBrowserEnv&&(n&&oe.isFunction(n)&&(n=n(t)),n||n!==!1&&Fx(t.url))){const u=o&&i&&Nx.read(i);u&&l.set(o,u)}return t},Bx=typeof XMLHttpRequest<"u",Dx=Bx&&function(s){return new Promise(function(r,n){const o=au(s);let i=o.data;const l=is.from(o.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:m}=o,d,f,g,y,h;function x(){y&&y(),h&&h(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let P=new XMLHttpRequest;P.open(o.method.toUpperCase(),o.url,!0),P.timeout=o.timeout;function S(){if(!P)return;const j=is.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),T={data:!c||c==="text"||c==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:j,config:s,request:P};ou(function(R){r(R),x()},function(R){n(R),x()},T),P=null}"onloadend"in P?P.onloadend=S:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(S)},P.onabort=function(){P&&(n(new Le("Request aborted",Le.ECONNABORTED,s,P)),P=null)},P.onerror=function(z){const T=z&&z.message?z.message:"Network Error",k=new Le(T,Le.ERR_NETWORK,s,P);k.event=z||null,n(k),P=null},P.ontimeout=function(){let z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const T=o.transitional||su;o.timeoutErrorMessage&&(z=o.timeoutErrorMessage),n(new Le(z,T.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,s,P)),P=null},i===void 0&&l.setContentType(null),"setRequestHeader"in P&&oe.forEach(l.toJSON(),function(z,T){P.setRequestHeader(T,z)}),oe.isUndefined(o.withCredentials)||(P.withCredentials=!!o.withCredentials),c&&c!=="json"&&(P.responseType=o.responseType),m&&([g,h]=bo(m,!0),P.addEventListener("progress",g)),u&&P.upload&&([f,y]=bo(u),P.upload.addEventListener("progress",f),P.upload.addEventListener("loadend",y)),(o.cancelToken||o.signal)&&(d=j=>{P&&(n(!j||j.type?new hn(null,s,P):j),P.abort(),P=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const M=Ex(o.url);if(M&&Jt.protocols.indexOf(M)===-1){n(new Le("Unsupported protocol "+M+":",Le.ERR_BAD_REQUEST,s));return}P.send(i||null)})},Ux=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let n=new AbortController,o;const i=function(m){if(!o){o=!0,c();const d=m instanceof Error?m:this.reason;n.abort(d instanceof Le?d:new hn(d instanceof Error?d.message:d))}};let l=t&&setTimeout(()=>{l=null,i(new Le(`timeout ${t} of ms exceeded`,Le.ETIMEDOUT))},t);const c=()=>{s&&(l&&clearTimeout(l),l=null,s.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),s=null)};s.forEach(m=>m.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>oe.asap(c),u}},Lx=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let n=0,o;for(;n<r;)o=n+t,yield s.slice(n,o),n=o},Wx=async function*(s,t){for await(const r of qx(s))yield*Lx(r,t)},qx=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},xc=(s,t,r,n)=>{const o=Wx(s,t);let i=0,l,c=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:m,value:d}=await o.next();if(m){c(),u.close();return}let f=d.byteLength;if(r){let g=i+=f;r(g)}u.enqueue(new Uint8Array(d))}catch(m){throw c(m),m}},cancel(u){return c(u),o.return()}},{highWaterMark:2})},yc=64*1024,{isFunction:Vn}=oe,Hx=(({Request:s,Response:t})=>({Request:s,Response:t}))(oe.global),{ReadableStream:jc,TextEncoder:bc}=oe.global,vc=(s,...t)=>{try{return!!s(...t)}catch{return!1}},Vx=s=>{s=oe.merge.call({skipUndefined:!0},Hx,s);const{fetch:t,Request:r,Response:n}=s,o=t?Vn(t):typeof fetch=="function",i=Vn(r),l=Vn(n);if(!o)return!1;const c=o&&Vn(jc),u=o&&(typeof bc=="function"?(h=>x=>h.encode(x))(new bc):async h=>new Uint8Array(await new r(h).arrayBuffer())),m=i&&c&&vc(()=>{let h=!1;const x=new r(Jt.origin,{body:new jc,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!x}),d=l&&c&&vc(()=>oe.isReadableStream(new n("").body)),f={stream:d&&(h=>h.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!f[h]&&(f[h]=(x,P)=>{let S=x&&x[h];if(S)return S.call(x);throw new Le(`Response type '${h}' is not supported`,Le.ERR_NOT_SUPPORT,P)})});const g=async h=>{if(h==null)return 0;if(oe.isBlob(h))return h.size;if(oe.isSpecCompliantForm(h))return(await new r(Jt.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(h)||oe.isArrayBuffer(h))return h.byteLength;if(oe.isURLSearchParams(h)&&(h=h+""),oe.isString(h))return(await u(h)).byteLength},y=async(h,x)=>{const P=oe.toFiniteNumber(h.getContentLength());return P??g(x)};return async h=>{let{url:x,method:P,data:S,signal:M,cancelToken:j,timeout:z,onDownloadProgress:T,onUploadProgress:k,responseType:R,headers:w,withCredentials:b="same-origin",fetchOptions:C}=au(h),O=t||fetch;R=R?(R+"").toLowerCase():"text";let F=Ux([M,j&&j.toAbortSignal()],z),N=null;const E=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let _;try{if(k&&m&&P!=="get"&&P!=="head"&&(_=await y(w,S))!==0){let ne=new r(x,{method:"POST",body:S,duplex:"half"}),U;if(oe.isFormData(S)&&(U=ne.headers.get("content-type"))&&w.setContentType(U),ne.body){const[$,D]=fc(_,bo(gc(k)));S=xc(ne.body,yc,$,D)}}oe.isString(b)||(b=b?"include":"omit");const A=i&&"credentials"in r.prototype,v={...C,signal:F,method:P.toUpperCase(),headers:w.normalize().toJSON(),body:S,duplex:"half",credentials:A?b:void 0};N=i&&new r(x,v);let H=await(i?O(N,C):O(x,v));const q=d&&(R==="stream"||R==="response");if(d&&(T||q&&E)){const ne={};["status","statusText","headers"].forEach(I=>{ne[I]=H[I]});const U=oe.toFiniteNumber(H.headers.get("content-length")),[$,D]=T&&fc(U,bo(gc(T),!0))||[];H=new n(xc(H.body,yc,$,()=>{D&&D(),E&&E()}),ne)}R=R||"text";let Y=await f[oe.findKey(f,R)||"text"](H,h);return!q&&E&&E(),await new Promise((ne,U)=>{ou(ne,U,{data:Y,headers:is.from(H.headers),status:H.status,statusText:H.statusText,config:h,request:N})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,h,N),{cause:A.cause||A}):Le.from(A,A&&A.code,h,N)}}},Gx=new Map,lu=s=>{let t=s?s.env:{};const{fetch:r,Request:n,Response:o}=t,i=[n,o,r];let l=i.length,c=l,u,m,d=Gx;for(;c--;)u=i[c],m=d.get(u),m===void 0&&d.set(u,m=c?new Map:Vx(t)),d=m;return m};lu();const nl={http:dx,xhr:Dx,fetch:{get:lu}};oe.forEach(nl,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const wc=s=>`- ${s}`,Jx=s=>oe.isFunction(s)||s===null||s===!1,cu={getAdapter:(s,t)=>{s=oe.isArray(s)?s:[s];const{length:r}=s;let n,o;const i={};for(let l=0;l<r;l++){n=s[l];let c;if(o=n,!Jx(n)&&(o=nl[(c=String(n)).toLowerCase()],o===void 0))throw new Le(`Unknown adapter '${c}'`);if(o&&(oe.isFunction(o)||(o=o.get(t))))break;i[c||"#"+l]=o}if(!o){const l=Object.entries(i).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=r?l.length>1?`since :
`+l.map(wc).join(`
`):" "+wc(l[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o},adapters:nl};function Go(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new hn(null,s)}function Sc(s){return Go(s),s.headers=is.from(s.headers),s.data=Vo.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),cu.getAdapter(s.adapter||Un.adapter,s)(s).then(function(n){return Go(s),n.data=Vo.call(s,s.transformResponse,n),n.headers=is.from(n.headers),n},function(n){return nu(n)||(Go(s),n&&n.response&&(n.response.data=Vo.call(s,s.transformResponse,n.response),n.response.headers=is.from(n.response.headers))),Promise.reject(n)})}const du="1.12.2",Mo={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Mo[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const kc={};Mo.transitional=function(t,r,n){function o(i,l){return"[Axios v"+du+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return(i,l,c)=>{if(t===!1)throw new Le(o(l," has been removed"+(r?" in "+r:"")),Le.ERR_DEPRECATED);return r&&!kc[l]&&(kc[l]=!0,console.warn(o(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,c):!0}};Mo.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Yx(s,t,r){if(typeof s!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let o=n.length;for(;o-- >0;){const i=n[o],l=t[i];if(l){const c=s[i],u=c===void 0||l(c,i,s);if(u!==!0)throw new Le("option "+i+" must be "+u,Le.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Le("Unknown option "+i,Le.ERR_BAD_OPTION)}}const lo={assertOptions:Yx,validators:Mo},Es=lo.validators;let zr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new hc,response:new hc}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Nr(this.defaults,r);const{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&lo.assertOptions(n,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),o!=null&&(oe.isFunction(o)?r.paramsSerializer={serialize:o}:lo.assertOptions(o,{encode:Es.function,serialize:Es.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),lo.assertOptions(r,{baseUrl:Es.spelling("baseURL"),withXsrfToken:Es.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&oe.merge(i.common,i[r.method]);i&&oe.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),r.headers=is.concat(l,i);const c=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(u=u&&x.synchronous,c.unshift(x.fulfilled,x.rejected))});const m=[];this.interceptors.response.forEach(function(x){m.push(x.fulfilled,x.rejected)});let d,f=0,g;if(!u){const h=[Sc.bind(this),void 0];for(h.unshift(...c),h.push(...m),g=h.length,d=Promise.resolve(r);f<g;)d=d.then(h[f++],h[f++]);return d}g=c.length;let y=r;for(;f<g;){const h=c[f++],x=c[f++];try{y=h(y)}catch(P){x.call(this,P);break}}try{d=Sc.call(this,y)}catch(h){return Promise.reject(h)}for(f=0,g=m.length;f<g;)d=d.then(m[f++],m[f++]);return d}getUri(t){t=Nr(this.defaults,t);const r=iu(t.baseURL,t.url,t.allowAbsoluteUrls);return tu(r,t.params,t.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(t){zr.prototype[t]=function(r,n){return this.request(Nr(n||{},{method:t,url:r,data:(n||{}).data}))}});oe.forEach(["post","put","patch"],function(t){function r(n){return function(i,l,c){return this.request(Nr(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}zr.prototype[t]=r(),zr.prototype[t+"Form"]=r(!0)});let Kx=class uu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const l=new Promise(c=>{n.subscribe(c),i=c}).then(o);return l.cancel=function(){n.unsubscribe(i)},l},t(function(i,l,c){n.reason||(n.reason=new hn(i,l,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new uu(function(o){t=o}),cancel:t}}};function Qx(s){return function(r){return s.apply(null,r)}}function Zx(s){return oe.isObject(s)&&s.isAxiosError===!0}const ol={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ol).forEach(([s,t])=>{ol[t]=s});function hu(s){const t=new zr(s),r=Wd(zr.prototype.request,t);return oe.extend(r,zr.prototype,t,{allOwnKeys:!0}),oe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return hu(Nr(s,o))},r}const pt=hu(Un);pt.Axios=zr;pt.CanceledError=hn;pt.CancelToken=Kx;pt.isCancel=nu;pt.VERSION=du;pt.toFormData=No;pt.AxiosError=Le;pt.Cancel=pt.CanceledError;pt.all=function(t){return Promise.all(t)};pt.spread=Qx;pt.isAxiosError=Zx;pt.mergeConfig=Nr;pt.AxiosHeaders=is;pt.formToJSON=s=>ru(oe.isHTMLForm(s)?new FormData(s):s);pt.getAdapter=cu.getAdapter;pt.HttpStatusCode=ol;pt.default=pt;const{Axios:Kj,AxiosError:Qj,CanceledError:Zj,isCancel:Xj,CancelToken:eb,VERSION:tb,all:sb,Cancel:rb,isAxiosError:nb,spread:ob,toFormData:ib,AxiosHeaders:ab,HttpStatusCode:lb,formToJSON:cb,getAdapter:db,mergeConfig:ub}=pt;let Xx={data:""},e0=s=>{if(typeof window=="object"){let t=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(s||document.head).appendChild(t),t.firstChild}return s||Xx},t0=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s0=/\/\*[^]*?\*\/|  +/g,Cc=/\n+/g,or=(s,t)=>{let r="",n="",o="";for(let i in s){let l=s[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":n+=i[1]=="f"?or(l,i):i+"{"+or(l,i[1]=="k"?"":t)+"}":typeof l=="object"?n+=or(l,t?t.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=or.p?or.p(i,l):i+":"+l+";")}return r+(t&&o?t+"{"+o+"}":o)+n},Js={},pu=s=>{if(typeof s=="object"){let t="";for(let r in s)t+=r+pu(s[r]);return t}return s},r0=(s,t,r,n,o)=>{let i=pu(s),l=Js[i]||(Js[i]=(u=>{let m=0,d=11;for(;m<u.length;)d=101*d+u.charCodeAt(m++)>>>0;return"go"+d})(i));if(!Js[l]){let u=i!==s?s:(m=>{let d,f,g=[{}];for(;d=t0.exec(m.replace(s0,""));)d[4]?g.shift():d[3]?(f=d[3].replace(Cc," ").trim(),g.unshift(g[0][f]=g[0][f]||{})):g[0][d[1]]=d[2].replace(Cc," ").trim();return g[0]})(s);Js[l]=or(o?{["@keyframes "+l]:u}:u,r?"":"."+l)}let c=r&&Js.g?Js.g:null;return r&&(Js.g=Js[l]),((u,m,d,f)=>{f?m.data=m.data.replace(f,u):m.data.indexOf(u)===-1&&(m.data=d?u+m.data:m.data+u)})(Js[l],t,n,c),l},n0=(s,t,r)=>s.reduce((n,o,i)=>{let l=t[i];if(l&&l.call){let c=l(r),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=u?"."+u:c&&typeof c=="object"?c.props?"":or(c,""):c===!1?"":c}return n+o+(l??"")},"");function $o(s){let t=this||{},r=s.call?s(t.p):s;return r0(r.unshift?r.raw?n0(r,[].slice.call(arguments,1),t.p):r.reduce((n,o)=>Object.assign(n,o&&o.call?o(t.p):o),{}):r,e0(t.target),t.g,t.o,t.k)}let fu,il,al;$o.bind({g:1});let Qs=$o.bind({k:1});function o0(s,t,r,n){or.p=t,fu=s,il=r,al=n}function pr(s,t){let r=this||{};return function(){let n=arguments;function o(i,l){let c=Object.assign({},i),u=c.className||o.className;r.p=Object.assign({theme:il&&il()},c),r.o=/ *go\d+/.test(u),c.className=$o.apply(r,n)+(u?" "+u:"");let m=s;return s[0]&&(m=c.as||s,delete c.as),al&&m[0]&&al(c),fu(m,c)}return o}}var i0=s=>typeof s=="function",ll=(s,t)=>i0(s)?s(t):s,a0=(()=>{let s=0;return()=>(++s).toString()})(),l0=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),c0=20,gu="default",mu=(s,t)=>{let{toastLimit:r}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,r)};case 1:return{...s,toasts:s.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return mu(s,{type:s.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:o}=t;return{...s,toasts:s.toasts.map(l=>l.id===o||o===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let i=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},d0=[],u0={toasts:[],pausedAt:void 0,settings:{toastLimit:c0}},Xr={},xu=(s,t=gu)=>{Xr[t]=mu(Xr[t]||u0,s),d0.forEach(([r,n])=>{r===t&&n(Xr[t])})},yu=s=>Object.keys(Xr).forEach(t=>xu(s,t)),h0=s=>Object.keys(Xr).find(t=>Xr[t].toasts.some(r=>r.id===s)),Fl=(s=gu)=>t=>{xu(t,s)},p0=(s,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...r,id:(r==null?void 0:r.id)||a0()}),Ln=s=>(t,r)=>{let n=p0(t,s,r);return Fl(n.toasterId||h0(n.id))({type:2,toast:n}),n.id},Lt=(s,t)=>Ln("blank")(s,t);Lt.error=Ln("error");Lt.success=Ln("success");Lt.loading=Ln("loading");Lt.custom=Ln("custom");Lt.dismiss=(s,t)=>{let r={type:3,toastId:s};t?Fl(t)(r):yu(r)};Lt.dismissAll=s=>Lt.dismiss(void 0,s);Lt.remove=(s,t)=>{let r={type:4,toastId:s};t?Fl(t)(r):yu(r)};Lt.removeAll=s=>Lt.remove(void 0,s);Lt.promise=(s,t,r)=>{let n=Lt.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof s=="function"&&(s=s()),s.then(o=>{let i=t.success?ll(t.success,o):void 0;return i?Lt.success(i,{id:n,...r,...r==null?void 0:r.success}):Lt.dismiss(n),o}).catch(o=>{let i=t.error?ll(t.error,o):void 0;i?Lt.error(i,{id:n,...r,...r==null?void 0:r.error}):Lt.dismiss(n)}),s};var f0=Qs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,g0=Qs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,m0=Qs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,x0=pr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${f0} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${g0} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${m0} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,y0=Qs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,j0=pr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${y0} 1s linear infinite;
`,b0=Qs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,v0=Qs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w0=pr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${b0} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${v0} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,S0=pr("div")`
  position: absolute;
`,k0=pr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,C0=Qs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,A0=pr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${C0} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,P0=({toast:s})=>{let{icon:t,type:r,iconTheme:n}=s;return t!==void 0?typeof t=="string"?p.createElement(A0,null,t):t:r==="blank"?null:p.createElement(k0,null,p.createElement(j0,{...n}),r!=="loading"&&p.createElement(S0,null,r==="error"?p.createElement(x0,{...n}):p.createElement(w0,{...n})))},T0=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,R0=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,I0="0%{opacity:0;} 100%{opacity:1;}",z0="0%{opacity:1;} 100%{opacity:0;}",E0=pr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_0=pr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,O0=(s,t)=>{let r=s.includes("top")?1:-1,[n,o]=l0()?[I0,z0]:[T0(r),R0(r)];return{animation:t?`${Qs(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qs(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};p.memo(({toast:s,position:t,style:r,children:n})=>{let o=s.height?O0(s.position||t||"top-center",s.visible):{opacity:0},i=p.createElement(P0,{toast:s}),l=p.createElement(_0,{...s.ariaProps},ll(s.message,s));return p.createElement(E0,{className:s.className,style:{...o,...r,...s.style}},typeof n=="function"?n({icon:i,message:l}):p.createElement(p.Fragment,null,i,l))});o0(p.createElement);$o`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var yr=Lt;const ie=pt.create({baseURL:"http://localhost:7000/api",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});pt.create({baseURL:"http://localhost:7000/api",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});ie.interceptors.request.use(s=>{var r,n,o;let t=null;return(r=s.url)!=null&&r.includes("/admin/")?t=localStorage.getItem("adminToken")||localStorage.getItem("accessToken")||localStorage.getItem("token"):t=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),t?(s.headers.Authorization=`Bearer ${t}`,console.log(`üîë API Request: ${(n=s.method)==null?void 0:n.toUpperCase()} ${s.url} - Token: ${t.substring(0,20)}...`)):console.warn(`‚ö†Ô∏è API Request: ${(o=s.method)==null?void 0:o.toUpperCase()} ${s.url} - No token found`),s.data instanceof FormData&&delete s.headers["Content-Type"],s},s=>Promise.reject(s));ie.interceptors.response.use(s=>s,async s=>{var r,n,o,i,l,c,u,m,d,f;const t=s.config;if(((r=s.response)==null?void 0:r.status)===401&&!t._retry){t._retry=!0;try{const g=localStorage.getItem("refreshToken");if(g){console.log("üîÑ Attempting token refresh...");const y=await pt.post(`${ie.defaults.baseURL}/auth/refresh`,{refreshToken:g});if(y.data&&y.data.accessToken){const{accessToken:h}=y.data;return localStorage.setItem("accessToken",h),localStorage.setItem("token",h),t.headers.Authorization=`Bearer ${h}`,console.log("‚úÖ Token refreshed successfully"),ie(t)}else throw new Error("Invalid refresh response")}else throw new Error("No refresh token available")}catch(g){return console.error("‚ùå Token refresh failed:",g),localStorage.removeItem("accessToken"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(g)}}return((n=s.response)==null?void 0:n.status)===500?(console.error("Server error details:",{status:s.response.status,data:s.response.data,url:(o=s.config)==null?void 0:o.url,method:(i=s.config)==null?void 0:i.method}),yr.error("Server error. Please try again later.")):((l=s.response)==null?void 0:l.status)===403?yr.error("Access denied. You do not have permission to perform this action."):((c=s.response)==null?void 0:c.status)===404?yr.error("Resource not found."):((u=s.response)==null?void 0:u.status)===429?yr.error("Too many requests. Please wait a moment and try again."):s.code==="ECONNABORTED"?yr.error("Request timeout. Please check your connection."):navigator.onLine?(s.code==="ERR_NETWORK"||(m=s.message)!=null&&m.includes("Network Error"))&&(console.error("Network error details:",{message:s.message,code:s.code,url:(d=s.config)==null?void 0:d.url,method:(f=s.config)==null?void 0:f.method}),yr.error("Network error. Please check your connection and try again.")):yr.error("No internet connection. Please check your network."),Promise.reject(s)});const F0={createOrder:s=>ie.post("/payments/create-order",s),verifyPayment:s=>ie.post("/payments/verify",s),getPurchases:s=>ie.get("/payments/my-purchases",{params:s}),getPurchase:s=>ie.get(`/payments/${s}`),processRefund:(s,t)=>ie.post(`/payments/${s}/refund`,t),getSalesStatistics:s=>ie.get("/payments/admin/statistics",{params:s}),getAllPurchases:s=>ie.get("/payments/admin/purchases",{params:s})},$s={createThread:s=>ie.post("/threads",{memberIds:s}),getThreads:s=>ie.get("/threads",{params:s}),getMessages:(s,t)=>ie.get(`/threads/${s}/messages`,{params:t}),sendMessage:(s,t)=>ie.post(`/threads/${s}/messages`,t),sendThreadMessage:(s,t)=>ie.post(`/threads/${s}/messages`,t),editMessage:(s,t,r)=>ie.put(`/threads/${s}/messages/${t}`,r),deleteMessage:(s,t)=>ie.delete(`/threads/${s}/messages/${t}`),deleteThread:s=>ie.delete(`/threads/${s}`),clearThreadMessages:s=>ie.delete(`/threads/${s}/messages`)},an={getUsers:s=>ie.get("/users-list",{params:s}),getNewUsers:s=>ie.get("/users-list",{params:{...s,onlyNew:!0}})},es={sendFollowRequest:s=>ie.post(`/follow/request/${s}`),acceptFollowRequest:s=>ie.post(`/follow/accept/${s}`),declineFollowRequest:s=>ie.post(`/follow/decline/${s}`),getFollowRequests:()=>ie.get("/follow/requests"),getFollowers:()=>ie.get("/follow/followers"),getFollowing:()=>ie.get("/follow/following"),checkFollowStatus:s=>ie.get(`/follow/check/${s}`),unfollow:s=>ie.delete(`/follow/unfollow/${s}`),searchUsers:(s,t)=>ie.get("/follow/search",{params:{q:s,limit:t}})},co={getNotifications:s=>ie.get("/notifications",{params:s}),getUnreadCount:()=>ie.get("/notifications/unread-count"),markAsRead:s=>ie.put(`/notifications/${s}/read`),markAllAsRead:()=>ie.put("/notifications/read-all"),deleteNotification:s=>ie.delete(`/notifications/${s}`),clearAll:()=>ie.delete("/notifications/clear-all"),createTest:s=>ie.post("/notifications/test",s)},vo={getUserPrebooks:s=>ie.get("/prebook",{params:s}),getPrebook:s=>ie.get(`/prebook/${s}`),createPrebook:s=>ie.post("/prebook",s),updatePrebook:(s,t)=>ie.put(`/prebook/${s}`,t),deletePrebook:s=>ie.delete(`/prebook/${s}`),uploadAttachment:(s,t)=>{const r=new FormData;return r.append("file",t),ie.post(`/prebook/${s}/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getAllPrebooks:s=>ie.get("/prebook/admin/all",{params:s}),updatePrebookStatus:(s,t)=>ie.put(`/prebook/admin/${s}/status`,t),getPrebookStats:()=>ie.get("/prebook/admin/stats")},N0={getDashboard:()=>ie.get("/admin/dashboard"),getUsers:s=>ie.get("/admin/users",{params:s}),getUser:s=>ie.get(`/admin/users/${s}`),updateUserRole:(s,t)=>ie.patch(`/admin/users/${s}/role`,{role:t}),deleteUser:s=>ie.delete(`/admin/users/${s}`),getProducts:s=>ie.get("/admin/products",{params:s}),getSalesAnalytics:s=>ie.get("/admin/analytics/sales",{params:s}),getChatModeration:s=>ie.get("/admin/chat/moderation",{params:s}),flagMessage:(s,t)=>ie.post(`/admin/chat/messages/${s}/flag`,t),sendNotification:s=>ie.post("/admin/notifications/send",s),getSettings:()=>ie.get("/admin/settings"),getPrebooks:s=>vo.getAllPrebooks(s),updatePrebookStatus:(s,t)=>vo.updatePrebookStatus(s,t)},ju={uploadImage:s=>pt.create({baseURL:"https://api.cloudinary.com/v1_1",timeout:3e4}).post("/upload",s),uploadToCloudinary:(s,t={})=>{const r=new FormData;return r.append("file",s),r.append("upload_preset","your-upload-preset"),Object.keys(t).forEach(n=>{r.append(n,t[n])}),ju.uploadImage(r)},uploadAvatar:s=>ie.post("/upload/avatar",s,{headers:{"Content-Type":"multipart/form-data"}})},Xt={getProducts:s=>ie.get("/products",{params:s}),getProduct:s=>ie.get(`/products/${s}`),getProductBySlug:s=>ie.get(`/products/${s}`),getTrendingProducts:s=>ie.get("/products/trending",{params:s}),getCategories:()=>ie.get("/products/categories/list"),getTags:()=>ie.get("/products/tags/list"),trackVisit:(s,t)=>ie.post(`/products/${s}/visit`,t),incrementVisit:s=>ie.post(`/products/${s}/visit`),getAnalytics:s=>ie.get(`/products/${s}/analytics/30d`),createPrebook:(s,t)=>ie.post(`/products/${s}/prebook`,t),createProduct:s=>ie.post("/admin/products",s),updateProduct:(s,t)=>ie.put(`/admin/products/${s}`,t),deleteProduct:s=>(console.log("üóëÔ∏è API Service - Deleting product:",s),console.log("üóëÔ∏è API Service - Full URL:",`${ie.defaults.baseURL}/admin/products/${s}`),ie.delete(`/admin/products/${s}`)),getAdminProducts:s=>ie.get("/admin/products",{params:s}),getAdminProduct:s=>ie.get(`/admin/products/${s}`),generateDescription:s=>ie.post("/admin/products/generate-description",s),getNotifications:s=>ie.get("/products/notifications",{params:s}),markNotificationAsRead:s=>ie.patch(`/products/notifications/${s}/read`),markAllNotificationsAsRead:()=>ie.patch("/products/notifications/read-all")},{Text:hb,Title:pb}=Fe,M0=s=>s?s.startsWith("http://")||s.startsWith("https://")?s:s.startsWith("/")?`http://localhost:7000${s}`:`http://localhost:7000/${s}`:null,ht=s=>{if(!s)return null;const t=s.avatarUrl||s.avatar;return M0(t)},nt=s=>{if(!s)return"U";let t=s;if(typeof s=="object"&&s!==null&&(t=s.name||s.username||s.email||""),typeof t!="string"||(!t&&typeof s=="object"&&(s!=null&&s.email)&&(t=s.email.split("@")[0]),!t||t.trim()===""))return"U";try{return t.split(" ").map(r=>r.charAt(0)).join("").toUpperCase().slice(0,2)}catch(r){return console.error("Error generating initials:",r,{nameOrUser:s,name:t}),"U"}},{Header:$0,Content:B0,Footer:D0}=Zs,{Title:Ac}=Fe,gs=({children:s})=>{const[t,r]=p.useState(!1),[n,o]=p.useState(!1),i=cn(),l=Je(),{user:c,isAuthenticated:u,logout:m,isLoading:d,authInitialized:f}=qe();p.useEffect(()=>{!d&&f&&o(!0)},[d,f]);const g=p.useMemo(()=>[{key:"/",icon:e.jsx($d,{}),label:e.jsx(It,{to:"/",children:"Home"})},...u?[...(c==null?void 0:c.role)==="admin"?[{key:"/admin/dashboard",icon:e.jsx(Bd,{}),label:e.jsx(It,{to:"/admin/dashboard",children:"Admin Dashboard"})}]:[]]:[],{key:"/chat",icon:e.jsx(Mt,{}),label:e.jsx(It,{to:"/chat",children:"Chat"})}],[u,c==null?void 0:c.role]),y=i.pathname==="/dashboard"||i.pathname==="/admin/dashboard",h=p.useCallback(async()=>{try{await m(),l("/")}catch(S){console.error("Logout error:",S)}},[m,l]),x=p.useMemo(()=>[{key:"profile",icon:e.jsx(Re,{}),label:"Profile"},{key:"settings",icon:e.jsx(hr,{}),label:"Settings"},{type:"divider"},{key:"logout",icon:e.jsx(Ro,{}),label:"Logout",onClick:h}],[h]),P=window.innerWidth<768;return!n||d?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f5f5f5"},children:e.jsx(rt,{size:"large"})}):y?s:e.jsxs(Zs,{style:{minHeight:"100vh"},children:[e.jsxs($0,{style:{background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:1e3},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(Ac,{level:3,style:{margin:0,color:"#1890ff"},children:"üöÄ ITWOS AI"})}),e.jsx("div",{style:{display:P?"none":"flex",alignItems:"center"},children:e.jsx(en,{mode:"horizontal",selectedKeys:[i.pathname],items:g,style:{border:"none",background:"transparent",minWidth:"400px"}})}),e.jsxs(Z,{size:"middle",children:[e.jsx(L,{type:"text",icon:e.jsx(js,{})}),u?e.jsx(Er,{menu:{items:x},placement:"bottomRight",arrow:!0,children:e.jsx(We,{style:{backgroundColor:"#1890ff",cursor:"pointer"},src:ht(c),icon:e.jsx(Re,{}),children:nt(c==null?void 0:c.name)})}):e.jsxs(Z,{children:[e.jsx(It,{to:"/login",children:e.jsx(L,{type:"primary",size:"small",children:"Login"})}),e.jsx(It,{to:"/register",children:e.jsx(L,{size:"small",children:"Register"})})]}),e.jsx(L,{type:"text",icon:e.jsx(Io,{}),onClick:()=>r(!0),style:{display:P?"block":"none"}})]})]}),e.jsx(Mn,{title:"Menu",placement:"right",onClose:()=>r(!1),open:t,width:280,children:e.jsx(en,{mode:"vertical",selectedKeys:[i.pathname],items:g,style:{border:"none"}})}),e.jsx(B0,{style:{background:"#f5f5f5",minHeight:"calc(100vh - 64px - 70px)"},children:s}),e.jsx(D0,{style:{textAlign:"center",background:"#001529",color:"white",padding:"24px 0"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[e.jsx(Ac,{level:4,style:{color:"white",marginBottom:"16px"},children:"üöÄ ITWOS AI Platform"}),e.jsx("p",{style:{margin:0,opacity:.8},children:"¬© 2024 ITWOS AI. Built with React, Node.js, and MongoDB."})]})})]})},ts=({children:s,userRole:t="user"})=>e.jsx("div",{style:{padding:"24px"},children:s}),Ls=Object.create(null);Ls.open="0";Ls.close="1";Ls.ping="2";Ls.pong="3";Ls.message="4";Ls.upgrade="5";Ls.noop="6";const uo=Object.create(null);Object.keys(Ls).forEach(s=>{uo[Ls[s]]=s});const cl={type:"error",data:"parser error"},bu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vu=typeof ArrayBuffer=="function",wu=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Nl=({type:s,data:t},r,n)=>bu&&t instanceof Blob?r?n(t):Pc(t,n):vu&&(t instanceof ArrayBuffer||wu(t))?r?n(t):Pc(new Blob([t]),n):n(Ls[s]+(t||"")),Pc=(s,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(s)};function Tc(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Jo;function U0(s,t){if(bu&&s.data instanceof Blob)return s.data.arrayBuffer().then(Tc).then(t);if(vu&&(s.data instanceof ArrayBuffer||wu(s.data)))return t(Tc(s.data));Nl(s,!1,r=>{Jo||(Jo=new TextEncoder),t(Jo.encode(r))})}const Rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",In=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Rc.length;s++)In[Rc.charCodeAt(s)]=s;const L0=s=>{let t=s.length*.75,r=s.length,n,o=0,i,l,c,u;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const m=new ArrayBuffer(t),d=new Uint8Array(m);for(n=0;n<r;n+=4)i=In[s.charCodeAt(n)],l=In[s.charCodeAt(n+1)],c=In[s.charCodeAt(n+2)],u=In[s.charCodeAt(n+3)],d[o++]=i<<2|l>>4,d[o++]=(l&15)<<4|c>>2,d[o++]=(c&3)<<6|u&63;return m},W0=typeof ArrayBuffer=="function",Ml=(s,t)=>{if(typeof s!="string")return{type:"message",data:Su(s,t)};const r=s.charAt(0);return r==="b"?{type:"message",data:q0(s.substring(1),t)}:uo[r]?s.length>1?{type:uo[r],data:s.substring(1)}:{type:uo[r]}:cl},q0=(s,t)=>{if(W0){const r=L0(s);return Su(r,t)}else return{base64:!0,data:s}},Su=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},ku="",H0=(s,t)=>{const r=s.length,n=new Array(r);let o=0;s.forEach((i,l)=>{Nl(i,!1,c=>{n[l]=c,++o===r&&t(n.join(ku))})})},V0=(s,t)=>{const r=s.split(ku),n=[];for(let o=0;o<r.length;o++){const i=Ml(r[o],t);if(n.push(i),i.type==="error")break}return n};function G0(){return new TransformStream({transform(s,t){U0(s,r=>{const n=r.length;let o;if(n<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,n);else if(n<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(r)})}})}let Yo;function Gn(s){return s.reduce((t,r)=>t+r.length,0)}function Jn(s,t){if(s[0].length===t)return s.shift();const r=new Uint8Array(t);let n=0;for(let o=0;o<t;o++)r[o]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),r}function J0(s,t){Yo||(Yo=new TextDecoder);const r=[];let n=0,o=-1,i=!1;return new TransformStream({transform(l,c){for(r.push(l);;){if(n===0){if(Gn(r)<1)break;const u=Jn(r,1);i=(u[0]&128)===128,o=u[0]&127,o<126?n=3:o===126?n=1:n=2}else if(n===1){if(Gn(r)<2)break;const u=Jn(r,2);o=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(Gn(r)<8)break;const u=Jn(r,8),m=new DataView(u.buffer,u.byteOffset,u.length),d=m.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(cl);break}o=d*Math.pow(2,32)+m.getUint32(4),n=3}else{if(Gn(r)<o)break;const u=Jn(r,o);c.enqueue(Ml(i?u:Yo.decode(u),t)),n=0}if(o===0||o>s){c.enqueue(cl);break}}}})}const Cu=4;function Et(s){if(s)return Y0(s)}function Y0(s){for(var t in Et.prototype)s[t]=Et.prototype[t];return s}Et.prototype.on=Et.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Et.prototype.once=function(s,t){function r(){this.off(s,r),t.apply(this,arguments)}return r.fn=t,this.on(s,r),this};Et.prototype.off=Et.prototype.removeListener=Et.prototype.removeAllListeners=Et.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+s];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+s],this};Et.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+s],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this};Et.prototype.emitReserved=Et.prototype.emit;Et.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Et.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Bo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),xs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),K0="arraybuffer";function Au(s,...t){return t.reduce((r,n)=>(s.hasOwnProperty(n)&&(r[n]=s[n]),r),{})}const Q0=xs.setTimeout,Z0=xs.clearTimeout;function Do(s,t){t.useNativeTimers?(s.setTimeoutFn=Q0.bind(xs),s.clearTimeoutFn=Z0.bind(xs)):(s.setTimeoutFn=xs.setTimeout.bind(xs),s.clearTimeoutFn=xs.clearTimeout.bind(xs))}const X0=1.33;function e1(s){return typeof s=="string"?t1(s):Math.ceil((s.byteLength||s.size)*X0)}function t1(s){let t=0,r=0;for(let n=0,o=s.length;n<o;n++)t=s.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Pu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function s1(s){let t="";for(let r in s)s.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(s[r]));return t}function r1(s){let t={},r=s.split("&");for(let n=0,o=r.length;n<o;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class n1 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class $l extends Et{constructor(t){super(),this.writable=!1,Do(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new n1(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ml(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=s1(t);return r.length?"?"+r:""}}class o1 extends $l{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};V0(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,H0(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Pu()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Tu=!1;try{Tu=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const i1=Tu;function a1(){}class l1 extends o1{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Us extends Et{constructor(t,r,n){super(),this.createRequest=t,Do(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=Au(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var o;n.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Us.requestsCount++,Us.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=a1,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Us.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Us.requestsCount=0;Us.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ic);else if(typeof addEventListener=="function"){const s="onpagehide"in xs?"pagehide":"unload";addEventListener(s,Ic,!1)}}function Ic(){for(let s in Us.requests)Us.requests.hasOwnProperty(s)&&Us.requests[s].abort()}const c1=function(){const s=Ru({xdomain:!1});return s&&s.responseType!==null}();class d1 extends l1{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=c1&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Us(Ru,this.uri(),t)}}function Ru(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||i1))return new XMLHttpRequest}catch{}if(!t)try{return new xs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Iu=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class u1 extends $l{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=Iu?{}:Au(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;Nl(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}o&&Bo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Pu()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Ko=xs.WebSocket||xs.MozWebSocket;class h1 extends u1{createSocket(t,r,n){return Iu?new Ko(t,r,n):r?new Ko(t,r):new Ko(t)}doWrite(t,r){this.ws.send(r)}}class p1 extends $l{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=J0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),o=G0();o.readable.pipeTo(t.writable),this._writer=o.writable.getWriter();const i=()=>{n.read().then(({done:c,value:u})=>{c||(this.onPacket(u),i())}).catch(c=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;this._writer.write(n).then(()=>{o&&Bo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const f1={websocket:h1,webtransport:p1,polling:d1},g1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function dl(s){if(s.length>8e3)throw"URI too long";const t=s,r=s.indexOf("["),n=s.indexOf("]");r!=-1&&n!=-1&&(s=s.substring(0,r)+s.substring(r,n).replace(/:/g,";")+s.substring(n,s.length));let o=g1.exec(s||""),i={},l=14;for(;l--;)i[m1[l]]=o[l]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=x1(i,i.path),i.queryKey=y1(i,i.query),i}function x1(s,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function y1(s,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,i){o&&(r[o]=i)}),r}const ul=typeof addEventListener=="function"&&typeof removeEventListener=="function",ho=[];ul&&addEventListener("offline",()=>{ho.forEach(s=>s())},!1);class cr extends Et{constructor(t,r){if(super(),this.binaryType=K0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=dl(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=dl(r.host).host);Do(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const o=n.prototype.name;this.transports.push(o),this._transportsByName[o]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=r1(this.opts.query)),ul&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ho.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Cu,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&cr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",cr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(r+=e1(o)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Bo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,o){if(typeof r=="function"&&(o=r,r=void 0),typeof n=="function"&&(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(cr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ul&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=ho.indexOf(this._offlineEventListener);n!==-1&&ho.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}cr.protocol=Cu;class j1 extends cr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;cr.priorWebsocketSuccess=!1;const o=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;cr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const l=f=>{const g=new Error("probe error: "+f);g.transport=r.name,i(),this.emitReserved("upgradeError",g)};function c(){l("transport closed")}function u(){l("socket closed")}function m(f){r&&f.name!==r.name&&i()}const d=()=>{r.removeListener("open",o),r.removeListener("error",l),r.removeListener("close",c),this.off("close",u),this.off("upgrading",m)};r.once("open",o),r.once("error",l),r.once("close",c),this.once("close",u),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let b1=class extends j1{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(o=>f1[o]).filter(o=>!!o)),super(t,n)}};function v1(s,t="",r){let n=s;r=r||typeof location<"u"&&location,s==null&&(s=r.protocol+"//"+r.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=r.protocol+s:s=r.host+s),/^(https?|wss?):\/\//.test(s)||(typeof r<"u"?s=r.protocol+"//"+s:s="https://"+s),n=dl(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const w1=typeof ArrayBuffer=="function",S1=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,zu=Object.prototype.toString,k1=typeof Blob=="function"||typeof Blob<"u"&&zu.call(Blob)==="[object BlobConstructor]",C1=typeof File=="function"||typeof File<"u"&&zu.call(File)==="[object FileConstructor]";function Bl(s){return w1&&(s instanceof ArrayBuffer||S1(s))||k1&&s instanceof Blob||C1&&s instanceof File}function po(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let r=0,n=s.length;r<n;r++)if(po(s[r]))return!0;return!1}if(Bl(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return po(s.toJSON(),!0);for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&po(s[r]))return!0;return!1}function A1(s){const t=[],r=s.data,n=s;return n.data=hl(r,t),n.attachments=t.length,{packet:n,buffers:t}}function hl(s,t){if(!s)return s;if(Bl(s)){const r={_placeholder:!0,num:t.length};return t.push(s),r}else if(Array.isArray(s)){const r=new Array(s.length);for(let n=0;n<s.length;n++)r[n]=hl(s[n],t);return r}else if(typeof s=="object"&&!(s instanceof Date)){const r={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=hl(s[n],t));return r}return s}function P1(s,t){return s.data=pl(s.data,t),delete s.attachments,s}function pl(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let r=0;r<s.length;r++)s[r]=pl(s[r],t);else if(typeof s=="object")for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(s[r]=pl(s[r],t));return s}const T1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],R1=5;var Qe;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Qe||(Qe={}));class I1{constructor(t){this.replacer=t}encode(t){return(t.type===Qe.EVENT||t.type===Qe.ACK)&&po(t)?this.encodeAsBinary({type:t.type===Qe.EVENT?Qe.BINARY_EVENT:Qe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Qe.BINARY_EVENT||t.type===Qe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=A1(t),n=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(n),o}}function zc(s){return Object.prototype.toString.call(s)==="[object Object]"}class Dl extends Et{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Qe.BINARY_EVENT;n||r.type===Qe.BINARY_ACK?(r.type=n?Qe.EVENT:Qe.ACK,this.reconstructor=new z1(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Bl(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Qe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qe.BINARY_EVENT||n.type===Qe.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const l=t.substring(i,r);if(l!=Number(l)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const o=t.charAt(r+1);if(o!==""&&Number(o)==o){const i=r+1;for(;++r;){const l=t.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Dl.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Qe.CONNECT:return zc(r);case Qe.DISCONNECT:return r===void 0;case Qe.CONNECT_ERROR:return typeof r=="string"||zc(r);case Qe.EVENT:case Qe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&T1.indexOf(r[0])===-1);case Qe.ACK:case Qe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class z1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=P1(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const E1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Dl,Encoder:I1,get PacketType(){return Qe},protocol:R1},Symbol.toStringTag,{value:"Module"}));function Ts(s,t,r){return s.on(t,r),function(){s.off(t,r)}}const _1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Eu extends Et{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ts(t,"open",this.onopen.bind(this)),Ts(t,"packet",this.onpacket.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,o,i;if(_1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Qe.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),l.id=d}const c=(o=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||o===void 0?void 0:o.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,r){var n;const o=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(o===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},o),l=(...c)=>{this.io.clearTimeoutFn(i),r.apply(this,c)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...r){return new Promise((n,o)=>{const i=(l,c)=>l?o(l):n(c);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...i)=>n!==this._queue[0]?void 0:(o!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Qe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Qe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qe.EVENT:case Qe.BINARY_EVENT:this.onevent(t);break;case Qe.ACK:case Qe.BINARY_ACK:this.onack(t);break;case Qe.DISCONNECT:this.ondisconnect();break;case Qe.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...o){n||(n=!0,r.packet({type:Qe.ACK,id:t,data:o}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function pn(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}pn.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+r:s-r}return Math.min(s,this.max)|0};pn.prototype.reset=function(){this.attempts=0};pn.prototype.setMin=function(s){this.ms=s};pn.prototype.setMax=function(s){this.max=s};pn.prototype.setJitter=function(s){this.jitter=s};class fl extends Et{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Do(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new pn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const o=r.parser||E1;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new b1(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=Ts(r,"open",function(){n.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},l=Ts(r,"error",i);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),r.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(o),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ts(t,"ping",this.onping.bind(this)),Ts(t,"data",this.ondata.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this)),Ts(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Bo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Eu(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const jn={};function On(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const r=v1(s,t.path||"/socket.io"),n=r.source,o=r.id,i=r.path,l=jn[o]&&i in jn[o].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let u;return c?u=new fl(n,t):(jn[o]||(jn[o]=new fl(n,t)),u=jn[o]),r.query&&!t.query&&(t.query=r.queryKey),u.socket(r.path,t)}Object.assign(On,{Manager:fl,Socket:Eu,io:On,connect:On});class O1{constructor(){this.socket=null,this.isConnected=!1,this.listeners=new Map}connect(t,r){if(this.socket&&this.isConnected)return this.socket;if(!t||t==="mock-user-id")return console.warn("‚ö†Ô∏è No valid user ID provided for socket connection"),null;try{const n="http://localhost:7000",o=localStorage.getItem("accessToken")||localStorage.getItem("token");if(!o||!n)return console.warn("‚ö†Ô∏è Missing token or server URL, skipping socket connection"),null;console.log("üîå Connecting to Socket.IO server:",n),console.log("üîå User details:",{userId:t,userRole:r}),this.socket=On(n,{transports:["polling","websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:5e3,reconnectionDelayMax:1e4,timeout:5e3,forceNew:!1,auth:{token:o,userId:t,userRole:r}}),this.socket.on("connect",()=>{console.log("üîå Connected to notification server for user:",t,"role:",r),console.log("üîå Socket ID:",this.socket.id),this.isConnected=!0,this.socket.emit("authenticate",{userId:t,userRole:r,token:o}),t&&t!=="mock-user-id"&&(this.socket.emit("join-user-room",t),console.log("üîå Joining user room via join-user-room:",t)),this.socket.emit("join-room",`user:${t}`),console.log("üîå Joining room: user:"+t),(r==="admin"||r==="superadmin")&&(this.socket.emit("join-room","admin"),console.log("üîå Joined admin room")),this.socket.emit("ping")}),this.socket.on("disconnect",()=>{console.log("üîå Disconnected from notification server"),this.isConnected=!1}),this.socket.on("connect_error",i=>{i.message&&!i.message.includes("xhr poll error")&&console.error("üîå Connection error:",i.message),this.isConnected=!1}),this.socket.on("reconnect",()=>{console.log("üîå Reconnected to notification server"),this.isConnected=!0,t&&t!=="mock-user-id"&&(this.socket.emit("join-user-room",t),this.socket.emit("join-room",`user:${t}`)),(r==="admin"||r==="superadmin")&&this.socket.emit("join-room","admin")}),this.socket.on("room-joined",i=>{console.log("üîå Room joined confirmation:",i)}),this.socket.on("user-room-joined",i=>{console.log("üîå User room joined confirmation:",i)}),this.socket.on("authenticated",i=>{console.log("üîå Authentication confirmed:",i)}),this.socket.on("pong",i=>{console.log("üîå Pong received:",i)}),this.socket.on("payment_success",i=>{console.log("üí∞ Payment success notification:",i),this.emit("payment_success",i)}),this.socket.on("new_paid_prebook",i=>{console.log("üìã New paid prebook notification:",i),this.emit("new_paid_prebook",i)}),this.socket.on("prebook_status_update",i=>{console.log("üìã Prebook status update:",i),this.emit("prebook_status_update",i)}),this.socket.on("notification",i=>{console.log("üîî General notification:",i),this.emit("notification",i)}),this.socket.on("new_notification",i=>{console.log("üîî New notification received:",i),this.emit("new_notification",i)})}catch(n){console.error("Failed to connect to notification server:",n)}return this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}on(t,r){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r)}off(t,r){this.listeners.has(t)&&this.listeners.get(t).delete(r)}emit(t,r){this.listeners.has(t)&&this.listeners.get(t).forEach(n=>{try{n(r)}catch(o){console.error("Error in notification callback:",o)}})}sendNotification(t){this.socket&&this.isConnected&&this.socket.emit("send_notification",t)}getConnectionStatus(){return{connected:this.isConnected,socket:this.socket}}}const Cs=new O1,Ul=(s,t="user")=>{const[r,n]=p.useState([]),[o,i]=p.useState(0),[l,c]=p.useState(!1),[u,m]=p.useState(null),d=p.useCallback(async()=>{var S,M,j,z,T,k,R,w,b,C,O,F,N;if(console.log("üîî useNotifications fetchNotifications called:",{userId:s,userRole:t}),!s||s==="mock-user-id"){console.log("üîî No valid userId provided, skipping fetch"),n([]),i(0),c(!1),m(null);return}c(!0),m(null);let x;const P=new Promise((E,_)=>{x=setTimeout(()=>{_(new Error("Request timeout. Please try again."))},15e3)});try{console.log("üîî Fetching notifications from API...",{userId:s,userRole:t,apiUrl:"http://localhost:7000/api"});const E=await Promise.race([co.getNotifications({page:1,limit:50}),P]);clearTimeout(x),console.log("üîî API Response received:",{status:E.status,statusText:E.statusText,hasData:!!E.data,hasSuccess:!!((S=E.data)!=null&&S.success),responseKeys:Object.keys(E.data||{})}),console.log("üîî Notifications response:",{success:E.data.success,data:E.data.data,notifications:(M=E.data.data)==null?void 0:M.notifications,unreadCount:(j=E.data.data)==null?void 0:j.unreadCount,responseStatus:E.status});let _=[],A=0;E.data&&(E.data.success&&E.data.data?(_=E.data.data.notifications||[],A=E.data.data.unreadCount||0):E.data.notifications?(_=E.data.notifications||[],A=E.data.unreadCount||0):Array.isArray(E.data)&&(_=E.data,A=E.data.filter(H=>!H.read).length));const v=Array.isArray(_)?_.filter(H=>!(!H||!H._id&&!H.id||!H.message&&!H.title)):[];console.log("üîî Processed notifications:",{count:v.length,unreadCount:A,sample:v[0],responseStructure:{hasSuccess:!!((z=E.data)!=null&&z.success),hasData:!!((T=E.data)!=null&&T.data),hasNotifications:!!((R=(k=E.data)==null?void 0:k.data)!=null&&R.notifications),notificationsType:Array.isArray(_)?"array":typeof _,rawResponse:E.data}}),n(v),i(typeof A=="number"?A:0),m(null)}catch(E){console.error("üîî Error fetching notifications:",E),console.error("üîî Error details:",{message:E.message,response:(w=E.response)==null?void 0:w.data,status:(b=E.response)==null?void 0:b.status,statusText:(C=E.response)==null?void 0:C.statusText});const _=((F=(O=E.response)==null?void 0:O.data)==null?void 0:F.message)||E.message||"Failed to fetch notifications";m(_),n([]),i(0),((N=E.response)==null?void 0:N.status)===404&&m(null)}finally{clearTimeout(x),c(!1)}},[s,t]),f=p.useCallback(async x=>{try{await co.markAsRead(x),n(P=>P.map(S=>S._id===x||S.id===x?{...S,read:!0,readAt:new Date}:S)),i(P=>Math.max(0,P-1))}catch(P){console.error("Error marking notification as read:",P),n(S=>S.map(M=>M._id===x||M.id===x?{...M,read:!0,readAt:new Date}:M)),i(S=>Math.max(0,S-1))}},[]),g=p.useCallback(async()=>{try{await co.markAllAsRead(),n(x=>x.map(P=>({...P,read:!0,readAt:new Date}))),i(0)}catch(x){console.error("Error marking all notifications as read:",x),n(P=>P.map(S=>({...S,read:!0,readAt:new Date}))),i(0)}},[]),y=p.useCallback(x=>{n(P=>[x,...P]),x.read||i(P=>P+1)},[]),h=p.useCallback(x=>{n(P=>P.map(S=>S._id===x._id?x:S))},[]);return p.useEffect(()=>{if(!s||s==="mock-user-id"){console.warn("‚ö†Ô∏è useNotifications: No valid userId provided, skipping socket connection");return}if(console.log("üîå Setting up notifications for user:",s,"role:",t),!Cs.connect(s,t))return;const P=T=>{console.log("üí∞ Payment success notification received:",T),y({_id:`temp_${Date.now()}`,type:"payment_success",title:"Payment Successful! üéâ",message:T.message||"Your payment has been processed successfully.",read:!1,createdAt:new Date,data:T})},S=T=>{console.log("üìã New paid prebook notification received:",T),y({_id:`temp_${Date.now()}`,type:"prebook_payment",title:"New Paid Prebook Request üí∞",message:T.message||"New prebook request with payment received.",read:!1,createdAt:new Date,data:T})},M=T=>{console.log("üìã Prebook status update received:",T),y({_id:`temp_${Date.now()}`,type:"prebook_status_update",title:"Prebook Status Update",message:T.message||"Your prebook status has been updated.",read:!1,createdAt:new Date,data:T})},j=T=>{console.log("üîî General notification received:",T),y({_id:T._id||`temp_${Date.now()}`,type:T.type||"general",title:T.title||"Notification",message:T.message||"You have a new notification.",read:T.read||!1,createdAt:new Date(T.createdAt||Date.now()),data:T.data||{}})},z=T=>{console.log("üîî New notification event received:",T);let k="Notification";T.type==="follow_request"?k="Follow Request":T.type==="follow"?k="New Follower":T.type==="follow_accepted"?k="Follow Request Accepted":k=T.title||"Notification",y({_id:T._id||`notif_${Date.now()}`,type:T.type||"general",title:k,message:T.message||"You have a new notification.",read:!1,createdAt:new Date(T.createdAt||Date.now()),data:T.metadata||T.data||{},from:T.from||null}),setTimeout(()=>{d()},500)};return Cs.on("payment_success",P),Cs.on("new_paid_prebook",S),Cs.on("prebook_status_update",M),Cs.on("notification",j),Cs.on("new_notification",z),()=>{Cs.off("payment_success",P),Cs.off("new_paid_prebook",S),Cs.off("prebook_status_update",M),Cs.off("notification",j),Cs.off("new_notification",z)}},[s,t,y,d]),p.useEffect(()=>{if(!s||s==="mock-user-id"){c(!1),n([]),i(0),m(null);return}d();const x=setInterval(()=>{s&&s!=="mock-user-id"&&d()},3e4);return()=>clearInterval(x)},[d,s]),p.useEffect(()=>{if(l){const x=setTimeout(()=>{console.warn("üîî Safety timeout: Forcing loading to stop after 20 seconds"),c(!1),r.length===0&&!u&&m("Request timeout. Please refresh the page.")},2e4);return()=>clearTimeout(x)}},[l,r.length,u]),{notifications:r,unreadCount:o,loading:l,error:u,fetchNotifications:d,markAsRead:f,markAllAsRead:g,addNotification:y,updateNotification:h}},{Title:F1,Text:jr}=Fe,N1=({visible:s,onClose:t,userId:r})=>{const{user:n}=qe(),{notifications:o,unreadCount:i,loading:l,error:c,markAsRead:u,markAllAsRead:m,fetchNotifications:d}=Ul(r||(n==null?void 0:n._id),n==null?void 0:n.role),f=j=>{switch(j){case"payment_success":return e.jsx(kt,{style:{color:"#52c41a"}});case"prebook_confirmed":return e.jsx(Ee,{style:{color:"#52c41a"}});case"prebook_rejected":return e.jsx(Or,{style:{color:"#f5222d"}});case"prebook_payment":return e.jsx(kt,{style:{color:"#1890ff"}});case"follow_request":return e.jsx(Ks,{style:{color:"#1890ff"}});case"follow":return e.jsx(Re,{style:{color:"#52c41a"}});case"follow_accepted":return e.jsx(Ee,{style:{color:"#52c41a"}});default:return e.jsx(Rl,{style:{color:"#1890ff"}})}},g=j=>{switch(j){case"payment_success":return"#52c41a";case"prebook_confirmed":return"#52c41a";case"prebook_rejected":return"#f5222d";case"prebook_payment":return"#1890ff";case"follow_request":return"#1890ff";case"follow":return"#52c41a";case"follow_accepted":return"#52c41a";default:return"#1890ff"}},y=j=>{const z=new Date(j),k=Math.floor((new Date-z)/(1e3*60));return k<1?"Just now":k<60?`${k}m ago`:k<1440?`${Math.floor(k/60)}h ago`:z.toLocaleDateString()},h=async j=>{j.type!=="follow_request"&&(j.read||await u(j._id||j.id))},x=async(j,z)=>{var T,k,R,w,b;z.stopPropagation();try{const C=((T=j.data)==null?void 0:T.followId)||((k=j.metadata)==null?void 0:k.followId),O=((R=j.from)==null?void 0:R._id)||j.from;if(!O){B.error("Invalid follow request");return}let F;if(C)try{F=await ie.post(`/follow/accept/${C}`)}catch{F=await es.acceptFollowRequest(O)}else F=await es.acceptFollowRequest(O);F.data.success&&(B.success("Follow request accepted"),await u(j._id||j.id),setTimeout(()=>d(),500))}catch(C){console.error("Accept follow request error:",C),B.error(((b=(w=C.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to accept follow request")}},P=async(j,z)=>{var T,k,R,w,b;z.stopPropagation();try{const C=((T=j.data)==null?void 0:T.followId)||((k=j.metadata)==null?void 0:k.followId),O=((R=j.from)==null?void 0:R._id)||j.from;if(!O){B.error("Invalid follow request");return}let F;if(C)try{F=await ie.post(`/follow/decline/${C}`)}catch{F=await es.declineFollowRequest(O)}else F=await es.declineFollowRequest(O);F.data.success&&(B.success("Follow request declined"),await u(j._id||j.id),setTimeout(()=>d(),500))}catch(C){console.error("Decline follow request error:",C),B.error(((b=(w=C.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to decline follow request")}},S=async()=>{try{await m(),B.success("All notifications marked as read")}catch{B.error("Failed to mark all as read")}};p.useEffect(()=>{s&&d()},[s,d]),p.useEffect(()=>{s&&(!o||o.length===0)&&!l&&(new Date(Date.now()-5*60*1e3).toISOString(),new Date(Date.now()-2*60*60*1e3).toISOString(),new Date(Date.now()-24*60*60*1e3).toISOString())},[s,o,l]);const M=e.jsxs("div",{style:{width:350,maxHeight:500},children:[e.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f0f0f0",background:"#fafafa",borderRadius:"8px 8px 0 0"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(F1,{level:5,style:{margin:0,color:"#1890ff"},children:"üîî Notifications"}),i>0&&e.jsx(L,{type:"link",size:"small",onClick:S,style:{padding:0},children:"Mark all read"})]})}),e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:l?e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx(rt,{size:"small"}),e.jsx("div",{style:{marginTop:"8px",color:"#666"},children:"Loading notifications..."})]}):c?e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx(jr,{type:"danger",children:"Failed to load notifications"}),e.jsx("br",{}),e.jsx(L,{type:"link",size:"small",onClick:d,style:{marginTop:"8px"},children:"Retry"})]}):o&&o.length>0?e.jsx(Wt,{dataSource:o,renderItem:j=>{var z,T,k;return e.jsx(Wt.Item,{style:{padding:"12px 20px",borderBottom:"1px solid #f0f0f0",cursor:j.type==="follow_request"?"default":"pointer",background:j.read?"#fff":"#f6ffed",transition:"all 0.2s"},onClick:()=>h(j),onMouseEnter:R=>{R.currentTarget.style.background=j.read?"#f5f5f5":"#e6f7ff"},onMouseLeave:R=>{R.currentTarget.style.background=j.read?"#fff":"#f6ffed"},actions:j.type==="follow_request"?[e.jsxs(Z,{size:"small",children:[e.jsx(L,{type:"primary",size:"small",icon:e.jsx(ur,{}),onClick:R=>x(j,R),children:"Accept"}),e.jsx(L,{size:"small",icon:e.jsx(sn,{}),onClick:R=>P(j,R),children:"Decline"})]},"actions")]:[],children:e.jsx(Wt.Item.Meta,{avatar:j.type==="follow_request"&&j.from?e.jsx(We,{src:ht(j.from),icon:e.jsx(Re,{}),size:40,style:{cursor:"pointer"},onClick:R=>{R.stopPropagation(),window.location.href=`/users/${j.from._id}`},children:nt(((z=j.from)==null?void 0:z.name)||"U")}):e.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:g(j.type),display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:f(j.type)}),title:j.type==="follow_request"&&j.from?e.jsxs("div",{children:[e.jsx(jr,{strong:!j.read,style:{fontSize:"14px",color:j.read?"#666":"#333",lineHeight:"1.4",cursor:"pointer"},onClick:R=>{R.stopPropagation(),window.location.href=`/users/${j.from._id}`},children:((T=j.from)==null?void 0:T.name)||"Unknown User"}),!j.read&&e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#1890ff",marginLeft:"8px",display:"inline-block"}})]}):e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx(jr,{strong:!j.read,style:{fontSize:"14px",color:j.read?"#666":"#333",lineHeight:"1.4"},children:j.title}),!j.read&&e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#1890ff",marginLeft:"8px",flexShrink:0}})]}),description:e.jsxs("div",{children:[e.jsx(jr,{style:{fontSize:"13px",color:j.read?"#999":"#666",lineHeight:"1.4",display:"block",marginBottom:"4px"},children:j.message}),j.type==="follow_request"&&((k=j.from)==null?void 0:k.email)&&e.jsx(jr,{type:"secondary",style:{fontSize:"12px",display:"block",marginBottom:"4px"},children:j.from.email}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"4px"},children:[e.jsx(jr,{style:{fontSize:"12px",color:"#999"},children:y(j.createdAt)}),e.jsx(le,{size:"small",color:g(j.type),style:{fontSize:"11px"},children:j.type.replace("_"," ")})]})]})})})}}):e.jsx("div",{style:{padding:"40px 20px",textAlign:"center"},children:e.jsx(Ue,{image:Ue.PRESENTED_IMAGE_SIMPLE,description:e.jsx(jr,{type:"secondary",children:"No notifications yet"})})})}),o&&o.length>0&&e.jsx("div",{style:{padding:"12px 20px",borderTop:"1px solid #f0f0f0",background:"#fafafa",borderRadius:"0 0 8px 8px",textAlign:"center"},children:e.jsx(L,{type:"link",size:"small",onClick:()=>{t(),window.location.href="/notifications"},children:"View all notifications"})})]});return e.jsx(Ah,{content:M,title:null,trigger:"click",open:s,onOpenChange:j=>{j||t()},placement:"bottomRight",overlayStyle:{padding:0},styles:{body:{padding:0,borderRadius:"8px"}},children:e.jsx("div",{})})},a={colors:{background:"#FFFFFF",text:{primary:"#1F2937",secondary:"#6B7280",white:"#FFFFFF",disabled:"#9CA3AF"},primary:"#3B82F6",secondary:"#6B7280",success:"#10B981",warning:"#F59E0B",error:"#EF4444",sidebar:{background:"#F8FAFC",activeBackground:"#3B82F6",activeText:"#FFFFFF",hoverBackground:"#E5E7EB",text:"#1F2937",border:"#E5E7EB"},header:{background:"#FFFFFF",text:"#1F2937",border:"#E5E7EB"},card:{background:"#FFFFFF",border:"#E5E7EB",shadow:"0 1px 3px rgba(0,0,0,0.1)"}},typography:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:{h1:"2rem",h2:"1.5rem",h3:"1.25rem",h4:"1.125rem",body:"1rem",small:"0.875rem",tiny:"0.75rem"},fontWeight:{regular:400,medium:500,semibold:600,bold:700},lineHeight:1.5},spacing:{xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",xxl:"48px"},layout:{sidebar:{width:"280px",collapsedWidth:"80px"},header:{height:"64px"},content:{padding:"24px"}},borderRadius:{sm:"4px",md:"8px",lg:"12px",xl:"16px",full:"9999px"},shadows:{sm:"0 1px 2px rgba(0,0,0,0.05)",md:"0 1px 3px rgba(0,0,0,0.1)",lg:"0 4px 6px rgba(0,0,0,0.1)",xl:"0 10px 15px rgba(0,0,0,0.1)"},breakpoints:{mobile:"768px",tablet:"1024px",desktop:"1280px"}},_u=()=>{const{user:s}=qe(),[t,r]=p.useState(!1),{unreadCount:n,fetchNotifications:o}=Ul(s==null?void 0:s._id,s==null?void 0:s.role),i=n>0?n:0,l=()=>{r(!0)},c=()=>{r(!1),o()};return e.jsxs(e.Fragment,{children:[e.jsx(zt,{count:i,size:"small",style:{".ant-badge-count":{backgroundColor:a.colors.error,color:a.colors.text.white}},children:e.jsx(L,{type:"text",icon:e.jsx(js,{}),onClick:l,style:{fontSize:a.typography.fontSize.h4,color:i>0?a.colors.primary:a.colors.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:a.borderRadius.md,transition:"all 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor=a.colors.sidebar.hoverBackground},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="transparent"}})}),e.jsx(N1,{visible:t,onClose:c,userId:s==null?void 0:s._id})]})},{Title:M1}=Fe,{Sider:$1,Content:B1}=Zs,Ut=({children:s})=>{const[t,r]=p.useState(!1),[n,o]=p.useState(window.innerWidth<768),{user:i,logout:l}=qe(),c=Je(),u=cn();p.useEffect(()=>{const x=()=>{o(window.innerWidth<768)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const m=()=>{const x=u.pathname;return x==="/dashboard"||x==="/user/dashboard"?"dashboard":x.includes("/feed")?"feed":x.includes("/products")?"products":x.includes("/purchases")?"purchases":x.includes("/favorites")?"favorites":x.includes("/banner-store")?"banner-store":x.includes("/banner-inventory")?"banner-inventory":x.includes("/courses")?"courses":x.includes("/sessions")?"sessions":x.includes("/chat")?"chat":x.includes("/discover")?"discover":x.includes("/new-users")?"new-users":x.includes("/network")?"network":x.includes("/notifications")?"notifications":x.includes("/settings")?"settings":"dashboard"},[d,f]=p.useState(m());p.useEffect(()=>{f(m())},[u.pathname]);const g=async()=>{try{await l(),c("/")}catch(x){console.error("Logout error:",x)}},y=[{key:"dashboard",icon:e.jsx(Re,{}),label:"Dashboard"},{key:"feed",icon:e.jsx(xp,{}),label:"Feed"},{key:"products",icon:e.jsx(vt,{}),label:"Products"},{key:"purchases",icon:e.jsx(vt,{}),label:"My Purchases"},{key:"banner-store",icon:e.jsx(Fn,{}),label:"Banner Store"},{key:"banner-inventory",icon:e.jsx(Fn,{}),label:"My Banners"},{key:"favorites",icon:e.jsx(ws,{}),label:"Favorites"},{key:"courses",icon:e.jsx(bs,{}),label:"My Courses"},{key:"sessions",icon:e.jsx(Eo,{}),label:"Live Sessions"},{key:"chat",icon:e.jsx(Mt,{}),label:"Chat"},{key:"discover",icon:e.jsx(Kt,{}),label:"Discover Users"},{key:"new-users",icon:e.jsx(ym,{}),label:"New Users"},{key:"network",icon:e.jsx(Ir,{}),label:"My Network"},{key:"notifications",icon:e.jsx(js,{}),label:"Notifications"},{key:"settings",icon:e.jsx(hr,{}),label:"Settings"}],h=({key:x})=>{switch(f(x),x){case"dashboard":c("/dashboard");break;case"feed":c("/feed");break;case"products":c("/dashboard/products");break;case"purchases":c("/purchases");break;case"favorites":c("/favorites");break;case"banner-store":c("/dashboard/banner-store");break;case"banner-inventory":c("/dashboard/banner-inventory");break;case"courses":c("/user/courses");break;case"sessions":c("/user/sessions");break;case"chat":c("/chat");break;case"discover":c("/discover");break;case"new-users":c("/new-users");break;case"network":c("/network");break;case"notifications":c("/notifications");break;case"settings":c("/settings");break;default:c("/dashboard")}};return e.jsxs("div",{style:{background:"#f5f5f5",minHeight:"100vh"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 2rem",borderBottom:"1px solid #e8e8e8",background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(M1,{level:3,style:{color:"#1890ff",margin:0,marginRight:"2rem"},children:"ITWOS AI"})}),e.jsxs(Z,{children:[e.jsx(_u,{}),e.jsx(Re,{style:{fontSize:"18px",color:"#666"}}),e.jsx("span",{style:{color:"#666"},children:(i==null?void 0:i.name)||"user123"}),e.jsx(L,{type:"text",onClick:g,icon:e.jsx(Ro,{}),children:"Logout"})]}),e.jsx(L,{type:"text",icon:e.jsx(Io,{}),onClick:()=>r(!0),style:{display:n?"block":"none",position:"absolute",left:"16px"}})]}),e.jsxs(Zs,{style:{background:"#f5f5f5"},children:[!n&&e.jsx($1,{width:250,style:{background:"#fff",borderRight:"1px solid #e8e8e8",padding:"2rem 0",position:"fixed",left:0,top:"80px",bottom:0,height:"calc(100vh - 80px)",overflowY:"auto",zIndex:100},collapsible:!1,children:e.jsx(en,{mode:"vertical",items:y,selectedKeys:[d],onClick:h,style:{background:"transparent",border:"none"}})}),e.jsx(B1,{style:{marginLeft:n?"0":"250px",padding:n?"1rem":"2rem",background:"#f5f5f5",minHeight:"calc(100vh - 80px)",overflow:"visible",height:"auto",transition:"margin-left 0.2s ease"},children:s})]}),e.jsx(Mn,{title:"Navigation",placement:"right",closable:!0,onClose:()=>r(!1),open:t,styles:{body:{padding:0}},children:e.jsx(en,{mode:"vertical",items:y,selectedKeys:[d],onClick:({key:x})=>{h({key:x}),r(!1)},style:{background:"transparent",border:"none"}})})]})},{Header:D1}=Zs,{Text:Qo}=Fe,{Search:U1}=ue,L1=({onSearch:s})=>{const{user:t,logout:r}=qe(),n=Je(),[o,i]=p.useState(""),l=m=>{i(m),s&&s(m)},c=async()=>{try{await r(),n("/admin/login")}catch(m){console.error("Logout error:",m)}},u=[{key:"profile",icon:e.jsx(Re,{}),label:"Profile",onClick:()=>n("/admin/settings")},{key:"settings",icon:e.jsx(hr,{}),label:"Settings",onClick:()=>n("/admin/settings")},{type:"divider"},{key:"logout",icon:e.jsx(Ro,{}),label:"Logout",danger:!0,onClick:c}];return e.jsxs(D1,{style:{position:"fixed",top:0,left:0,right:0,height:a.layout.header.height,background:a.colors.header.background,borderBottom:`1px solid ${a.colors.header.border}`,boxShadow:a.shadows.md,zIndex:1e3,padding:`0 ${a.spacing.lg}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(Qo,{strong:!0,style:{fontSize:a.typography.fontSize.h3,color:a.colors.primary,fontWeight:a.typography.fontWeight.semibold,margin:0},children:"ITWOS AI Admin"})}),e.jsx("div",{style:{flex:1,maxWidth:"500px",margin:`0 ${a.spacing.lg}`},children:e.jsx(U1,{placeholder:"Search users, products, orders...",allowClear:!0,onSearch:l,onChange:m=>i(m.target.value),value:o,style:{width:"100%"},prefix:e.jsx(Kt,{style:{color:a.colors.text.secondary}})})}),e.jsxs(Z,{size:"large",style:{display:"flex",alignItems:"center"},children:[e.jsx(_u,{}),e.jsx(Er,{menu:{items:u},placement:"bottomRight",trigger:["click"],children:e.jsxs(Z,{style:{cursor:"pointer",padding:`${a.spacing.sm} ${a.spacing.md}`,borderRadius:a.borderRadius.md,transition:"background-color 0.2s"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=a.colors.sidebar.hoverBackground},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent"},children:[e.jsx(We,{src:ht(t),icon:!(t!=null&&t.avatarUrl)&&e.jsx(Re,{}),style:{backgroundColor:a.colors.primary},children:!(t!=null&&t.avatarUrl)&&nt(t)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(Qo,{strong:!0,style:{fontSize:a.typography.fontSize.small,color:a.colors.text.primary,lineHeight:1.2},children:(t==null?void 0:t.name)||"Admin"}),e.jsx(Qo,{style:{fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary,lineHeight:1.2},children:(t==null?void 0:t.role)||"admin"})]})]})})]})]})},{Sider:W1,Content:q1}=Zs,ss=({children:s})=>{const[t,r]=p.useState(!1),[n,o]=p.useState(window.innerWidth<768),i=Je(),l=cn(),c=()=>{const g=l.pathname;return g==="/admin/dashboard"||g==="/admin"?"dashboard":g.includes("/admin/users")?"users":g.includes("/admin/orders")?"orders":g.includes("/admin/analytics")?"analytics":g.includes("/admin/content")?"content":g.includes("/admin/notifications")?"notifications":g.includes("/admin/settings")?"settings":g.includes("/admin/products")?"products":g.includes("/admin/prebooks")?"prebooks":g.includes("/admin/payments")?"payments":g.includes("/admin/user-activities")?"activities":g.includes("/admin/banners")?"banners":"dashboard"},[u,m]=p.useState(c());p.useEffect(()=>{m(c())},[l.pathname]),p.useEffect(()=>{const g=()=>{o(window.innerWidth<parseInt(a.breakpoints.mobile))};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const d=[{key:"dashboard",icon:e.jsx(Yp,{}),label:"Dashboard"},{key:"users",icon:e.jsx(Ir,{}),label:"User Management"},{key:"products",icon:e.jsx(jo,{}),label:"Products"},{key:"banners",icon:e.jsx(Fn,{}),label:"Banner Management"},{key:"orders",icon:e.jsx(vt,{}),label:"Orders & Sales"},{key:"analytics",icon:e.jsx(ki,{}),label:"Analytics"},{key:"content",icon:e.jsx(Ys,{}),label:"Content Management"},{key:"notifications",icon:e.jsx(js,{}),label:"Notifications"},{key:"prebooks",icon:e.jsx(kt,{}),label:"Prebook Management"},{key:"payments",icon:e.jsx(kt,{}),label:"Payment Tracking"},{key:"activities",icon:e.jsx(Yf,{}),label:"User Activities"},{key:"settings",icon:e.jsx(hr,{}),label:"Settings"}],f=({key:g})=>{switch(m(g),g){case"dashboard":i("/admin/dashboard");break;case"users":i("/admin/users");break;case"products":i("/admin/products");break;case"banners":i("/admin/banners");break;case"orders":i("/admin/orders");break;case"analytics":i("/admin/analytics");break;case"content":i("/admin/content");break;case"notifications":i("/admin/notifications");break;case"prebooks":i("/admin/prebooks");break;case"payments":i("/admin/payments");break;case"activities":i("/admin/user-activities");break;case"settings":i("/admin/settings");break;default:i("/admin/dashboard")}n&&r(!1)};return e.jsxs("div",{style:{background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsx("style",{children:`
          .admin-sidebar-menu .ant-menu-item {
            color: ${a.colors.sidebar.text} !important;
            font-size: ${a.typography.fontSize.small} !important;
            font-weight: ${a.typography.fontWeight.medium} !important;
            padding: ${a.spacing.md} ${a.spacing.lg} !important;
            margin: ${a.spacing.xs} ${a.spacing.md} !important;
            border-radius: ${a.borderRadius.md} !important;
            transition: all 0.2s ease !important;
            height: auto !important;
            line-height: ${a.typography.lineHeight} !important;
          }
          
          .admin-sidebar-menu .ant-menu-item:hover {
            color: ${a.colors.primary} !important;
            background-color: ${a.colors.sidebar.hoverBackground} !important;
          }
          
          .admin-sidebar-menu .ant-menu-item-selected {
            color: ${a.colors.sidebar.activeText} !important;
            background-color: ${a.colors.sidebar.activeBackground} !important;
            font-weight: ${a.typography.fontWeight.semibold} !important;
          }
          
          .admin-sidebar-menu .ant-menu-item .ant-menu-item-icon {
            color: inherit !important;
            font-size: ${a.typography.fontSize.body} !important;
            margin-right: ${a.spacing.md} !important;
          }
          
          .admin-sidebar-menu .ant-menu-item-selected .ant-menu-item-icon {
            color: ${a.colors.sidebar.activeText} !important;
          }
        `}),e.jsx(L1,{}),e.jsxs(Zs,{style:{background:a.colors.background,marginTop:a.layout.header.height},children:[e.jsx(W1,{width:a.layout.sidebar.width,style:{background:a.colors.sidebar.background,borderRight:`1px solid ${a.colors.sidebar.border}`,padding:`${a.spacing.lg} 0`,display:n?"none":"block",position:"fixed",left:0,top:a.layout.header.height,height:`calc(100vh - ${a.layout.header.height})`,zIndex:999,overflowY:"auto",boxShadow:a.shadows.md},children:e.jsx(en,{mode:"vertical",items:d,selectedKeys:[u],onClick:f,className:"admin-sidebar-menu",style:{background:"transparent",border:"none",padding:`0 ${a.spacing.sm}`},theme:"light"})}),e.jsx(q1,{style:{padding:n?a.spacing.md:a.layout.content.padding,background:a.colors.background,minHeight:`calc(100vh - ${a.layout.header.height})`,marginLeft:n?"0":a.layout.sidebar.width,transition:"margin-left 0.3s ease"},children:s})]}),e.jsx(Mn,{title:e.jsx("span",{style:{fontSize:a.typography.fontSize.h4,fontWeight:a.typography.fontWeight.semibold,color:a.colors.text.primary},children:"Admin Navigation"}),placement:"left",closable:!0,onClose:()=>r(!1),open:t,styles:{body:{padding:0},header:{borderBottom:`1px solid ${a.colors.sidebar.border}`}},width:280,children:e.jsx(en,{mode:"vertical",items:d,selectedKeys:[u],onClick:f,className:"admin-sidebar-menu",style:{background:"transparent",border:"none",padding:`${a.spacing.md} ${a.spacing.sm}`},theme:"light"})}),n&&e.jsx(L,{type:"primary",icon:e.jsx(Io,{}),onClick:()=>r(!0),style:{position:"fixed",bottom:a.spacing.lg,right:a.spacing.lg,zIndex:1001,width:"56px",height:"56px",borderRadius:a.borderRadius.full,boxShadow:a.shadows.lg}})]})},Ge=({children:s,requiredRole:t=null})=>{const r=cn();let n=null;try{n=qe()}catch(u){return console.error("ProtectedRoute: useAuth error:",u),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f5f5f5"},children:e.jsx("div",{children:"Authentication error. Please refresh the page."})})}const{isAuthenticated:o,user:i,isLoading:l,authInitialized:c}=n;return!c||l?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f5f5f5"},children:e.jsx(rt,{size:"large"})}):!o||!i?e.jsx(Wo,{to:"/login",state:{from:r},replace:!0}):t&&i.role!==t?i.role==="admin"?e.jsx(Wo,{to:"/admin/dashboard",replace:!0}):e.jsx(Wo,{to:"/dashboard",replace:!0}):s},{Title:Zo,Paragraph:H1,Text:bn}=Fe,{Search:V1}=ue,G1=()=>{const[s,t]=p.useState([]),[r,n]=p.useState([]),[o,i]=p.useState(!1),[l,c]=p.useState(""),u=Je();p.useEffect(()=>{m(),d()},[]);const m=async()=>{i(!0);try{const x=await Xt.getProducts({limit:6});x.data.success&&t(x.data.data.products)}catch(x){console.error("Error loading products:",x)}finally{i(!1)}},d=async()=>{try{const x=await Xt.getTrendingProducts({limit:3});x.data.success&&n(x.data.data.products)}catch(x){console.error("Error loading trending products:",x)}},f=(x,P)=>new Intl.NumberFormat("en-US",{style:"currency",currency:P||"USD"}).format(x),g=x=>{u(`/product/${x.slug}`)},y=x=>{c(x)},h=({product:x})=>e.jsx(W,{xs:24,sm:12,lg:8,children:e.jsx(V,{hoverable:!0,cover:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{alt:x.title,src:x.thumbnailUrl?`http://localhost:7000${x.thumbnailUrl}`:"/placeholder-image.svg",onError:P=>{P.target.src="/placeholder-image.svg"},style:{height:200,objectFit:"cover",width:"100%"}}),x.trending&&e.jsx(zt,{count:"Trending",style:{position:"absolute",top:8,right:8,backgroundColor:"#ff4d4f"}})]}),actions:[e.jsx(L,{type:"primary",icon:e.jsx(vt,{}),onClick:()=>g(x),children:"Prebook"})],children:e.jsx(V.Meta,{title:e.jsxs("div",{children:[e.jsx(Zo,{level:4,style:{margin:0,marginBottom:"0.5rem"},children:x.title}),e.jsxs(bn,{type:"secondary",children:["by ",x.developerName]})]}),description:e.jsxs("div",{children:[e.jsx(H1,{ellipsis:{rows:2},style:{marginBottom:"1rem"},children:x.description}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs(Z,{wrap:!0,children:[x.tags.slice(0,3).map(P=>e.jsx(le,{color:"blue",children:P},P)),x.tags.length>3&&e.jsxs(le,{color:"default",children:["+",x.tags.length-3]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{children:e.jsx(bn,{strong:!0,style:{fontSize:"1.2rem"},children:f(x.price,x.currency)})}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(_r,{disabled:!0,value:x.averageRating,style:{fontSize:"14px"}}),e.jsxs(bn,{type:"secondary",children:["(",x.reviewsCount,")"]})]}),e.jsxs(bn,{type:"secondary",style:{fontSize:"12px"},children:[x.totalVisits," views"]})]})]})]})})})},x._id);return o?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"1rem"},children:e.jsx(bn,{type:"secondary",children:"Loading products..."})})]}):e.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"2rem",textAlign:"center"},children:e.jsx(V1,{placeholder:"Search products...",allowClear:!0,enterButton:e.jsx(Kt,{}),size:"large",style:{maxWidth:"400px"},onSearch:y})}),r.length>0&&e.jsxs("div",{style:{marginBottom:"3rem"},children:[e.jsx(Zo,{level:2,style:{marginBottom:"1rem",textAlign:"center"},children:"üî• Trending Products"}),e.jsx(ce,{gutter:[24,24],children:r.map(x=>e.jsx(h,{product:x},x._id))})]}),e.jsxs("div",{children:[e.jsx(Zo,{level:2,style:{marginBottom:"1rem",textAlign:"center"},children:"All Products"}),s.length===0?e.jsx(Ue,{description:"No products available",style:{padding:"2rem"}}):e.jsx(ce,{gutter:[24,24],children:s.map(x=>e.jsx(h,{product:x},x._id))})]}),s.length>0&&e.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:e.jsx(L,{type:"primary",size:"large",onClick:()=>u("/products"),children:"View All Products"})})]})},{Title:br,Paragraph:$r}=Fe,J1=()=>{const s=[{icon:e.jsx(vt,{style:{fontSize:"3rem",color:"#1890ff"}}),title:"E-Commerce",description:"Complete user management, payments with Razorpay, and order tracking.",color:"#1890ff"},{icon:e.jsx(Mt,{style:{fontSize:"3rem",color:"#52c41a"}}),title:"E2E Chat",description:"End-to-end encrypted messaging with real-time communication.",color:"#52c41a"},{icon:e.jsx(Re,{style:{fontSize:"3rem",color:"#fa8c16"}}),title:"User Management",description:"Complete user profiles, authentication, and admin dashboards.",color:"#fa8c16"},{icon:e.jsx(yg,{style:{fontSize:"3rem",color:"#eb2f96"}}),title:"Real-time",description:"Live sessions, notifications, and real-time updates.",color:"#eb2f96"}],t=[{name:"Sarah Johnson",role:"CEO, TechCorp",content:"ITWOS AI transformed our business operations completely!",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah"},{name:"Mike Chen",role:"CTO, StartupXYZ",content:"The E2E chat feature is incredible. Our team communication improved 300%.",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mike"},{name:"Emily Davis",role:"User Manager, InnovateCo",content:"Best platform we've ever used. Highly recommend!",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emily"}];return e.jsxs("div",{style:{background:"#f5f5f5"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"4rem 2rem",textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.1}}),e.jsxs("div",{style:{position:"relative",zIndex:1,maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(br,{level:1,style:{color:"white",marginBottom:"1rem",fontSize:"3rem"},children:"üöÄ ITWOS AI Platform"}),e.jsx($r,{style:{color:"white",fontSize:"1.3rem",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"Your Complete Full-Stack Business Solution with AI-powered features, real-time communication, and secure payments."}),e.jsxs(Z,{size:"large",wrap:!0,children:[e.jsx(It,{to:"/login",children:e.jsx(L,{type:"primary",size:"large",icon:e.jsx(Re,{}),children:"Get Started"})}),e.jsx(It,{to:"/dashboard",children:e.jsx(L,{size:"large",style:{background:"white",color:"#667eea"},children:"View Dashboard"})})]})]})]}),e.jsx("div",{style:{padding:"3rem 2rem",background:"white"},children:e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(ve,{title:"Active Users",value:1128,prefix:e.jsx(Re,{})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(ve,{title:"Users Active",value:9320,prefix:e.jsx(Re,{})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(ve,{title:"Messages Sent",value:15680,prefix:e.jsx(Mt,{})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(ve,{title:"Success Rate",value:99.9,suffix:"%",prefix:e.jsx(Ee,{})})})]})})}),e.jsxs("div",{style:{padding:"4rem 2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(br,{level:2,style:{textAlign:"center",marginBottom:"3rem"},children:"üéØ Platform Features"}),e.jsx(ce,{gutter:[24,24],children:s.map((r,n)=>e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsxs(V,{hoverable:!0,style:{textAlign:"center",height:"100%",border:`2px solid ${r.color}20`,borderRadius:"12px"},children:[e.jsx("div",{style:{marginBottom:"1rem"},children:r.icon}),e.jsx(br,{level:4,style:{color:r.color},children:r.title}),e.jsx($r,{style:{marginBottom:"1rem"},children:r.description}),e.jsxs(L,{type:"link",style:{color:r.color},children:["Learn More ",e.jsx(wp,{})]})]})},n))})]}),e.jsx("div",{style:{padding:"4rem 2rem",background:"white"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(br,{level:2,style:{textAlign:"center",marginBottom:"3rem"},children:"üí¨ What Our Users Say"}),e.jsx(ce,{gutter:[24,24],children:t.map((r,n)=>e.jsx(W,{xs:24,md:8,children:e.jsxs(V,{style:{height:"100%",borderRadius:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[e.jsx(We,{size:64,src:r.avatar}),e.jsx(br,{level:5,style:{margin:"8px 0 4px"},children:r.name}),e.jsx($r,{style:{color:"#666",margin:0},children:r.role})]}),e.jsxs($r,{style:{fontStyle:"italic",textAlign:"center"},children:['"',r.content,'"']}),e.jsx("div",{style:{textAlign:"center"},children:[...Array(5)].map((o,i)=>e.jsx(ir,{style:{color:"#faad14"}},i))})]})},n))})]})}),e.jsx("div",{style:{padding:"4rem 2rem",background:"#f8f9fa"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[e.jsx(br,{level:2,children:"Featured Products"}),e.jsx($r,{style:{fontSize:"1.1rem",color:"#666"},children:"Discover amazing products and services from our community"})]}),e.jsx(G1,{})]})}),e.jsx("div",{style:{background:"linear-gradient(135deg, #001529 0%, #1890ff 100%)",color:"white",padding:"4rem 2rem",textAlign:"center"},children:e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsx(br,{level:2,style:{color:"white",marginBottom:"1rem"},children:"Ready to Transform Your Business?"}),e.jsx($r,{style:{color:"white",fontSize:"1.2rem",marginBottom:"2rem"},children:"Join thousands of users who trust our platform. Start your free trial today!"}),e.jsxs(Z,{size:"large",wrap:!0,children:[e.jsx(It,{to:"/register",children:e.jsx(L,{type:"primary",size:"large",style:{background:"white",color:"#001529"},children:"Start Free Trial"})}),e.jsx(It,{to:"/contact",children:e.jsx(L,{size:"large",style:{background:"transparent",color:"white",border:"2px solid white"},children:"Contact Sales"})}),e.jsx(It,{to:"/admin/login",children:e.jsx(L,{size:"large",style:{background:"rgba(255,255,255,0.2)",color:"white",border:"2px solid rgba(255,255,255,0.3)"},children:"Admin Access"})})]})]})})]})},{Title:Y1,Paragraph:K1,Text:Ec}=Fe,Q1=()=>{var h,x;const[s,t]=p.useState(!1),[r,n]=p.useState(!1),{login:o,googleLogin:i,isAuthenticated:l,user:c}=qe(),{message:u}=$t.useApp(),m=Je(),f=((x=(h=cn().state)==null?void 0:h.from)==null?void 0:x.pathname)||"/dashboard";p.useEffect(()=>{l&&c&&(console.log("üîÑ User already authenticated, redirecting to:",f),m(f,{replace:!0}))},[l,c,m,f]);const g=async P=>{t(!0);try{console.log("üîêüîêüîê LOGIN PAGE: Attempting login for:",P.email),console.log("üîêüîêüîê LOGIN PAGE: Attempting login for:",P.email),console.log("üîêüîêüîê LOGIN PAGE: Attempting login for:",P.email);const S=await o(P);if(console.log("üîê Login result:",S),S.success){console.log("‚úÖ Login successful, redirecting to:",S.redirectTo||f),u.success("Login successful!");const M=S.redirectTo||f;console.log("üöÄ Navigating to:",M),m(M,{replace:!0})}else u.error(S.error||"Login failed")}catch(S){console.error("‚ùå Login error:",S),u.error("Login failed")}finally{t(!1)}},y=async()=>{n(!0);try{console.log("üîê Starting Google login...");const P=await i();if(console.log("üîê Google login result:",P),P.success){console.log("‚úÖ Google login successful, redirecting to:",P.redirectTo||f),u.success("Google login successful!");const S=P.redirectTo||f;console.log("üöÄ Navigating to:",S),m(S,{replace:!0})}else u.error(P.error||"Google login failed")}catch(P){console.error("‚ùå Google login error:",P),u.error("Google login failed")}finally{n(!1)}};return e.jsx($t,{children:e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsx(ce,{justify:"center",style:{width:"100%"},children:e.jsx(W,{xs:24,sm:20,md:16,lg:12,xl:8,children:e.jsxs(V,{style:{width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",borderRadius:"16px",border:"none"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx(Y1,{level:2,style:{marginBottom:"0.5rem",color:"#1890ff"},children:"üöÄ Welcome Back"}),e.jsx(K1,{style:{color:"#666",fontSize:"1.1rem"},children:"Sign in to your ITWOS AI account"})]}),e.jsxs(G,{name:"login",onFinish:g,autoComplete:"off",layout:"vertical",size:"large",children:[e.jsx(G.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(ue,{prefix:e.jsx(Re,{style:{color:"#1890ff"}}),placeholder:"Enter your email address",style:{borderRadius:"8px"}})}),e.jsx(G.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{style:{color:"#1890ff"}}),placeholder:"Enter your password",style:{borderRadius:"8px"},iconRender:P=>P?e.jsx(Fd,{}):e.jsx(Od,{})})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:s,size:"large",style:{width:"100%",height:"48px",borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #722ed1 100%)",border:"none",fontSize:"16px",fontWeight:"600"},children:s?"Signing In...":"Sign In"})})]}),e.jsx(ys,{style:{margin:"1.5rem 0"},children:e.jsx(Ec,{style:{color:"#999"},children:"Or continue with"})}),e.jsx(L,{icon:e.jsx(Md,{}),onClick:y,loading:r,disabled:s||r,size:"large",style:{width:"100%",height:"48px",borderRadius:"8px",border:"2px solid #f0f0f0",fontSize:"16px",fontWeight:"500"},children:r?"Signing in with Google...":"Continue with Google"}),e.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:e.jsx(It,{to:"/forgot-password",style:{color:"#1890ff",fontWeight:"500",textDecoration:"none"},children:"Forgot your password?"})}),e.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:e.jsxs(Ec,{style:{color:"#666"},children:["Don't have an account?"," ",e.jsx(It,{to:"/register",style:{color:"#1890ff",fontWeight:"600",textDecoration:"none"},children:"Create one now"})]})}),e.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:e.jsx(It,{to:"/forgot-password",style:{color:"#1890ff",fontSize:"14px"},children:"Forgot your password?"})})]})})})})})},{Title:Z1,Paragraph:X1,Text:_c}=Fe,{TextArea:ey}=ue,{Option:gb}=Pe,ty=()=>{const[s,t]=p.useState(!1),[r,n]=p.useState(""),[o]=G.useForm(),i=Je(),l=async d=>{t(!0);try{const f=`user-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,y=await(await fetch("http://localhost:7000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.fullName,email:d.email,password:d.password,publicKey:f,phone:d.phone,bio:d.bio,avatarUrl:r,dateOfBirth:d.dateOfBirth,location:d.location,interests:d.interests})})).json();y.success?(B.success("Registration successful! Welcome to ITWOS AI!"),i("/login")):B.error(y.message||"Registration failed")}catch(f){console.error("Registration error:",f),B.error("Network error. Please try again.")}finally{t(!1)}},u={name:"avatar",listType:"picture-card",showUploadList:!1,action:"http://localhost:7000/api/upload/avatar",onChange:d=>{d.file.status==="done"?(n(d.file.response.url),B.success("Avatar uploaded successfully!")):d.file.status==="error"?B.error("Avatar upload failed. Please try again."):d.file.status},beforeUpload:d=>d.type.startsWith("image/")?d.size/1024/1024<5?!0:(B.error("Image must be smaller than 5MB!"),!1):(B.error("You can only upload image files!"),!1),customRequest:({file:d,onSuccess:f,onError:g})=>{const y=new FormData;y.append("avatar",d),fetch("http://localhost:7000/api/upload/avatar",{method:"POST",body:y}).then(h=>h.json()).then(h=>{h.success?(n(h.url),f(h)):g(new Error(h.message))}).catch(h=>{g(h)})}},m=()=>{B.info("Google registration would be implemented here")};return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:e.jsx(ce,{justify:"center",style:{width:"100%",maxWidth:"1200px"},children:e.jsx(W,{xs:24,sm:22,md:18,lg:14,xl:12,children:e.jsxs(V,{style:{width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",borderRadius:"16px",border:"none",margin:"0 auto"},styles:{body:{padding:"1rem"}},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx(Z1,{level:2,style:{marginBottom:"0.5rem",color:"#1890ff"},children:"üöÄ Join ITWOS AI"}),e.jsx(X1,{style:{color:"#666",fontSize:"1.1rem"},children:"Create your account and start your journey"})]}),e.jsxs(G,{form:o,name:"register",onFinish:l,autoComplete:"off",layout:"vertical",size:"large",children:[e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"fullName",label:"Full Name",rules:[{required:!0,message:"Please input your full name!"}],children:e.jsx(ue,{prefix:e.jsx(Re,{style:{color:"#1890ff"}}),placeholder:"Enter your full name",style:{borderRadius:"8px"}})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(ue,{prefix:e.jsx(as,{style:{color:"#1890ff"}}),placeholder:"Enter your email",style:{borderRadius:"8px"}})})})]}),e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Please input your phone number!"},{pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number!"}],children:e.jsx(ue,{prefix:e.jsx(Ss,{style:{color:"#1890ff"}}),placeholder:"Enter your phone number",style:{borderRadius:"8px"}})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"location",label:"Location",rules:[{required:!0,message:"Please input your location!"}],children:e.jsx(ue,{placeholder:"Enter your city/country",style:{borderRadius:"8px"}})})})]}),e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"dateOfBirth",label:"Date of Birth",rules:[{required:!0,message:"Please select your date of birth!"}],children:e.jsx(Ao,{style:{width:"100%",borderRadius:"8px"},placeholder:"Select your date of birth"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"interests",label:"Interests",rules:[{required:!0,message:"Please select your interests!"}],children:e.jsx(Pe,{mode:"multiple",placeholder:"Select your interests",style:{borderRadius:"8px"},options:[{value:"technology",label:"Technology"},{value:"business",label:"Business"},{value:"design",label:"Design"},{value:"marketing",label:"Marketing"},{value:"education",label:"Education"},{value:"health",label:"Health"},{value:"sports",label:"Sports"},{value:"music",label:"Music"},{value:"art",label:"Art"},{value:"travel",label:"Travel"}]})})})]}),e.jsx(G.Item,{name:"bio",label:"Bio",rules:[{required:!0,message:"Please write a short bio!"},{max:500,message:"Bio must be less than 500 characters!"}],children:e.jsx(ey,{rows:4,placeholder:"Tell us about yourself...",style:{borderRadius:"8px"}})}),e.jsx(G.Item,{name:"avatar",label:"Profile Picture",children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx(dr,{...u,children:r?e.jsx(We,{size:100,src:r}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Pl,{style:{fontSize:"32px",color:"#1890ff"}}),e.jsx("div",{style:{marginTop:"8px"},children:"Upload Photo"})]})})})}),e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{style:{color:"#1890ff"}}),placeholder:"Create a password",style:{borderRadius:"8px"}})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:d})=>({validator(f,g){return!g||d("password")===g?Promise.resolve():Promise.reject(new Error("Passwords do not match!"))}})],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{style:{color:"#1890ff"}}),placeholder:"Confirm password",style:{borderRadius:"8px"}})})})]}),e.jsx(G.Item,{name:"agreement",valuePropName:"checked",rules:[{validator:(d,f)=>f?Promise.resolve():Promise.reject(new Error("Please accept the terms and conditions"))}],children:e.jsxs(nr,{children:["I agree to the"," ",e.jsx(It,{to:"/terms",style:{color:"#1890ff"},children:"Terms and Conditions"})," ","and"," ",e.jsx(It,{to:"/privacy",style:{color:"#1890ff"},children:"Privacy Policy"})]})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:s,size:"large",style:{width:"100%",height:"48px",borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #722ed1 100%)",border:"none",fontSize:"16px",fontWeight:"600"},children:s?"Creating Account...":"Create Account"})})]}),e.jsx(ys,{style:{margin:"1.5rem 0"},children:e.jsx(_c,{style:{color:"#999"},children:"Or continue with"})}),e.jsx(L,{icon:e.jsx(Md,{}),onClick:m,disabled:s,size:"large",style:{width:"100%",height:"48px",borderRadius:"8px",border:"2px solid #f0f0f0",fontSize:"16px",fontWeight:"500"},children:"Continue with Google"}),e.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:e.jsxs(_c,{style:{color:"#666"},children:["Already have an account?"," ",e.jsx(It,{to:"/login",style:{color:"#1890ff",fontWeight:"600",textDecoration:"none"},children:"Sign in here"})]})})]})})})})},{Title:vr,Paragraph:vn,Text:Oc}=Fe,{Step:wn}=md,sy=()=>{const[s]=G.useForm(),[t,r]=p.useState(!1),[n,o]=p.useState(0),[i,l]=p.useState(null),[c,u]=p.useState(null),m=Je(),d=async x=>{r(!0);try{const S=await(await fetch("http://localhost:7000/api/password-reset/check-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x.email})})).json();S.success&&(l({email:x.email,exists:S.data.exists,hasPhone:S.data.hasPhone}),o(1))}catch(P){console.error("Error checking user:",P)}finally{r(!1)}},f=async x=>{r(!0);try{const S=await(await fetch("http://localhost:7000/api/password-reset/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,method:x.method})})).json();S.success?o(2):alert(S.message||"Failed to send verification code. Please try again.")}catch(P){console.error("Error requesting reset:",P),alert("Failed to send verification code. Please check your connection and try again.")}finally{r(!1)}},g=async x=>{r(!0);try{console.log("üîÑ Frontend: Verifying OTP..."),console.log("üìß Email:",i.email),console.log("üî¢ OTP:",x.otp);const P=await fetch("http://localhost:7000/api/password-reset/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,otp:x.otp})});if(console.log("üì• Frontend: Response status:",P.status),console.log("üì• Frontend: Response ok:",P.ok),!P.ok){const M=await P.json();console.error("‚ùå Frontend: Error response:",M),alert(`Error: ${M.message||"Failed to verify OTP"}`);return}const S=await P.json();console.log("üì• Frontend: Response data:",S),S.success?(u(S.data.resetToken),o(3)):alert(S.message||"Failed to verify OTP")}catch(P){console.error("‚ùå Frontend: Error verifying OTP:",P),alert("Network error. Please check your connection and try again.")}finally{r(!1)}},y=async x=>{r(!0);try{(await(await fetch("http://localhost:7000/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetToken:c,newPassword:x.newPassword})})).json()).success&&o(4)}catch(P){console.error("Error resetting password:",P)}finally{r(!1)}},h=()=>{switch(n){case 0:return e.jsxs(G,{form:s,onFinish:d,layout:"vertical",size:"large",children:[e.jsx(vr,{level:2,style:{textAlign:"center",marginBottom:24},children:"Forgot Password?"}),e.jsx(vn,{style:{textAlign:"center",marginBottom:32},children:"Enter your email address and we'll help you reset your password"}),e.jsx(G.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(ue,{prefix:e.jsx(as,{}),placeholder:"Enter your email address"})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:t,block:!0,size:"large",children:"Continue"})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(L,{type:"link",onClick:()=>m("/login"),children:"Back to Login"})})]});case 1:return e.jsxs("div",{children:[e.jsx(vr,{level:2,style:{textAlign:"center",marginBottom:24},children:"Choose Reset Method"}),e.jsx(vn,{style:{textAlign:"center",marginBottom:32},children:"How would you like to receive your verification code?"}),e.jsxs(G,{form:s,onFinish:f,layout:"vertical",size:"large",children:[e.jsx(G.Item,{name:"method",rules:[{required:!0,message:"Please select a method"}],children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{hoverable:!0,onClick:()=>s.setFieldsValue({method:"email"}),style:{border:s.getFieldValue("method")==="email"?"2px solid #1890ff":"1px solid #d9d9d9",cursor:"pointer"},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%",textAlign:"center"},children:[e.jsx(as,{style:{fontSize:"32px",color:"#1890ff"}}),e.jsx(vr,{level:4,children:"Email"}),e.jsxs(Oc,{type:"secondary",children:["Send code to ",i.email]})]})})}),i.hasPhone&&e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{hoverable:!0,onClick:()=>s.setFieldsValue({method:"phone"}),style:{border:s.getFieldValue("method")==="phone"?"2px solid #1890ff":"1px solid #d9d9d9",cursor:"pointer"},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%",textAlign:"center"},children:[e.jsx(Ss,{style:{fontSize:"32px",color:"#52c41a"}}),e.jsx(vr,{level:4,children:"Phone"}),e.jsx(Oc,{type:"secondary",children:"Send code via SMS"})]})})})]})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:t,block:!0,size:"large",children:"Send Verification Code"})})]})]});case 2:return e.jsxs("div",{children:[e.jsx(vr,{level:2,style:{textAlign:"center",marginBottom:24},children:"Enter Verification Code"}),e.jsxs(vn,{style:{textAlign:"center",marginBottom:32},children:["We've sent a 6-digit code to your ",i.method==="email"?"email":"phone"]}),e.jsxs(G,{form:s,onFinish:g,layout:"vertical",size:"large",children:[e.jsx(G.Item,{name:"otp",label:"Verification Code",rules:[{required:!0,message:"Please enter the verification code"},{len:6,message:"Code must be 6 digits"}],children:e.jsx(ue,{placeholder:"Enter 6-digit code",maxLength:6,style:{textAlign:"center",fontSize:"18px",letterSpacing:"2px"}})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:t,block:!0,size:"large",children:"Verify Code"})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(L,{type:"link",children:"Resend Code"})})]})]});case 3:return e.jsxs("div",{children:[e.jsx(vr,{level:2,style:{textAlign:"center",marginBottom:24},children:"Create New Password"}),e.jsx(vn,{style:{textAlign:"center",marginBottom:32},children:"Enter your new password below"}),e.jsxs(G,{form:s,onFinish:y,layout:"vertical",size:"large",children:[e.jsx(G.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter new password"})}),e.jsx(G.Item,{name:"confirmPassword",label:"Confirm New Password",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your password"},({getFieldValue:x})=>({validator(P,S){return!S||x("newPassword")===S?Promise.resolve():Promise.reject(new Error("Passwords do not match"))}})],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Confirm new password"})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:t,block:!0,size:"large",children:"Reset Password"})})]})]});case 4:return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Ee,{style:{fontSize:"64px",color:"#52c41a",marginBottom:24}}),e.jsx(vr,{level:2,style:{marginBottom:16},children:"Password Reset Successful!"}),e.jsx(vn,{style:{marginBottom:32},children:"Your password has been successfully reset. You can now log in with your new password."}),e.jsx(L,{type:"primary",size:"large",onClick:()=>m("/login"),children:"Go to Login"})]});default:return null}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:e.jsxs(V,{style:{width:"100%",maxWidth:500,borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[e.jsxs(md,{current:n,style:{marginBottom:32},children:[e.jsx(wn,{title:"Email"}),e.jsx(wn,{title:"Method"}),e.jsx(wn,{title:"Verify"}),e.jsx(wn,{title:"Reset"}),e.jsx(wn,{title:"Complete"})]}),h()]})})},{Title:Sn,Paragraph:Br,Text:Fc}=Fe,ry=()=>{const[s,t]=p.useState(!0),{user:r,isAuthenticated:n,updateUser:o}=qe(),i=Je(),l=p.useCallback(()=>n&&(r==null?void 0:r.role)==="user"?(console.log("User is authenticated and authorized"),t(!1),!0):n&&(r==null?void 0:r.role)!=="user"?(console.log("Not a user role, redirecting to login. User role:",r==null?void 0:r.role),i("/login"),!1):(n||(console.log("Not authenticated, redirecting to login"),i("/login")),!1),[n,r,i]);p.useEffect(()=>{const S=setTimeout(()=>{l()},100);return()=>clearTimeout(S)},[l]),p.useEffect(()=>{n&&(r==null?void 0:r.role)==="user"&&P()},[n,r]);const[c,u]=p.useState({totalPurchases:0,coursesEnrolled:0,completed:0,totalSpent:0}),[m,d]=p.useState([]),[f,g]=p.useState(!1),[y,h]=p.useState(!0);p.useEffect(()=>{r&&h(r.activeStatusVisible!==!1)},[r==null?void 0:r.activeStatusVisible]);const x=async S=>{var M,j,z,T;h(S),o&&o({activeStatusVisible:S});try{const k=await ie.put("/users/me",{activeStatusVisible:S});if(console.log("‚úÖ Active status update response:",k.data),k.data.success)B.success(`Active status ${S?"enabled":"disabled"}`);else throw new Error(k.data.message||"Update failed")}catch(k){console.error("‚ùå Error updating active status:",k),console.error("‚ùå Error details:",{message:k.message,response:(M=k.response)==null?void 0:M.data,status:(j=k.response)==null?void 0:j.status}),h(!S),o&&o({activeStatusVisible:!S});const R=((T=(z=k.response)==null?void 0:z.data)==null?void 0:T.message)||k.message||"Failed to update active status";B.error(R)}},P=async()=>{g(!0);try{const S=await an.getUsers({sort:"new",limit:6,excludeSelf:!0});if(S.data.success){const M=(S.data.users||[]).filter(j=>j.isNew);d(M.slice(0,6))}}catch(S){console.error("Load new users error:",S),d([])}finally{g(!1)}};return s?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",background:"#f5f5f5"},children:e.jsx("div",{children:"Loading..."})}):(r==null?void 0:r.role)!=="user"?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",background:"#f5f5f5"},children:e.jsxs("div",{children:[e.jsx(Sn,{level:2,children:"Access Denied"}),e.jsx(Br,{children:"Please login as a user to access this dashboard."}),e.jsx(L,{type:"primary",onClick:()=>i("/login"),children:"Go to Login"})]})}):e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"var(--space-xl)",padding:"0 var(--container-padding-mobile)"},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"var(--type-small)"},children:"Home / Dashboard"})}),e.jsxs("div",{style:{marginBottom:"var(--space-xxl)",padding:"0 var(--container-padding-mobile)"},children:[e.jsxs(Sn,{level:1,style:{color:"var(--text-primary)",marginBottom:"var(--space-sm)",fontSize:"var(--type-display)",fontWeight:"var(--weight-bold)",lineHeight:"var(--line-tight)"},children:["Welcome back, ",(r==null?void 0:r.name)||"user123","! üëã"]}),e.jsx(Br,{style:{color:"var(--text-secondary)",fontSize:"var(--type-body)",lineHeight:"var(--line-relaxed)"},children:"Here's what's happening with your learning journey."})]}),m.length>0&&e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(le,{color:"green",children:"NEW"}),e.jsx("span",{children:"New Users This Week - Start Chatting!"})]}),extra:e.jsx(L,{type:"link",onClick:()=>i("/discover"),children:"See All"}),style:{marginBottom:"var(--space-xl)",borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)"},children:e.jsx(ce,{gutter:[16,16],children:m.map(S=>e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsxs(V,{size:"small",hoverable:!0,style:{textAlign:"center",border:"2px solid var(--success)",borderRadius:"var(--radius-md)",transition:"all var(--transition-base)",cursor:"pointer",position:"relative"},onClick:M=>{M.preventDefault(),M.stopPropagation(),console.log("üîç Dashboard: Clicked user card, navigating to:",`/profile/${S._id}`),S._id?i(`/profile/${S._id}`):(console.error("No newUser._id found:",S),B.error("Invalid user ID"))},children:[e.jsxs("div",{style:{position:"relative",display:"inline-block",cursor:"pointer"},onClick:M=>{M.stopPropagation(),i(`/profile/${S._id}`)},children:[e.jsx(We,{size:64,src:ht(S),icon:e.jsx(Re,{}),children:nt(S.name)}),e.jsx(le,{color:"green",style:{position:"absolute",top:"-8px",right:"-8px",fontSize:"10px",fontWeight:"bold"},children:"NEW"})]}),e.jsx(Sn,{level:5,style:{marginTop:"12px",marginBottom:"4px",cursor:"pointer"},onClick:M=>{M.stopPropagation(),i(`/profile/${S._id}`)},children:S.name}),e.jsx(Br,{type:"secondary",style:{fontSize:"12px"},children:S.email})]})},S._id))})}),e.jsx("div",{style:{padding:"0 var(--container-padding-mobile)"},children:e.jsxs(ce,{gutter:[24,24],style:{marginBottom:"var(--space-xxl)"},children:[e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{variant:"borderless",hoverable:!0,style:{background:"var(--bg-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)",padding:"var(--space-lg)",transition:"all var(--transition-base)"},children:e.jsx(ve,{title:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"var(--type-small)"},children:"Total Purchases"}),value:c.totalPurchases,prefix:e.jsx(vt,{style:{color:"var(--accent-primary)"}}),valueStyle:{color:"var(--accent-primary)",fontSize:"var(--type-h1)"}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{variant:"borderless",hoverable:!0,style:{background:"var(--bg-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)",padding:"var(--space-lg)",transition:"all var(--transition-base)"},children:e.jsx(ve,{title:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"var(--type-small)"},children:"Courses Enrolled"}),value:c.coursesEnrolled,prefix:e.jsx(bs,{style:{color:"var(--success)"}}),valueStyle:{color:"var(--success)",fontSize:"var(--type-h1)"}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{variant:"borderless",hoverable:!0,style:{background:"var(--bg-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)",padding:"var(--space-lg)",transition:"all var(--transition-base)"},children:e.jsx(ve,{title:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"var(--type-small)"},children:"Completed"}),value:c.completed,prefix:e.jsx(zo,{style:{color:"var(--warning)"}}),valueStyle:{color:"var(--warning)",fontSize:"var(--type-h1)"}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{variant:"borderless",hoverable:!0,style:{background:"var(--bg-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)",padding:"var(--space-lg)",transition:"all var(--transition-base)"},children:e.jsx(ve,{title:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"var(--type-small)"},children:"Total Spent"}),value:c.totalSpent,prefix:e.jsx(kt,{style:{color:"var(--danger)"}}),valueStyle:{color:"var(--danger)",fontSize:"var(--type-h1)"}})})})]})}),e.jsx("div",{style:{padding:"0 16px",marginBottom:"48px"},children:e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(hr,{}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"600"},children:"Quick Settings"})]}),extra:e.jsx(L,{type:"link",onClick:()=>i("/settings"),style:{fontSize:"14px"},children:"View All Settings"}),style:{borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,md:12,children:e.jsx(V,{size:"small",style:{borderRadius:"8px",backgroundColor:"#fafafa",border:"1px solid #e8e8e8"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx(Ee,{style:{color:y?"#52c41a":"#999",fontSize:"16px"}}),e.jsx(Fc,{strong:!0,style:{fontSize:"14px",fontWeight:"600",color:"#333"},children:"Activity Status"}),e.jsx(le,{color:y?"green":"default",style:{margin:0,fontSize:"11px"},children:y?"ON":"OFF"})]}),e.jsx(Fc,{type:"secondary",style:{fontSize:"12px",color:"#666",display:"block"},children:y?"Others can see when you're online":"Your activity status is hidden"})]}),e.jsx(dt,{checked:y,onChange:x,checkedChildren:"ON",unCheckedChildren:"OFF",style:{minWidth:"50px",marginLeft:"16px"}})]})})}),e.jsx(W,{xs:24,md:12,children:e.jsxs(V,{size:"small",style:{borderRadius:"8px",backgroundColor:"#fafafa",border:"1px solid #e8e8e8",textAlign:"center"},children:[e.jsx(Br,{style:{margin:0,fontSize:"12px",color:"#666",marginBottom:"12px"},children:"Need more settings?"}),e.jsx(L,{type:"primary",icon:e.jsx(hr,{}),onClick:()=>i("/settings"),style:{marginTop:"8px",minHeight:"44px",borderRadius:"6px"},children:"Go to Settings"})]})})]})})}),e.jsx("div",{style:{padding:"0 var(--container-padding-mobile)",marginBottom:"var(--space-xl)"},children:e.jsx(V,{hoverable:!0,onClick:()=>i("/dashboard/products"),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:"none",cursor:"pointer",color:"#fff"},bodyStyle:{padding:"24px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"12px",background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px"},children:e.jsx(Ee,{style:{color:"#fff"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx(Sn,{level:4,style:{color:"#fff",margin:0,marginBottom:"4px"},children:"Get Verified Badge"}),e.jsx(Br,{style:{color:"rgba(255,255,255,0.9)",margin:0},children:"Show your authenticity with a blue checkmark badge"})]}),e.jsx(L,{type:"primary",style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",borderRadius:"8px",fontWeight:600},children:"View Plans"})]})})}),e.jsx(V,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(vt,{}),"Recent Purchases"]}),extra:e.jsx(L,{type:"link",onClick:()=>i("/purchases"),children:"View All"}),variant:"borderless",style:{background:"#fff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(Sn,{level:4,style:{color:"#666"},children:"Recent Purchases"}),e.jsx(Br,{style:{color:"#666"},children:'Your recent purchases will appear here. Click "View All" to see your complete purchase history.'}),e.jsx(L,{type:"primary",onClick:()=>i("/purchases"),children:"View All Purchases"})]})})]})},{Title:ny,Paragraph:oy}=Fe,{Search:iy}=ue,{Option:_s}=Pe,ay=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!1),{user:o,isAuthenticated:i}=qe(),l=Je(),[c,u]=p.useState({totalItems:12,totalValue:8999,onSale:3,newItems:2});p.useEffect(()=>{m()},[]);const m=async()=>{n(!0);try{t([])}catch(h){console.error("Failed to fetch wishlist:",h)}finally{n(!1)}},d=h=>{t(x=>x.filter(P=>P._id!==h)),B.success("Removed from wishlist")},f=h=>{B.success("Added to cart")},g=h=>{l(`/products/${h}`)},y=h=>{console.log("Pre-booking product:",h)};return e.jsx(ts,{children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(ny,{level:2,style:{marginBottom:"0.5rem"},children:"‚ù§Ô∏è My Wishlist"}),e.jsx(oy,{children:"Save your favorite products and track price changes."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Items",value:c.totalItems,prefix:e.jsx(ws,{style:{color:"#f5222d"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Value",value:c.totalValue,prefix:e.jsx(kt,{style:{color:"#52c41a"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"On Sale",value:c.onSale,prefix:e.jsx(ir,{style:{color:"#fa8c16"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"New Items",value:c.newItems,prefix:e.jsx(Ze,{style:{color:"#1890ff"}})})})})]}),s.length===0?e.jsx(V,{children:e.jsx(Ue,{image:Ue.PRESENTED_IMAGE_SIMPLE,description:"Your wishlist is empty",style:{padding:"3rem 0"},children:e.jsx(L,{type:"primary",onClick:()=>l("/products"),children:"Browse Products"})})}):e.jsxs("div",{children:[e.jsx(V,{style:{marginBottom:"2rem"},children:e.jsxs(ce,{gutter:[16,16],align:"middle",children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(iy,{placeholder:"Search wishlist...",style:{width:"100%"}})}),e.jsx(W,{xs:12,sm:4,children:e.jsxs(Pe,{placeholder:"Category",style:{width:"100%"},children:[e.jsx(_s,{value:"all",children:"All Categories"}),e.jsx(_s,{value:"E-commerce",children:"E-commerce"}),e.jsx(_s,{value:"Portfolio",children:"Portfolio"}),e.jsx(_s,{value:"Blog",children:"Blog"}),e.jsx(_s,{value:"Corporate",children:"Corporate"})]})}),e.jsx(W,{xs:12,sm:4,children:e.jsxs(Pe,{placeholder:"Sort by",style:{width:"100%"},children:[e.jsx(_s,{value:"newest",children:"Newest First"}),e.jsx(_s,{value:"oldest",children:"Oldest First"}),e.jsx(_s,{value:"price-low",children:"Price: Low to High"}),e.jsx(_s,{value:"price-high",children:"Price: High to Low"}),e.jsx(_s,{value:"rating",children:"Highest Rated"})]})}),e.jsx(W,{xs:24,sm:8,style:{textAlign:"right"},children:e.jsxs(Z,{children:[e.jsx(L,{icon:e.jsx(Nd,{}),children:"Filters"}),e.jsx(L,{type:"primary",icon:e.jsx(vt,{}),children:"Add All to Cart"})]})})]})}),e.jsx(ce,{gutter:[16,16],children:s.map(h=>e.jsx(W,{xs:24,sm:12,lg:8,children:e.jsx(V,{hoverable:!0,cover:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{alt:h.product.title,src:h.product.thumbnail,style:{height:200,objectFit:"cover"}}),e.jsx("div",{style:{position:"absolute",top:8,right:8},children:e.jsx(L,{type:"text",danger:!0,icon:e.jsx(Tt,{}),onClick:()=>d(h._id),style:{background:"rgba(255,255,255,0.9)"}})}),h.product.discount>0&&e.jsx("div",{style:{position:"absolute",top:8,left:8},children:e.jsxs(le,{color:"red",children:["-",h.product.discount,"%"]})})]}),actions:[e.jsx(L,{icon:e.jsx(it,{}),onClick:()=>g(h.product._id),children:"View"},"view"),e.jsx(L,{type:"primary",icon:e.jsx(vt,{}),onClick:()=>f(h.product),children:"Add to Cart"},"cart"),e.jsx(L,{icon:e.jsx(Ze,{}),onClick:()=>y(h.product),children:"Pre-book"},"prebook")],children:e.jsx(V.Meta,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:h.product.title}),e.jsx(ws,{style:{color:"#f5222d"}})]}),description:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:8},children:h.product.shortDescription}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#52c41a"},children:["$",h.product.price]}),h.product.originalPrice>h.product.price&&e.jsxs("span",{style:{textDecoration:"line-through",color:"#999",marginLeft:8},children:["$",h.product.originalPrice]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Added: ",h.addedDate]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[h.product.rating.average," ‚≠ê (",h.product.rating.count,")"]})]})]}),h.notes&&e.jsxs("div",{style:{marginTop:8,padding:8,background:"#f5f5f5",borderRadius:4,fontSize:"12px"},children:[e.jsx("strong",{children:"Note:"})," ",h.notes]})]})})})},h._id))}),e.jsx(V,{title:"Quick Actions",style:{marginTop:"2rem"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(L,{type:"primary",icon:e.jsx(vt,{}),block:!0,children:"Add All to Cart"})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(L,{icon:e.jsx(ws,{}),block:!0,children:"Share Wishlist"})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(L,{icon:e.jsx(Tt,{}),danger:!0,block:!0,children:"Clear Wishlist"})})]})})]})]})})},{Title:Nc,Text:cs}=Fe,ly=()=>{const{user:s}=qe();if(!s)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx(Nc,{level:2,children:"Please log in to view notifications"})});const{notifications:t,unreadCount:r,loading:n,error:o,markAsRead:i,markAllAsRead:l,fetchNotifications:c}=Ul(s._id,s.role),u=async h=>{var x,P,S,M,j;try{const z=((x=h.data)==null?void 0:x.followId)||((P=h.metadata)==null?void 0:P.followId),T=((S=h.from)==null?void 0:S._id)||h.from;if(!T){B.error("Invalid follow request");return}console.log("Accepting follow request:",{followId:z,requesterId:T,notification:h});let k;if(z)try{k=await ie.post(`/follow/accept/${z}`)}catch{k=await es.acceptFollowRequest(T)}else k=await es.acceptFollowRequest(T);k.data.success?(B.success("Follow request accepted"),await i(h._id),setTimeout(()=>c(),500)):B.error(k.data.message||"Failed to accept follow request")}catch(z){console.error("Accept follow request error:",z),B.error(((j=(M=z.response)==null?void 0:M.data)==null?void 0:j.message)||"Failed to accept follow request")}},m=async h=>{var x,P,S,M,j;try{const z=((x=h.data)==null?void 0:x.followId)||((P=h.metadata)==null?void 0:P.followId),T=((S=h.from)==null?void 0:S._id)||h.from;if(!T){B.error("Invalid follow request");return}console.log("Declining follow request:",{followId:z,requesterId:T,notification:h});let k;if(z)try{k=await ie.post(`/follow/decline/${z}`)}catch{k=await es.declineFollowRequest(T)}else k=await es.declineFollowRequest(T);k.data.success?(B.success("Follow request declined"),await i(h._id),setTimeout(()=>c(),500)):B.error(k.data.message||"Failed to decline follow request")}catch(z){console.error("Decline follow request error:",z),B.error(((j=(M=z.response)==null?void 0:M.data)==null?void 0:j.message)||"Failed to decline follow request")}},d=h=>{switch(h){case"payment_success":return{icon:e.jsx(kt,{}),color:"#52c41a",bgColor:"#f6ffed"};case"prebook_confirmed":return{icon:e.jsx(Ee,{}),color:"#52c41a",bgColor:"#f6ffed"};case"prebook_rejected":return{icon:e.jsx(Or,{}),color:"#f5222d",bgColor:"#fff2f0"};case"prebook_status_update":return{icon:e.jsx(Rl,{}),color:"#1890ff",bgColor:"#e6f7ff"};case"follow_request":return{icon:e.jsx(Ks,{}),color:"#1890ff",bgColor:"#e6f7ff"};case"follow":return{icon:e.jsx(Re,{}),color:"#52c41a",bgColor:"#f6ffed"};case"follow_accepted":return{icon:e.jsx(Ee,{}),color:"#52c41a",bgColor:"#f6ffed"};default:return{icon:e.jsx(js,{}),color:"#666",bgColor:"#f5f5f5"}}},f=h=>{const x=new Date(h),S=Math.floor((new Date-x)/(1e3*60*60));return S<1?"Just now":S<24?`${S}h ago`:x.toLocaleDateString()},y={total:t.length,unread:r,paymentSuccess:t.filter(x=>x.type==="payment_success").length,prebookConfirmed:t.filter(x=>x.type==="prebook_confirmed").length,prebookRejected:t.filter(x=>x.type==="prebook_rejected").length,followRequests:t.filter(x=>x.type==="follow_request").length,follows:t.filter(x=>x.type==="follow").length,followAccepted:t.filter(x=>x.type==="follow_accepted").length};return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs(Nc,{level:2,children:[e.jsx(js,{style:{marginRight:"8px"}}),"Notifications"]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:"Total Notifications",value:y.total,prefix:e.jsx(js,{})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:"Unread",value:y.unread,valueStyle:{color:y.unread>0?"#f5222d":"#666"},prefix:e.jsx(zt,{dot:!0,color:"#f5222d"})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:"Payment Success",value:y.paymentSuccess,prefix:e.jsx(kt,{})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:"Prebook Confirmed",value:y.prebookConfirmed,prefix:e.jsx(Ee,{})})})})]}),e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(js,{}),e.jsx("span",{children:"Your Notifications"}),r>0&&e.jsx(zt,{count:r,size:"small"})]}),extra:e.jsxs(Z,{children:[r>0&&e.jsx(L,{type:"link",size:"small",onClick:l,children:"Mark all read"}),e.jsx(L,{type:"link",size:"small",icon:e.jsx(Mr,{}),onClick:c,loading:n,children:"Refresh"}),e.jsx(L,{type:"link",size:"small",onClick:async()=>{try{await co.createTest({type:"general",title:"Test Notification",message:"This is a test notification to verify the system is working!"}),B.success("Test notification created! Refreshing..."),setTimeout(()=>c(),1e3)}catch{B.error("Failed to create test notification")}},children:"Create Test"})]}),children:n?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"1rem"},children:o?e.jsxs(e.Fragment,{children:[e.jsx(cs,{type:"danger",children:o}),e.jsx("br",{}),e.jsx(cs,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Please wait while we fetch your notifications..."})]}):"Loading notifications..."})]}):o?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx(cs,{type:"danger",children:o}),e.jsx("br",{}),e.jsx(L,{onClick:c,style:{marginTop:"1rem"},children:"Try Again"})]}):t.length===0?e.jsx(Ue,{description:"No notifications yet",image:Ue.PRESENTED_IMAGE_SIMPLE}):e.jsx(Wt,{dataSource:t,renderItem:h=>{var P,S,M,j,z,T,k;const x=d(h.type);return e.jsx(Wt.Item,{style:{backgroundColor:h.read?"#fff":x.bgColor,borderLeft:`4px solid ${x.color}`,padding:"12px 16px",marginBottom:"8px",borderRadius:"6px"},actions:h.type==="follow_request"?[e.jsxs(Z,{size:"small",children:[e.jsx(L,{type:"primary",size:"small",icon:e.jsx(ur,{}),onClick:()=>u(h),children:"Accept"}),e.jsx(L,{size:"small",icon:e.jsx(sn,{}),onClick:()=>m(h),children:"Decline"})]},"actions")]:[!h.read&&e.jsx(L,{type:"text",size:"small",icon:e.jsx(ur,{}),onClick:()=>i(h._id),children:"Mark read"},"mark-read")],children:e.jsx(Wt.Item.Meta,{avatar:h.type==="follow_request"&&h.from?e.jsx(We,{src:ht(h.from),icon:e.jsx(Re,{}),size:64,style:{cursor:"pointer"},onClick:()=>{window.location.href=`/users/${h.from._id}`},children:nt(((P=h.from)==null?void 0:P.name)||"U")}):e.jsx(We,{icon:x.icon,style:{backgroundColor:x.color},size:48}),title:h.type==="follow_request"&&h.from?e.jsxs(Z,{direction:"vertical",size:0,style:{width:"100%"},children:[e.jsxs(Z,{children:[e.jsx(cs,{strong:!h.read,style:{fontSize:"14px",cursor:"pointer"},onClick:()=>{window.location.href=`/users/${h.from._id}`},children:((S=h.from)==null?void 0:S.name)||"Unknown User"}),!h.read&&e.jsx(zt,{dot:!0,color:"#f5222d"})]}),e.jsx(cs,{type:"secondary",style:{fontSize:"12px"},children:((M=h.from)==null?void 0:M.email)||((j=h.from)==null?void 0:j.username)||""})]}):e.jsxs(Z,{children:[e.jsx(cs,{strong:!h.read,children:h.title}),!h.read&&e.jsx(zt,{dot:!0,color:"#f5222d"})]}),description:e.jsxs(Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[h.type==="follow_request"?e.jsx("div",{style:{marginTop:"8px"},children:e.jsx(cs,{style:{fontSize:"14px"},children:h.message||"wants to follow you"})}):e.jsx(cs,{children:h.message}),h.type!=="follow_request"&&h.from&&e.jsx("div",{style:{padding:"8px",background:"#f5f5f5",borderRadius:"6px",marginTop:"4px"},children:e.jsxs(Z,{children:[e.jsx(We,{size:"small",src:ht(h.from),icon:e.jsx(Re,{}),children:nt(((z=h.from)==null?void 0:z.name)||"U")}),e.jsxs("div",{children:[e.jsx(cs,{strong:!0,style:{fontSize:"13px",display:"block"},children:((T=h.from)==null?void 0:T.name)||"Unknown User"}),((k=h.from)==null?void 0:k.email)&&e.jsx(cs,{type:"secondary",style:{fontSize:"11px"},children:h.from.email})]})]})}),e.jsxs(Z,{children:[e.jsx(le,{color:x.color,size:"small",children:h.type.replace("_"," ").toUpperCase()}),e.jsx(cs,{type:"secondary",style:{fontSize:"12px"},children:f(h.createdAt)})]}),h.data&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[h.data.productTitle&&e.jsxs(cs,{type:"secondary",children:["Product: ",h.data.productTitle]}),h.data.amount&&e.jsxs(cs,{type:"secondary",children:["Amount: ‚Çπ",h.data.amount]})]})]})})})}})})]})},{Title:cy,Paragraph:dy}=Fe,{TextArea:uy}=ue,hy=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(null),[o,i]=p.useState([]),[l,c]=p.useState(""),[u,m]=p.useState(!1),{user:d,isAuthenticated:f}=qe();Je();const[g,y]=p.useState({totalConversations:8,unreadMessages:12,onlineContacts:3,totalMessages:156});p.useEffect(()=>{h()},[]);const h=async()=>{m(!0);try{t([{_id:"1",contact:{name:"Sarah Johnson",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah",role:"admin",online:!0},lastMessage:{text:"Thank you for your order! It will be shipped within 2 business days.",timestamp:"2024-01-15 10:30:00",sender:"admin",read:!1},unreadCount:2,status:"active"},{_id:"2",contact:{name:"Mike Chen",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mike",role:"support",online:!1},lastMessage:{text:"I can help you with any technical questions about our products.",timestamp:"2024-01-14 16:45:00",sender:"support",read:!0},unreadCount:0,status:"active"},{_id:"3",contact:{name:"Emily Davis",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emily",role:"sales",online:!0},lastMessage:{text:"Would you like to know more about our premium templates?",timestamp:"2024-01-13 14:20:00",sender:"sales",read:!0},unreadCount:0,status:"active"},{_id:"4",contact:{name:"John Smith",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",role:"user",online:!1},lastMessage:{text:"Thanks for the recommendation!",timestamp:"2024-01-12 11:00:00",sender:"user",read:!0},unreadCount:0,status:"archived"}])}catch(T){console.error("Failed to fetch conversations:",T)}finally{m(!1)}},x=async T=>{i([{_id:"1",text:"Hello! How can I help you today?",sender:"admin",timestamp:"2024-01-15 09:00:00",read:!0},{_id:"2",text:"I have a question about the E-commerce template.",sender:"user",timestamp:"2024-01-15 09:15:00",read:!0},{_id:"3",text:"Sure! What would you like to know?",sender:"admin",timestamp:"2024-01-15 09:16:00",read:!0},{_id:"4",text:"Does it include payment integration?",sender:"user",timestamp:"2024-01-15 09:17:00",read:!0},{_id:"5",text:"Yes, it includes Razorpay integration and supports multiple payment methods.",sender:"admin",timestamp:"2024-01-15 09:18:00",read:!0},{_id:"6",text:"Thank you for your order! It will be shipped within 2 business days.",sender:"admin",timestamp:"2024-01-15 10:30:00",read:!1}])},P=T=>{n(T),x(T._id)},S=()=>{if(l.trim()){const T={_id:Date.now().toString(),text:l,sender:"user",timestamp:new Date().toLocaleString(),read:!0};i(k=>[...k,T]),c("")}},M=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),S())},j=T=>T.online?e.jsx(zt,{status:"success",text:"Online"}):e.jsx(zt,{status:"default",text:"Offline"}),z=T=>({admin:"red",support:"blue",sales:"green",user:"default"})[T]||"default";return e.jsx(ts,{children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(cy,{level:2,style:{marginBottom:"0.5rem"},children:"üí¨ Messages"}),e.jsx(dy,{children:"Chat with our support team and get help with your orders."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Conversations",value:g.totalConversations,prefix:e.jsx(Mt,{style:{color:"#1890ff"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Unread Messages",value:g.unreadMessages,prefix:e.jsx(zt,{count:g.unreadMessages,children:e.jsx(Mt,{style:{color:"#f5222d"}})})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Online Contacts",value:g.onlineContacts,prefix:e.jsx(Re,{style:{color:"#52c41a"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Messages",value:g.totalMessages,prefix:e.jsx(Mt,{style:{color:"#722ed1"}})})})})]}),e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,lg:8,children:e.jsxs(V,{title:"Conversations",extra:e.jsx(Kt,{}),children:[e.jsx(ue,{placeholder:"Search conversations...",style:{marginBottom:16},prefix:e.jsx(Kt,{})}),s.length===0?e.jsx(Ue,{image:Ue.PRESENTED_IMAGE_SIMPLE,description:"No conversations yet",style:{padding:"2rem 0"}}):e.jsx(Wt,{dataSource:s,loading:u,renderItem:T=>e.jsx(Wt.Item,{style:{cursor:"pointer",backgroundColor:(r==null?void 0:r._id)===T._id?"#e6f7ff":"#fff",border:(r==null?void 0:r._id)===T._id?"1px solid #1890ff":"1px solid #f0f0f0",borderRadius:8,marginBottom:8,padding:12},onClick:()=>P(T),children:e.jsx(Wt.Item.Meta,{avatar:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(We,{src:T.contact.avatar,icon:e.jsx(Re,{})}),T.contact.online&&e.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:12,height:12,backgroundColor:"#52c41a",borderRadius:"50%",border:"2px solid #fff"}})]}),title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:T.contact.name}),e.jsxs(Z,{children:[e.jsx(le,{color:z(T.contact.role),children:T.contact.role}),T.unreadCount>0&&e.jsx(zt,{count:T.unreadCount})]})]}),description:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:T.lastMessage.text}),e.jsx("div",{style:{fontSize:"11px",color:"#999",marginTop:4},children:T.lastMessage.timestamp})]})})})})]})}),e.jsx(W,{xs:24,lg:16,children:r?e.jsxs(V,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(Z,{children:[e.jsx(We,{src:r.contact.avatar,icon:e.jsx(Re,{})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:r.contact.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:j(r.contact)})]})]}),e.jsxs(Z,{children:[e.jsx(L,{size:"small",icon:e.jsx(Ss,{}),children:"Call"}),e.jsx(L,{size:"small",icon:e.jsx(Eo,{}),children:"Video"}),e.jsx(L,{size:"small",icon:e.jsx(nn,{}),children:"More"})]})]}),style:{height:"600px",display:"flex",flexDirection:"column"},styles:{body:{flex:1,display:"flex",flexDirection:"column"}},children:[e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px 0",maxHeight:"400px"},children:o.map(T=>e.jsx("div",{style:{display:"flex",justifyContent:T.sender==="user"?"flex-end":"flex-start",marginBottom:16},children:e.jsxs("div",{style:{maxWidth:"70%",padding:"8px 12px",borderRadius:"12px",backgroundColor:T.sender==="user"?"#1890ff":"#f5f5f5",color:T.sender==="user"?"#fff":"#000",wordWrap:"break-word"},children:[e.jsx("div",{children:T.text}),e.jsxs("div",{style:{fontSize:"11px",opacity:.7,marginTop:4,textAlign:"right"},children:[T.timestamp,T.sender==="user"&&e.jsx("span",{style:{marginLeft:4},children:T.read?e.jsx(Ee,{}):e.jsx(Ze,{})})]})]})},T._id))}),e.jsx("div",{style:{borderTop:"1px solid #f0f0f0",paddingTop:16},children:e.jsxs(Z.Compact,{style:{width:"100%"},children:[e.jsx(uy,{value:l,onChange:T=>c(T.target.value),onKeyPress:M,placeholder:"Type your message...",autoSize:{minRows:1,maxRows:4},style:{flex:1}}),e.jsx(L,{type:"primary",icon:e.jsx(lr,{}),onClick:S,disabled:!l.trim(),children:"Send"})]})})]}):e.jsx(V,{style:{height:"600px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ue,{image:Ue.PRESENTED_IMAGE_SIMPLE,description:"Select a conversation to start chatting",style:{padding:"3rem 0"}})})})]})]})})},{Title:py,Paragraph:fy}=Fe,{TextArea:gy}=ue,{Option:Yn}=Pe,my=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,c]=p.useState(null),[u]=G.useForm(),{user:m,isAuthenticated:d}=qe();Je();const[f,g]=p.useState({totalReviews:12,averageRating:4.6,helpfulReviews:8,pendingReviews:2});p.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{t([{_id:"1",product:{_id:"1",title:"E-commerce Website Template",thumbnail:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=100&h=100&fit=crop"},rating:5,title:"Excellent Template!",content:"This template is exactly what I needed for my online store. The design is modern and the functionality is perfect. Highly recommended!",helpful:12,notHelpful:1,status:"published",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{_id:"2",product:{_id:"2",title:"Portfolio Website Template",thumbnail:"https://images.unsplash.com/photo-1522199755839-e2ba9b43d813?w=100&h=100&fit=crop"},rating:4,title:"Good Design",content:"The portfolio template has a clean design and is easy to customize. The code is well-structured and documented.",helpful:8,notHelpful:0,status:"published",createdAt:"2024-01-14",updatedAt:"2024-01-14"},{_id:"3",product:{_id:"3",title:"Blog Website Template",thumbnail:"https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=100&h=100&fit=crop"},rating:3,title:"Could be better",content:"The template is okay but needs some improvements in the mobile responsiveness. Overall decent quality.",helpful:3,notHelpful:2,status:"pending",createdAt:"2024-01-13",updatedAt:"2024-01-13"},{_id:"4",product:{_id:"4",title:"Corporate Website Template",thumbnail:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=100&h=100&fit=crop"},rating:5,title:"Perfect for Business",content:"This corporate template is professional and perfect for our business needs. The customer support was also excellent.",helpful:15,notHelpful:0,status:"published",createdAt:"2024-01-12",updatedAt:"2024-01-12"}])}catch(z){console.error("Failed to fetch reviews:",z)}finally{n(!1)}},h=z=>{c(z),u.setFieldsValue({rating:z.rating,title:z.title,content:z.content}),i(!0)},x=z=>{Ke.confirm({title:"Are you sure you want to delete this review?",content:"This action cannot be undone.",onOk:()=>{t(T=>T.filter(k=>k._id!==z)),B.success("Review deleted successfully")}})},P=(z,T)=>{t(k=>k.map(R=>R._id===z?{...R,helpful:T?R.helpful+1:R.helpful,notHelpful:T?R.notHelpful:R.notHelpful+1}:R)),B.success(T?"Marked as helpful":"Marked as not helpful")},S=async z=>{try{if(l)t(T=>T.map(k=>k._id===l._id?{...k,...z,updatedAt:new Date().toISOString().split("T")[0]}:k)),B.success("Review updated successfully");else{const T={_id:Date.now().toString(),product:{_id:"1",title:"Sample Product",thumbnail:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=100&h=100&fit=crop"},...z,helpful:0,notHelpful:0,status:"pending",createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]};t(k=>[...k,T]),B.success("Review submitted successfully")}i(!1),u.resetFields()}catch{B.error("Failed to save review")}},M=z=>({published:"green",pending:"orange",rejected:"red"})[z]||"default",j=z=>({published:e.jsx(Ee,{}),pending:e.jsx(Ze,{}),rejected:e.jsx(Tt,{})})[z]||e.jsx(Ze,{});return e.jsx(ts,{children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(py,{level:2,style:{marginBottom:"0.5rem"},children:"‚≠ê My Reviews"}),e.jsx(fy,{children:"Manage your product reviews and ratings."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Reviews",value:f.totalReviews,prefix:e.jsx(ir,{style:{color:"#1890ff"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Average Rating",value:f.averageRating,prefix:e.jsx(ir,{style:{color:"#fa8c16"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Helpful Reviews",value:f.helpfulReviews,prefix:e.jsx(ia,{style:{color:"#52c41a"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Pending Reviews",value:f.pendingReviews,prefix:e.jsx(Ze,{style:{color:"#f5222d"}})})})})]}),e.jsx(V,{title:"My Reviews",extra:e.jsxs(Z,{children:[e.jsx(ue,{placeholder:"Search reviews...",style:{width:200},prefix:e.jsx(Kt,{})}),e.jsxs(Pe,{placeholder:"Filter by status",style:{width:150},children:[e.jsx(Yn,{value:"all",children:"All Reviews"}),e.jsx(Yn,{value:"published",children:"Published"}),e.jsx(Yn,{value:"pending",children:"Pending"}),e.jsx(Yn,{value:"rejected",children:"Rejected"})]}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>i(!0),children:"Write Review"})]}),children:s.length===0?e.jsx(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE,description:"No reviews yet",style:{padding:"3rem 0"},children:e.jsx(L,{type:"primary",onClick:()=>i(!0),children:"Write Your First Review"})}):e.jsx(Wt,{dataSource:s,loading:r,renderItem:z=>e.jsx(Wt.Item,{style:{border:"1px solid #f0f0f0",borderRadius:8,marginBottom:16,padding:16},actions:[e.jsx(L,{size:"small",icon:e.jsx(qt,{}),onClick:()=>h(z),children:"Edit"}),e.jsx(L,{size:"small",danger:!0,icon:e.jsx(Tt,{}),onClick:()=>x(z._id),children:"Delete"})],children:e.jsx(Wt.Item.Meta,{avatar:e.jsx("img",{src:z.product.thumbnail,alt:z.product.title,style:{width:60,height:60,objectFit:"cover",borderRadius:4}}),title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:z.product.title}),e.jsx("div",{style:{fontSize:"14px",color:"#666"},children:z.title})]}),e.jsxs(Z,{children:[e.jsx(_r,{disabled:!0,value:z.rating}),e.jsx(le,{color:M(z.status),icon:j(z.status),children:z.status})]})]}),description:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:12},children:z.content}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[z.createdAt," ",z.updatedAt!==z.createdAt&&`(Updated: ${z.updatedAt})`]}),e.jsxs(Z,{children:[e.jsxs(L,{size:"small",type:"text",icon:e.jsx(ia,{}),onClick:()=>P(z._id,!0),children:["Helpful (",z.helpful,")"]}),e.jsxs(L,{size:"small",type:"text",icon:e.jsx(_d,{}),onClick:()=>P(z._id,!1),children:["Not Helpful (",z.notHelpful,")"]})]})]})]})})})})}),e.jsx(Ke,{title:l?"Edit Review":"Write Review",open:o,onCancel:()=>i(!1),footer:null,width:600,children:e.jsxs(G,{form:u,layout:"vertical",onFinish:S,children:[e.jsx(G.Item,{name:"rating",label:"Rating",rules:[{required:!0,message:"Please select a rating"}],children:e.jsx(_r,{})}),e.jsx(G.Item,{name:"title",label:"Review Title",rules:[{required:!0,message:"Please enter a title"}],children:e.jsx(ue,{placeholder:"Enter review title"})}),e.jsx(G.Item,{name:"content",label:"Review Content",rules:[{required:!0,message:"Please enter review content"}],children:e.jsx(gy,{rows:4,placeholder:"Share your experience with this product..."})}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",children:l?"Update Review":"Submit Review"}),e.jsx(L,{onClick:()=>i(!1),children:"Cancel"})]})})]})})]})})};var gl=function(s,t){return gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},gl(s,t)};function xy(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");gl(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nt=function(){return Nt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Nt.apply(this,arguments)};var Mc=!1,Pr,ml,xl,fo,go,Ou,mo,yl,jl,bl,Fu,vl,wl,Nu,Mu;function rs(){if(!Mc){Mc=!0;var s=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(s),r=/(Mac OS X)|(Windows)|(Linux)/.exec(s);if(vl=/\b(iPhone|iP[ao]d)/.exec(s),wl=/\b(iP[ao]d)/.exec(s),bl=/Android/i.exec(s),Nu=/FBAN\/\w+;/i.exec(s),Mu=/Mobile/i.exec(s),Fu=!!/Win64/.exec(s),t){Pr=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Pr&&document&&document.documentMode&&(Pr=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(s);Ou=n?parseFloat(n[1])+4:Pr,ml=t[2]?parseFloat(t[2]):NaN,xl=t[3]?parseFloat(t[3]):NaN,fo=t[4]?parseFloat(t[4]):NaN,fo?(t=/(?:Chrome\/(\d+\.\d+))/.exec(s),go=t&&t[1]?parseFloat(t[1]):NaN):go=NaN}else Pr=ml=xl=go=fo=NaN;if(r){if(r[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(s);mo=o?parseFloat(o[1].replace("_",".")):!0}else mo=!1;yl=!!r[2],jl=!!r[3]}else mo=yl=jl=!1}}var Sl={ie:function(){return rs()||Pr},ieCompatibilityMode:function(){return rs()||Ou>Pr},ie64:function(){return Sl.ie()&&Fu},firefox:function(){return rs()||ml},opera:function(){return rs()||xl},webkit:function(){return rs()||fo},safari:function(){return Sl.webkit()},chrome:function(){return rs()||go},windows:function(){return rs()||yl},osx:function(){return rs()||mo},linux:function(){return rs()||jl},iphone:function(){return rs()||vl},mobile:function(){return rs()||vl||wl||bl||Mu},nativeApp:function(){return rs()||Nu},android:function(){return rs()||bl},ipad:function(){return rs()||wl}},yy=Sl,jy=!!(typeof window<"u"&&window.document&&window.document.createElement),by={canUseDOM:jy},vy=by,$u=vy,Bu;$u.canUseDOM&&(Bu=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function wy(s,t){if(!$u.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+s,n=r in document;if(!n){var o=document.createElement("div");o.setAttribute(r,"return;"),n=typeof o[r]=="function"}return!n&&Bu&&s==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var Sy=wy,ky=yy,Cy=Sy,$c=10,Bc=40,Dc=800;function Du(s){var t=0,r=0,n=0,o=0;return"detail"in s&&(r=s.detail),"wheelDelta"in s&&(r=-s.wheelDelta/120),"wheelDeltaY"in s&&(r=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(t=-s.wheelDeltaX/120),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(t=r,r=0),n=t*$c,o=r*$c,"deltaY"in s&&(o=s.deltaY),"deltaX"in s&&(n=s.deltaX),(n||o)&&s.deltaMode&&(s.deltaMode==1?(n*=Bc,o*=Bc):(n*=Dc,o*=Dc)),n&&!t&&(t=n<1?-1:1),o&&!r&&(r=o<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:o}}Du.getEventType=function(){return ky.firefox()?"DOMMouseScroll":Cy("wheel")?"wheel":"mousewheel"};var Ay=Du,Py=Ay;const Ty=rh(Py);function Ry(s,t,r,n,o,i){i===void 0&&(i=0);var l=ln(s,t,i),c=l.width,u=l.height,m=Math.min(c,r),d=Math.min(u,n);return m>d*o?{width:d*o,height:d}:{width:m,height:m/o}}function Iy(s){return s.width>s.height?s.width/s.naturalWidth:s.height/s.naturalHeight}function kn(s,t,r,n,o){o===void 0&&(o=0);var i=ln(t.width,t.height,o),l=i.width,c=i.height;return{x:Uc(s.x,l,r.width,n),y:Uc(s.y,c,r.height,n)}}function Uc(s,t,r,n){var o=t*n/2-r/2;return Uo(s,-o,o)}function Lc(s,t){return Math.sqrt(Math.pow(s.y-t.y,2)+Math.pow(s.x-t.x,2))}function Wc(s,t){return Math.atan2(t.y-s.y,t.x-s.x)*180/Math.PI}function zy(s,t,r,n,o,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var c=l?Ey:_y,u=ln(t.width,t.height,i),m=ln(t.naturalWidth,t.naturalHeight,i),d={x:c(100,((u.width-r.width/o)/2-s.x/o)/u.width*100),y:c(100,((u.height-r.height/o)/2-s.y/o)/u.height*100),width:c(100,r.width/u.width*100/o),height:c(100,r.height/u.height*100/o)},f=Math.round(c(m.width,d.width*m.width/100)),g=Math.round(c(m.height,d.height*m.height/100)),y=m.width>=m.height*n,h=y?{width:Math.round(g*n),height:g}:{width:f,height:Math.round(f/n)},x=Nt(Nt({},h),{x:Math.round(c(m.width-h.width,d.x*m.width/100)),y:Math.round(c(m.height-h.height,d.y*m.height/100))});return{croppedAreaPercentages:d,croppedAreaPixels:x}}function Ey(s,t){return Math.min(s,Math.max(0,t))}function _y(s,t){return t}function Oy(s,t,r,n,o,i){var l=ln(t.width,t.height,r),c=Uo(n.width/l.width*(100/s.width),o,i),u={x:c*l.width/2-n.width/2-l.width*c*(s.x/100),y:c*l.height/2-n.height/2-l.height*c*(s.y/100)};return{crop:u,zoom:c}}function Fy(s,t,r){var n=Iy(t);return r.height>r.width?r.height/(s.height*n):r.width/(s.width*n)}function Ny(s,t,r,n,o,i){r===void 0&&(r=0);var l=ln(t.naturalWidth,t.naturalHeight,r),c=Uo(Fy(s,t,n),o,i),u=n.height>n.width?n.height/s.height:n.width/s.width,m={x:((l.width-s.width)/2-s.x)*u,y:((l.height-s.height)/2-s.y)*u};return{crop:m,zoom:c}}function qc(s,t){return{x:(t.x+s.x)/2,y:(t.y+s.y)/2}}function My(s){return s*Math.PI/180}function ln(s,t,r){var n=My(r);return{width:Math.abs(Math.cos(n)*s)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*s)+Math.abs(Math.cos(n)*t)}}function Uo(s,t,r){return Math.min(Math.max(s,t),r)}function Kn(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return s.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var $y=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,By=1,Dy=3,Uy=1,Ly=function(s){xy(t,s);function t(){var r=s!==null&&s.apply(this,arguments)||this;return r.cropperRef=p.createRef(),r.imageRef=p.createRef(),r.videoRef=p.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(o){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.previousCropSize=n,r.emitCropData(),r.setInitialCrop(n),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var o=Oy(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=o.crop,l=o.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(l)}else if(r.props.initialCroppedAreaPixels){var c=Ny(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=c.crop,l=c.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(l)}},r.computeSizes=function(){var n,o,i,l,c,u,m=r.imageRef.current||r.videoRef.current;if(m&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var d=r.containerRect.width/r.containerRect.height,f=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,g=((i=r.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=r.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,y=m.offsetWidth<f||m.offsetHeight<g,h=f/g,x=void 0;if(y)switch(r.state.mediaObjectFit){default:case"contain":x=d>h?{width:r.containerRect.height*h,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/h};break;case"horizontal-cover":x={width:r.containerRect.width,height:r.containerRect.width/h};break;case"vertical-cover":x={width:r.containerRect.height*h,height:r.containerRect.height};break}else x={width:m.offsetWidth,height:m.offsetHeight};r.mediaSize=Nt(Nt({},x),{naturalWidth:f,naturalHeight:g}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var P=r.props.cropSize?r.props.cropSize:Ry(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((c=r.state.cropSize)===null||c===void 0?void 0:c.height)!==P.height||((u=r.state.cropSize)===null||u===void 0?void 0:u.width)!==P.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(P),r.setState({cropSize:P},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(P),P}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(t.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(t.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(t.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var o=t.getMousePoint(n),i=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(i,o,{shouldUpdatePosition:!0}),r.props.onRotationChange){var l=r.gestureRotationStart+n.rotation;r.props.onRotationChange(l)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var o,i,l=n.x,c=n.y;r.dragStartPosition={x:l,y:c},r.dragStartCrop=Nt({},r.props.crop),(i=(o=r.props).onInteractionStart)===null||i===void 0||i.call(o)},r.onDrag=function(n){var o=n.x,i=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(o===void 0||i===void 0)){var l=o-r.dragStartPosition.x,c=i-r.dragStartPosition.y,u={x:r.dragStartCrop.x+l,y:r.dragStartCrop.y+c},m=r.props.restrictPosition?kn(u,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):u;r.props.onCropChange(m)}}))},r.onDragStopped=function(){var n,o;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(o=(n=r.props).onInteractionEnd)===null||o===void 0||o.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var o=t.getMousePoint(n),i=Ty(n).pixelY,l=r.props.zoom-i*r.props.zoomSpeed/200;r.setNewZoom(l,o,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var c,u;return(u=(c=r.props).onInteractionStart)===null||u===void 0?void 0:u.call(c)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var c,u;return(u=(c=r.props).onInteractionEnd)===null||u===void 0?void 0:u.call(c)})},250)}},r.getPointOnContainer=function(n,o){var i=n.x,l=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(i-o.x),y:r.containerRect.height/2-(l-o.y)}},r.getPointOnMedia=function(n){var o=n.x,i=n.y,l=r.props,c=l.crop,u=l.zoom;return{x:(o+c.x)/u,y:(i+c.y)/u}},r.setNewZoom=function(n,o,i){var l=i===void 0?{}:i,c=l.shouldUpdatePosition,u=c===void 0?!0:c;if(!(!r.state.cropSize||!r.props.onZoomChange)){var m=Uo(n,r.props.minZoom,r.props.maxZoom);if(u){var d=r.getPointOnContainer(o,r.containerPosition),f=r.getPointOnMedia(d),g={x:f.x*m-d.x,y:f.y*m-d.y},y=r.props.restrictPosition?kn(g,r.mediaSize,r.state.cropSize,m,r.props.rotation):g;r.props.onCropChange(y)}r.props.onZoomChange(m)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?kn(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return zy(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var o=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(o,i),r.props.onCropAreaChange&&r.props.onCropAreaChange(o,i)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var o=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(o,i)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var n=r.props.crop;if(r.isInitialized&&r.previousCropSize){var o=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(o){var i=r.state.cropSize.width/r.previousCropSize.width,l=r.state.cropSize.height/r.previousCropSize.height;n={x:r.props.crop.x*i,y:r.props.crop.y*l}}}var c=r.props.restrictPosition?kn(n,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):n;r.previousCropSize=r.state.cropSize,r.props.onCropChange(c),r.emitCropData()}},r.onKeyDown=function(n){var o,i,l=r.props,c=l.crop,u=l.onCropChange,m=l.keyboardStep,d=l.zoom,f=l.rotation,g=m;if(r.state.cropSize){n.shiftKey&&(g*=.2);var y=Nt({},c);switch(n.key){case"ArrowUp":y.y-=g,n.preventDefault();break;case"ArrowDown":y.y+=g,n.preventDefault();break;case"ArrowLeft":y.x-=g,n.preventDefault();break;case"ArrowRight":y.x+=g,n.preventDefault();break;default:return}r.props.restrictPosition&&(y=kn(y,r.mediaSize,r.state.cropSize,d,f)),n.repeat||(i=(o=r.props).onInteractionStart)===null||i===void 0||i.call(o),u(y)}},r.onKeyUp=function(n){var o,i;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(i=(o=r.props).onInteractionEnd)===null||i===void 0||i.call(o)},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=$y,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var n,o,i,l,c,u,m,d,f;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((i=r.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((c=r.crop)===null||c===void 0?void 0:c.x)!==((u=this.props.crop)===null||u===void 0?void 0:u.x)||((m=r.crop)===null||m===void 0?void 0:m.y)!==((d=this.props.crop)===null||d===void 0?void 0:d.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var g=this.getObjectFit();g!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:g},this.computeSizes)},t.prototype.getAspect=function(){var r=this.props,n=r.cropSize,o=r.aspect;return n?n.width/n.height:o},t.prototype.getObjectFit=function(){var r,n,o,i;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,u=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,m=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,d=u/m;return d<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(r){var n=t.getTouchPoint(r.touches[0]),o=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=Lc(n,o),this.lastPinchRotation=Wc(n,o),this.onDragStart(qc(n,o))},t.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var o=t.getTouchPoint(r.touches[0]),i=t.getTouchPoint(r.touches[1]),l=qc(o,i);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=Lc(o,i),u=n.props.zoom*(c/n.lastPinchDistance);n.setNewZoom(u,l,{shouldUpdatePosition:!1}),n.lastPinchDistance=c;var m=Wc(o,i),d=n.props.rotation+(m-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(d),n.lastPinchRotation=m})}},t.prototype.render=function(){var r=this,n,o=this.props,i=o.image,l=o.video,c=o.mediaProps,u=o.cropperProps,m=o.transform,d=o.crop,f=d.x,g=d.y,y=o.rotation,h=o.zoom,x=o.cropShape,P=o.showGrid,S=o.roundCropAreaPixels,M=o.style,j=M.containerStyle,z=M.cropAreaStyle,T=M.mediaStyle,k=o.classes,R=k.containerClassName,w=k.cropAreaClassName,b=k.mediaClassName,C=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return p.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(F){return r.containerRef=F},"data-testid":"container",style:j,className:Kn("reactEasyCrop_Container",R)},i?p.createElement("img",Nt({alt:"",className:Kn("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",b)},c,{src:i,ref:this.imageRef,style:Nt(Nt({},T),{transform:m||"translate(".concat(f,"px, ").concat(g,"px) rotate(").concat(y,"deg) scale(").concat(h,")")}),onLoad:this.onMediaLoad})):l&&p.createElement("video",Nt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Kn("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",b)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Nt(Nt({},T),{transform:m||"translate(".concat(f,"px, ").concat(g,"px) rotate(").concat(y,"deg) scale(").concat(h,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(O){return p.createElement("source",Nt({key:O.src},O))})),this.state.cropSize&&p.createElement("div",Nt({ref:this.cropperRef,style:Nt(Nt({},z),{width:S?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:S?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Kn("reactEasyCrop_CropArea",x==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",w)},u)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Dy,minZoom:By,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Uy},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(p.Component);const Wy=s=>new Promise((t,r)=>{const n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",o=>r(o)),n.setAttribute("crossOrigin","anonymous"),n.src=s}),Uu=s=>s*Math.PI/180,qy=(s,t,r)=>{const n=Uu(r);return{width:Math.abs(Math.cos(n)*s)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*s)+Math.abs(Math.cos(n)*t)}},Hy=async(s,t,r=0,n=!1)=>{const o=await Wy(s),i=document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("No 2d context");if(r!==0){const y=Uu(r),{width:h,height:x}=qy(o.width,o.height,r);i.width=h,i.height=x,l.translate(h/2,x/2),l.rotate(y),l.translate(-o.width/2,-o.height/2),l.drawImage(o,0,0)}else i.width=o.width,i.height=o.height,l.drawImage(o,0,0);const c=document.createElement("canvas"),u=c.getContext("2d");if(!u)throw new Error("No 2d context for cropped canvas");c.width=t.width,c.height=t.height;const m=Math.max(0,Math.min(t.x,i.width-t.width)),d=Math.max(0,Math.min(t.y,i.height-t.height)),f=Math.min(t.width,i.width-m),g=Math.min(t.height,i.height-d);try{u.drawImage(i,m,d,f,g,0,0,t.width,t.height)}catch(y){throw console.error("Error drawing cropped image:",y),new Error("Failed to crop image: "+y.message)}return n&&(u.globalCompositeOperation="destination-in",u.beginPath(),u.arc(t.width/2,t.height/2,Math.min(t.width,t.height)/2,0,Math.PI*2),u.fill()),new Promise((y,h)=>{c.toBlob(x=>{if(!x){h(new Error("Canvas is empty"));return}const P=URL.createObjectURL(x);y(P)},"image/jpeg",.9)})},Vy=({visible:s,imageSrc:t,onCancel:r,onSave:n,aspect:o=1,circularCrop:i=!1})=>{const[l,c]=p.useState({x:0,y:0}),[u,m]=p.useState(1),[d,f]=p.useState(0),[g,y]=p.useState(null),[h,x]=p.useState(100),[P,S]=p.useState(100),[M,j]=p.useState(100),[z,T]=p.useState(!1);p.useEffect(()=>{t&&(c({x:0,y:0}),m(1),f(0),x(100),S(100),j(100),y(null))},[t]);const k=p.useCallback((O,F)=>{F&&y(F)},[]),R=O=>{f(F=>O==="left"?F-90:F+90)},w=()=>{f(0),m(1),x(100),S(100),j(100),c({x:0,y:0})},b=O=>new Promise((F,N)=>{const E=document.createElement("canvas"),_=E.getContext("2d"),A=new Image;A.crossOrigin="anonymous",A.onload=()=>{E.width=A.width,E.height=A.height,_.filter=`
          brightness(${h}%) 
          contrast(${P}%) 
          saturate(${M}%)
        `,_.drawImage(A,0,0),E.toBlob(v=>{if(!v){N(new Error("Failed to apply filters"));return}const H=URL.createObjectURL(v);F(H)},"image/jpeg",.9)},A.onerror=()=>N(new Error("Failed to load image")),A.src=O}),C=async()=>{if(!t){B.error("Please select an image first");return}if(!g){B.warning("Please wait for image to load completely");return}try{T(!0),console.log("Starting image processing...",{hasImageSrc:!!t,croppedAreaPixels:g,rotation:d,brightness:h,contrast:P,saturation:M});let O=t;(h!==100||P!==100||M!==100)&&(console.log("Applying color filters..."),O=await b(t),console.log("Color filters applied")),console.log("Cropping and rotating image...");const F=await Hy(O,g,d,i);console.log("Image cropped successfully"),console.log("Converting to file...");const N=await fetch(F);if(!N.ok)throw new Error("Failed to fetch cropped image");const E=await N.blob();if(!E||E.size===0)throw new Error("Cropped image is empty");const _=new File([E],"profile-image.jpg",{type:"image/jpeg"});console.log("File created:",_.size,"bytes"),n(_,F)}catch(O){console.error("Error processing image:",O),console.error("Error details:",{message:O.message,stack:O.stack,name:O.name}),B.error(`Failed to process image: ${O.message||"Unknown error"}`)}finally{T(!1)}};return e.jsxs(Ke,{open:s,onCancel:r,title:"Edit Profile Image",width:800,footer:null,styles:{body:{padding:"24px"}},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("div",{style:{position:"relative",width:"100%",height:"400px",background:"#f0f0f0",borderRadius:"8px",overflow:"hidden"},children:t&&e.jsx(Ly,{image:t,crop:l,zoom:u,rotation:d,aspect:o,onCropChange:c,onZoomChange:m,onCropComplete:k,cropShape:i?"round":"rect",style:{containerStyle:{width:"100%",height:"100%",position:"relative"}}})})}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(km,{}),e.jsx("span",{style:{fontWeight:500},children:"Zoom"}),e.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["(",Math.round(u*100),"%)"]})]}),e.jsx(Jr,{min:1,max:3,step:.1,value:u,onChange:m,tooltip:{formatter:O=>`${Math.round(O*100)}%`}})]})}),e.jsx(W,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Kg,{}),e.jsx("span",{style:{fontWeight:500},children:"Rotation"}),e.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["(",d,"¬∞)"]})]}),e.jsxs(Z,{children:[e.jsx(L,{icon:e.jsx(bg,{}),onClick:()=>R("left"),size:"small",children:"Left"}),e.jsx(L,{icon:e.jsx(wg,{}),onClick:()=>R("right"),size:"small",children:"Right"}),e.jsx(L,{onClick:w,size:"small",children:"Reset"})]})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:500},children:"Brightness"}),e.jsxs("span",{style:{color:"#666",fontSize:"12px",marginLeft:"8px"},children:["(",h,"%)"]})]}),e.jsx(Jr,{min:0,max:200,value:h,onChange:x,tooltip:{formatter:O=>`${O}%`}})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:500},children:"Contrast"}),e.jsxs("span",{style:{color:"#666",fontSize:"12px",marginLeft:"8px"},children:["(",P,"%)"]})]}),e.jsx(Jr,{min:0,max:200,value:P,onChange:S,tooltip:{formatter:O=>`${O}%`}})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:500},children:"Saturation"}),e.jsxs("span",{style:{color:"#666",fontSize:"12px",marginLeft:"8px"},children:["(",M,"%)"]})]}),e.jsx(Jr,{min:0,max:200,value:M,onChange:j,tooltip:{formatter:O=>`${O}%`}})]})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"24px"},children:[e.jsx(L,{onClick:r,icon:e.jsx(sn,{}),children:"Cancel"}),e.jsx(L,{type:"primary",onClick:C,icon:e.jsx(ur,{}),loading:z,children:"Save Changes"})]})]})},{Title:Gy,Paragraph:Jy,Text:tr}=Fe,{Option:mb}=Pe,{TextArea:Yy}=ue,Ky=()=>{const[s]=G.useForm(),[t]=G.useForm(),[r]=G.useForm(),[n]=G.useForm(),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[u,m]=p.useState(!1),{user:d,isAuthenticated:f,logout:g,updateUser:y}=qe(),h=Je(),[x,P]=p.useState({name:"",email:"",phone:"",avatar:"",bio:"",location:"",website:""}),[S,M]=p.useState(!1),[j,z]=p.useState(!0),[T,k]=p.useState(!1),[R,w]=p.useState(null),[b,C]=p.useState(null);p.useEffect(()=>{console.log("üîç Settings: Component rendered, isActiveStatusVisible:",j)},[j]),p.useEffect(()=>{if(d){console.log("üñºÔ∏è Settings: User changed, loading profile data:",d);const $=d.avatarUrl||d.avatar||"",D=$&&!$.startsWith("http")?`http://localhost:7000${$}`:$,I={name:d.name||"",email:d.email||"",phone:d.phone||"",avatar:D,bio:d.bio||"",location:d.location||"",website:d.website||""};console.log("üñºÔ∏è Settings: Setting new profile data:",I),P(I),M(d.isPrivate||!1)}},[d]),p.useEffect(()=>{},[x]),p.useEffect(()=>{if(d&&t){const $={name:d.name||"",email:d.email||"",phone:d.phone||"",location:d.location||"",website:d.website||"",bio:d.bio||""},D=t.getFieldsValue();(!D.name&&!D.email||D.name!==$.name)&&t.setFieldsValue($)}},[d==null?void 0:d._id,t]),p.useEffect(()=>{(async()=>{if(d&&d._id)try{const D=await ie.get("/users/me");if(D&&D.data&&D.data.success&&D.data.data){const I=D.data.data,J=I&&(I.avatarUrl||I.avatar)||"",Q=J&&!J.startsWith("http")?`http://localhost:7000${J}`:J,te={name:I&&I.name||"",email:I&&I.email||"",phone:I&&I.phone||"",avatar:Q,bio:I&&I.bio||"",location:I&&I.location||"",website:I&&I.website||""};P(te);const ee=I&&I.activeStatusVisible!==!1;z(ee),y&&y({activeStatusVisible:ee})}else if(console.warn("üìù Settings: Invalid API response, using user context data"),d){const I=d.avatarUrl||d.avatar||"",J=I&&!I.startsWith("http")?`http://localhost:7000${I}`:I;P({name:d.name||"",email:d.email||"",phone:d.phone||"",avatar:J,bio:d.bio||"",location:d.location||"",website:d.website||""}),d.activeStatusVisible!==void 0&&z(d.activeStatusVisible!==!1)}}catch(D){if(console.error("üìù Settings: Error fetching user profile:",D),d){console.log("üìù Settings: Using user context data as fallback");const I=d.avatarUrl||d.avatar||"",J=I&&!I.startsWith("http")?`http://localhost:7000${I}`:I;P({name:d.name||"",email:d.email||"",phone:d.phone||"",avatar:J,bio:d.bio||"",location:d.location||"",website:d.website||""}),d.activeStatusVisible!==void 0&&z(d.activeStatusVisible!==!1)}}})()},[d,y]);const[O,F]=p.useState({twoFactorAuth:!1,loginNotifications:!0,sessionTimeout:30,passwordExpiry:90}),[N,E]=p.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,marketingEmails:!1,orderUpdates:!0,priceAlerts:!0,newProducts:!0,securityAlerts:!0}),_=async $=>{var D,I,J,Q,te,ee,re,se,he,fe;c(!0);try{console.log("üìù Settings: Updating profile with values:",$);const ke={};Object.keys($).forEach(X=>{const pe=$[X];X!=="email"&&(pe===""||pe===null||pe===void 0?["avatarUrl","bio","phone","location","website","company","jobTitle"].includes(X)&&(ke[X]=null):ke[X]=pe)}),console.log("üìù Settings: Cleaned values being sent:",ke);const me=await ie.put("/users/me",ke);if(console.log("üìù Settings: Profile update response:",me.data),me.data.success){if(P(X=>({...X,...ke})),d&&y){const X={...d,...ke};y(X),console.log("üìù Settings: Updated user context:",X)}B.success("Profile updated successfully")}else B.error(me.data.message||"Failed to update profile")}catch(ke){if(console.error("üìù Settings: Profile update error:",ke),console.error("üìù Settings: Error details:",{message:ke.message,response:(D=ke.response)==null?void 0:D.data,status:(I=ke.response)==null?void 0:I.status,statusText:(J=ke.response)==null?void 0:J.statusText}),((Q=ke.response)==null?void 0:Q.status)===401)B.error("Authentication failed. Please login again.");else if(((te=ke.response)==null?void 0:te.status)===403)B.error("Access denied. You do not have permission to update this profile.");else if(((ee=ke.response)==null?void 0:ee.status)===400){const me=ke.response.data;if(me!=null&&me.errors&&Array.isArray(me.errors)){const X=me.errors.map(pe=>pe.message||pe.msg||pe.msg).join(", ");B.error(`Validation failed: ${X}`)}else B.error((me==null?void 0:me.message)||"Invalid data provided. Please check your input.")}else if(((re=ke.response)==null?void 0:re.status)===404)B.error("User not found. Please login again.");else if(((se=ke.response)==null?void 0:se.status)===500)B.error("Server error. Please try again later.");else if(ke.code==="ERR_NETWORK"||ke.message==="Network Error")B.error("Cannot connect to server. Please check your connection.");else{const me=((fe=(he=ke.response)==null?void 0:he.data)==null?void 0:fe.message)||ke.message||"Failed to update profile. Please try again.";B.error(me)}}finally{c(!1)}},A=async $=>{i(!0);try{await new Promise(D=>setTimeout(D,1e3)),F(D=>({...D,...$})),B.success("Security settings updated successfully")}catch{B.error("Failed to update security settings")}finally{i(!1)}},v=async $=>{i(!0);try{await new Promise(D=>setTimeout(D,1e3)),E(D=>({...D,...$})),B.success("Notification settings updated successfully")}catch{B.error("Failed to update notification settings")}finally{i(!1)}},H=async $=>{i(!0);try{await new Promise(D=>setTimeout(D,1e3)),B.success("Password changed successfully"),r.resetFields()}catch{B.error("Failed to change password")}finally{i(!1)}},q=$=>{if(!$.type.startsWith("image/"))return B.error("You can only upload image files!"),!1;if(!($.size/1024/1024<5))return B.error("Image must be smaller than 5MB!"),!1;const I=URL.createObjectURL($);return w($),C(I),k(!0),!1},Y=async($,D)=>{var I,J,Q;try{k(!1),m(!0);const te=new FormData;te.append("avatar",$);const ee=localStorage.getItem("token")||localStorage.getItem("accessToken");if(!ee)throw new Error("Authentication required. Please login again.");const re=await fetch("http://localhost:7000/api/upload/avatar",{method:"POST",body:te,headers:{Authorization:`Bearer ${ee}`}});if(!re.ok){const he=await re.json().catch(()=>({message:"Upload failed"}));throw new Error(he.message||`Upload failed: ${re.statusText}`)}const se=await re.json();if(se.success){const he=se.url||((I=se.data)==null?void 0:I.url),fe=he.startsWith("http")?he:`http://localhost:7000${he}`;P(me=>({...me,avatar:fe}));const ke=await ie.put("/users/me",{avatarUrl:fe});if(ke.data.success){if(B.success("Avatar updated successfully"),d&&y){const me={...d,avatarUrl:fe};y(me)}}else B.error(ke.data.message||"Failed to save avatar to profile")}else throw new Error(se.message||"Upload failed")}catch(te){console.error("‚ùå Failed to upload edited avatar:",te);const ee=((Q=(J=te.response)==null?void 0:J.data)==null?void 0:Q.message)||te.message||"Failed to upload avatar";B.error(ee)}finally{m(!1),b&&URL.revokeObjectURL(b),w(null),C(null)}},ne=()=>{k(!1),b&&URL.revokeObjectURL(b),w(null),C(null)},U=()=>{g(),h("/")};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs(Gy,{level:2,style:{marginBottom:"0.5rem",color:"#1890ff"},children:[e.jsx(hr,{style:{marginRight:"8px"}}),"Settings"]}),e.jsx(Jy,{style:{fontSize:"16px",color:"#666"},children:"Manage your account settings, security preferences, and notifications."})]}),e.jsx(V,{style:{borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsx(Yt,{defaultActiveKey:"profile",size:"large",style:{minHeight:"600px"},items:[{key:"profile",label:e.jsxs("span",{children:[e.jsx(Re,{}),"Profile"]}),children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,lg:8,children:e.jsx(V,{title:"Profile Picture",size:"small",style:{borderRadius:"8px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[x.avatar?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:x.avatar,alt:"User Avatar",style:{width:120,height:120,borderRadius:"50%",objectFit:"cover",marginBottom:16,display:"block",border:"2px solid #f0f0f0",backgroundColor:"#f5f5f5"},onError:$=>{console.log("üñºÔ∏è Image load error:",$),$.target.style.display="none";const D=document.createElement("div");D.innerHTML="‚ùå Image failed to load",D.style.cssText="color: red; font-size: 12px; text-align: center;",$.target.parentNode.appendChild(D)},crossOrigin:"anonymous"},`avatar-${x.avatar}`),e.jsx("div",{style:{marginTop:"8px"},children:e.jsx(L,{icon:e.jsx(qt,{}),type:"primary",onClick:async()=>{try{const $=await fetch(x.avatar,{mode:"cors"});if(!$.ok)throw new Error("Failed to load image");const D=await $.blob(),I=new File([D],"current-avatar.jpg",{type:D.type}),J=URL.createObjectURL(I);w(I),C(J),k(!0)}catch($){console.error("Error loading existing avatar:",$),B.error("Failed to load image for editing")}},loading:u,children:"Edit"})})]}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(We,{size:120,icon:e.jsx(Re,{}),style:{marginBottom:16}}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"No avatar set"})]}),e.jsxs("div",{style:{marginTop:x.avatar?"8px":"0"},children:[e.jsx(dr,{name:"avatar",listType:"picture-card",showUploadList:!1,beforeUpload:q,accept:"image/*",children:e.jsx(L,{icon:e.jsx(Pl,{}),loading:u,children:u?"Uploading...":x.avatar?"Change":"Upload Avatar"})}),e.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"#666"},children:x.avatar?"Click to upload a new image":"Click to select and edit your profile image"})]}),e.jsx(Vy,{visible:T,imageSrc:b,onCancel:ne,onSave:Y,aspect:1,circularCrop:!0})]})})}),e.jsx(W,{xs:24,lg:16,children:e.jsx(V,{title:"Profile Information",size:"small",style:{borderRadius:"8px"},children:e.jsxs(G,{form:t,layout:"vertical",initialValues:x,onFinish:_,children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter your name"}],children:e.jsx(ue,{prefix:e.jsx(Re,{}),placeholder:"Enter your name"})})}),e.jsx(W,{span:12,children:e.jsxs(G.Item,{name:"email",label:"Email",children:[e.jsx(ue,{prefix:e.jsx(as,{}),placeholder:"Enter your email",disabled:!0,style:{cursor:"not-allowed",backgroundColor:"#f5f5f5"}}),e.jsx(tr,{type:"secondary",style:{fontSize:"12px",display:"block",marginTop:"4px"},children:"Email cannot be changed here. Contact support to change your email."})]})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"phone",label:"Phone",children:e.jsx(ue,{prefix:e.jsx(Ss,{}),placeholder:"Enter your phone"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"location",label:"Location",children:e.jsx(ue,{placeholder:"Enter your location"})})})]}),e.jsx(G.Item,{name:"website",label:"Website",children:e.jsx(ue,{prefix:e.jsx(vs,{}),placeholder:"Enter your website"})}),e.jsx(G.Item,{name:"bio",label:"Bio",children:e.jsx(Yy,{rows:3,placeholder:"Tell us about yourself"})}),e.jsx(ys,{}),e.jsx(G.Item,{label:e.jsxs(Z,{children:[e.jsx(bt,{}),e.jsx("span",{children:"Account Privacy"})]}),help:S?"Your profile is private. Users need to request to follow you to see your content.":"Your profile is public. Anyone can see your content.",children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(dt,{checked:S,onChange:async $=>{M($);try{(await ie.put("/users/me",{isPrivate:$})).data.success?(B.success($?"Account set to private":"Account set to public"),y&&y({...d,isPrivate:$})):(B.error("Failed to update privacy settings"),M(!$))}catch(D){console.error("Privacy update error:",D),B.error("Failed to update privacy settings"),M(!$)}},checkedChildren:"Private",unCheckedChildren:"Public"}),e.jsx(tr,{type:"secondary",style:{fontSize:"12px"},children:S?"üîí Only approved followers can see your posts and profile details":"üåê Everyone can see your profile and posts"})]})}),e.jsx(ys,{}),e.jsx(G.Item,{label:e.jsxs(Z,{children:[e.jsx(Ee,{}),e.jsx("span",{children:"Activity Status"})]}),help:"Control whether others can see when you're online",children:e.jsx(Z,{direction:"vertical",style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:"#fafafa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(tr,{strong:!0,style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:"Show Active Status"}),e.jsx(tr,{type:"secondary",style:{fontSize:"12px",color:"#666"},children:j?"Others can see when you're online":"Your activity status is hidden"})]}),e.jsx(dt,{checked:j,onChange:async $=>{var D,I,J,Q;z($),y&&y({activeStatusVisible:$});try{const te=await ie.put("/users/me",{activeStatusVisible:$});if(console.log("‚úÖ Active status update response:",te.data),te.data.success)B.success(`Active status ${$?"enabled":"disabled"}`);else throw new Error(te.data.message||"Update failed")}catch(te){console.error("‚ùå Error updating active status:",te),console.error("‚ùå Error details:",{message:te.message,response:(D=te.response)==null?void 0:D.data,status:(I=te.response)==null?void 0:I.status}),z(!$),y&&y({activeStatusVisible:!$});const ee=((Q=(J=te.response)==null?void 0:J.data)==null?void 0:Q.message)||te.message||"Failed to update active status";B.error(ee)}},checkedChildren:"ON",unCheckedChildren:"OFF",style:{minWidth:"50px",marginLeft:"16px"}})]})})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:l,icon:e.jsx(Nn,{}),children:"Update Profile"})})]})})})]})},{key:"security",label:e.jsxs("span",{children:[e.jsx(bt,{}),"Security"]}),children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:"Change Password",size:"small",style:{borderRadius:"8px"},children:e.jsxs(G,{form:r,layout:"vertical",onFinish:H,children:[e.jsx(G.Item,{name:"currentPassword",label:"Current Password",rules:[{required:!0,message:"Please enter current password"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter current password"})}),e.jsx(G.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter new password"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter new password"})}),e.jsx(G.Item,{name:"confirmPassword",label:"Confirm New Password",rules:[{required:!0,message:"Please confirm new password"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Confirm new password"})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:o,icon:e.jsx(bt,{}),children:"Change Password"})})]})})}),e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:"Security Settings",size:"small",style:{borderRadius:"8px"},children:e.jsxs(G,{form:r,layout:"vertical",initialValues:O,onFinish:A,children:[e.jsx(G.Item,{name:"twoFactorAuth",label:"Two-Factor Authentication",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"loginNotifications",label:"Login Notifications",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"sessionTimeout",label:"Session Timeout (minutes)",children:e.jsx(ue,{type:"number",placeholder:"30"})}),e.jsx(G.Item,{name:"passwordExpiry",label:"Password Expiry (days)",children:e.jsx(ue,{type:"number",placeholder:"90"})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:o,icon:e.jsx(ic,{}),children:"Update Security Settings"})})]})})})]})},{key:"notifications",label:e.jsxs("span",{children:[e.jsx(js,{}),"Notifications"]}),children:e.jsx(V,{title:"Notification Preferences",size:"small",style:{borderRadius:"8px"},children:e.jsxs(G,{form:n,layout:"vertical",initialValues:N,onFinish:v,children:[e.jsxs(ce,{gutter:[24,24],children:[e.jsxs(W,{xs:24,sm:12,children:[e.jsx("h4",{children:"Email Notifications"}),e.jsx(G.Item,{name:"emailNotifications",label:"Email Notifications",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"marketingEmails",label:"Marketing Emails",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"orderUpdates",label:"Order Updates",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"priceAlerts",label:"Price Alerts",valuePropName:"checked",children:e.jsx(dt,{})})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx("h4",{children:"Other Notifications"}),e.jsx(G.Item,{name:"pushNotifications",label:"Push Notifications",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"smsNotifications",label:"SMS Notifications",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"newProducts",label:"New Products",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"securityAlerts",label:"Security Alerts",valuePropName:"checked",children:e.jsx(dt,{})})]})]}),e.jsx(ys,{}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:o,icon:e.jsx(js,{}),children:"Update Notification Settings"})})]})})},{key:"account",label:e.jsxs("span",{children:[e.jsx(Re,{}),"Account"]}),children:e.jsxs("div",{style:{width:"100%"},children:[e.jsx("div",{style:{backgroundColor:"#e6f7ff",border:"3px solid #1890ff",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(24, 144, 255, 0.15)",width:"100%",display:"block"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx(Ee,{style:{color:j?"#52c41a":"#999",fontSize:"24px",fontWeight:"bold"}}),e.jsx(tr,{strong:!0,style:{fontSize:"18px",fontWeight:"700",color:"#1890ff"},children:"Show Active Status"}),e.jsx(le,{color:j?"green":"default",style:{margin:0,fontSize:"13px",fontWeight:"bold",padding:"4px 10px"},children:j?"ON":"OFF"})]}),e.jsx(tr,{type:"secondary",style:{fontSize:"14px",color:"#666",display:"block",marginLeft:"36px"},children:j?"Others can see when you're online":"Your activity status is hidden"})]}),e.jsx(dt,{checked:j,onChange:async $=>{var D,I,J,Q;console.log("üîç Toggle clicked:",$),z($),y&&y({activeStatusVisible:$});try{const te=await ie.put("/users/me",{activeStatusVisible:$});if(console.log("‚úÖ Active status update response:",te.data),te.data.success)B.success(`Active status ${$?"enabled":"disabled"}`);else throw new Error(te.data.message||"Update failed")}catch(te){console.error("‚ùå Error updating active status:",te),console.error("‚ùå Error details:",{message:te.message,response:(D=te.response)==null?void 0:D.data,status:(I=te.response)==null?void 0:I.status}),z(!$),y&&y({activeStatusVisible:!$});const ee=((Q=(J=te.response)==null?void 0:J.data)==null?void 0:Q.message)||te.message||"Failed to update active status";B.error(ee)}},style:{minWidth:"60px",marginLeft:"20px"},checkedChildren:"ON",unCheckedChildren:"OFF"})]})}),e.jsx(V,{title:"Account Management",size:"small",style:{borderRadius:"8px"},children:e.jsxs(ce,{gutter:[24,24],children:[e.jsxs(W,{xs:24,sm:12,children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Account Information"}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("p",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Account Type:"})," Premium User"]}),e.jsxs("p",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Member Since:"})," January 2024"]}),e.jsxs("p",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Last Login:"})," Today, 10:30 AM"]}),e.jsxs("p",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Account Status:"})," ",e.jsx(le,{color:"green",children:"Active"})]})]}),e.jsx(ys,{style:{margin:"24px 0"}}),e.jsx("h4",{style:{marginTop:"24px",marginBottom:"16px",fontSize:"16px",fontWeight:"600",color:"#333"},children:"Privacy Settings"}),e.jsx(V,{size:"small",style:{borderRadius:"8px",backgroundColor:"#fafafa",border:"2px solid #e8e8e8",marginBottom:"16px",padding:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx(Ee,{style:{color:j?"#52c41a":"#999",fontSize:"18px"}}),e.jsx(tr,{strong:!0,style:{fontSize:"15px",fontWeight:"600",color:"#333"},children:"Show Active Status"}),e.jsx(le,{color:j?"green":"default",style:{margin:0,fontSize:"11px",fontWeight:"bold"},children:j?"ON":"OFF"})]}),e.jsx(tr,{type:"secondary",style:{fontSize:"12px",color:"#666",display:"block",marginLeft:"26px"},children:j?"Others can see when you're online":"Your activity status is hidden"})]}),e.jsx(dt,{checked:j,onChange:async $=>{var D,I,J,Q;z($),y&&y({activeStatusVisible:$});try{const te=await ie.put("/users/me",{activeStatusVisible:$});if(console.log("‚úÖ Active status update response:",te.data),te.data.success)B.success(`Active status ${$?"enabled":"disabled"}`);else throw new Error(te.data.message||"Update failed")}catch(te){console.error("‚ùå Error updating active status:",te),console.error("‚ùå Error details:",{message:te.message,response:(D=te.response)==null?void 0:D.data,status:(I=te.response)==null?void 0:I.status}),z(!$),y&&y({activeStatusVisible:!$});const ee=((Q=(J=te.response)==null?void 0:J.data)==null?void 0:Q.message)||te.message||"Failed to update active status";B.error(ee)}},style:{minWidth:"50px",marginLeft:"16px"},checkedChildren:"ON",unCheckedChildren:"OFF"})]})})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx("h4",{children:"Quick Actions"}),e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(L,{icon:e.jsx(qt,{}),block:!0,children:"Edit Profile"}),e.jsx(L,{icon:e.jsx(js,{}),block:!0,children:"Notification Settings"}),e.jsx(L,{icon:e.jsx(ic,{}),block:!0,children:"Security Settings"}),e.jsx(L,{danger:!0,icon:e.jsx(Ro,{}),block:!0,onClick:U,children:"Logout"})]})]})]})})]})}]})})]})},{Title:Qy,Paragraph:Zy,Text:xb}=Fe,{TextArea:Xy}=ue,{Option:yb}=Pe,e2=()=>{var E,_;const{user:s,updateUser:t}=qe(),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[u,m]=p.useState(""),[d,f]=p.useState(!1),[g,y]=p.useState(0),[h,x]=p.useState(!1),[P,S]=p.useState(!1),[M,j]=p.useState("profile"),[z]=G.useForm(),[T]=G.useForm(),[k]=G.useForm();p.useEffect(()=>{if(s){z.setFieldsValue({name:s.name,email:s.email,phone:s.phone,bio:s.bio,location:s.location,interests:s.interests||[],dateOfBirth:s.dateOfBirth,website:s.website,company:s.company,jobTitle:s.jobTitle,skills:s.skills||[],socialLinks:s.socialLinks||{}});const A=s.avatarUrl||s.avatar||"";m(A),console.log("Profile - Setting avatar URL:",A,"from user:",s)}},[s,z]);const R=async A=>{var v,H,q,Y,ne,U,$,D,I,J;i(!0);try{console.log("Saving profile with values:",A),console.log("Current avatarUrl:",u);const Q={};Object.keys(A).forEach(ee=>{const re=A[ee];ee!=="email"&&(re===""||re===null||re===void 0?["avatarUrl","bio","phone","location","website","company","jobTitle"].includes(ee)&&(Q[ee]=null):Q[ee]=re)}),u&&u.trim()!==""?Q.avatarUrl=u:Q.avatarUrl=null,console.log("Cleaned values being sent:",Q);const te=await ie.put("/users/me",Q);console.log("Profile update response:",te.data),te.data.success?(B.success("Profile updated successfully!"),c(!1),t&&t(te.data.user)):(console.error("Profile update failed:",te.data),B.error(te.data.message||"Failed to update profile"))}catch(Q){if(console.error("Update profile error:",Q),console.error("Error details:",{message:Q.message,response:(v=Q.response)==null?void 0:v.data,status:(H=Q.response)==null?void 0:H.status,statusText:(q=Q.response)==null?void 0:q.statusText}),((Y=Q.response)==null?void 0:Y.status)===401)B.error("Authentication failed. Please login again.");else if(((ne=Q.response)==null?void 0:ne.status)===403)B.error("Access denied. You do not have permission to update this profile.");else if(((U=Q.response)==null?void 0:U.status)===400){const te=Q.response.data;if(te!=null&&te.errors&&Array.isArray(te.errors)){const ee=te.errors.map(re=>re.message||re.msg).join(", ");B.error(`Validation failed: ${ee}`)}else B.error((te==null?void 0:te.message)||"Invalid data provided. Please check your input.")}else if((($=Q.response)==null?void 0:$.status)===404)B.error("User not found. Please login again.");else if(((D=Q.response)==null?void 0:D.status)===500)B.error("Server error. Please try again later.");else if(Q.code==="ERR_NETWORK"||Q.message==="Network Error")B.error("Cannot connect to server. Please check your connection.");else{const te=((J=(I=Q.response)==null?void 0:I.data)==null?void 0:J.message)||Q.message||"Failed to update profile. Please try again.";B.error(te)}}finally{i(!1)}},w=async A=>{var v,H,q,Y,ne,U,$;if(console.log("Avatar change info:",A),A.file.status==="uploading")f(!0),y(0);else if(A.file.status==="done"){f(!1),y(100);const D=((v=A.file.response)==null?void 0:v.url)||((q=(H=A.file.response)==null?void 0:H.data)==null?void 0:q.url)||(typeof A.file.response=="string"?A.file.response:null);if(console.log("Avatar change - uploaded URL:",D,"Response:",A.file.response),D){m(D);try{const I=await ie.put("/users/me",{avatarUrl:D});I.data.success?(B.success("Profile picture updated successfully!"),t&&t({...s,avatarUrl:D})):B.error(I.data.message||"Failed to save profile picture")}catch(I){console.error("Failed to update profile with new avatar:",I);const J=((ne=(Y=I.response)==null?void 0:Y.data)==null?void 0:ne.message)||I.message||"Failed to save profile picture";B.error(J)}}else console.error("No uploaded URL found in response:",A.file.response),B.error("Failed to get uploaded image URL. Please try again.")}else if(A.file.status==="error"){f(!1),y(0);const D=((U=A.file.error)==null?void 0:U.message)||(($=A.file.response)==null?void 0:$.message)||"Failed to upload profile picture";console.error("Avatar upload error:",A.file.error,A.file.response),B.error(D)}},b=()=>{m(""),B.success("Profile picture removed")},C={name:"avatar",listType:"picture-card",showUploadList:!1,action:"http://localhost:7000/api/upload/avatar",onChange:w,beforeUpload:A=>A.type.startsWith("image/")?A.size/1024/1024<5?!0:(B.error("Image must be smaller than 5MB!"),!1):(B.error("You can only upload image files!"),!1),customRequest:async({file:A,onSuccess:v,onError:H,onProgress:q})=>{var Y,ne,U,$,D,I;try{console.log("üì§ Starting upload for file:",A.name,"Size:",A.size);const J=new FormData;J.append("avatar",A),q({percent:10});const Q=await ju.uploadAvatar(J);if(console.log("üì§ Upload response:",Q.data),Q.data&&Q.data.success){const te=Q.data.url||((Y=Q.data.data)==null?void 0:Y.url);console.log("‚úÖ Upload successful, URL:",te),q({percent:100}),v({url:te},Q)}else{const te=((ne=Q.data)==null?void 0:ne.message)||"Upload failed";console.error("‚ùå Upload failed:",te),H(new Error(te))}}catch(J){console.error("‚ùå Upload error:",J),console.error("‚ùå Error details:",{message:J.message,response:(U=J.response)==null?void 0:U.data,status:($=J.response)==null?void 0:$.status});const Q=((I=(D=J.response)==null?void 0:D.data)==null?void 0:I.message)||J.message||"Failed to upload avatar. Please check your connection and try again.";H(new Error(Q))}}},O=async A=>{try{const v=await ie.put("/users/me/password",A);v.data.success?(B.success("Password updated successfully!"),x(!1),T.resetFields()):B.error(v.data.message||"Failed to update password")}catch(v){console.error("Password update error:",v),B.error("Failed to update password")}},F=async A=>{try{const v=await ie.delete("/users/me",{data:A});v.data.success?(B.success("Account deleted successfully"),window.location.href="/login"):B.error(v.data.message||"Failed to delete account")}catch(v){console.error("Account deletion error:",v),B.error("Failed to delete account")}};if(r)return e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(rt,{size:"large"})});const N=[{key:"profile",label:"Profile Information",children:e.jsxs(G,{form:z,layout:"vertical",onFinish:R,disabled:!l,className:"profile-form",children:[e.jsx("div",{className:"profile-form-row",children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please input your name!"}],className:"profile-form-item",children:e.jsx(ue,{prefix:e.jsx(Re,{}),placeholder:"Enter your full name",size:"large",className:"profile-input"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"phone",label:"Phone Number",rules:[{pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number!"}],className:"profile-form-item",children:e.jsx(ue,{prefix:e.jsx(Ss,{}),placeholder:"Enter your phone number",size:"large",className:"profile-input"})})})]})}),e.jsx("div",{className:"profile-form-row",children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"location",label:"Location",className:"profile-form-item",children:e.jsx(ue,{prefix:e.jsx(Fr,{}),placeholder:"Enter your location",size:"large",className:"profile-input"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"dateOfBirth",label:"Date of Birth",className:"profile-form-item",children:e.jsx(Ao,{style:{width:"100%"},placeholder:"Select your date of birth",size:"large",className:"profile-input"})})})]})}),e.jsx("div",{className:"profile-form-row",children:e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"company",label:"Company",className:"profile-form-item",children:e.jsx(ue,{placeholder:"Enter your company name",size:"large",className:"profile-input"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"jobTitle",label:"Job Title",className:"profile-form-item",children:e.jsx(ue,{placeholder:"Enter your job title",size:"large",className:"profile-input"})})})]})}),e.jsx(G.Item,{name:"bio",label:"Bio",rules:[{max:500,message:"Bio must be less than 500 characters!"}],className:"profile-form-item",children:e.jsx(Xy,{rows:4,placeholder:"Tell us about yourself...",showCount:!0,maxLength:500,size:"large",className:"profile-input"})}),e.jsx(G.Item,{name:"interests",label:"Interests",className:"profile-form-item",children:e.jsx(Pe,{mode:"multiple",placeholder:"Select your interests",size:"large",className:"profile-input",options:[{value:"technology",label:"Technology"},{value:"business",label:"Business"},{value:"design",label:"Design"},{value:"marketing",label:"Marketing"},{value:"education",label:"Education"},{value:"health",label:"Health"},{value:"sports",label:"Sports"},{value:"music",label:"Music"},{value:"art",label:"Art"},{value:"travel",label:"Travel"}]})}),e.jsx(G.Item,{name:"skills",label:"Skills",className:"profile-form-item",children:e.jsx(Pe,{mode:"tags",placeholder:"Add your skills",size:"large",style:{width:"100%"},className:"profile-input"})})]})},{key:"security",label:"Security & Privacy",children:e.jsxs("div",{className:"profile-tab-content",children:[e.jsx(V,{title:"Password Settings",className:"profile-security-card",children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(gt,{message:"Password Security",description:"Keep your account secure by using a strong password and updating it regularly.",type:"info",showIcon:!0}),e.jsx(L,{type:"primary",icon:e.jsx(bt,{}),onClick:()=>x(!0),size:"large",className:"profile-button",children:"Change Password"})]})}),e.jsx(V,{title:"Account Management",className:"profile-security-card",children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(gt,{message:"Danger Zone",description:"Once you delete your account, there is no going back. Please be certain.",type:"error",showIcon:!0}),e.jsx(L,{danger:!0,icon:e.jsx(Tt,{}),onClick:()=>S(!0),size:"large",className:"profile-button",children:"Delete Account"})]})})]})}];return e.jsxs("div",{className:"mobile-profile-container",children:[e.jsxs(V,{className:"mobile-profile-header",children:[e.jsxs("div",{className:"mobile-profile-header-content",children:[e.jsxs("div",{className:"mobile-profile-avatar-container",children:[e.jsx(zt,{count:l?1:0,style:{backgroundColor:"#52c41a"},children:e.jsx(We,{size:140,src:ht({avatarUrl:u}),icon:e.jsx(Re,{}),className:"mobile-profile-avatar",style:{border:u?"3px solid #52c41a":"3px solid #d9d9d9",boxShadow:u?"0 4px 12px rgba(82, 196, 26, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:nt(user==null?void 0:user.name)})}),l&&e.jsxs("div",{className:"profile-upload-buttons",children:[e.jsx(dr,{...C,children:e.jsx(L,{type:"primary",shape:"round",icon:e.jsx(Pl,{}),size:"large",className:"profile-button",loading:d,children:d?"Uploading...":"Change Photo"})}),u&&e.jsx(L,{danger:!0,shape:"round",icon:e.jsx(Tt,{}),onClick:b,size:"large",className:"profile-button",children:"Remove"}),d&&e.jsx("div",{style:{marginTop:"10px",textAlign:"center"},children:e.jsx(xd,{percent:g,size:"small",status:d?"active":"success"})})]})]}),e.jsx(Qy,{level:2,className:"profile-title",children:s==null?void 0:s.name}),e.jsxs(Zy,{className:"profile-email",children:[e.jsx(as,{})," ",s==null?void 0:s.email]}),e.jsxs("div",{className:"profile-stats",children:[e.jsxs(le,{color:"blue",className:"profile-stat-tag",children:[e.jsx(Re,{})," ",((E=s==null?void 0:s.followers)==null?void 0:E.length)||0," Followers"]}),e.jsxs(le,{color:"green",className:"profile-stat-tag",children:[e.jsx(ws,{})," ",((_=s==null?void 0:s.following)==null?void 0:_.length)||0," Following"]}),e.jsxs(le,{color:"purple",className:"profile-stat-tag",children:[e.jsx(Ds,{})," Member since ",new Date(s==null?void 0:s.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"profile-actions",children:l?e.jsxs(Z,{size:"large",wrap:!0,children:[e.jsx(L,{type:"primary",htmlType:"submit",loading:o,icon:e.jsx(Nn,{}),size:"large",onClick:()=>z.submit(),className:"profile-button",children:"Save Changes"}),e.jsx(L,{onClick:()=>c(!1),size:"large",className:"profile-button",children:"Cancel"})]}):e.jsx(L,{type:"primary",icon:e.jsx(qt,{}),onClick:()=>c(!0),size:"large",className:"profile-button",children:"Edit Profile"})})]}),e.jsx(V,{className:"profile-card",children:e.jsx(Yt,{activeKey:M,onChange:j,items:N,size:"large",className:"profile-tabs"})}),e.jsx(Ke,{title:"Change Password",open:h,onCancel:()=>x(!1),footer:null,width:500,className:"profile-modal",children:e.jsxs(G,{form:T,layout:"vertical",onFinish:O,className:"profile-modal-form",children:[e.jsx(G.Item,{name:"currentPassword",label:"Current Password",rules:[{required:!0,message:"Please enter your current password!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter current password",size:"large",className:"profile-input"})}),e.jsx(G.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter a new password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter new password",size:"large",className:"profile-input"})}),e.jsx(G.Item,{name:"confirmPassword",label:"Confirm New Password",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your new password!"},({getFieldValue:A})=>({validator(v,H){return!H||A("newPassword")===H?Promise.resolve():Promise.reject(new Error("Passwords do not match!"))}})],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Confirm new password",size:"large",className:"profile-input"})}),e.jsx("div",{className:"profile-modal-actions",children:e.jsxs(Z,{children:[e.jsx(L,{onClick:()=>x(!1),className:"profile-button",children:"Cancel"}),e.jsx(L,{type:"primary",htmlType:"submit",className:"profile-button",children:"Update Password"})]})})]})}),e.jsxs(Ke,{title:"Delete Account",open:P,onCancel:()=>S(!1),footer:null,width:500,className:"profile-modal",children:[e.jsx(gt,{message:"Warning",description:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers.",type:"error",showIcon:!0,style:{marginBottom:24}}),e.jsxs(G,{form:k,layout:"vertical",onFinish:F,className:"profile-modal-form",children:[e.jsx(G.Item,{name:"password",label:"Confirm Password",rules:[{required:!0,message:"Please enter your password to confirm!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{}),placeholder:"Enter your password",size:"large",className:"profile-input"})}),e.jsx("div",{className:"profile-modal-actions",children:e.jsxs(Z,{children:[e.jsx(L,{onClick:()=>S(!1),className:"profile-button",children:"Cancel"}),e.jsx(L,{danger:!0,htmlType:"submit",className:"profile-button",children:"Delete Account"})]})})]})]})]})},{Title:Hc,Paragraph:Vc,Text:wr}=Fe,Gc=()=>{var C;const{userId:s}=gd(),t=Je(),{user:r}=qe(),[n,o]=p.useState(null),[i,l]=p.useState(!0),[c,u]=p.useState(!1),[m,d]=p.useState(0),[f,g]=p.useState(0),[y,h]=p.useState(0),[x,P]=p.useState("posts"),[S,M]=p.useState(!1),j=150;p.useEffect(()=>{console.log("UserProfile useEffect - userId:",s),s?(M(!1),z(),T(),k()):(console.error("No userId in params"),B.error("Invalid user ID"),t("/discover"))},[s]),p.useEffect(()=>{var F,N;if((((F=r==null?void 0:r._id)==null?void 0:F.toString())===(s==null?void 0:s.toString())||((N=r==null?void 0:r.id)==null?void 0:N.toString())===(s==null?void 0:s.toString()))&&r&&n){const E=r.isVerified,_=r.verifiedTill,A=n.isVerified,v=n.verifiedTill;(E!==A||_!==v)&&(console.log("üîÑ Updating profile verification status from context:",{currentUser:{isVerified:E,verifiedTill:_},profileUser:{isVerified:A,verifiedTill:v}}),o(H=>({...H,isVerified:E,verifiedTill:_})))}},[r==null?void 0:r.isVerified,r==null?void 0:r.verifiedTill,s,r==null?void 0:r._id,n]),p.useEffect(()=>{var F,N;(((F=r==null?void 0:r._id)==null?void 0:F.toString())===(s==null?void 0:s.toString())||((N=r==null?void 0:r.id)==null?void 0:N.toString())===(s==null?void 0:s.toString()))&&(r!=null&&r.isVerified)&&!(n!=null&&n.isVerified)&&(console.log("üîÑ Reloading profile to get verification status"),z())},[r==null?void 0:r.isVerified]);const z=async()=>{var O,F,N,E,_;if(!s){console.error("No userId provided"),B.error("Invalid user ID"),t("/discover");return}l(!0);try{console.log("Loading user profile for userId:",s);let A;try{A=await ie.get(`/users/${s}`)}catch(v){console.log("Trying alternative endpoint...");const H=await an.getUsers({userId:s});if(H.data.success&&((O=H.data.users)==null?void 0:O.length)>0){o(H.data.users[0]),l(!1);return}throw v}if(console.log("API Response:",A.data),A.data.success){const v=A.data.user||A.data.data||A.data;if(console.log("‚úÖ Setting profile user:",v),console.log("üîç Verification fields:",{isVerified:v==null?void 0:v.isVerified,verifiedTill:v==null?void 0:v.verifiedTill,verifiedTillType:typeof(v==null?void 0:v.verifiedTill),verifiedTillValue:v!=null&&v.verifiedTill?new Date(v.verifiedTill):null}),console.log("üìã All user fields:",Object.keys(v||{})),!v||!v._id&&!v.id){console.error("Invalid user data received:",v),B.error("Invalid user data received"),t("/discover");return}const H={...v,bio:v.bio||null,website:v.website||null,location:v.location||null,company:v.company||null,jobTitle:v.jobTitle||null,isVerified:v.isVerified!==void 0?v.isVerified:!1,verifiedTill:v.verifiedTill||null};console.log("‚úÖ Profile data with verification:",{isVerified:H.isVerified,verifiedTill:H.verifiedTill,verifiedTillDate:H.verifiedTill?new Date(H.verifiedTill):null,isCurrentlyVerified:H.isVerified&&H.verifiedTill&&new Date(H.verifiedTill)>new Date}),o(H)}else console.error("API returned success=false:",A.data),B.error(A.data.message||"User not found")}catch(A){console.error("Error loading user profile:",A),console.error("Error details:",{message:A.message,response:(F=A.response)==null?void 0:F.data,status:(N=A.response)==null?void 0:N.status}),B.error(((_=(E=A.response)==null?void 0:E.data)==null?void 0:_.message)||"Failed to load user profile. Please try again.")}finally{l(!1)}},T=async()=>{var O,F;try{const N=await es.checkFollowStatus(s);if(N.data.success){const E=N.data.isFollowing||!1;u(E),console.log("‚úÖ Follow status checked:",{userId:s,isFollowing:E,followStatus:N.data.followStatus})}else console.warn("Follow status check returned success=false:",N.data),u(!1)}catch(N){console.error("‚ùå Error checking follow status:",N),console.error("Error details:",{message:N.message,response:(O=N.response)==null?void 0:O.data,status:(F=N.response)==null?void 0:F.status});try{const E=await es.getFollowing();if(E.data.success&&E.data.following){const _=E.data.following,A=s==null?void 0:s.toString(),v=Array.isArray(_)?_.some(H=>{var Y;return(((Y=H._id)==null?void 0:Y.toString())||H._id)===A||H._id===s}):!1;u(v),console.log("‚úÖ Fallback follow status checked:",{userId:s,isFollowing:v})}}catch(E){console.error("Fallback check also failed:",E),u(!1)}}},k=async()=>{var O,F;try{const N=await ie.get(`/follow/followers/${s}`);N.data.success&&d(((O=N.data.followers)==null?void 0:O.length)||0);const E=await ie.get(`/follow/following/${s}`);E.data.success&&g(((F=E.data.following)==null?void 0:F.length)||0)}catch(N){console.error("Error loading stats:",N)}},R=async()=>{var O,F,N,E,_,A,v,H,q,Y,ne,U,$;try{if(c){console.log("üì§ Unfollowing user:",s);const D=await es.unfollow(s);console.log("üì§ Unfollow response:",D.data),D.data.success?(u(!1),d(I=>Math.max(0,I-1)),B.success("Unfollowed successfully"),setTimeout(()=>{T(),k()},500)):B.error(D.data.message||"Failed to unfollow user")}else{console.log("üì§ Sending follow request to user:",s);const D=await es.sendFollowRequest(s);console.log("üì§ Follow request response:",D.data),D.data.success?(((O=D.data.follow)==null?void 0:O.status)==="accepted"?(u(!0),d(Q=>Q+1),B.success("Following successfully")):B.success("Follow request sent! Waiting for approval."),setTimeout(()=>{T(),k()},500)):B.error(D.data.message||"Failed to send follow request")}}catch(D){if(console.error("‚ùå Error following/unfollowing:",D),console.error("‚ùå Error details:",{message:D.message,response:(F=D.response)==null?void 0:F.data,status:(N=D.response)==null?void 0:N.status,statusText:(E=D.response)==null?void 0:E.statusText}),((_=D.response)==null?void 0:_.status)===401)B.error("Authentication failed. Please login again.");else if(((A=D.response)==null?void 0:A.status)===403)B.error("Access denied. You do not have permission to perform this action.");else if(((v=D.response)==null?void 0:v.status)===400){const I=((q=(H=D.response)==null?void 0:H.data)==null?void 0:q.message)||"Invalid request. Please check your input.";B.error(I)}else if(((Y=D.response)==null?void 0:Y.status)===404)B.error("User not found.");else if(((ne=D.response)==null?void 0:ne.status)===500)B.error("Server error. Please try again later.");else if(D.code==="ERR_NETWORK"||D.message==="Network Error")B.error("Cannot connect to server. Please check your connection.");else{const I=(($=(U=D.response)==null?void 0:U.data)==null?void 0:$.message)||D.message||"Failed to update follow status. Please try again.";B.error(I)}}},w=async()=>{try{(await $s.createThread([s])).data.success&&t("/chat")}catch(O){console.error("Start chat error:",O),t("/chat")}},b=(r==null?void 0:r._id)===s||(r==null?void 0:r.id)===s||((C=r==null?void 0:r._id)==null?void 0:C.toString())===(s==null?void 0:s.toString());return i?e.jsx(Ut,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(rt,{size:"large"})})}):!n&&!i?e.jsx(Ut,{children:e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:e.jsx(Ue,{description:e.jsxs("div",{children:[e.jsx(Hc,{level:4,children:"User not found"}),e.jsx(Vc,{children:"Unable to load user profile. Please try again."}),e.jsx(L,{type:"primary",onClick:()=>t("/discover"),children:"Go to Discover Users"})]})})})}):n?(console.log("üîç UserProfile render - profileUser:",n,"isOwnProfile:",b),e.jsx(Ut,{children:e.jsxs("div",{style:{maxWidth:"935px",margin:"0 auto",padding:"20px"},children:[e.jsx("div",{style:{marginBottom:"44px"},children:e.jsxs(ce,{gutter:[30,20],children:[e.jsx(W,{xs:24,sm:8,style:{textAlign:"center"},children:e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx(We,{size:150,src:ht(n),icon:e.jsx(Re,{}),style:{border:"3px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,.0975)"},children:nt(n.name)}),n.isOnline&&e.jsx(zt,{status:"success",style:{position:"absolute",bottom:"8px",right:"8px",width:"20px",height:"20px",border:"3px solid #fff",borderRadius:"50%"}})]})}),e.jsxs(W,{xs:24,sm:16,children:[e.jsxs("div",{style:{marginBottom:"20px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"20px",width:"100%",position:"relative",gap:"16px"},children:[e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsxs(Z,{align:"center",style:{flexWrap:"wrap",marginBottom:"12px"},children:[e.jsx(Hc,{level:2,style:{margin:0,fontSize:"28px",fontWeight:300},children:n.name}),(()=>{const O=n.isVerified===!0||n.isVerified==="true",F=n.verifiedTill;let N=!1;if(O)if(F)try{N=new Date(F)>new Date}catch(E){console.error("Error parsing verifiedTill date:",E),N=!0}else N=!0;return console.log("üîç Badge check:",{isVerified:O,verifiedTill:F,verifiedTillDate:F?new Date(F):null,currentDate:new Date,isCurrentlyVerified:N,willShow:N,profileUserKeys:Object.keys(n||{})}),N?e.jsx(Gt,{title:"Verified Account",children:e.jsx("div",{style:{marginLeft:"8px",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",verticalAlign:"middle"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(10, 132, 255, 0.4))"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`verifiedBadgeGradient-${n._id||"default"}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#5AAFFF"}),e.jsx("stop",{offset:"50%",stopColor:"#3A9EFF"}),e.jsx("stop",{offset:"100%",stopColor:"#0A84FF"})]})}),e.jsx("path",{d:"M12 2L13.09 6.26L17.5 6.26L14.21 9.09L15.32 13.5L12 10.68L8.68 13.5L9.79 9.09L6.5 6.26L10.91 6.26L12 2Z",fill:`url(#verifiedBadgeGradient-${n._id||"default"})`}),e.jsx("path",{d:"M9 12L11 14L15 10",stroke:"white",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})}):null})(),n.isPrivate&&e.jsx(bt,{style:{fontSize:"20px",color:"#999"}})]})}),e.jsx(Er,{menu:{items:[...b?[{key:"settings",label:e.jsxs(Z,{children:[e.jsx(qt,{}),e.jsx("span",{children:"Settings"})]}),onClick:()=>t("/settings")}]:[{key:"startChat",label:e.jsxs(Z,{children:[e.jsx(Mt,{}),e.jsx("span",{children:"Start Chat"})]}),onClick:()=>{console.log("üîç Start Chat clicked from dropdown"),w()}}],...n.createdAt?[{key:"joinedDate",label:e.jsxs(Z,{children:[e.jsx(Ds,{}),e.jsxs("span",{children:["Joined ",new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),disabled:!0,style:{cursor:"default"}}]:[]]},trigger:["click"],placement:"bottomRight",children:e.jsx(L,{type:"default",shape:"circle",icon:e.jsx(nn,{}),size:"large",style:{flexShrink:0,width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",border:"1px solid #d9d9d9",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",cursor:"pointer"},onClick:O=>{console.log("üîç 3-dot menu button clicked"),O.stopPropagation()}})})]}),e.jsxs(Z,{align:"center",style:{flexWrap:"wrap"},children:[!b&&e.jsx(L,{type:c?"default":"primary",icon:c?e.jsx(_n,{}):e.jsx(Ks,{}),onClick:R,style:{borderRadius:"4px",fontWeight:600},children:c?"Following":"Follow"}),b&&e.jsx(L,{icon:e.jsx(qt,{}),onClick:()=>t("/settings"),style:{borderRadius:"4px",fontWeight:600},children:"Edit Profile"})]})]}),e.jsxs(Z,{size:"large",style:{marginBottom:"20px",fontSize:"16px"},children:[e.jsxs("div",{children:[e.jsx(wr,{strong:!0,style:{fontSize:"16px"},children:y}),e.jsx(wr,{style:{marginLeft:"4px"},children:"posts"})]}),e.jsxs("div",{style:{cursor:"pointer"},onClick:()=>t(`/profile/${s}/followers`),children:[e.jsx(wr,{strong:!0,style:{fontSize:"16px"},children:m}),e.jsx(wr,{style:{marginLeft:"4px"},children:"followers"})]}),e.jsxs("div",{style:{cursor:"pointer"},onClick:()=>t(`/profile/${s}/following`),children:[e.jsx(wr,{strong:!0,style:{fontSize:"16px"},children:f}),e.jsx(wr,{style:{marginLeft:"4px"},children:"following"})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{marginBottom:"12px",minHeight:"24px"},children:n.bio&&n.bio.trim()?e.jsxs("div",{children:[e.jsx(Vc,{style:{marginBottom:"8px",fontSize:"16px",lineHeight:"1.5",color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0},children:S||n.bio.length<=j?n.bio:`${n.bio.substring(0,j)}...`}),n.bio.length>j&&e.jsx(L,{type:"link",onClick:()=>M(!S),style:{padding:0,height:"auto",fontSize:"16px",color:"#8e8e8e",fontWeight:400},children:S?"Show less":"View more"})]}):e.jsx(wr,{type:"secondary",style:{fontSize:"16px",lineHeight:"1.5",color:"#999",fontStyle:"italic"},children:"No bio yet"})}),n.website&&e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs("a",{href:n.website.startsWith("http")?n.website:`https://${n.website}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#00376b",textDecoration:"none",fontSize:"16px",fontWeight:500},onMouseEnter:O=>O.target.style.textDecoration="underline",onMouseLeave:O=>O.target.style.textDecoration="none",children:[e.jsx(vs,{style:{marginRight:"4px"}}),n.website.replace(/^https?:\/\//,"")]})}),n.location&&e.jsxs("div",{style:{marginBottom:"8px",fontSize:"16px",color:"#262626"},children:[e.jsx(Fr,{style:{marginRight:"4px",color:"#666"}}),n.location]}),(n.company||n.jobTitle)&&e.jsxs("div",{style:{marginBottom:"8px",fontSize:"16px",color:"#262626"},children:[n.company&&e.jsx("span",{children:n.company}),n.company&&n.jobTitle&&e.jsx("span",{children:" ‚Ä¢ "}),n.jobTitle&&e.jsx("span",{children:n.jobTitle})]})]})]})]})}),e.jsx(ys,{style:{margin:"0 0 0 0"}}),e.jsx(Yt,{activeKey:x,onChange:P,style:{borderBottom:"1px solid #dbdbdb"},items:[{key:"posts",label:e.jsxs("span",{style:{textTransform:"uppercase",fontSize:"12px",fontWeight:600,letterSpacing:"1px"},children:[e.jsx(bs,{style:{marginRight:"6px"}}),"Posts"]}),children:e.jsx("div",{style:{marginTop:"40px",minHeight:"400px"},children:e.jsx(Ue,{description:"No posts yet",image:Ue.PRESENTED_IMAGE_SIMPLE})})},{key:"products",label:e.jsxs("span",{style:{textTransform:"uppercase",fontSize:"12px",fontWeight:600,letterSpacing:"1px"},children:[e.jsx(vt,{style:{marginRight:"6px"}}),"Products"]}),children:e.jsx("div",{style:{marginTop:"40px",minHeight:"400px"},children:e.jsx(Ue,{description:"No products yet",image:Ue.PRESENTED_IMAGE_SIMPLE})})},{key:"saved",label:e.jsxs("span",{style:{textTransform:"uppercase",fontSize:"12px",fontWeight:600,letterSpacing:"1px"},children:[e.jsx(ws,{style:{marginRight:"6px"}}),"Saved"]}),children:e.jsx("div",{style:{marginTop:"40px",minHeight:"400px"},children:e.jsx(Ue,{description:"No saved items",image:Ue.PRESENTED_IMAGE_SIMPLE})})}]})]})})):null},{Title:t2}=Fe,s2=()=>e.jsxs("div",{children:[e.jsx(t2,{level:2,children:"Following"}),e.jsx(V,{children:e.jsx("p",{children:"Following management page - Coming soon!"})})]}),{Title:r2,Paragraph:n2}=Fe,{TextArea:o2}=ue,{Option:Xo}=Pe,{Panel:i2}=yd,a2=()=>{const[s,t]=p.useState([]),[r,n]=p.useState([]),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[u]=G.useForm(),{user:m,isAuthenticated:d}=qe();Je();const[f,g]=p.useState({totalTickets:5,openTickets:2,resolvedTickets:3,averageResponseTime:"2 hours"});p.useEffect(()=>{y(),h()},[]);const y=async()=>{try{t([{_id:"1",question:"How do I place an order?",answer:'To place an order, browse our products, select the one you want, and click "Pre-book Now". Fill out the pre-booking form with your requirements and contact information.',category:"Orders",helpful:15,notHelpful:2},{_id:"2",question:"What payment methods do you accept?",answer:"We accept all major credit cards, PayPal, and bank transfers. All payments are processed securely through our payment gateway.",category:"Payment",helpful:12,notHelpful:1},{_id:"3",question:"How long does it take to complete a project?",answer:"Project completion time varies depending on complexity. Simple websites take 1-2 weeks, while complex e-commerce sites may take 4-6 weeks.",category:"Projects",helpful:8,notHelpful:0},{_id:"4",question:"Can I modify my order after placing it?",answer:"Yes, you can modify your order within 24 hours of placing it. Contact our support team to make changes to your requirements.",category:"Orders",helpful:10,notHelpful:1},{_id:"5",question:"Do you provide ongoing support?",answer:"Yes, we provide 3 months of free support after project completion. Additional support can be purchased if needed.",category:"Support",helpful:7,notHelpful:0}])}catch(j){console.error("Failed to fetch FAQs:",j)}},h=async()=>{try{n([{_id:"1",subject:"Website customization request",description:"I need help customizing my e-commerce website template.",status:"open",priority:"medium",createdAt:"2024-01-15",updatedAt:"2024-01-15",responses:2},{_id:"2",subject:"Payment issue",description:"I am unable to complete my payment for order #ORD-001.",status:"resolved",priority:"high",createdAt:"2024-01-14",updatedAt:"2024-01-14",responses:3},{_id:"3",subject:"Technical support needed",description:"My website is not loading properly after deployment.",status:"open",priority:"high",createdAt:"2024-01-13",updatedAt:"2024-01-13",responses:1}])}catch(j){console.error("Failed to fetch tickets:",j)}},x=async j=>{try{const z={_id:Date.now().toString(),...j,status:"open",createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0],responses:0};n(T=>[...T,z]),B.success("Support ticket created successfully"),c(!1),u.resetFields()}catch{B.error("Failed to create ticket")}},P=(j,z)=>{t(T=>T.map(k=>k._id===j?{...k,helpful:z?k.helpful+1:k.helpful,notHelpful:z?k.notHelpful:k.notHelpful+1}:k)),B.success(z?"Marked as helpful":"Marked as not helpful")},S=j=>({open:"orange",resolved:"green",closed:"gray"})[j]||"default",M=j=>({low:"green",medium:"orange",high:"red"})[j]||"default";return e.jsx(ts,{children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(r2,{level:2,style:{marginBottom:"0.5rem"},children:"üÜò Help Center"}),e.jsx(n2,{children:"Find answers to common questions and get support for your issues."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Total Tickets",value:f.totalTickets,prefix:e.jsx(oc,{style:{color:"#1890ff"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Open Tickets",value:f.openTickets,prefix:e.jsx(Ze,{style:{color:"#fa8c16"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Resolved",value:f.resolvedTickets,prefix:e.jsx(Ee,{style:{color:"#52c41a"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(Statistic,{title:"Avg Response Time",value:f.averageResponseTime,prefix:e.jsx(Ze,{style:{color:"#722ed1"}})})})})]}),e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,lg:12,children:e.jsxs(V,{title:"Frequently Asked Questions",extra:e.jsx(Kt,{}),children:[e.jsx(ue,{placeholder:"Search FAQs...",style:{marginBottom:16},prefix:e.jsx(Kt,{})}),e.jsx(yd,{children:s.map(j=>e.jsx(i2,{header:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:j.question}),e.jsx(le,{color:"blue",children:j.category})]}),children:e.jsxs("div",{children:[e.jsx("p",{children:j.answer}),e.jsx("div",{style:{marginTop:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(Z,{children:[e.jsxs(L,{size:"small",type:"text",icon:e.jsx(ia,{}),onClick:()=>P(j._id,!0),children:["Helpful (",j.helpful,")"]}),e.jsxs(L,{size:"small",type:"text",icon:e.jsx(_d,{}),onClick:()=>P(j._id,!1),children:["Not Helpful (",j.notHelpful,")"]})]})})]})},j._id))})]})}),e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:"Support Tickets",extra:e.jsx(L,{type:"primary",icon:e.jsx(lr,{}),onClick:()=>c(!0),children:"New Ticket"}),children:r.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[e.jsx(oc,{style:{fontSize:48,color:"#d9d9d9"}}),e.jsx("p",{children:"No support tickets yet"}),e.jsx(L,{type:"primary",onClick:()=>c(!0),children:"Create Your First Ticket"})]}):e.jsx(Wt,{dataSource:r,renderItem:j=>e.jsx(Wt.Item,{style:{border:"1px solid #f0f0f0",borderRadius:8,marginBottom:8,padding:12},children:e.jsx(Wt.Item.Meta,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:j.subject}),e.jsxs(Z,{children:[e.jsx(le,{color:S(j.status),children:j.status}),e.jsx(le,{color:M(j.priority),children:j.priority})]})]}),description:e.jsxs("div",{children:[e.jsx("p",{style:{marginBottom:8},children:j.description}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Created: ",j.createdAt," ‚Ä¢ Responses: ",j.responses]})]})})})})})})]}),e.jsxs(ce,{gutter:[24,24],style:{marginTop:"2rem"},children:[e.jsx(W,{xs:24,sm:8,children:e.jsxs(V,{title:"Live Chat",style:{textAlign:"center"},children:[e.jsx(Mt,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),e.jsx("p",{children:"Chat with our support team in real-time"}),e.jsx(L,{type:"primary",icon:e.jsx(Mt,{}),children:"Start Chat"})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs(V,{title:"Phone Support",style:{textAlign:"center"},children:[e.jsx(Ss,{style:{fontSize:48,color:"#52c41a",marginBottom:16}}),e.jsx("p",{children:"Call us for immediate assistance"}),e.jsx(L,{type:"primary",icon:e.jsx(Ss,{}),children:"Call Now"})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs(V,{title:"Email Support",style:{textAlign:"center"},children:[e.jsx(as,{style:{fontSize:48,color:"#fa8c16",marginBottom:16}}),e.jsx("p",{children:"Send us an email and we'll respond within 24 hours"}),e.jsx(L,{type:"primary",icon:e.jsx(as,{}),children:"Send Email"})]})})]}),e.jsx(V,{title:"Helpful Resources",style:{marginTop:"2rem"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{size:"small",hoverable:!0,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Ys,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),e.jsx("h4",{children:"Documentation"}),e.jsx("p",{children:"Comprehensive guides and tutorials"}),e.jsx(L,{type:"link",children:"View Docs"})]})})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{size:"small",hoverable:!0,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Eo,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),e.jsx("h4",{children:"Video Tutorials"}),e.jsx("p",{children:"Step-by-step video guides"}),e.jsx(L,{type:"link",children:"Watch Videos"})]})})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{size:"small",hoverable:!0,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(bs,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),e.jsx("h4",{children:"Knowledge Base"}),e.jsx("p",{children:"Search our knowledge base"}),e.jsx(L,{type:"link",children:"Browse Articles"})]})})})]})}),e.jsx(Ke,{title:"Create Support Ticket",open:l,onCancel:()=>c(!1),footer:null,width:600,children:e.jsxs(G,{form:u,layout:"vertical",onFinish:x,children:[e.jsx(G.Item,{name:"subject",label:"Subject",rules:[{required:!0,message:"Please enter a subject"}],children:e.jsx(ue,{placeholder:"Brief description of your issue"})}),e.jsx(G.Item,{name:"priority",label:"Priority",rules:[{required:!0,message:"Please select priority"}],children:e.jsxs(Pe,{placeholder:"Select priority",children:[e.jsx(Xo,{value:"low",children:"Low"}),e.jsx(Xo,{value:"medium",children:"Medium"}),e.jsx(Xo,{value:"high",children:"High"})]})}),e.jsx(G.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please describe your issue"}],children:e.jsx(o2,{rows:4,placeholder:"Please provide detailed information about your issue..."})}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",icon:e.jsx(lr,{}),children:"Create Ticket"}),e.jsx(L,{onClick:()=>c(!1),children:"Cancel"})]})})]})})]})})},{Title:Jc,Paragraph:ei}=Fe,l2=()=>{const{user:s,isAuthenticated:t}=qe(),r=Je(),[n,o]=p.useState([]),[i,l]=p.useState(!0);p.useEffect(()=>{t&&s?c():l(!1)},[t,s]);const c=async()=>{var h;if(!s||!s._id){l(!1);return}try{l(!0);const x=await ie.get(`/users/${s._id}/purchases`);if(x.data.success){const P=x.data.purchases||x.data.data||[];o(P)}else o([])}catch(x){console.error("Error loading purchases:",x),o([]),((h=x.response)==null?void 0:h.status)!==404&&B.error("Failed to load purchases")}finally{l(!1)}},u=h=>{h&&r(`/products/${h}`)},m=h=>h?new Date(h).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"-",d=(h,x="INR")=>h?`${x==="USD"?"$":x==="EUR"?"‚Ç¨":"‚Çπ"}${h.toLocaleString("en-IN")}`:"-",f=[{title:"Product",key:"product",render:(h,x)=>{const P=x.product||{},S=x.isSubscription||x.type==="subscription";return e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[P.title||(S?`Verified Badge - ${x.planMonths} Month${x.planMonths>1?"s":""}`:"Unknown Product"),S&&e.jsx(le,{color:"blue",style:{fontSize:"11px",padding:"0 6px",height:"20px",lineHeight:"20px"},children:"Subscription"})]}),e.jsxs("div",{style:{color:"#666",fontSize:"12px"},children:["Order #",x.razorpayOrderId||x._id]}),S&&x.expiryDate&&e.jsxs("div",{style:{color:"#1890ff",fontSize:"12px",marginTop:"4px",fontWeight:500},children:[x.status==="cancelled"?"Cancelled: ":"Expires: ",m(x.cancelledAt||x.expiryDate)]})]})}},{title:"Price",key:"amount",render:(h,x)=>d(x.amount,x.currency)},{title:"Status",dataIndex:"status",key:"status",render:h=>{const P={paid:{color:"green",text:"Completed"},completed:{color:"green",text:"Completed"},created:{color:"orange",text:"Pending"},pending:{color:"orange",text:"Pending"},failed:{color:"red",text:"Failed"},cancelled:{color:"red",text:"Cancelled"},refunded:{color:"blue",text:"Refunded"}}[h]||{color:"default",text:h};return e.jsx(le,{color:P.color,children:P.text.toUpperCase()})}},{title:"Purchase Date",key:"date",render:(h,x)=>m(x.createdAt)},{title:"Expiry Date",key:"expiryDate",render:(h,x)=>x.isSubscription||x.type==="subscription"?x.status==="cancelled"?e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:x.cancelledAt?m(x.cancelledAt):"-"}),e.jsx(le,{color:"red",style:{marginTop:"4px",fontSize:"11px"},children:"Cancelled"})]}):x.expiryDate?e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:m(x.expiryDate)}),new Date(x.expiryDate)<new Date&&e.jsx(le,{color:"red",style:{marginTop:"4px",fontSize:"11px"},children:"Expired"}),x.expiryDate&&new Date(x.expiryDate)>new Date&&e.jsx(le,{color:"green",style:{marginTop:"4px",fontSize:"11px"},children:"Active"})]}):"-":"-"},{title:"Payment Method",dataIndex:"paymentMethod",key:"paymentMethod",render:h=>h?h.toUpperCase():"-"},{title:"Actions",key:"actions",render:(h,x)=>{var j;const P=((j=x.product)==null?void 0:j._id)||x.product,S=x.status==="paid"||x.status==="completed",M=x.isSubscription||x.type==="subscription";return e.jsxs(Z,{children:[P&&P!=="verified-badge"&&e.jsx(L,{type:"link",icon:e.jsx(it,{}),onClick:()=>u(P),children:"View"}),M&&e.jsx(L,{type:"link",icon:e.jsx(it,{}),onClick:()=>r("/dashboard/products"),children:"View Details"}),S&&!M&&e.jsx(L,{type:"link",icon:e.jsx(Tl,{}),onClick:()=>B.info("Download feature coming soon"),children:"Download"})]})}}],g=n.filter(h=>h.status==="paid"||h.status==="completed");n.filter(h=>h.status==="created"||h.status==="pending");const y=g.reduce((h,x)=>h+(x.amount||0),0);return i?e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx(rt,{size:"large"}),e.jsx(ei,{style:{marginTop:"1rem",color:"#666"},children:"Loading your purchases..."})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(Jc,{level:2,children:"üõí My Purchases"}),e.jsx(ei,{children:"Track your orders and download your purchases."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Purchases",value:n.length})})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{children:e.jsx(ve,{title:"Completed",value:g.length})})}),e.jsx(W,{xs:24,sm:8,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Spent",value:y.toLocaleString("en-IN"),prefix:"‚Çπ",precision:2})})})]}),n.length>0?e.jsx(V,{children:e.jsx(Pt,{columns:f,dataSource:n,rowKey:h=>h._id||h.razorpayOrderId||h.id,pagination:{pageSize:10,showSizeChanger:!0,showTotal:h=>`Total ${h} purchases`}})}):e.jsx(V,{children:e.jsx(Ue,{description:e.jsxs("div",{children:[e.jsx(Jc,{level:4,style:{color:"#999",marginTop:"1rem"},children:"No purchases yet"}),e.jsx(ei,{style:{color:"#999"},children:"Your purchase history will appear here once you make a purchase."})]})})})]})},{Title:Yc,Paragraph:ti}=Fe,c2=()=>{const{user:s,isAuthenticated:t}=qe(),r=Je(),[n,o]=p.useState([]),[i,l]=p.useState(!0);p.useEffect(()=>{c()},[t]);const c=async()=>{if(!t||!s){l(!1);return}try{l(!0);const f=await ie.get("/products",{params:{favoritedBy:s._id,limit:100}});if(f.data.success){const g=f.data.products||f.data.data||[];o(g)}else o([])}catch(f){console.error("Error loading favorites:",f),o([])}finally{l(!1)}},u=async f=>{try{await ie.delete(`/products/${f}/favorite`),o(n.filter(g=>g._id!==f)),B.success("Removed from favorites")}catch(g){console.error("Error removing favorite:",g),o(n.filter(y=>y._id!==f)),B.success("Removed from favorites")}},m=f=>{r(`/products/${f}`)},d=f=>{r(`/products/${f._id}`)};return i?e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx(rt,{size:"large"}),e.jsx(ti,{style:{marginTop:"1rem",color:"#666"},children:"Loading your favorites..."})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(Yc,{level:2,children:"‚ù§Ô∏è My Favorites"}),e.jsx(ti,{children:"Your saved products and wishlist items."})]}),n.length>0?e.jsx(ce,{gutter:[16,16],children:n.map(f=>{var g;return e.jsx(W,{xs:24,sm:12,lg:8,children:e.jsx(V,{hoverable:!0,cover:e.jsx("div",{style:{position:"relative"},children:e.jsx("img",{alt:f.title,src:f.thumbnailUrl||f.thumbnail||((g=f.images)==null?void 0:g[0])||"/placeholder.png",style:{height:"200px",objectFit:"cover",width:"100%"},onError:y=>{y.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="}})}),actions:[e.jsx(L,{type:"link",icon:e.jsx(it,{}),onClick:()=>m(f._id||f.id),children:"View"}),e.jsx(L,{type:"link",icon:e.jsx(vt,{}),onClick:()=>d(f),children:"Prebook"}),e.jsx(L,{type:"link",danger:!0,icon:e.jsx(Tt,{}),onClick:()=>u(f._id||f.id),children:"Remove"})],children:e.jsx(V.Meta,{title:f.title,description:e.jsxs("div",{children:[f.developerName&&e.jsxs("div",{style:{marginBottom:"8px",color:"#666",fontSize:"12px"},children:["by ",f.developerName]}),f.tags&&f.tags.length>0&&e.jsx("div",{style:{marginBottom:"8px"},children:f.tags.slice(0,3).map(y=>e.jsx(le,{size:"small",children:y},y))}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#1890ff"},children:["‚Çπ",f.price||f.prebookAmount||"N/A"]}),f.currency&&f.currency!=="INR"&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"12px",color:"#999"},children:f.currency})]})})]})})})},f._id||f.id)})}):e.jsx(Ue,{image:e.jsx(ws,{style:{fontSize:"64px",color:"#d9d9d9"}}),description:e.jsxs("div",{children:[e.jsx(Yc,{level:4,style:{color:"#999",marginTop:"1rem"},children:"No favorites yet"}),e.jsx(ti,{style:{color:"#999"},children:"Start adding products to your favorites to see them here."})]})})]})},{TextArea:Kc}=ue;function d2({onSend:s=o=>console.log("send",o),disabled:t=!1,placeholder:r="Message...",theme:n={inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#0A84FF"}}){const[o,i]=p.useState(""),[l,c]=p.useState(null),[u,m]=p.useState(null),d=p.useRef(null),f=["üî•","üòÇ","‚ù§Ô∏è","üëç","üéâ","üòÆ","üò¢","ü§ù","üòç","üôè","üíØ","‚ú®"],[g,y]=p.useState(null),[h,x]=p.useState(!1),[P,S]=p.useState(null),[M,j]=p.useState(null),[z,T]=p.useState(0),[k,R]=p.useState(30),[w,b]=p.useState(""),[C,O]=p.useState(""),[F,N]=p.useState(!1),[E,_]=p.useState(0),[A,v]=p.useState(!1),[H,q]=p.useState(0),Y=p.useRef(null),ne=p.useRef(null),[U,$]=p.useState(!1),D=p.useRef(null),I=p.useRef(null);p.useEffect(()=>()=>{M&&URL.revokeObjectURL(M),ne.current&&ne.current.close()},[M]);async function J(ae,Ce=1e6){if(!ae)return null;if(ae.size<=Ce)return ae;try{const Te=await createImageBitmap(ae),Ie=document.createElement("canvas"),Ae=Ie.getContext("2d"),we=1280;let{width:Be,height:$e}=Te;if(Math.max(Be,$e)>we){const _e=we/Math.max(Be,$e);Be=Math.round(Be*_e),$e=Math.round($e*_e)}Ie.width=Be,Ie.height=$e,Ae.drawImage(Te,0,0,Be,$e);let Xe=.92;for(let _e=0;_e<8;++_e){const Ne=await new Promise(ot=>Ie.toBlob(ot,"image/jpeg",Xe));if(!Ne)break;if(Ne.size<=Ce)return new File([Ne],ae.name.replace(/\.[^.]+$/,".jpg"),{type:"image/jpeg"});if(Xe-=.12,Xe<=.1)break}for(let _e=.9;_e>=.4;_e-=.1){const Ne=Math.round(Be*_e),ot=Math.round($e*_e);Ie.width=Ne,Ie.height=ot,Ae.drawImage(Te,0,0,Ne,ot);const Oe=await new Promise(Ct=>Ie.toBlob(Ct,"image/jpeg",.7));if(Oe&&Oe.size<=Ce)return new File([Oe],ae.name.replace(/\.[^.]+$/,".jpg"),{type:"image/jpeg"})}const Ve=await new Promise(_e=>Ie.toBlob(_e,"image/jpeg",.5));return new File([Ve],ae.name.replace(/\.[^.]+$/,".jpg"),{type:"image/jpeg"})}catch(Te){return console.error("Image compression error:",Te),ae}}const Q=async ae=>{var Te;const Ce=(Te=ae.target.files)==null?void 0:Te[0];if(Ce){if(!Ce.type.startsWith("image/")){B.error("Please select an image file");return}N(!0);try{const Ie=await J(Ce);m(Ie);const Ae=URL.createObjectURL(Ie);c(Ae),B.success(`Image compressed: ${(Ie.size/1024).toFixed(1)}KB`)}catch(Ie){console.error("Error processing image:",Ie),B.error("Failed to process image")}finally{N(!1)}}},te=()=>{l&&URL.revokeObjectURL(l),c(null),m(null),d.current&&(d.current.value="")},ee=async ae=>{var Te;const Ce=(Te=ae.target.files)==null?void 0:Te[0];if(Ce){if(!Ce.type.startsWith("audio/")){B.error("Please select an audio file");return}try{const Ie=URL.createObjectURL(Ce);j(Ie),S(Ce),$(!0);const Ae=new Audio(Ie);Ae.addEventListener("loadedmetadata",()=>{const we=Ae.duration;_(we),R(Math.min(30,we))})}catch(Ie){console.error("Error loading audio:",Ie),B.error("Failed to load audio file")}}},re=()=>{Y.current&&(A?Y.current.pause():Y.current.play(),v(!A))},se=()=>{Y.current&&q(Y.current.currentTime)},he=()=>{v(!1),Y.current&&(Y.current.currentTime=z)};async function fe(ae,Ce,Te){const Ie=ae.sampleRate,Ae=Math.floor(Ce*Ie),we=Math.floor(Te*Ie),Be=Math.min(Ae+we,ae.length),$e=ne.current.createBuffer(ae.numberOfChannels,Be-Ae,Ie);for(let Xe=0;Xe<ae.numberOfChannels;Xe++){const Ve=ae.getChannelData(Xe),_e=$e.getChannelData(Xe);for(let Ne=0;Ne<_e.length;Ne++)_e[Ne]=Ve[Ae+Ne]}return $e}async function ke(){if(!(!P||!M)){N(!0);try{ne.current||(ne.current=new(window.AudioContext||window.webkitAudioContext));const ae=await P.arrayBuffer(),Ce=await ne.current.decodeAudioData(ae),Te=await fe(Ce,z,k),Ie=me(Te),Ae=new File([Ie],`${w||"audio"}.wav`,{type:"audio/wave"});s({type:"audio",file:Ae,title:w,note:C,duration:k,startTime:z}),M&&URL.revokeObjectURL(M),S(null),j(null),b(""),O(""),$(!1),D.current&&(D.current.value=""),setTimeout(()=>{var we;(we=I.current)==null||we.focus()},100),B.success("Audio trimmed and ready to send")}catch(ae){console.error("Error trimming audio:",ae),B.error("Failed to trim audio")}finally{N(!1)}}}function me(ae){const Ce=ae.length,Te=ae.numberOfChannels,Ie=ae.sampleRate,Ae=new ArrayBuffer(44+Ce*Te*2),we=new DataView(Ae),Be=(Xe,Ve)=>{for(let _e=0;_e<Ve.length;_e++)we.setUint8(Xe+_e,Ve.charCodeAt(_e))};Be(0,"RIFF"),we.setUint32(4,36+Ce*Te*2,!0),Be(8,"WAVE"),Be(12,"fmt "),we.setUint32(16,16,!0),we.setUint16(20,1,!0),we.setUint16(22,Te,!0),we.setUint32(24,Ie,!0),we.setUint32(28,Ie*Te*2,!0),we.setUint16(32,Te*2,!0),we.setUint16(34,16,!0),Be(36,"data"),we.setUint32(40,Ce*Te*2,!0);let $e=44;for(let Xe=0;Xe<Ce;Xe++)for(let Ve=0;Ve<Te;Ve++){const _e=Math.max(-1,Math.min(1,ae.getChannelData(Ve)[Xe]));we.setInt16($e,_e<0?_e*32768:_e*32767,!0),$e+=2}return Ae}const X=()=>{if(!t){if(g){s({type:"sticker",sticker:g}),y(null),setTimeout(()=>{var ae;(ae=I.current)==null||ae.focus()},100);return}if(u){s({type:"image",file:u,text:o.trim()}),te(),i(""),setTimeout(()=>{var ae;(ae=I.current)==null||ae.focus()},100);return}o.trim()&&(s({type:"text",text:o.trim()}),i(""),setTimeout(()=>{var ae;(ae=I.current)==null||ae.focus()},100))}},pe=ae=>{y(ae),x(!1),X()},je=ae=>{const Ce=Math.floor(ae/60),Te=Math.floor(ae%60);return`${Ce}:${Te.toString().padStart(2,"0")}`};return e.jsxs("div",{style:{borderTop:"1px solid #f0f0f0",padding:"12px",background:"#fff"},children:[l&&e.jsxs("div",{style:{marginBottom:"8px",position:"relative",display:"inline-block"},children:[e.jsx(ar,{src:l,alt:"Preview",width:120,height:120,style:{objectFit:"cover",borderRadius:"12px",border:"0.5px solid rgba(0,0,0,0.1)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}),e.jsx(L,{type:"text",danger:!0,icon:e.jsx(Tt,{}),onClick:te,shape:"circle",style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",width:"28px",height:"28px",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",background:n.inputBg||"rgba(255, 255, 255, 0.9)",borderRadius:"20px",padding:"6px 8px",border:"0.5px solid rgba(0,0,0,0.1)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",boxShadow:"0 -1px 2px rgba(0,0,0,0.05)"},children:[e.jsxs(Z,{size:"small",style:{flexShrink:0},children:[e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:Q,style:{display:"none"}}),e.jsx(L,{type:"text",icon:e.jsx(Fn,{}),onClick:()=>{var ae;return(ae=d.current)==null?void 0:ae.click()},disabled:t||F,style:{color:"#8E8E93",width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"}}),e.jsx(L,{type:"text",icon:e.jsx(Lg,{}),onClick:()=>x(!h),disabled:t,style:{color:h?n.accentColor||"#0A84FF":"#8E8E93",width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s ease-out"}}),e.jsx("input",{ref:D,type:"file",accept:"audio/*",onChange:ee,style:{display:"none"}}),e.jsx(L,{type:"text",icon:e.jsx(Dd,{}),onClick:()=>{var ae;return(ae=D.current)==null?void 0:ae.click()},disabled:t||F,style:{color:"#8E8E93",width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"}})]}),e.jsx(Kc,{ref:I,value:o,onChange:ae=>i(ae.target.value),placeholder:r,autoSize:{minRows:1,maxRows:4},onPressEnter:ae=>{ae.shiftKey||(ae.preventDefault(),X())},disabled:t||F,style:{border:"none",background:"transparent",boxShadow:"none",resize:"none",fontSize:"17px",padding:"4px 8px",flex:1,fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',lineHeight:"1.35"}}),o.trim()||u||g?e.jsx(L,{type:"primary",shape:"circle",icon:e.jsx(lr,{}),onClick:X,disabled:t||F,loading:F,style:{flexShrink:0,width:"32px",height:"32px",minWidth:"32px",padding:0,background:n.accentColor||"#0A84FF",border:"none",boxShadow:"0 1px 3px rgba(0,0,0,0.12)",display:"flex",alignItems:"center",justifyContent:"center"}}):e.jsx(L,{type:"text",icon:e.jsx(lr,{}),disabled:!0,style:{flexShrink:0,color:"#C7C7CC",padding:"4px 8px",width:"32px",height:"32px",minWidth:"32px"}})]}),h&&e.jsx("div",{style:{marginTop:"8px",padding:"12px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"0.5px solid rgba(0,0,0,0.1)",borderRadius:"16px",display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"8px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)"},children:f.map((ae,Ce)=>e.jsx(L,{type:"text",onClick:()=>pe(ae),style:{fontSize:"28px",height:"44px",padding:0,border:g===ae?`2px solid ${n.accentColor||"#0A84FF"}`:"0.5px solid rgba(0,0,0,0.1)",borderRadius:"8px",transition:"all 0.2s ease-out",background:g===ae?"rgba(10, 132, 255, 0.1)":"transparent"},children:ae},Ce))}),e.jsx(Ke,{title:"Trim Audio",open:U,onCancel:()=>{$(!1),M&&(URL.revokeObjectURL(M),j(null)),S(null),D.current&&(D.current.value="")},onOk:ke,okText:"Send Trimmed Audio",cancelText:"Cancel",okButtonProps:{loading:F},width:600,children:M&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",textAlign:"center"},children:[e.jsx("audio",{ref:Y,src:M,onTimeUpdate:se,onEnded:he,onLoadedMetadata:()=>{Y.current&&(_(Y.current.duration),R(Math.min(30,Y.current.duration)))},style:{display:"none"}}),e.jsxs(Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(L,{type:"primary",icon:A?e.jsx(eg,{}):e.jsx(ag,{}),onClick:re,size:"large",children:A?"Pause":"Play"}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[je(H)," / ",je(E)]})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Start Time (seconds):"}),e.jsx(Jr,{min:0,max:Math.max(0,E-k),value:z,onChange:T,step:.1,style:{marginTop:"8px"}}),e.jsx("div",{style:{textAlign:"center",marginTop:"4px",color:"#666"},children:je(z)})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Duration (seconds):"}),e.jsx(Jr,{min:1,max:Math.min(60,E-z),value:k,onChange:R,step:.1,style:{marginTop:"8px"}}),e.jsx("div",{style:{textAlign:"center",marginTop:"4px",color:"#666"},children:je(k)})]})]}),e.jsxs(Z,{direction:"vertical",style:{width:"100%"},size:"small",children:[e.jsx(ue,{placeholder:"Audio title (optional)",value:w,onChange:ae=>b(ae.target.value)}),e.jsx(Kc,{placeholder:"Add a note (optional)",value:C,onChange:ae=>O(ae.target.value),rows:2})]})]})})]})}const{Text:Bt}=Fe,{TextArea:jb}=ue,u2=()=>{var er,gn,Is,zs;const{user:s,isAuthenticated:t}=qe(),[r,n]=p.useState(!1),[o,i]=p.useState(null),[l,c]=p.useState([]),[u,m]=p.useState(null),[d,f]=p.useState([]),[g,y]=p.useState(""),[h,x]=p.useState(!1),[P,S]=p.useState(!1),[M,j]=p.useState([]),[z,T]=p.useState([]),[k,R]=p.useState(""),[w,b]=p.useState(""),[C,O]=p.useState(!1),[F,N]=p.useState({}),[E,_]=p.useState({}),[A,v]=p.useState({}),[H,q]=p.useState(()=>{const K=localStorage.getItem("chatTheme");return K?parseInt(K):1}),[Y,ne]=p.useState(null),[U,$]=p.useState(""),[D,I]=p.useState(null),[J,Q]=p.useState(null),[te,ee]=p.useState(null),[re,se]=p.useState(new Set),[he,fe]=p.useState(null),[ke,me]=p.useState(!1),[X,pe]=p.useState(window.innerWidth<=768),je={1:{name:"Default Blue iMessage",background:"linear-gradient(180deg, #E8F4F8 0%, #F5F5F5 100%)",blurOverlay:"rgba(255, 255, 255, 0.7)",ownMessageBg:"linear-gradient(180deg, #0A84FF 0%, #147BFF 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#F2F2F7",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#0A84FF"},2:{name:"Mint Green Soft Blur",background:"linear-gradient(180deg, #E8F8F5 0%, #F0F9F7 100%)",blurOverlay:"rgba(255, 255, 255, 0.75)",ownMessageBg:"linear-gradient(180deg, #00C896 0%, #00B584 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#F2F7F5",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#00C896"},3:{name:"Purple Lavender Gradient",background:"linear-gradient(180deg, #F5F0FF 0%, #FAF5FF 100%)",blurOverlay:"rgba(255, 255, 255, 0.7)",ownMessageBg:"linear-gradient(180deg, #AF52DE 0%, #9B4DD6 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#F7F2FF",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#AF52DE"},4:{name:"Midnight Black OLED",background:"linear-gradient(180deg, #000000 0%, #1C1C1E 100%)",blurOverlay:"rgba(0, 0, 0, 0.6)",ownMessageBg:"linear-gradient(180deg, #0A84FF 0%, #147BFF 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(44, 44, 46, 0.95)",otherMessageText:"#FFFFFF",sidebarBg:"#1C1C1E",headerBg:"rgba(28, 28, 30, 0.9)",inputBg:"rgba(44, 44, 46, 0.9)",accentColor:"#0A84FF"},5:{name:"Rose Pink Soft Gradient",background:"linear-gradient(180deg, #FFF0F5 0%, #FFF5F8 100%)",blurOverlay:"rgba(255, 255, 255, 0.75)",ownMessageBg:"linear-gradient(180deg, #FF2D55 0%, #FF1744 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#FFF5F8",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#FF2D55"},6:{name:"Ocean Teal Glass",background:"linear-gradient(180deg, #E0F7FA 0%, #F0FDFF 100%)",blurOverlay:"rgba(255, 255, 255, 0.7)",ownMessageBg:"linear-gradient(180deg, #00BCD4 0%, #00ACC1 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#F0FDFF",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#00BCD4"},7:{name:"Warm Beige Minimal",background:"linear-gradient(180deg, #FAF8F3 0%, #F5F3ED 100%)",blurOverlay:"rgba(255, 255, 255, 0.8)",ownMessageBg:"linear-gradient(180deg, #D4A574 0%, #C8965A 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#F5F3ED",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#D4A574"},8:{name:"Silver Frost Blur",background:"linear-gradient(180deg, #F5F5F7 0%, #E8E8ED 100%)",blurOverlay:"rgba(255, 255, 255, 0.8)",ownMessageBg:"linear-gradient(180deg, #8E8E93 0%, #7A7A7F 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#E8E8ED",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#8E8E93"},9:{name:"Sunset Orange/Pink",background:"linear-gradient(180deg, #FFF5E6 0%, #FFE8D6 100%)",blurOverlay:"rgba(255, 255, 255, 0.7)",ownMessageBg:"linear-gradient(180deg, #FF9500 0%, #FF8C00 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#FFE8D6",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#FF9500"},10:{name:"Space Gray Professional",background:"linear-gradient(180deg, #F2F2F7 0%, #E5E5EA 100%)",blurOverlay:"rgba(255, 255, 255, 0.75)",ownMessageBg:"linear-gradient(180deg, #48484A 0%, #3A3A3C 100%)",ownMessageText:"#FFFFFF",otherMessageBg:"rgba(255, 255, 255, 0.95)",otherMessageText:"#000000",sidebarBg:"#E5E5EA",headerBg:"rgba(255, 255, 255, 0.8)",inputBg:"rgba(255, 255, 255, 0.9)",accentColor:"#48484A"}},ae=je[H]||je[1],Ce=K=>{q(K),localStorage.setItem("chatTheme",K.toString()),B.success(`Theme changed to ${je[K].name}`)},Te=p.useRef(null),Ie=p.useRef(null),Ae=p.useRef(null);p.useRef(null),p.useRef(null);const we=p.useRef({}),Be=async K=>{if(!K||!t){Q(null),ee(null);return}try{const ge=K._id||K;console.log("üé® Fetching other participant banner for:",ge);const xe=await ie.get(`/users/${ge}`);if(console.log("üé® User profile response:",xe.data),xe.data.success&&xe.data.user){const ye=xe.data.user;ee(ye),ye.equippedBanner?(console.log("üé® Other participant equipped banner found:",ye.equippedBanner),Q(ye.equippedBanner)):(console.log("üé® Other participant has no equipped banner"),Q(null))}}catch(ge){console.error("üé® Error fetching other participant banner:",ge),Q(null),ee(null)}};p.useEffect(()=>{let K=!0;return(async()=>{if(!(!K||C))try{t&&s?(console.log("UserChat: Loading messages..."),await Oe(),K&&O(!0)):(console.log("User not authenticated, clearing chat data"),K&&(c([]),f([]),m(null),O(!0)))}catch(xe){console.error("Error in UserChat useEffect:",xe),K&&(i("Failed to initialize chat"),c([]),O(!0))}})(),()=>{K=!1}},[t,s,C]),p.useEffect(()=>{if(u&&t&&s){Ct(u._id);const K=ps(u);K?Be(K):(Q(null),ee(null))}},[u,t,s]),p.useEffect(()=>{$e()},[d]),p.useEffect(()=>{if(!t||!s)return;const K="http://localhost:7000",ge=localStorage.getItem("accessToken")||localStorage.getItem("token");if(!ge){console.warn("No token found for Socket.IO connection");return}console.log("üîå Connecting to Socket.IO for messaging..."),Ae.current=On(K,{transports:["polling","websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,auth:{token:ge,userId:s._id,userRole:s.role}});const xe=Ae.current;return xe.on("connect",()=>{console.log("üîå Socket.IO connected for messaging:",xe.id),l.forEach(ye=>{xe.emit("join-room",ye._id),console.log("üîå Joined thread room:",ye._id)})}),xe.on("disconnect",()=>{console.log("üîå Socket.IO disconnected")}),xe.on("connect_error",ye=>{console.error("üîå Socket.IO connection error:",ye)}),xe.on("new_message",ye=>{console.log("üì® New message received via Socket.IO:",ye);const{threadId:Se,message:de}=ye;u&&u._id===Se&&N(De=>({...De,[Se]:[]})),u&&u._id===Se&&f(De=>De.some(ze=>ze._id===de._id)?De:[...De,{...de,sender:de.sender||{_id:de.sender,name:"Unknown"}}]),c(De=>De.map(ze=>ze._id===Se?{...ze,lastMessageAt:de.createdAt,lastMessageText:de.text||de.ciphertext||de.message||""}:ze).sort((ze,st)=>{const xt=new Date(ze.lastMessageAt||ze.createdAt||0);return new Date(st.lastMessageAt||st.createdAt||0)-xt})),u&&u._id===Se&&setTimeout(()=>$e(),100)}),xe.on("user_typing",ye=>{const{threadId:Se,userId:de,isTyping:De}=ye;N(lt=>{const ze=lt[Se]||[];if(De){if(!ze.includes(de))return{...lt,[Se]:[...ze,de]}}else return{...lt,[Se]:ze.filter(st=>st!==de)};return lt})}),xe.on("user_online",ye=>{const{userId:Se}=ye;_(de=>({...de,[Se]:!0}))}),xe.on("user_offline",ye=>{const{userId:Se}=ye;_(de=>({...de,[Se]:!1})),v(de=>({...de,[Se]:new Date}))}),xe.on("message_edited",ye=>{const{threadId:Se,messageId:de,message:De}=ye;u&&u._id===Se&&f(lt=>lt.map(ze=>ze._id===de?{...ze,...De}:ze))}),xe.on("message_deleted",ye=>{const{threadId:Se,messageId:de}=ye;u&&u._id===Se&&f(De=>De.filter(lt=>lt._id!==de))}),()=>{xe&&(console.log("üîå Disconnecting Socket.IO..."),xe.disconnect())}},[t,s,u]),p.useEffect(()=>{if(!Ae.current||!Ae.current.connected)return;const K=Ae.current;l.forEach(ge=>{K.emit("join-room",ge._id),console.log("üîå Joined thread room:",ge._id)})},[l]),p.useEffect(()=>{if(!Ae.current||!Ae.current.connected)return;const K=Ae.current;return u&&(K.emit("join-room",u._id),console.log("üîå Joined thread room:",u._id)),()=>{u&&K&&(K.emit("leave-room",u._id),console.log("üîå Left thread room:",u._id))}},[u]);const $e=()=>{try{Te.current?Te.current.scrollIntoView({behavior:"smooth"}):Ie.current&&(Ie.current.scrollTop=Ie.current.scrollHeight)}catch(K){console.error("Error scrolling to bottom:",K)}},Xe=()=>{var xe,ye,Se,de,De,lt,ze;if(!d||d.length===0)return[];const K=[],ge=2*60*1e3;for(const st of d){const xt=((ye=(xe=st.sender)==null?void 0:xe._id)==null?void 0:ye.toString())||(typeof st.sender=="object"?(de=(Se=st.sender)==null?void 0:Se._id)==null?void 0:de.toString():(De=st.sender)==null?void 0:De.toString()),Ht=new Date(st.createdAt||st.timestamp||Date.now()).getTime(),ls=K[K.length-1];!ls||ls.senderId!==xt||Ht-ls.lastTimestamp>ge?K.push({senderId:xt,sender:st.sender,avatar:((lt=st.sender)==null?void 0:lt.avatarUrl)||((ze=st.sender)==null?void 0:ze.profilePic),messages:[st],lastTimestamp:Ht}):(ls.messages.push(st),ls.lastTimestamp=Ht)}return K},Ve=K=>{if(K.messageType!=="text"){B.warning("Only text messages can be edited");return}ne(K._id),$(K.text||K.ciphertext||K.message||"")},_e=async()=>{var K,ge;if(!(!Y||!u||!U.trim()))try{const xe=await $s.editMessage(u._id,Y,{text:U.trim()});xe.data.success?(f(ye=>ye.map(Se=>Se._id===Y?{...Se,text:U.trim(),ciphertext:U.trim(),isEdited:!0,editedAt:new Date}:Se)),ne(null),$(""),B.success("Message edited")):B.error(xe.data.message||"Failed to edit message")}catch(xe){console.error("Error editing message:",xe),B.error(((ge=(K=xe.response)==null?void 0:K.data)==null?void 0:ge.message)||"Failed to edit message")}},Ne=()=>{ne(null),$("")},ot=async K=>{!u||!K||Ke.confirm({title:"Unsend message?",content:"This message will be removed for everyone.",okText:"Unsend",okType:"danger",cancelText:"Cancel",onOk:async()=>{var ge,xe;try{const ye=await $s.deleteMessage(u._id,K);ye.data.success?(f(Se=>Se.filter(de=>de._id!==K)),B.success("Message unsent")):B.error(ye.data.message||"Failed to delete message")}catch(ye){console.error("Error deleting message:",ye),B.error(((xe=(ge=ye.response)==null?void 0:ge.data)==null?void 0:xe.message)||"Failed to delete message")}}})},Oe=async()=>{var K,ge,xe,ye,Se,de;if(!t||!s){console.log("Not authenticated, skipping API call");return}n(!0),i(null);try{const De=await $s.getThreads({}),lt=[];if(De.data.success){const st=(De.data.threads||[]).filter(xt=>{var Ht;return!xt.isGroup&&((Ht=xt.participants)==null?void 0:Ht.length)===2}).map(xt=>({...xt,_id:xt._id,participants:xt.participants||[],isGroup:!1,lastMessageAt:xt.lastMessageAt||xt.createdAt}));lt.push(...st)}lt.sort((ze,st)=>{const xt=new Date(ze.lastMessageAt||ze.createdAt||0);return new Date(st.lastMessageAt||st.createdAt||0)-xt}),c(lt),lt.length>0&&!u&&m(lt[0])}catch(De){if(console.error("‚ùå Error loading chat rooms:",De),console.error("Error details:",{message:De.message,response:(K=De.response)==null?void 0:K.data,status:(ge=De.response)==null?void 0:ge.status,code:De.code}),((xe=De.response)==null?void 0:xe.status)===401){console.log("Authentication error in chat"),B.error("Please login again");return}if(((ye=De.response)==null?void 0:ye.status)===403){console.log("Access denied"),B.error("Access denied");return}c([]),De.code!=="ERR_NETWORK"&&De.code!=="ECONNREFUSED"&&B.error(((de=(Se=De.response)==null?void 0:Se.data)==null?void 0:de.message)||"Failed to load conversations")}finally{n(!1)}},Ct=async K=>{var ge,xe,ye,Se,de,De,lt;if(!t||!s||!K){console.log("Not authenticated or no roomId, skipping messages API call");return}try{console.log("üì® Loading messages for room:",K);const ze=await $s.getMessages(K,{page:1,limit:100});if(ze.data.success){const st=ze.data.messages||[];console.log(`‚úÖ Loaded ${st.length} messages`);const xt=st.sort((Ht,ls)=>{const fr=new Date(Ht.createdAt||0),gr=new Date(ls.createdAt||0);return fr-gr});f(xt),setTimeout(()=>$e(),100)}else console.warn("‚ö†Ô∏è API returned success=false:",ze.data),f([])}catch(ze){if(console.error("‚ùå Error loading messages:",ze),console.error("Error details:",{message:ze.message,response:(ge=ze.response)==null?void 0:ge.data,status:(xe=ze.response)==null?void 0:xe.status,roomId:K}),((ye=ze.response)==null?void 0:ye.status)===401){console.log("Authentication error loading messages"),B.error("Please login again");return}if(((Se=ze.response)==null?void 0:Se.status)===403){console.log("Access denied for this thread"),B.error("You do not have access to this conversation");return}if(((de=ze.response)==null?void 0:de.status)===404){console.log("Thread not found"),B.error("Conversation not found");return}f([]),ze.code!=="ERR_NETWORK"&&ze.code!=="ECONNREFUSED"&&B.error(((lt=(De=ze.response)==null?void 0:De.data)==null?void 0:lt.message)||"Failed to load messages")}},ut=async(K="")=>{try{let ge;try{ge=await an.getUsers({search:K,limit:20,excludeSelf:!0})}catch{ge=await ie.get(`/users/search?q=${encodeURIComponent(K)}&limit=20`)}if(ge.data.success){const ye=(ge.data.users||[]).filter(Se=>Se._id!==s._id&&!M.includes(Se._id));T(ye)}}catch(ge){console.error("Error loading users:",ge),T([])}},tt=async K=>{var xe,ye,Se,de,De,lt,ze,st,xt,Ht,ls,fr,gr,yt,Hs,Vs,mr,mn;if(!u)return;let ge={};if(K.type==="text"){if(!((xe=K.text)!=null&&xe.trim()))return;ge={text:K.text.trim(),messageType:"text",replyTo:(he==null?void 0:he._id)||null},fe(null)}else if(K.type==="sticker")ge={text:K.sticker,messageType:"sticker",replyTo:(he==null?void 0:he._id)||null},fe(null);else if(K.type==="image"){if(!K.file)return;try{const He=new FormData;He.append("image",K.file);const et=await ie.post("/upload/image",He,{headers:{"Content-Type":"multipart/form-data"}});if(et.data.success)ge={text:K.text||"",messageType:"image",imageUrl:et.data.url||((ye=et.data.data)==null?void 0:ye.url)};else{B.error("Failed to upload image");return}}catch(He){console.error("Image upload error:",He),B.error("Failed to upload image");return}}else if(K.type==="audio"){if(!K.file)return;try{console.log("üì§ Uploading audio file:",{fileName:K.file.name,fileSize:K.file.size,fileType:K.file.type,title:K.title,note:K.note});const He=new FormData;He.append("audio",K.file),K.title&&He.append("title",K.title),K.note&&He.append("note",K.note);const et=await ie.post("/upload/audio",He);if(console.log("üì§ Audio upload response:",et.data),et.data.success){const Gs=et.data.url||((Se=et.data.data)==null?void 0:Se.url);if(!Gs){console.error("‚ùå No audio URL in response:",et.data),B.error("Upload succeeded but no URL returned");return}ge={text:K.note||"",messageType:"audio",audioUrl:Gs,audioTitle:K.title,audioDuration:K.duration}}else{const Gs=et.data.message||"Failed to upload audio";console.error("‚ùå Audio upload failed:",Gs),B.error(Gs);return}}catch(He){console.error("‚ùå Audio upload error:",He),console.error("‚ùå Error details:",{message:He.message,response:(de=He.response)==null?void 0:de.data,status:(De=He.response)==null?void 0:De.status,statusText:(lt=He.response)==null?void 0:lt.statusText});let et="Failed to upload audio";((ze=He.response)==null?void 0:ze.status)===413?et="Audio file too large. Maximum size is 10MB.":((st=He.response)==null?void 0:st.status)===400?et=((Ht=(xt=He.response)==null?void 0:xt.data)==null?void 0:Ht.message)||"Invalid audio file":((ls=He.response)==null?void 0:ls.status)===401?et="Authentication required. Please login again.":(gr=(fr=He.response)==null?void 0:fr.data)!=null&&gr.message?et=He.response.data.message:He.message&&(et=He.message),B.error(et);return}}else{if(!g.trim())return;ge={text:g.trim(),messageType:"text"}}x(!0);try{console.log("Sending message:",{threadId:u._id,...ge});const He=await $s.sendMessage(u._id,ge);if(console.log("Send message response:",He.data),He.data.success){y(""),await Oe();const et=He.data.data||He.data.message;et&&(f(Gs=>Gs.some(Xu=>Xu._id===et._id)?Gs:[...Gs,{...et,sender:et.sender||{_id:s._id,name:s.name}}]),setTimeout(()=>$e(),100))}else B.error(He.data.message||"Failed to send message")}catch(He){console.error("Error sending message:",He),console.error("Error details:",{message:He.message,response:(yt=He.response)==null?void 0:yt.data,status:(Hs=He.response)==null?void 0:Hs.status,statusText:(Vs=He.response)==null?void 0:Vs.statusText,threadId:u==null?void 0:u._id});const et=((mn=(mr=He.response)==null?void 0:mr.data)==null?void 0:mn.message)||He.message||"Failed to send message. Please check your connection.";B.error(et)}finally{x(!1)}},at=async()=>{var K,ge,xe,ye;if(M.length===0){B.error("Please select a user to message");return}if(M.length>1){B.error("You can only message one person at a time");return}try{const Se=await $s.createThread(M);Se.data.success&&(B.success("Message started successfully"),S(!1),j([]),R(""),T([]),Oe(),Se.data.thread&&m(Se.data.thread))}catch(Se){console.error("Error starting message:",Se),console.error("Error details:",{message:Se.message,response:(K=Se.response)==null?void 0:K.data,status:(ge=Se.response)==null?void 0:ge.status,selectedParticipants:M});const de=((ye=(xe=Se.response)==null?void 0:xe.data)==null?void 0:ye.message)||Se.message||"Failed to start message. Please check your connection.";B.error(de)}},Ws=K=>{var xe;const ge=(xe=K.participants)==null?void 0:xe.find(ye=>{var Se,de;return((Se=ye._id||ye)==null?void 0:Se.toString())!==((de=s._id)==null?void 0:de.toString())});return ge?ge.name||"Unknown User":"Direct Message"},Xs=K=>{var xe;const ge=(xe=K.participants)==null?void 0:xe.find(ye=>{var Se,de;return((Se=ye._id||ye)==null?void 0:Se.toString())!==((de=s._id)==null?void 0:de.toString())});return ge?ge.avatarUrl||ge.profilePic:null},ps=K=>{var ge;return(ge=K.participants)==null?void 0:ge.find(xe=>{var ye,Se;return((ye=xe._id||xe)==null?void 0:ye.toString())!==((Se=s._id)==null?void 0:Se.toString())})},qs=K=>{if(!K)return"";const ge=new Date(K),ye=Math.abs(new Date-ge),Se=Math.floor(ye/(1e3*60)),de=Math.floor(ye/(1e3*60*60)),De=Math.floor(ye/(1e3*60*60*24));return Se<1?"Just now":Se<60?`${Se}m`:de<24?`${de}h`:De===1?"Yesterday":De<7?ge.toLocaleDateString([],{weekday:"short"}):ge.toLocaleDateString([],{month:"short",day:"numeric"})},fn=K=>K?new Date(K).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",fs=K=>{if(!K)return null;const ge=E[K]||!1,xe=A[K];if(ge)return"Active now";if(xe){const ye=new Date,Se=new Date(xe),de=Math.floor((ye-Se)/(1e3*60));return de<1?"Active now":de<60?`Active ${de}m ago`:de<1440?`Active ${Math.floor(de/60)}h ago`:`Active ${Math.floor(de/1440)}d ago`}return null},mt=K=>{var ye;const ge=ps(K);if(!ge)return null;const xe=((ye=ge._id)==null?void 0:ye.toString())||ge.toString();return{isOnline:E[xe]||!1,activeStatus:fs(xe)}},ks=l.filter(K=>{var ye,Se,de;if(!w.trim())return!0;const ge=ps(K),xe=w.toLowerCase();return((ye=ge==null?void 0:ge.name)==null?void 0:ye.toLowerCase().includes(xe))||((Se=ge==null?void 0:ge.email)==null?void 0:Se.toLowerCase().includes(xe))||((de=K.lastMessageText)==null?void 0:de.toLowerCase().includes(xe))});return!C||r&&l.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#fafafa"},children:e.jsx(rt,{size:"large"})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes typing {
          0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.7;
          }
          30% {
            transform: translateY(-10px);
            opacity: 1;
          }
        }
        @keyframes bubblePop {
          0% {
            transform: scale(0.8);
            opacity: 0;
          }
          50% {
            transform: scale(1.05);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        @keyframes bounce {
          0%, 80%, 100% {
            transform: scale(0);
            opacity: 0.5;
          }
          40% {
            transform: scale(1);
            opacity: 1;
          }
        }
        .ios-message-bubble {
          animation: bubblePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .ios-typing-dot {
          animation: bounce 1.4s infinite ease-in-out;
        }
        .ios-typing-dot:nth-child(1) {
          animation-delay: -0.32s;
        }
        .ios-typing-dot:nth-child(2) {
          animation-delay: -0.16s;
        }
        .ios-typing-dot:nth-child(3) {
          animation-delay: 0s;
        }
        @media (max-width: 768px) {
          .chat-sidebar {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 100%;
            z-index: 100;
            transition: transform 0.3s ease-out;
          }
          .chat-sidebar.hidden {
            transform: translateX(-100%);
          }
          .chat-main {
            width: 100%;
          }
          .chat-main.hidden {
            display: none;
          }
        }
        @media (min-width: 769px) {
          .chat-sidebar {
            width: 350px;
            flex-shrink: 0;
          }
          .chat-main {
            flex: 1;
          }
        }
      `}),e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 80px)",background:"#fff",overflow:"hidden",position:"relative"},children:[e.jsxs("div",{className:`chat-sidebar ${u&&X?"hidden":""}`,style:{borderRight:"0.5px solid rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",background:ae.sidebarBg,backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"0.5px solid rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:ae.sidebarBg,backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)"},children:[e.jsx(Bt,{strong:!0,style:{fontSize:"16px"},children:(s==null?void 0:s.name)||"Messages"}),e.jsx(L,{type:"text",icon:e.jsx(hs,{}),onClick:()=>S(!0),style:{padding:"4px 8px"}})]}),e.jsx("div",{style:{padding:"8px 12px"},children:e.jsx(ue,{prefix:e.jsx(Kt,{style:{color:"#8E8E93"}}),placeholder:"Search",value:w,onChange:K=>b(K.target.value),style:{borderRadius:"10px",background:"rgba(142, 142, 147, 0.12)",border:"none",fontSize:"15px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',height:"36px"}})}),e.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:r?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx(rt,{})}):ks.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 2rem"},children:[e.jsx(Mt,{style:{fontSize:"48px",color:"#dbdbdb",marginBottom:"16px"}}),e.jsx(Bt,{type:"secondary",style:{display:"block",marginBottom:"16px"},children:w?"No conversations found":"No messages yet"}),!w&&e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>S(!0),children:"Start New Message"})]}):ks.map(K=>{const ge=ps(K),xe=(u==null?void 0:u._id)===K._id;return e.jsxs("div",{onClick:()=>m(K),style:{padding:"12px 16px",cursor:"pointer",background:xe?"rgba(0,0,0,0.05)":"transparent",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.15s ease-out",borderBottom:"0.5px solid rgba(0,0,0,0.05)",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif'},onMouseEnter:ye=>{xe||(ye.currentTarget.style.background="rgba(0,0,0,0.03)")},onMouseLeave:ye=>{xe||(ye.currentTarget.style.background="transparent")},children:[e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx(We,{src:Xs(K),icon:e.jsx(Re,{}),size:56,children:ge?nt(ge.name):"U"}),(()=>{var de;const ye=((de=ge==null?void 0:ge._id)==null?void 0:de.toString())||(ge==null?void 0:ge.toString());return(E[ye]||!1)&&e.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"14px",height:"14px",background:"#0095f6",border:"2px solid #fff",borderRadius:"50%"}})})()]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx(Bt,{strong:!0,style:{fontSize:"14px",display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ws(K)}),(()=>{const ye=mt(K);return(ye==null?void 0:ye.activeStatus)&&e.jsx(Bt,{type:"secondary",style:{fontSize:"12px",display:"block"},children:ye.activeStatus})})()]}),K.lastMessageAt&&e.jsx(Bt,{type:"secondary",style:{fontSize:"12px",marginLeft:"8px",flexShrink:0},children:qs(K.lastMessageAt)})]}),e.jsx(Bt,{type:"secondary",style:{fontSize:"14px",display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:K.lastMessageText||"No messages yet"})]})]},K._id)})})]}),e.jsxs("div",{className:`chat-main ${!u&&X?"hidden":""}`,style:{display:"flex",flexDirection:"column",position:"relative",background:ae.background,overflow:"hidden",width:"100%"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:ae.blurOverlay,backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)",pointerEvents:"none",zIndex:0}}),u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"10px 16px",borderBottom:"0.5px solid rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"12px",background:J?(()=>{var xe;const K="http://localhost:7000/api".replace("/api",""),ge=(xe=J.imageUrl)!=null&&xe.startsWith("http")?J.imageUrl:`${K}${J.imageUrl}`;return console.log("üé® Other participant banner image URL:",ge,"Base URL:",K,"Image URL from banner:",J.imageUrl),`url(${ge}) center/cover no-repeat`})():ae.headerBg,backgroundSize:J?"cover":void 0,backdropFilter:J?"blur(0px)":"blur(20px) saturate(180%)",WebkitBackdropFilter:J?"blur(0px)":"blur(20px) saturate(180%)",position:"relative",zIndex:10,minHeight:"60px",overflow:"hidden"},children:[X&&e.jsx(L,{type:"text",icon:e.jsx(Al,{}),onClick:()=>m(null),style:{marginRight:"8px",padding:"4px",color:J?"#fff":void 0,textShadow:J?"0 1px 2px rgba(0,0,0,0.5)":void 0}}),J&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 50%, rgba(0,0,0,0.1) 100%)",zIndex:1}}),!1]}),e.jsxs("div",{style:{position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(We,{src:Xs(u),icon:e.jsx(Re,{}),size:32,children:ps(u)?nt(ps(u).name):"U"}),(()=>{var ye;const K=ps(u),ge=((ye=K==null?void 0:K._id)==null?void 0:ye.toString())||(K==null?void 0:K.toString());return(E[ge]||!1)&&e.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"10px",height:"10px",background:"#0095f6",border:"2px solid #fff",borderRadius:"50%"}})})()]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("div",{children:[e.jsx(Bt,{strong:!0,style:{fontSize:"14px",display:"block",color:J?"#fff":void 0,textShadow:J?"0 1px 2px rgba(0,0,0,0.5)":void 0},children:Ws(u)}),(()=>{const K=mt(u);return(K==null?void 0:K.activeStatus)&&e.jsx(Bt,{type:"secondary",style:{fontSize:"12px",color:J?"rgba(255,255,255,0.9)":void 0,textShadow:J?"0 1px 2px rgba(0,0,0,0.5)":void 0},children:K.activeStatus})})()]})}),e.jsx(Er,{menu:{items:[{key:"themes",label:"Themes",icon:e.jsx(Rp,{}),children:Object.keys(je).map(K=>({key:`theme-${K}`,label:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsx("span",{children:je[K].name}),H===parseInt(K)&&e.jsx(Ee,{style:{color:"#52c41a"}})]}),onClick:()=>Ce(parseInt(K))}))},{type:"divider"},{key:"clearMessages",label:"Clear Messages",icon:e.jsx(Tt,{}),danger:!0,onClick:()=>{if(!(u!=null&&u._id)){B.error("No conversation selected");return}Ke.confirm({title:"Clear all messages?",content:"All messages in this conversation will be cleared for you. Other participants will still see the messages.",okText:"Clear",okType:"danger",cancelText:"Cancel",onOk:async()=>{var K,ge,xe,ye;try{const Se=await $s.clearThreadMessages(u._id);B.success(((K=Se.data)==null?void 0:K.message)||`Cleared ${((ge=Se.data)==null?void 0:ge.deletedCount)||0} message(s)`),u!=null&&u._id&&Ct(u._id)}catch(Se){console.error("Clear messages error:",Se),B.error(((ye=(xe=Se.response)==null?void 0:xe.data)==null?void 0:ye.message)||"Failed to clear messages")}}})}},{type:"divider"},{key:"delete",label:"Delete Conversation",icon:e.jsx(Tt,{}),danger:!0,onClick:()=>{Ke.confirm({title:"Delete conversation?",content:"This conversation will be permanently deleted. This action cannot be undone.",okText:"Delete",okType:"danger",cancelText:"Cancel",onOk:async()=>{var K,ge;try{if(!(u!=null&&u._id)){B.error("No conversation selected");return}await $s.deleteThread(u._id),B.success("Conversation deleted"),m(null),Oe()}catch(xe){console.error("Delete conversation error:",xe),B.error(((ge=(K=xe.response)==null?void 0:K.data)==null?void 0:ge.message)||"Failed to delete conversation")}}})}}]},trigger:["click"],placement:"bottomRight",children:e.jsx(L,{type:"text",icon:e.jsx(nn,{}),style:{padding:"4px"}})})]})]}),e.jsxs("div",{ref:Ie,style:{flex:1,overflowY:"auto",padding:X?"8px 12px":"12px 16px",background:"transparent",display:"flex",flexDirection:"column",gap:"2px",position:"relative",zIndex:1,fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif'},children:[d.length===0?e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",opacity:.4},children:[e.jsx(Mt,{style:{fontSize:"64px",color:"#8E8E93",marginBottom:"16px"}}),e.jsx(Bt,{type:"secondary",style:{fontSize:"17px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',color:"#8E8E93"},children:"No messages yet"}),e.jsx(Bt,{type:"secondary",style:{fontSize:"15px",marginTop:"8px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',color:"#8E8E93"},children:"Send a message to get started"})]}):Xe().map((K,ge)=>{var ye,Se;const xe=((ye=K.senderId)==null?void 0:ye.toString())===((Se=s._id)==null?void 0:Se.toString());return e.jsxs("div",{style:{display:"flex",justifyContent:xe?"flex-end":"flex-start",alignItems:"flex-end",maxWidth:"72%",marginBottom:"12px",paddingLeft:xe?"60px":"0",paddingRight:xe?"0":"60px",flexDirection:xe?"row-reverse":"row"},children:[e.jsx(We,{src:xe?(s==null?void 0:s.avatarUrl)||(s==null?void 0:s.profilePic):K.avatar,icon:e.jsx(Re,{}),size:36,style:{flexShrink:0,margin:"0 8px",width:"36px",height:"36px"},children:xe?nt(s==null?void 0:s.name):K.sender?nt(K.sender.name):"U"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:0,flex:1,minWidth:0},children:K.messages.map((de,De)=>{var st,xt,Ht,ls,fr,gr;const lt=De===K.messages.length-1,ze=((xt=(st=de.sender)==null?void 0:st._id)==null?void 0:xt.toString())===((Ht=s._id)==null?void 0:Ht.toString())||typeof de.sender=="object"&&((fr=(ls=de.sender)==null?void 0:ls._id)==null?void 0:fr.toString())===((gr=s._id)==null?void 0:gr.toString());return e.jsxs("div",{ref:yt=>{de._id&&(we.current[de._id]=yt)},style:{display:"flex",flexDirection:"column",alignItems:ze?"flex-end":"flex-start",margin:0,marginBottom:"4px"},onMouseEnter:()=>ze&&!de.isDeleted&&I(de._id),onMouseLeave:()=>I(null),children:[e.jsxs("div",{className:"ios-message-bubble",style:{background:ze?"linear-gradient(180deg, #2db4ff, #1b8fde)":"#f6f7f8",color:ze?"#fff":"#111",padding:"8px 12px",borderRadius:ze?"18px 18px 4px 18px":"18px 18px 18px 4px",boxShadow:"0 1px 0 rgba(0,0,0,0.04)",fontSize:"14px",lineHeight:"20px",maxWidth:"100%",display:"inline-block",whiteSpace:de.messageType==="text"&&(de.text||de.message||"").length<50?"nowrap":"normal",overflow:de.messageType==="text"&&(de.text||de.message||"").length<50?"hidden":"visible",textOverflow:de.messageType==="text"&&(de.text||de.message||"").length<50?"ellipsis":"clip",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:400},children:[de.replyTo&&(()=>{var Vs,mr,mn,He;const yt=d.find(et=>et._id===de.replyTo);if(!yt)return null;const Hs=((mr=(Vs=yt.sender)==null?void 0:Vs._id)==null?void 0:mr.toString())===((mn=s==null?void 0:s._id)==null?void 0:mn.toString());return e.jsxs("div",{onClick:()=>{const et=we.current[de.replyTo];et&&(et.scrollIntoView({behavior:"smooth",block:"center"}),et.style.backgroundColor=ze?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",setTimeout(()=>{et.style.backgroundColor="transparent"},1e3))},style:{marginBottom:"8px",padding:"6px 10px",background:ze?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.04)",borderRadius:"8px",borderLeft:`3px solid ${ze?"rgba(255,255,255,0.6)":ae.accentColor||"#0A84FF"}`,fontSize:"13px",cursor:"pointer",transition:"all 0.2s ease",userSelect:"none"},children:[e.jsxs("div",{style:{fontSize:"11px",fontWeight:600,color:ze?"rgba(255,255,255,0.9)":"#666",marginBottom:"3px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:"‚Ü©Ô∏è"}),e.jsx("span",{children:Hs?"Replying to yourself":((He=yt.sender)==null?void 0:He.name)||Ws(u)})]}),e.jsx("div",{style:{fontSize:"12px",color:ze?"rgba(255,255,255,0.75)":"#999",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"1.3"},children:yt.text||yt.message||(yt.messageType==="image"?"üì∑ Image":yt.messageType==="audio"?"üéµ Audio":yt.messageType==="sticker"?yt.text||"Sticker":"Message")})]})})(),de.isDeleted?e.jsx("div",{style:{fontSize:"15px",opacity:.5,fontStyle:"italic",color:ze?"#fff":"#8E8E93"},children:"This message was unsent"}):Y===de._id?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[e.jsx(ue.TextArea,{value:U,onChange:yt=>$(yt.target.value),autoFocus:!0,autoSize:{minRows:1,maxRows:6},onPressEnter:yt=>{yt.shiftKey||(yt.preventDefault(),_e())},style:{background:"transparent",border:"none",padding:0,fontSize:"17px",lineHeight:"1.35",color:ze?"#fff":"#262626",resize:"none"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(L,{size:"small",icon:e.jsx(sn,{}),onClick:Ne,style:{fontSize:"13px",height:"28px"},children:"Cancel"}),e.jsx(L,{type:"primary",size:"small",icon:e.jsx(ur,{}),onClick:_e,style:{fontSize:"13px",height:"28px"},children:"Save"})]})]}):e.jsxs(e.Fragment,{children:[de.messageType==="sticker"&&e.jsx("div",{style:{fontSize:"48px",textAlign:"center"},children:de.text||de.message}),de.messageType==="image"&&de.imageUrl&&(()=>{const yt="http://localhost:7000/api".replace("/api",""),Hs=de.imageUrl.startsWith("http")?de.imageUrl:`${yt}${de.imageUrl.startsWith("/")?de.imageUrl:"/"+de.imageUrl}`;return e.jsx("div",{style:{marginBottom:de.text?"8px":"0"},children:e.jsx(ar,{src:Hs,alt:"Shared image",onError:Vs=>Vs.target.style.display="none",style:{maxWidth:"280px",maxHeight:"280px",borderRadius:"12px",objectFit:"cover",display:"block"},preview:{mask:"View"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="})})})(),de.messageType==="audio"&&de.audioUrl&&!re.has(de._id)&&(()=>{const yt="http://localhost:7000/api".replace("/api",""),Hs=de.audioUrl.startsWith("http")?de.audioUrl:`${yt}${de.audioUrl.startsWith("/")?de.audioUrl:"/"+de.audioUrl}`;return e.jsxs("div",{style:{marginBottom:de.text?"8px":"0",minWidth:"200px",maxWidth:"280px"},children:[e.jsxs("audio",{controls:!0,controlsList:"nodownload",preload:"metadata",onError:Vs=>{se(mr=>new Set([...mr,de._id])),Vs.target.style.display="none"},style:{width:"100%",height:"36px",outline:"none",borderRadius:"8px"},children:[e.jsx("source",{src:Hs,type:"audio/wav"}),e.jsx("source",{src:Hs,type:"audio/mpeg"})]}),de.audioTitle&&e.jsx("div",{style:{fontSize:"12px",opacity:.9,marginTop:"4px",fontWeight:500,color:ze?"#fff":"#262626"},children:de.audioTitle})]})})(),de.messageType==="audio"&&de.audioUrl&&re.has(de._id)&&e.jsx("div",{style:{fontSize:"13px",opacity:.7,fontStyle:"italic",color:ze?"#fff":"#8E8E93",marginTop:"4px"},children:"Audio file not available"}),(de.text||de.ciphertext||de.message)&&de.messageType!=="sticker"&&e.jsxs("div",{children:[de.text||de.ciphertext||de.message,de.isEdited&&e.jsx("span",{style:{fontSize:"12px",opacity:.7,marginLeft:"6px",fontStyle:"italic"},children:"(edited)"})]})]})]}),ze&&!de.isDeleted&&D===de._id&&Y!==de._id&&e.jsx(Er,{menu:{items:[{key:"reply",label:"Reply",icon:e.jsx(am,{}),onClick:()=>fe(de)},{key:"edit",label:"Edit",icon:e.jsx(qt,{}),onClick:()=>Ve(de),disabled:de.messageType!=="text"},{key:"unsend",label:"Unsend",icon:e.jsx(Tt,{}),danger:!0,onClick:()=>ot(de._id)}]},trigger:["click"],placement:"bottomRight",children:e.jsx(L,{type:"text",icon:e.jsx(nn,{}),size:"small",style:{padding:"4px",minWidth:"24px",height:"24px",opacity:.7}})}),lt&&e.jsxs(Bt,{type:"secondary",style:{fontSize:"11px",marginTop:"2px",padding:"0 4px",color:"#9aa0a6",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:400,letterSpacing:"-0.01em",alignSelf:ze?"flex-end":"flex-start"},children:[fn(de.createdAt),ze&&e.jsx("span",{style:{marginLeft:"4px",opacity:.6},children:e.jsx(Ee,{style:{fontSize:"10px"}})})]})]},de._id||`msg-${De}`)})})]},`group-${ge}-${K.senderId}`)}),u&&F[u._id]&&F[u._id].length>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",gap:"8px",marginBottom:"8px"},children:[e.jsx(We,{size:28,style:{flexShrink:0},children:e.jsx(Re,{})}),e.jsxs("div",{style:{background:ae.otherMessageBg,padding:"12px 16px",borderRadius:"22px 22px 22px 4px",boxShadow:"0 1px 2px rgba(0,0,0,0.08)",display:"flex",gap:"6px",alignItems:"center",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:"0.5px solid rgba(0,0,0,0.08)"},children:[e.jsx("div",{className:"ios-typing-dot",style:{width:"8px",height:"8px",background:"#8E8E93",borderRadius:"50%"}}),e.jsx("div",{className:"ios-typing-dot",style:{width:"8px",height:"8px",background:"#8E8E93",borderRadius:"50%"}}),e.jsx("div",{className:"ios-typing-dot",style:{width:"8px",height:"8px",background:"#8E8E93",borderRadius:"50%"}})]})]}),e.jsx("div",{ref:Te})]}),e.jsxs("div",{style:{padding:"8px 16px",paddingBottom:"max(8px, env(safe-area-inset-bottom))",background:ae.inputBg,backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderTop:"0.5px solid rgba(0,0,0,0.1)",position:"relative",zIndex:10},children:[he&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px 12px",background:"rgba(0,0,0,0.05)",borderRadius:"8px",borderLeft:`3px solid ${ae.accentColor||"#0A84FF"}`,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:600,color:ae.accentColor||"#0A84FF",marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:"‚Ü©Ô∏è"}),e.jsxs("span",{children:["Replying to ",((gn=(er=he.sender)==null?void 0:er._id)==null?void 0:gn.toString())===((Is=s==null?void 0:s._id)==null?void 0:Is.toString())?"yourself":((zs=he.sender)==null?void 0:zs.name)||Ws(u)]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"1.3"},children:he.text||he.message||(he.messageType==="image"?"üì∑ Image":he.messageType==="audio"?"üéµ Audio":he.messageType==="sticker"?he.text||"Sticker":"Message")})]}),e.jsx(L,{type:"text",icon:e.jsx(sn,{}),size:"small",onClick:()=>fe(null),style:{flexShrink:0}})]}),e.jsx(d2,{onSend:tt,disabled:h||!u,placeholder:"Message...",theme:ae})]})]}):e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:ae.background,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:ae.blurOverlay,backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)",pointerEvents:"none",zIndex:0}}),e.jsxs("div",{style:{position:"relative",zIndex:1,textAlign:"center",opacity:.6},children:[e.jsx(Mt,{style:{fontSize:"96px",color:"#8E8E93",marginBottom:"24px"}}),e.jsx(Bt,{strong:!0,style:{fontSize:"22px",marginBottom:"8px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',color:"#000",display:"block"},children:"Your Messages"}),e.jsx(Bt,{type:"secondary",style:{fontSize:"15px",marginBottom:"24px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',color:"#8E8E93",display:"block"},children:"Send private photos and messages to a friend or group."}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>S(!0),size:"large",style:{borderRadius:"20px",height:"44px",padding:"0 24px",fontSize:"17px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:600,background:ae.accentColor||"#0A84FF",border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:"Send Message"})]})]})]}),e.jsx(Ke,{title:"New Message",open:P,onCancel:()=>{S(!1),j([]),R(""),T([])},onOk:at,okText:"Chat",cancelText:"Cancel",width:500,okButtonProps:{disabled:M.length!==1},children:e.jsx(Z,{direction:"vertical",style:{width:"100%"},children:e.jsxs("div",{children:[e.jsx(Bt,{strong:!0,children:"Send message to:"}),e.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"8px"},children:e.jsx(ue,{prefix:e.jsx(Kt,{}),placeholder:"Search users...",value:k,onChange:K=>{R(K.target.value),ut(K.target.value)},style:{flex:1}})}),z.length>0&&e.jsx("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto"},children:z.map(K=>e.jsxs("div",{onClick:()=>{M.includes(K._id)||j([K._id])},style:{display:"flex",alignItems:"center",padding:"12px",cursor:"pointer",borderRadius:"8px",background:M.includes(K._id)?"#f0f0f0":"transparent",marginBottom:"4px"},children:[e.jsx(We,{src:ht(K),icon:e.jsx(Re,{}),size:44,children:nt(K.name)}),e.jsxs("div",{style:{marginLeft:"12px",flex:1},children:[e.jsx(Bt,{strong:!0,style:{fontSize:"14px",display:"block"},children:K.name}),K.username&&e.jsxs(Bt,{type:"secondary",style:{fontSize:"12px"},children:["@",K.username]})]}),M.includes(K._id)&&e.jsx(Ee,{style:{color:"#0095f6",fontSize:"20px"}})]},K._id))}),M.length>0&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#fafafa",borderRadius:"8px"},children:[e.jsx(Bt,{strong:!0,style:{display:"block",marginBottom:"8px"},children:"To:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:M.map(K=>{const ge=z.find(xe=>xe._id===K);return ge?e.jsxs(le,{closable:!0,onClose:()=>j(xe=>xe.filter(ye=>ye!==K)),color:"blue",style:{margin:0,padding:"4px 12px",fontSize:"14px"},children:[e.jsx(We,{src:ht(ge),icon:e.jsx(Re,{}),size:16,style:{marginRight:"6px"},children:nt(ge.name)}),ge.name]},K):e.jsx(le,{color:"default",children:"Loading..."},K)})})]})]})})}),e.jsx(Ke,{title:"Choose Theme",open:ke,onCancel:()=>me(!1),footer:null,width:320,children:e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:"small",children:Object.keys(je).map(K=>e.jsxs(L,{type:H===parseInt(K)?"primary":"default",block:!0,onClick:()=>{Ce(parseInt(K)),me(!1)},style:{height:"44px",display:"flex",alignItems:"center",justifyContent:"space-between",background:H===parseInt(K)?je[K].ownMessageBg:"transparent",border:H===parseInt(K)?"none":"0.5px solid rgba(0,0,0,0.1)",borderRadius:"10px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"15px",fontWeight:H===parseInt(K)?600:400,color:H===parseInt(K)?"#fff":"#000",transition:"all 0.2s ease-out"},children:[e.jsx("span",{children:je[K].name}),e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",background:je[K].background,border:"0.5px solid rgba(0,0,0,0.1)",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}})]},K))})})]})]})},{Title:Dr,Paragraph:Cn,Text:Sr}=Fe,h2=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState(!1),[o,i]=p.useState(""),[l,c]=p.useState([]),[u,m]=p.useState([]),[d,f]=p.useState([]),[g,y]=p.useState(null),[h,x]=p.useState(!1);p.useEffect(()=>{j(),P(),o.length>=2?M():S()},[o]),p.useEffect(()=>{l.length>0&&z()},[l.length]);const P=async()=>{try{const b=await an.getUsers({sort:"new",limit:12,excludeSelf:!0});if(b.data.success){const C=(b.data.users||[]).filter(O=>O.isNew);m(C.slice(0,8))}}catch(b){console.error("Load new users error:",b),m([])}},S=async()=>{try{const b=await an.getUsers({limit:20,excludeSelf:!0});b.data.success&&o.length<2&&c(b.data.users||[])}catch(b){console.error("Load recommendations error:",b);try{const C=await ie.get("/follow/recommendations");C.data.success&&o.length<2&&c(C.data.users||[])}catch{o.length<2&&c([])}}},M=async()=>{if(!(o.length<2)){n(!0);try{const b=await ie.get("/follow/search",{params:{q:o,limit:20}});b.data.success?c(b.data.users):B.error("Failed to search users")}catch(b){console.error("Search users error:",b),c([]),B.error("Failed to search users. Please try again.")}finally{n(!1)}}},j=async()=>{try{const b=await ie.get("/follow/requests");b.data.success&&f(b.data.requests)}catch(b){console.error("Load follow requests error:",b)}},z=async()=>{try{const b=await es.getFollowing();if(b.data.success&&b.data.following){const C=b.data.following||[],O=new Set(C.map(F=>{var N;return((N=F._id)==null?void 0:N.toString())||F._id}));c(F=>F.map(N=>{var A;const E=((A=N._id)==null?void 0:A.toString())||N._id,_=O.has(E);return{...N,isFollowing:_||N.isFollowing||!1}}))}}catch(b){console.error("Load follow statuses error:",b)}},T=async b=>{var C,O,F,N,E,_;try{console.log("üì§ Sending follow request to user:",b);const A=await ie.post(`/follow/request/${b}`);if(console.log("üì§ Follow request response:",A.data),A.data.success){const v=(C=A.data.follow)==null?void 0:C.status,H=v==="accepted",q=v==="pending";c(Y=>Y.map(ne=>ne._id===b?{...ne,isFollowing:H,isFollowRequestSent:q,hasFollowRequest:q,...H&&{followersCount:(ne.followersCount||0)+1}}:ne)),m(Y=>Y.map(ne=>ne._id===b?{...ne,isFollowing:H,isFollowRequestSent:q,hasFollowRequest:q,...H&&{followersCount:(ne.followersCount||0)+1}}:ne)),B.success(A.data.message||(q?"Follow request sent!":"User followed successfully!")),setTimeout(()=>{z(),o?handleSearch(o):S()},500)}else B.error(A.data.message||"Failed to send follow request")}catch(A){console.error("‚ùå Send follow request error:",A),console.error("‚ùå Error details:",{message:A.message,response:(O=A.response)==null?void 0:O.data,status:(F=A.response)==null?void 0:F.status,statusText:(N=A.response)==null?void 0:N.statusText});const v=((_=(E=A.response)==null?void 0:E.data)==null?void 0:_.message)||A.message||"Failed to send follow request";B.error(v)}},k=async b=>{try{f(C=>C.filter(O=>O._id!==b)),B.success("Follow request accepted!");try{const C=await ie.post(`/follow/accept/${b}`);C.data.success||(j(),B.error(C.data.message))}catch{console.log("Server update failed, but UI updated locally")}}catch(C){console.error("Accept follow request error:",C),B.error("Failed to accept follow request")}},R=async b=>{try{f(C=>C.filter(O=>O._id!==b)),B.success("Follow request declined");try{const C=await ie.post(`/follow/decline/${b}`);C.data.success||(j(),B.error(C.data.message))}catch{console.log("Server update failed, but UI updated locally")}}catch(C){console.error("Decline follow request error:",C),B.error("Failed to decline follow request")}},w=b=>b.isFollowing?e.jsx(L,{disabled:!0,icon:e.jsx(ur,{}),onClick:C=>C.stopPropagation(),children:"Following"}):b.hasFollowRequest?e.jsx(L,{disabled:!0,icon:e.jsx(Ks,{}),onClick:C=>C.stopPropagation(),children:"Request Sent"}):e.jsx(L,{type:"primary",icon:e.jsx(Ks,{}),onClick:C=>{C.preventDefault(),C.stopPropagation(),T(b._id)},children:"Follow"});return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(Dr,{level:2,style:{marginBottom:"24px"},children:"Discover People"}),e.jsxs(V,{style:{marginBottom:"24px"},children:[e.jsx(ue,{size:"large",placeholder:"Search for people by name or email...",prefix:e.jsx(Kt,{}),value:o,onChange:b=>i(b.target.value),style:{marginBottom:"16px"}}),e.jsx(Sr,{type:"secondary",children:"Enter at least 2 characters to search for users"})]}),u.length>0&&o.length<2&&e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(le,{color:"green",style:{fontSize:"12px"},children:"NEW"}),e.jsx("span",{children:"New Users This Week"})]}),style:{marginBottom:"24px"},children:e.jsx(ce,{gutter:[16,16],children:u.map(b=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(V,{size:"small",hoverable:!0,style:{height:"100%",border:b.isNew?"2px solid #52c41a":"1px solid #f0f0f0",cursor:"pointer"},onClick:C=>{C.preventDefault(),C.stopPropagation(),console.log("üîç UserDiscovery: Clicked user card, navigating to:",`/profile/${b._id}`),b._id?t(`/profile/${b._id}`):(console.error("No user._id found:",b),B.error("Invalid user ID"))},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx(We,{size:64,src:ht(b),icon:e.jsx(Re,{}),children:nt(b.name)}),b.isPrivate&&e.jsx(bt,{style:{position:"absolute",bottom:0,right:0,background:"#fff",borderRadius:"50%",padding:"4px",fontSize:"14px",color:"#666"}})]}),b.isNew&&e.jsx(le,{color:"green",style:{position:"absolute",top:"-8px",right:"-8px",fontSize:"10px",fontWeight:"bold"},children:"NEW"}),b.isOnline&&e.jsx(zt,{status:"success",style:{position:"absolute",bottom:"0",right:"0"}})]}),e.jsx(Dr,{level:5,style:{marginTop:"12px",marginBottom:"4px",cursor:"pointer"},onClick:C=>{C.preventDefault(),C.stopPropagation(),console.log("üîç UserDiscovery: Clicked name, navigating to:",`/profile/${b._id}`),b._id&&t(`/profile/${b._id}`)},children:b.name}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px"},children:b.email}),b.website&&e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsx(vs,{style:{fontSize:"12px",color:"#1890ff",marginRight:"4px"}}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px",color:"#1890ff",cursor:"pointer"},onClick:C=>{C.stopPropagation(),window.open(b.website.startsWith("http")?b.website:`https://${b.website}`,"_blank")},children:b.website})]}),b.bio&&e.jsx(Cn,{style:{marginTop:"8px",fontSize:"12px",color:"#666",marginBottom:"12px"},ellipsis:{rows:2},children:b.bio}),e.jsx(Z,{direction:"vertical",style:{width:"100%"},children:e.jsx("div",{onClick:C=>C.stopPropagation(),children:w(b)})})]})})},b._id))})}),d.length>0&&e.jsx(V,{title:"Follow Requests",style:{marginBottom:"24px"},children:e.jsx(ce,{gutter:[16,16],children:d.map(b=>e.jsx(W,{xs:24,sm:12,md:8,children:e.jsx(V,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(We,{size:64,src:ht(b.user),icon:e.jsx(Re,{}),children:nt(b.user.name)}),e.jsx(Dr,{level:5,style:{marginTop:"8px",marginBottom:"4px"},children:b.user.name}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px"},children:b.user.email}),b.user.bio&&e.jsx(Cn,{style:{marginTop:"8px",fontSize:"12px",color:"#666"},ellipsis:{rows:2},children:b.user.bio}),e.jsxs(Z,{style:{marginTop:"12px"},children:[e.jsx(L,{type:"primary",size:"small",icon:e.jsx(ur,{}),onClick:()=>k(b.user._id),children:"Accept"}),e.jsx(L,{size:"small",icon:e.jsx(sn,{}),onClick:()=>R(b.user._id),children:"Decline"})]})]})})},b._id))})}),o.length>=2&&e.jsx(V,{title:"Search Results",children:r?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(rt,{size:"large"})}):l.length>0?e.jsx(ce,{gutter:[16,16],children:l.map(b=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(V,{size:"small",hoverable:!0,style:{height:"100%",cursor:"pointer"},onClick:C=>{C.preventDefault(),C.stopPropagation(),console.log("üîç UserDiscovery Search: Clicked user card, navigating to:",`/profile/${b._id}`),b._id?t(`/profile/${b._id}`):(console.error("No user._id found:",b),B.error("Invalid user ID"))},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(We,{size:80,src:ht(b),icon:e.jsx(Re,{}),children:nt(b.name)}),b.isOnline&&e.jsx(zt,{status:"success",style:{position:"absolute",bottom:"0",right:"0"}})]}),e.jsxs(Dr,{level:5,style:{marginTop:"12px",marginBottom:"4px",cursor:"pointer"},children:[b.name,b.isNew&&e.jsx(le,{color:"green",style:{marginLeft:"8px",fontSize:"10px"},children:"NEW"})]}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px"},children:b.email}),b.website&&e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsx(vs,{style:{fontSize:"12px",color:"#1890ff",marginRight:"4px"}}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px",color:"#1890ff",cursor:"pointer"},onClick:C=>{C.stopPropagation(),window.open(b.website.startsWith("http")?b.website:`https://${b.website}`,"_blank")},children:b.website})]}),b.location&&e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsx(Fr,{style:{fontSize:"12px",color:"#666"}}),e.jsx(Sr,{type:"secondary",style:{fontSize:"12px",marginLeft:"4px"},children:b.location})]}),b.bio&&e.jsx(Cn,{style:{marginTop:"8px",fontSize:"12px",color:"#666",marginBottom:"12px"},ellipsis:{rows:2},children:b.bio}),e.jsx(Z,{direction:"vertical",style:{width:"100%"},children:w(b)})]})})},b._id))}):e.jsx(Ue,{description:"No users found",image:Ue.PRESENTED_IMAGE_SIMPLE})}),e.jsx(Ke,{title:e.jsxs(Z,{children:[e.jsx(We,{size:40,src:g?ht(g):null,icon:e.jsx(Re,{}),children:g?nt(g.name):""}),e.jsx("span",{children:(g==null?void 0:g.name)||"User Profile"}),(g==null?void 0:g.isOnline)&&e.jsx(zt,{status:"success",text:"Online"})]}),open:h,onCancel:()=>{x(!1),y(null)},footer:[e.jsx(L,{onClick:()=>{x(!1),y(null)},children:"Close"},"close")],width:600,children:g&&e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e.jsx(We,{size:120,src:ht(g),icon:e.jsx(Re,{}),style:{marginBottom:"16px"},children:nt(g.name)}),e.jsxs(Dr,{level:3,style:{marginBottom:"8px"},children:[g.name,g.isPrivate&&e.jsx(bt,{style:{marginLeft:"8px",color:"#999"}})]}),g.bio&&e.jsx(Cn,{style:{fontSize:"14px",color:"#666",maxWidth:"500px",margin:"0 auto 16px"},children:g.bio})]}),e.jsxs(Ye,{bordered:!0,column:1,children:[e.jsx(Ye.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(as,{})," Email"]}),children:g.email}),g.location&&e.jsx(Ye.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(Fr,{})," Location"]}),children:g.location}),g.website&&e.jsx(Ye.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(vs,{})," Website"]}),children:e.jsx("a",{href:g.website.startsWith("http")?g.website:`https://${g.website}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff"},children:g.website})}),g.createdAt&&e.jsx(Ye.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(Ds,{})," Member Since"]}),children:new Date(g.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx(Ye.Item,{label:"Account Type",children:e.jsx(le,{color:g.isPrivate?"orange":"blue",children:g.isPrivate?"Private Account":"Public Account"})}),e.jsx(Ye.Item,{label:"Status",children:e.jsxs(Z,{children:[e.jsx(le,{color:g.isOnline?"green":"default",children:g.isOnline?"Online":"Offline"}),g.isNew&&e.jsx(le,{color:"green",children:"New User"})]})})]})]})}),o.length<2&&e.jsx(V,{children:e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(Kt,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx(Dr,{level:4,type:"secondary",children:"Search for People"}),e.jsx(Cn,{type:"secondary",children:"Enter a name or email to discover and connect with other users"})]})})]})},{Title:Qc,Paragraph:p2,Text:si}=Fe,f2=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState(!1),[o,i]=p.useState([]),[l,c]=p.useState([]),[u,m]=p.useState(""),[d,f]=p.useState("followers");p.useEffect(()=>{g(),y()},[]);const g=async()=>{n(!0);try{const j=await ie.get("/follow/followers");j.data.success?i(j.data.followers):B.error("Failed to load followers")}catch(j){console.error("Load followers error:",j),B.error("Failed to load followers")}finally{n(!1)}},y=async()=>{n(!0);try{const j=await ie.get("/follow/following");j.data.success?c(j.data.following):B.error("Failed to load following")}catch(j){console.error("Load following error:",j),B.error("Failed to load following")}finally{n(!1)}},h=async j=>{try{const z=await ie.delete(`/follow/unfollow/${j}`);z.data.success?(B.success("Unfollowed successfully"),y(),g()):B.error(z.data.message)}catch(z){console.error("Unfollow error:",z),B.error("Failed to unfollow user")}},x=j=>{window.location.href=`/chat?user=${j}`},P=o.filter(j=>j.name.toLowerCase().includes(u.toLowerCase())||j.email.toLowerCase().includes(u.toLowerCase())),S=l.filter(j=>j.name.toLowerCase().includes(u.toLowerCase())||j.email.toLowerCase().includes(u.toLowerCase())),M=({user:j,showUnfollow:z=!1})=>e.jsx(V,{size:"small",style:{height:"100%",cursor:"pointer"},hoverable:!0,onClick:()=>t(`/profile/${j._id}`),children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(We,{size:64,src:ht(j),icon:e.jsx(Re,{}),children:nt(j.name)}),j.isOnline&&e.jsx(zt,{status:"success",style:{position:"absolute",bottom:"0",right:"0"}})]}),e.jsx(Qc,{level:5,style:{marginTop:"12px",marginBottom:"4px",cursor:"pointer"},children:j.name}),e.jsx(si,{type:"secondary",style:{fontSize:"12px"},children:j.email}),j.website&&e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsx(vs,{style:{fontSize:"12px",color:"#1890ff",marginRight:"4px"}}),e.jsx(si,{type:"secondary",style:{fontSize:"12px",color:"#1890ff",cursor:"pointer"},onClick:T=>{T.stopPropagation(),window.open(j.website.startsWith("http")?j.website:`https://${j.website}`,"_blank")},children:j.website})]}),j.location&&e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsx(Fr,{style:{fontSize:"12px",color:"#666"}}),e.jsx(si,{type:"secondary",style:{fontSize:"12px",marginLeft:"4px"},children:j.location})]}),j.bio&&e.jsx(p2,{style:{marginTop:"8px",fontSize:"12px",color:"#666",marginBottom:"12px"},ellipsis:{rows:2},children:j.bio}),e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(L,{icon:e.jsx(Mt,{}),onClick:T=>{T.stopPropagation(),x(j._id)},style:{width:"100%"},children:"Message"}),z&&e.jsx(L,{danger:!0,icon:e.jsx(_n,{}),onClick:T=>{T.stopPropagation(),h(j._id)},style:{width:"100%"},children:"Unfollow"})]})]})});return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(Qc,{level:2,style:{marginBottom:"24px"},children:"My Network"}),e.jsx(V,{children:e.jsx(Yt,{activeKey:d,onChange:f,tabBarExtraContent:e.jsx(ue,{placeholder:"Search network...",prefix:e.jsx(Kt,{}),value:u,onChange:j=>m(j.target.value),style:{width:"200px"}}),items:[{key:"followers",label:e.jsxs("span",{children:[e.jsx(ws,{}),"Followers (",o.length,")"]}),children:r?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(rt,{size:"large"})}):P.length>0?e.jsx(ce,{gutter:[16,16],children:P.map(j=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(M,{user:j})},j._id))}):e.jsx(Ue,{description:"No followers found",image:Ue.PRESENTED_IMAGE_SIMPLE})},{key:"following",label:e.jsxs("span",{children:[e.jsx(Re,{}),"Following (",l.length,")"]}),children:r?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(rt,{size:"large"})}):S.length>0?e.jsx(ce,{gutter:[16,16],children:S.map(j=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(M,{user:j,showUnfollow:!0})},j._id))}):e.jsx(Ue,{description:"No following found",image:Ue.PRESENTED_IMAGE_SIMPLE})}]})})]})},{Title:Zc,Paragraph:Xc,Text:sr}=Fe,g2=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState(!1),[o,i]=p.useState([]),[l,c]=p.useState(1),[u,m]=p.useState(0),[d,f]=p.useState({});p.useEffect(()=>{g()},[l,s]);const g=async()=>{var S,M,j,z,T,k,R,w,b;n(!0);try{const C=await an.getUsers({sort:"new",page:l,limit:100,excludeSelf:!0,onlyNew:!1});if(C.data.success){const O=C.data.users||[],F=new Date,N=new Date(F.getTime()-7*24*60*60*1e3);N.setHours(0,0,0,0),console.log("üìÖ Date Filter:",{now:F.toISOString(),sevenDaysAgo:N.toISOString(),totalUsers:O.length});const E=O.filter(_=>{if(_._id===(s==null?void 0:s._id)||_.id===(s==null?void 0:s._id))return!1;if(_.isNew===!0)return console.log("‚úÖ Backend marked as new:",_.name),!0;if(_.createdAt){const A=new Date(_.createdAt),v=A>=N,H=Math.ceil((F-A)/(1e3*60*60*24));return H<=10&&console.log("üîç User Date Check:",{name:_.name,email:_.email,createdAt:A.toISOString(),sevenDaysAgo:N.toISOString(),isNew:v,daysDiff:H,hoursDiff:Math.ceil((F-A)/(1e3*60*60)),backendIsNew:_.isNew}),v}return console.warn("‚ö†Ô∏è User missing createdAt:",_.name,_.email),!1});if(console.log("üìä New Users Debug:",{totalUsers:O.length,newUsersCount:E.length,currentUserId:s==null?void 0:s._id,sampleUsers:O.slice(0,5).map(_=>({name:_.name,email:_.email,userId:_._id,isNew:_.isNew,createdAt:_.createdAt,daysAgo:_.createdAt?Math.ceil((new Date-new Date(_.createdAt))/(1e3*60*60*24)):null,hoursAgo:_.createdAt?Math.ceil((new Date-new Date(_.createdAt))/(1e3*60*60)):null,isCurrentUser:_._id===(s==null?void 0:s._id)}))}),O.length>0&&E.length===0){console.warn("‚ö†Ô∏è No new users found in last 7 days"),console.log("üìã All users received:",O.map(v=>({name:v.name,createdAt:v.createdAt,isNew:v.isNew,daysAgo:v.createdAt?Math.ceil((new Date-new Date(v.createdAt))/(1e3*60*60*24)):null,hoursAgo:v.createdAt?Math.ceil((new Date-new Date(v.createdAt))/(1e3*60*60)):null})));const _=new Date;_.setDate(_.getDate()-30);const A=O.filter(v=>v._id===(s==null?void 0:s._id)||v.id===(s==null?void 0:s._id)||!v.createdAt?!1:new Date(v.createdAt)>=_).sort((v,H)=>{const q=new Date(v.createdAt||0);return new Date(H.createdAt||0)-q});if(A.length>0)console.log(`‚úÖ Showing ${A.length} recent users (last 30 days) as fallback`),i(A.slice(0,20)),m(A.length);else{const v=O.filter(H=>H._id!==(s==null?void 0:s._id)&&H.id!==(s==null?void 0:s._id)).sort((H,q)=>{const Y=new Date(H.createdAt||0);return new Date(q.createdAt||0)-Y});v.length>0?(console.log(`‚úÖ Showing ${v.length} all users (excluding self) as final fallback`),i(v.slice(0,20)),m(v.length)):(i([]),m(0))}}else i(E),m(((S=C.data.pagination)==null?void 0:S.total)||E.length),E.length>0&&console.log(`‚úÖ Found ${E.length} new users`);if(s!=null&&s._id){const _=E.map(A=>A._id);y(_)}}}catch(C){console.error("Load new users error:",C),console.error("Error details:",{message:C.message,response:(M=C.response)==null?void 0:M.data,status:(j=C.response)==null?void 0:j.status,statusText:(z=C.response)==null?void 0:z.statusText,config:C.config}),((T=C.response)==null?void 0:T.status)===401?B.error("Authentication required. Please login again."):((k=C.response)==null?void 0:k.status)===403?B.error("Access denied. You need user permissions."):((R=C.response)==null?void 0:R.status)===404?B.error("API endpoint not found. Please check server configuration."):C.code==="ERR_NETWORK"||C.message==="Network Error"?B.error("Cannot connect to server. Please check if backend is running."):B.error(`Failed to load new users: ${((b=(w=C.response)==null?void 0:w.data)==null?void 0:b.message)||C.message||"Unknown error"}`),i([])}finally{n(!1)}},y=async S=>{try{const M=await es.getFollowing();if(M.data.success&&M.data.following){const j=M.data.following||[],z={};S.forEach(T=>{const k=T==null?void 0:T.toString(),R=j.some(w=>{var C;return(((C=w._id)==null?void 0:C.toString())||w._id)===k||w._id===T});z[T]=R?"accepted":!1}),f(T=>({...T,...z})),console.log("‚úÖ Follow statuses loaded:",z)}}catch(M){console.error("Load follow statuses error:",M)}},h=async S=>{var M,j,z,T,k,R;try{console.log("üì§ Sending follow request to user:",S);const w=await es.sendFollowRequest(S);if(console.log("üì§ Follow request response:",w.data),w.data.success){const b=(M=w.data.follow)==null?void 0:M.status,C=b==="accepted",O=C?"accepted":"pending";f(F=>({...F,[S]:O})),i(F=>F.map(N=>N._id===S?{...N,isFollowed:C,isFollowing:C,hasFollowRequest:b==="pending",...C&&{followersCount:(N.followersCount||0)+1}}:N)),B.success(w.data.message||(b==="pending"?"Follow request sent!":"User followed successfully!")),setTimeout(()=>{const F=o.map(N=>N._id);F.length>0&&y(F)},500)}else B.error(w.data.message||"Failed to send follow request")}catch(w){console.error("‚ùå Follow error:",w),console.error("‚ùå Error details:",{message:w.message,response:(j=w.response)==null?void 0:j.data,status:(z=w.response)==null?void 0:z.status,statusText:(T=w.response)==null?void 0:T.statusText});const b=((R=(k=w.response)==null?void 0:k.data)==null?void 0:R.message)||w.message||"Failed to send follow request";B.error(b)}},x=async S=>{try{(await $s.createThread([S])).data.success&&(t("/user/chat"),B.success("Chat started!"))}catch(M){console.error("Start chat error:",M),t("/user/chat"),B.info("Opening chat...")}},P=S=>{const M=new Date(S),z=Math.abs(new Date-M),T=Math.ceil(z/(1e3*60*60*24));return T===0?"Today":T===1?"Yesterday":T<7?`${T} days ago`:M.toLocaleDateString()};return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs(Z,{align:"center",style:{marginBottom:"0.5rem"},children:[e.jsx(Zc,{level:2,style:{margin:0},children:"New Users"}),e.jsx(le,{color:"green",style:{fontSize:"14px",padding:"4px 12px"},children:"This Week"})]}),e.jsx(Xc,{style:{fontSize:"16px",color:"#666",margin:0},children:"Discover users who joined in the last 7 days"})]}),r&&o.length===0?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(rt,{size:"large"})}):o.length===0?e.jsx(V,{children:e.jsx(Ue,{description:"No new users this week",image:Ue.PRESENTED_IMAGE_SIMPLE})}):e.jsx(ce,{gutter:[16,16],children:o.map(S=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsxs(V,{hoverable:!0,style:{height:"100%",border:"2px solid #52c41a",borderRadius:"8px",textAlign:"center",cursor:"pointer"},bodyStyle:{padding:"20px"},onClick:M=>{M.preventDefault(),M.stopPropagation(),console.log("üîç NewUsers: Clicked user card, navigating to:",`/profile/${S._id}`),S._id?t(`/profile/${S._id}`):(console.error("No user._id found:",S),B.error("Invalid user ID"))},children:[e.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"16px",cursor:"pointer"},onClick:M=>{M.stopPropagation(),t(`/profile/${S._id}`)},children:[e.jsx(We,{size:80,src:ht(S),icon:e.jsx(Re,{}),children:nt(S.name)}),S.isPrivate&&e.jsx(bt,{style:{position:"absolute",bottom:0,right:0,background:"#fff",borderRadius:"50%",padding:"4px",fontSize:"14px",color:"#666",border:"1px solid #d9d9d9"}}),e.jsx(le,{color:"green",style:{position:"absolute",top:"-8px",right:"-8px",fontSize:"10px",fontWeight:"bold",padding:"2px 8px"},children:"NEW"}),S.isOnline&&e.jsx(zt,{status:"success",style:{position:"absolute",bottom:"0",right:"0"}})]}),e.jsx(Zc,{level:5,style:{marginBottom:"8px",cursor:"pointer"},onClick:M=>{M.stopPropagation(),t(`/profile/${S._id}`)},children:S.name}),e.jsxs(Z,{direction:"vertical",size:"small",style:{width:"100%",marginBottom:"16px"},children:[e.jsxs(sr,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(as,{})," ",S.email]}),S.location&&e.jsxs(sr,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(Fr,{})," ",S.location]}),e.jsxs(sr,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(Ds,{})," Joined ",P(S.createdAt)]}),S.bio&&e.jsx(Xc,{style:{fontSize:"12px",color:"#666",margin:"8px 0 0 0",textAlign:"center"},ellipsis:{rows:2},children:S.bio})]}),e.jsx(ys,{style:{margin:"12px 0"}}),e.jsxs(Z,{size:"large",style:{marginBottom:"16px",justifyContent:"center",width:"100%"},children:[e.jsxs("div",{children:[e.jsx(sr,{strong:!0,style:{display:"block"},children:S.followersCount||0}),e.jsx(sr,{type:"secondary",style:{fontSize:"11px"},children:"Followers"})]}),e.jsxs("div",{children:[e.jsx(sr,{strong:!0,style:{display:"block"},children:S.followingCount||0}),e.jsx(sr,{type:"secondary",style:{fontSize:"11px"},children:"Following"})]})]}),e.jsxs(Z,{direction:"vertical",style:{width:"100%"},size:"small",children:[d[S._id]==="accepted"||S.isFollowed?e.jsx(L,{disabled:!0,icon:e.jsx(ur,{}),style:{width:"100%"},onClick:M=>M.stopPropagation(),children:"Following"}):d[S._id]==="pending"||S.hasFollowRequest?e.jsx(L,{disabled:!0,icon:e.jsx(Ks,{}),style:{width:"100%"},onClick:M=>M.stopPropagation(),children:"Request Sent"}):e.jsx(L,{type:"primary",icon:e.jsx(Ks,{}),onClick:M=>{M.stopPropagation(),h(S._id)},style:{width:"100%"},children:"Follow"}),e.jsx(L,{icon:e.jsx(Mt,{}),onClick:M=>{M.stopPropagation(),x(S._id)},style:{width:"100%"},children:"Start Chat"})]})]})},S._id))}),u>20&&e.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[e.jsx(L,{disabled:l===1,onClick:()=>c(S=>S-1),style:{marginRight:"8px"},children:"Previous"}),e.jsxs(sr,{children:["Page ",l," of ",Math.ceil(u/20)]}),e.jsx(L,{disabled:l>=Math.ceil(u/20),onClick:()=>c(S=>S+1),style:{marginLeft:"8px"},children:"Next"})]})]})},{Title:m2,Paragraph:x2,Text:Os}=Fe,{TextArea:ed}=ue,{Option:Qn}=Pe,y2=()=>{var v,H,q,Y,ne,U,$;const{user:s,isAuthenticated:t}=qe(),{message:r}=$t.useApp(),[n]=G.useForm(),[o,i]=p.useState(!1),[l,c]=p.useState([]),[u,m]=p.useState({total:0,pending:0,approved:0,rejected:0,paid:0,totalAmount:0}),[d,f]=p.useState(!1),[g,y]=p.useState(!1),[h,x]=p.useState(null),[P,S]=p.useState(!1),[M,j]=p.useState({}),[z,T]=p.useState(!0),[k,R]=p.useState(null);p.useEffect(()=>{if(z&&t){const D=setInterval(()=>{w(!0)},3e4);return R(D),()=>clearInterval(D)}},[z,t]),p.useEffect(()=>{t&&s&&w()},[t,s]);const w=p.useCallback(async(D=!1)=>{var I,J,Q,te,ee,re,se,he,fe,ke,me,X,pe;D||i(!0);try{const je=await fetch("http://localhost:7000/api/prebook",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(je.ok){const ae=await je.json();c(((I=ae.data)==null?void 0:I.prebooks)||[]);const Ce=((Q=(J=ae.data)==null?void 0:J.prebooks)==null?void 0:Q.length)||0,Te=((ee=(te=ae.data)==null?void 0:te.prebooks)==null?void 0:ee.filter($e=>$e.status==="pending").length)||0,Ie=((se=(re=ae.data)==null?void 0:re.prebooks)==null?void 0:se.filter($e=>$e.status==="approved").length)||0,Ae=((fe=(he=ae.data)==null?void 0:he.prebooks)==null?void 0:fe.filter($e=>$e.status==="rejected").length)||0,we=((me=(ke=ae.data)==null?void 0:ke.prebooks)==null?void 0:me.filter($e=>$e.paymentStatus==="completed").length)||0,Be=((pe=(X=ae.data)==null?void 0:X.prebooks)==null?void 0:pe.reduce(($e,Xe)=>$e+(Xe.paymentAmount||0)/100,0))||0;m({total:Ce,pending:Te,approved:Ie,rejected:Ae,paid:we,totalAmount:Be})}else D||r.error("Failed to fetch prebooks")}catch(je){console.error("Error fetching prebooks:",je),D||r.error("Network error")}finally{D||i(!1)}},[r]),b=D=>{x(D),f(!0)},C=D=>{var I,J,Q,te,ee;x(D),n.setFieldsValue({projectType:D.projectType,budget:D.budget,timeline:D.timeline,features:(I=D.features)==null?void 0:I.join(", "),notes:D.notes,contactInfo:{name:(J=D.contactInfo)==null?void 0:J.name,email:(Q=D.contactInfo)==null?void 0:Q.email,phone:(te=D.contactInfo)==null?void 0:te.phone,company:(ee=D.contactInfo)==null?void 0:ee.company}}),y(!0)},O=async()=>{try{S(!0);const D=await n.validateFields();(await fetch(`http://localhost:7000/api/prebook/${h._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...D,features:D.features?D.features.split(",").map(J=>J.trim()):[]})})).ok?(r.success("Prebook updated successfully"),y(!1),w()):r.error("Failed to update prebook")}catch(D){console.error("Error updating prebook:",D),r.error("Failed to update prebook")}finally{S(!1)}},F=async D=>{try{j(J=>({...J,[D]:!0})),(await fetch(`http://localhost:7000/api/prebook/${D}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?(r.success("Prebook deleted successfully"),w()):r.error("Failed to delete prebook")}catch(I){console.error("Error deleting prebook:",I),r.error("Network error")}finally{j(I=>({...I,[D]:!1}))}},N=D=>{switch(D){case"pending":return"orange";case"reviewed":return"blue";case"approved":return"green";case"rejected":return"red";case"completed":return"purple";default:return"default"}},E=D=>{switch(D){case"pending":return e.jsx(Ze,{});case"reviewed":return e.jsx(it,{});case"approved":return e.jsx(Ee,{});case"rejected":return e.jsx(Tt,{});case"completed":return e.jsx(Ee,{});default:return e.jsx(Ze,{})}},_=D=>{switch(D){case"completed":return"green";case"pending":return"orange";default:return"default"}},A=()=>[{title:"Product",dataIndex:"productId",key:"product",render:I=>e.jsxs("div",{children:[e.jsx(Os,{strong:!0,style:{fontSize:"14px"},children:(I==null?void 0:I.title)||"Unknown Product"}),e.jsx("br",{}),e.jsxs(Os,{type:"secondary",style:{fontSize:"12px"},children:["$",(I==null?void 0:I.price)||0]})]}),responsive:["lg"]},{title:"Project",dataIndex:"projectType",key:"projectType",render:I=>e.jsx(le,{color:"blue",style:{fontSize:"12px"},children:I}),responsive:["md"]},{title:"Budget",dataIndex:"budget",key:"budget",render:I=>e.jsxs(Os,{style:{fontSize:"14px",fontWeight:"bold",color:"#52c41a"},children:["$",I]}),responsive:["md"]},{title:"Timeline",dataIndex:"timeline",key:"timeline",render:I=>e.jsxs(le,{style:{fontSize:"12px"},children:[I," days"]}),responsive:["lg"]},{title:"Status",dataIndex:"status",key:"status",render:(I,J)=>e.jsxs("div",{children:[e.jsx(le,{color:N(I),icon:E(I),style:{fontSize:"12px"},children:I.toUpperCase()}),J.adminNotes&&e.jsx(Gt,{title:J.adminNotes,children:e.jsx(Rl,{style:{marginLeft:"4px",color:"#1890ff"}})})]})},{title:"Payment",key:"payment",render:(I,J)=>e.jsx("div",{children:J.paymentStatus==="completed"?e.jsxs("div",{children:[e.jsx(le,{color:"green",icon:e.jsx(Ee,{}),style:{fontSize:"12px"},children:"PAID"}),e.jsx("br",{}),e.jsxs(Os,{type:"secondary",style:{fontSize:"11px"},children:["‚Çπ",((J.paymentAmount||0)/100).toFixed(2)]})]}):J.paymentStatus==="pending"?e.jsx(le,{color:"orange",icon:e.jsx(Ze,{}),style:{fontSize:"12px"},children:"PENDING"}):e.jsx(le,{color:"default",icon:e.jsx(En,{}),style:{fontSize:"12px"},children:"UNPAID"})}),responsive:["md"]},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:I=>e.jsx(Os,{style:{fontSize:"12px"},children:ql(I).format("MMM DD, YYYY")}),responsive:["lg"]},{title:"Actions",key:"actions",render:(I,J)=>e.jsxs(Z,{size:"small",wrap:!0,children:[e.jsx(Gt,{title:"View Details",children:e.jsx(L,{type:"primary",size:"small",icon:e.jsx(it,{}),onClick:()=>b(J),style:{fontSize:"12px"}})}),e.jsx(Gt,{title:"Edit",children:e.jsx(L,{type:"default",size:"small",icon:e.jsx(qt,{}),onClick:()=>C(J),style:{fontSize:"12px"}})}),e.jsx(tn,{title:"Delete Prebook",description:"Are you sure you want to delete this prebook?",onConfirm:()=>F(J._id),okText:"Yes",cancelText:"No",icon:e.jsx(rn,{style:{color:"red"}}),children:e.jsx(Gt,{title:"Delete",children:e.jsx(L,{type:"primary",danger:!0,size:"small",icon:e.jsx(Tt,{}),loading:M[J._id],style:{fontSize:"12px"}})})})]}),fixed:"right",width:120}];return t?e.jsx($t,{children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs(m2,{level:2,style:{margin:0,fontSize:"24px"},children:[e.jsx(bs,{style:{marginRight:"8px"}}),"My Prebooks"]}),e.jsx(x2,{style:{margin:"8px 0 0 0",color:"#666"},children:"Manage your prebooked products and track their status"})]}),e.jsxs(Z,{children:[e.jsx(L,{icon:e.jsx(Mr,{}),onClick:()=>w(),loading:o,children:"Refresh"}),e.jsxs(L,{type:z?"primary":"default",onClick:()=>T(!z),children:["Auto Refresh ",z?"ON":"OFF"]})]})]})}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Total"}),value:u.total,prefix:e.jsx(bs,{style:{fontSize:"14px"}}),valueStyle:{color:"#1890ff",fontSize:"18px"}})})}),e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Pending"}),value:u.pending,prefix:e.jsx(Ze,{style:{fontSize:"14px"}}),valueStyle:{color:"#fa8c16",fontSize:"18px"}})})}),e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Approved"}),value:u.approved,prefix:e.jsx(Ee,{style:{fontSize:"14px"}}),valueStyle:{color:"#52c41a",fontSize:"18px"}})})}),e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Rejected"}),value:u.rejected,prefix:e.jsx(Tt,{style:{fontSize:"14px"}}),valueStyle:{color:"#ff4d4f",fontSize:"18px"}})})}),e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Paid"}),value:u.paid,prefix:e.jsx(kt,{style:{fontSize:"14px"}}),valueStyle:{color:"#52c41a",fontSize:"18px"}})})}),e.jsx(W,{xs:12,sm:8,md:4,children:e.jsx(V,{size:"small",children:e.jsx(ve,{title:e.jsx("span",{style:{fontSize:"12px"},children:"Total Paid"}),value:u.totalAmount,prefix:"‚Çπ",valueStyle:{color:"#52c41a",fontSize:"18px"}})})})]}),e.jsx(V,{children:e.jsx(rt,{spinning:o,children:l.length===0?e.jsx(Ue,{description:"No prebooks found",image:Ue.PRESENTED_IMAGE_SIMPLE,children:e.jsx(L,{type:"primary",href:"/products",children:"Browse Products"})}):e.jsx(Pt,{columns:A(),dataSource:l,rowKey:"_id",scroll:{x:800},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(D,I)=>`${I[0]}-${I[1]} of ${D} prebooks`,responsive:!0},size:"small"})})}),e.jsx(Ke,{title:"Prebook Details",open:d,onCancel:()=>f(!1),footer:[e.jsx(L,{onClick:()=>f(!1),children:"Close"},"close")],width:800,children:h&&e.jsxs(Ye,{bordered:!0,column:1,size:"small",children:[e.jsx(Ye.Item,{label:"Product",children:e.jsx(Os,{strong:!0,children:((v=h.productId)==null?void 0:v.title)||"Unknown Product"})}),e.jsx(Ye.Item,{label:"Project Type",children:e.jsx(le,{color:"blue",children:h.projectType})}),e.jsx(Ye.Item,{label:"Budget",children:e.jsxs(Os,{style:{color:"#52c41a",fontWeight:"bold"},children:["$",h.budget]})}),e.jsx(Ye.Item,{label:"Timeline",children:e.jsxs(le,{children:[h.timeline," days"]})}),e.jsx(Ye.Item,{label:"Status",children:e.jsx(le,{color:N(h.status),icon:E(h.status),children:(H=h.status)==null?void 0:H.toUpperCase()})}),e.jsx(Ye.Item,{label:"Payment Status",children:e.jsx(le,{color:_(h.paymentStatus),children:(q=h.paymentStatus)==null?void 0:q.toUpperCase()})}),h.features&&h.features.length>0&&e.jsx(Ye.Item,{label:"Features",children:h.features.map((D,I)=>e.jsx(le,{style:{marginBottom:"4px"},children:D},I))}),h.notes&&e.jsx(Ye.Item,{label:"Notes",children:e.jsx(Os,{children:h.notes})}),h.adminNotes&&e.jsx(Ye.Item,{label:"Admin Notes",children:e.jsx(gt,{message:h.adminNotes,type:"info"})}),e.jsx(Ye.Item,{label:"Contact Information",children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(as,{})," ",(Y=h.contactInfo)==null?void 0:Y.email]}),e.jsxs("div",{children:[e.jsx(Ss,{})," ",((ne=h.contactInfo)==null?void 0:ne.phone)||"N/A"]}),e.jsx("div",{children:e.jsx(Os,{strong:!0,children:(U=h.contactInfo)==null?void 0:U.name})}),(($=h.contactInfo)==null?void 0:$.company)&&e.jsx("div",{children:e.jsx(Os,{type:"secondary",children:h.contactInfo.company})})]})}),e.jsxs(Ye.Item,{label:"Created",children:[e.jsx(Ds,{})," ",ql(h.createdAt).format("MMMM DD, YYYY HH:mm")]})]})}),e.jsx(Ke,{title:"Edit Prebook",open:g,onCancel:()=>y(!1),onOk:O,confirmLoading:P,width:600,children:e.jsxs(G,{form:n,layout:"vertical",initialValues:{projectType:"",budget:"",timeline:"",features:"",notes:"",contactInfo:{name:"",email:"",phone:"",company:""}},children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"projectType",label:"Project Type",rules:[{required:!0,message:"Please select project type"}],children:e.jsxs(Pe,{placeholder:"Select project type",children:[e.jsx(Qn,{value:"web-development",children:"Web Development"}),e.jsx(Qn,{value:"mobile-app",children:"Mobile App"}),e.jsx(Qn,{value:"e-commerce",children:"E-commerce"}),e.jsx(Qn,{value:"custom",children:"Custom"})]})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"budget",label:"Budget ($)",rules:[{required:!0,message:"Please enter budget"}],children:e.jsx(ue,{type:"number",placeholder:"Enter budget"})})})]}),e.jsx(ce,{gutter:16,children:e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"timeline",label:"Timeline (days)",rules:[{required:!0,message:"Please enter timeline"}],children:e.jsx(ue,{type:"number",placeholder:"Enter timeline"})})})}),e.jsx(G.Item,{name:"features",label:"Features (comma-separated)",children:e.jsx(ed,{rows:3,placeholder:"Enter features separated by commas"})}),e.jsx(G.Item,{name:"notes",label:"Additional Notes",children:e.jsx(ed,{rows:3,placeholder:"Enter any additional notes"})}),e.jsx(ys,{children:"Contact Information"}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["contactInfo","name"],label:"Full Name",rules:[{required:!0,message:"Please enter your name"}],children:e.jsx(ue,{placeholder:"Enter your full name"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["contactInfo","email"],label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(ue,{placeholder:"Enter your email"})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["contactInfo","phone"],label:"Phone Number",children:e.jsx(ue,{placeholder:"Enter your phone number"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["contactInfo","company"],label:"Company",children:e.jsx(ue,{placeholder:"Enter your company name"})})})]})]})})]})}):e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(Ue,{description:"Please login to view your prebooks"})})},{Title:Zn,Text:ds,Paragraph:j2}=Fe,b2=()=>{const{user:s,updateUser:t}=qe(),r=Je(),[n,o]=p.useState([]),[i,l]=p.useState(!1),[c,u]=p.useState(null),[m,d]=p.useState(!1),[f,g]=p.useState(null),[y,h]=p.useState([]),[x,P]=p.useState(!1),[S,M]=p.useState(!1);p.useEffect(()=>{j(),z(),T()},[]),p.useEffect(()=>{(s!=null&&s.isVerified||s!=null&&s.verifiedTill)&&T()},[s==null?void 0:s.isVerified,s==null?void 0:s.verifiedTill]);const j=async()=>{l(!0);try{const C=await ie.get("/subscriptions/plans");C.data.success?(o(C.data.plans),console.log("‚úÖ Subscription plans loaded:",C.data.plans)):B.error("Failed to load subscription plans")}catch(C){console.error("Failed to fetch plans:",C),B.error("Failed to load subscription plans")}finally{l(!1)}},z=async()=>{try{const C=await ie.get("/subscriptions/current");C.data.success&&C.data.subscription&&g(C.data.subscription)}catch(C){console.error("Failed to fetch current subscription:",C)}},T=async()=>{try{const C=await ie.get("/subscriptions/my-subscriptions");C.data.success&&C.data.subscriptions&&h(C.data.subscriptions)}catch(C){console.error("Failed to fetch user subscriptions:",C)}},k=async()=>{var C,O;try{P(!0);const F=await ie.post("/subscriptions/cancel");if(F.data.success){if(B.success("Subscription cancelled successfully"),M(!1),await z(),await T(),t){const N=await ie.get("/users/me");N.data.success&&t(N.data.user)}}else B.error(F.data.message||"Failed to cancel subscription")}catch(F){console.error("Cancel subscription error:",F),B.error(((O=(C=F.response)==null?void 0:C.data)==null?void 0:O.message)||"Failed to cancel subscription. Please try again.")}finally{P(!1)}},R=()=>{Ke.confirm({title:"Cancel Verified Badge Subscription",icon:e.jsx(rn,{style:{color:"#ff4d4f"}}),content:e.jsxs("div",{children:[e.jsx("p",{style:{marginBottom:"12px",fontWeight:"bold",color:"#ff4d4f"},children:"‚ö†Ô∏è Money Will Not Be Refunded"}),e.jsx("p",{style:{marginBottom:"8px"},children:"Are you sure you want to cancel your Verified Badge subscription?"}),e.jsxs("p",{style:{marginBottom:"8px",color:"#666"},children:[e.jsx("strong",{children:"Important:"})," Cancelling your subscription will:"]}),e.jsxs("ul",{style:{marginLeft:"20px",color:"#666"},children:[e.jsx("li",{children:"Remove your verified badge immediately"}),e.jsx("li",{children:"Stop access to verified badge features"}),e.jsx("li",{children:e.jsx("strong",{style:{color:"#ff4d4f"},children:"No refund will be provided"})})]}),e.jsxs("p",{style:{marginTop:"12px",color:"#666",fontSize:"12px"},children:["Your subscription will remain active until the expiry date (",f?new Date(f.expiryDate).toLocaleDateString():"","), but your verified badge will be removed immediately upon cancellation."]})]}),okText:"Yes, Cancel Subscription",okType:"danger",cancelText:"Keep Subscription",onOk:k,width:500,centered:!0})},w=async C=>{var O,F;u(C),d(!0);try{const N=await ie.post("/subscriptions/create-order",{planMonths:C});if(!N.data.success)throw new Error(N.data.message||"Failed to create order");const{order_id:E,key:_,amount:A,planName:v,price:H}=N.data.data,q=document.createElement("script");q.src="https://checkout.razorpay.com/v1/checkout.js",q.onload=()=>{const Y={key:_,amount:A,currency:"INR",name:"Verified Badge Subscription",description:`${v} - Verified Blue Checkmark`,order_id:E,handler:async function(U){var $,D;try{const I=await ie.post("/subscriptions/verify",{razorpay_payment_id:U.razorpay_payment_id,razorpay_order_id:U.razorpay_order_id,razorpay_signature:U.razorpay_signature,planMonths:C});if(I.data.success){B.success("Subscription activated successfully! Your verified badge is now active.");const J=I.data.paymentDetails;J&&Ke.success({title:"‚úÖ Payment Successful!",width:600,content:e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f0f9ff",borderRadius:"8px",border:"1px solid #bae6fd"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"12px",color:"#0369a1"},children:"Payment Details"}),e.jsxs("div",{style:{display:"grid",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Payment ID:"}),e.jsx(ds,{code:!0,copyable:!0,style:{fontWeight:"bold"},children:J.paymentId})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Order ID:"}),e.jsx(ds,{code:!0,copyable:!0,style:{fontWeight:"bold"},children:J.orderId})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Amount:"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#52c41a",fontSize:"16px"},children:["‚Çπ",J.amount]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Plan:"}),e.jsxs("span",{style:{fontWeight:"bold"},children:[J.planMonths," Month",J.planMonths>1?"s":""]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Expiry Date:"}),e.jsx("span",{style:{fontWeight:"bold"},children:new Date(J.expiryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Purchase Date:"}),e.jsx("span",{style:{fontWeight:"bold"},children:new Date(J.purchaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsx("div",{style:{fontSize:"14px",color:"#666",textAlign:"center"},children:"A receipt has been sent to your email. Your verified badge is now active!"})]}),okText:"Got it!"});try{const Q=await ie.get("/users/me");if(Q.data.success){const te=Q.data.user||Q.data.data;te&&(t({isVerified:te.isVerified,verifiedTill:te.verifiedTill}),console.log("‚úÖ User verification status updated:",{isVerified:te.isVerified,verifiedTill:te.verifiedTill}))}}catch(Q){console.error("Failed to fetch updated user data:",Q),I.data.user&&t({isVerified:I.data.user.isVerified,verifiedTill:I.data.user.verifiedTill})}await z(),await T(),u(null);try{const Q=await ie.get("/users/me");if(Q.data.success&&Q.data.user){const te=Q.data.user;if(t(te),console.log("‚úÖ User context updated with verification:",{isVerified:te.isVerified,verifiedTill:te.verifiedTill}),te._id||te.id){const ee=te._id||te.id;setTimeout(()=>{r(`/profile/${ee}`),setTimeout(()=>{window.location.reload()},500)},1e3)}}}catch(Q){console.error("Failed to refresh user data:",Q)}}else throw new Error(I.data.message||"Payment verification failed")}catch(I){console.error("Payment verification error:",I),B.error(((D=($=I.response)==null?void 0:$.data)==null?void 0:D.message)||"Failed to verify payment. Please contact support.")}finally{d(!1)}},prefill:{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",contact:(s==null?void 0:s.phone)||""},theme:{color:"#0A84FF"},modal:{ondismiss:function(){d(!1),u(null)}}},ne=new window.Razorpay(Y);ne.open(),ne.on("payment.failed",function(U){console.error("Payment failed:",U),B.error("Payment failed. Please try again."),d(!1),u(null)})},q.onerror=()=>{B.error("Failed to load payment gateway"),d(!1),u(null)},document.body.appendChild(q)}catch(N){console.error("Error creating order:",N),B.error(((F=(O=N.response)==null?void 0:O.data)==null?void 0:F.message)||"Failed to create payment order"),d(!1),u(null)}},b=(s==null?void 0:s.isVerified)&&(s==null?void 0:s.verifiedTill)&&new Date(s.verifiedTill)>new Date;return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif'},children:[e.jsxs(V,{style:{borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"32px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff"},bodyStyle:{padding:"32px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px"},children:e.jsx(Ee,{style:{color:"#fff"}})}),e.jsxs("div",{children:[e.jsx(Zn,{level:2,style:{color:"#fff",margin:0},children:"Blue Checkmark ‚Äì Verified Badge"}),e.jsx(ds,{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px"},children:"Get authenticity & priority status"})]})]}),b&&e.jsxs(le,{color:"success",style:{fontSize:"14px",padding:"4px 12px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",border:"none",color:"#fff"},children:["‚úì You are currently verified until ",new Date(s.verifiedTill).toLocaleDateString()]})]}),f&&e.jsx(V,{style:{borderRadius:"12px",marginBottom:"24px",border:"1px solid #e0e0e0",position:"relative"},children:e.jsx(Z,{direction:"vertical",style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(ds,{strong:!0,style:{fontSize:"16px"},children:"Current Subscription"}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsxs(ds,{children:[f.planMonths," Month Plan"]}),e.jsx("br",{}),e.jsxs(ds,{type:"secondary",style:{fontSize:"12px"},children:["Expires: ",new Date(f.expiryDate).toLocaleDateString()]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(le,{color:f.status==="active"?"success":"default",children:f.status}),e.jsx(Er,{menu:{items:[{key:"cancel",label:"Cancel Subscription",danger:!0,icon:e.jsx(rn,{}),onClick:R}]},trigger:["click"],placement:"bottomRight",children:e.jsx(L,{type:"text",icon:e.jsx(nn,{}),style:{fontSize:"18px"},onClick:C=>C.stopPropagation()})})]})]})})}),e.jsx(V,{title:e.jsx(Zn,{level:3,style:{margin:0,fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif'},children:"Choose Your Plan"}),style:{borderRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"none"},children:i?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsx(ds,{type:"secondary",children:"Loading subscription plans..."})})]}):n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx(ds,{type:"secondary",children:"No subscription plans available at the moment."})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginTop:"24px"},children:n.map(C=>{const O=C.months===6,F=c===C.id,N=m&&c===C.id,E=C.id||C.months,_=y.find(q=>q.planMonths===E&&q.status==="active"&&q.expiryDate&&new Date(q.expiryDate)>new Date),A=_||y.some(q=>q.planMonths===E&&q.status!=="cancelled"&&q.expiryDate&&new Date(q.expiryDate)>new Date),v=_||y.find(q=>q.planMonths===E&&q.status!=="cancelled"&&q.expiryDate&&new Date(q.expiryDate)>new Date),H=_!==void 0;return e.jsxs(V,{hoverable:!0,style:{borderRadius:"12px",border:O?"2px solid #0A84FF":"1px solid #e0e0e0",position:"relative",transition:"all 0.3s ease",transform:F?"scale(1.02)":"scale(1)",boxShadow:O?"0 4px 12px rgba(10, 132, 255, 0.2)":"0 2px 4px rgba(0,0,0,0.05)"},bodyStyle:{padding:"20px"},children:[O&&e.jsx(zt.Ribbon,{text:"Best Value",color:"#0A84FF",style:{fontSize:"12px"},children:e.jsx("div",{})}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"12px"},children:e.jsxs(ds,{strong:!0,style:{fontSize:"24px",color:"#0A84FF"},children:["‚Çπ",C.price]})}),e.jsx(Zn,{level:4,style:{margin:"8px 0",fontSize:"18px"},children:C.name}),e.jsx(j2,{type:"secondary",style:{fontSize:"14px",marginBottom:"20px"},children:C.description||(C.months===1&&C.price===1?"Perfect for trying out - Special ‚Çπ1 offer!":C.months===1?"Perfect for trying out":`Get ${C.months} months of verification`)}),H?e.jsxs(L,{type:"default",size:"large",block:!0,disabled:!0,style:{borderRadius:"8px",height:"44px",fontSize:"16px",fontWeight:600,background:"#f0f0f0",border:"1px solid #d9d9d9",color:"#666",cursor:"not-allowed"},children:["‚úì Active until ",new Date(v.expiryDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):A?e.jsx(L,{type:"default",size:"large",block:!0,disabled:!0,style:{borderRadius:"8px",height:"44px",fontSize:"16px",fontWeight:600,background:"#f0f0f0",border:"1px solid #d9d9d9",color:"#666",cursor:"not-allowed"},children:"Purchased"}):e.jsx(L,{type:"primary",size:"large",block:!0,loading:N,disabled:m,onClick:()=>w(C.id),style:{borderRadius:"8px",height:"44px",fontSize:"16px",fontWeight:600,background:O?"linear-gradient(135deg, #0A84FF 0%, #147BFF 100%)":"#0A84FF",border:"none",boxShadow:O?"0 4px 12px rgba(10, 132, 255, 0.3)":"0 2px 4px rgba(0,0,0,0.1)"},children:N?"Processing...":"Buy Subscription"})]})]},C.id)})})}),e.jsxs(V,{style:{borderRadius:"12px",marginTop:"24px",border:"none",background:"#f8f9fa"},children:[e.jsx(Zn,{level:4,style:{marginBottom:"16px"},children:"What You Get"}),e.jsxs(Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ee,{style:{color:"#0A84FF",fontSize:"20px"}}),e.jsx(ds,{children:"Blue verified checkmark badge next to your username"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ee,{style:{color:"#0A84FF",fontSize:"20px"}}),e.jsx(ds,{children:"Increased authenticity and trust"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ee,{style:{color:"#0A84FF",fontSize:"20px"}}),e.jsx(ds,{children:"Priority status in search results"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ee,{style:{color:"#0A84FF",fontSize:"20px"}}),e.jsx(ds,{children:"Automatic renewal reminder before expiry"})]})]})]})]})},{Title:td,Text:ri,Paragraph:v2}=Fe,w2=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState([]),[o,i]=p.useState(!0),[l,c]=p.useState(null),[u,m]=p.useState(new Set),d=p.useRef(new Set);p.useEffect(()=>{s?f():i(!1)},[s]);const f=async()=>{var h,x,P,S;try{i(!0),c(null);const M=await ie.get("/posts/feed");if((h=M.data)!=null&&h.success&&((P=(x=M.data)==null?void 0:x.data)!=null&&P.posts)){const j=M.data.data.posts;console.log("üì∏ Feed posts loaded:",j.map(z=>({id:z._id,imageUrl:z.imageUrl,hasImage:!!z.imageUrl,likes:z.likes,views:z.views}))),n(j),j.forEach(z=>{z._id&&!d.current.has(z._id)&&(g(z._id),d.current.add(z._id))})}else n([])}catch(M){console.error("Error loading feed:",M),((S=M.response)==null?void 0:S.status)===404?n([]):(c("Failed to load feed. Please try again later."),n([]))}finally{i(!1)}},g=async h=>{try{await ie.post(`/posts/${h}/view`)}catch(x){console.error("Error tracking view:",x)}},y=async(h,x,P,S)=>{var M,j,z,T;if(h.preventDefault(),h.stopPropagation(),!x){console.error("Post ID is missing"),B.error("Post ID is missing");return}if(u.has(x)){console.log("Already liking this post, ignoring click");return}try{m(R=>new Set(R).add(x)),console.log("üîÑ Liking post:",x,"Current likes:",P,"Is liked:",S);const k=await ie.post(`/posts/${x}/like`);console.log("‚úÖ Like response:",k.data),(M=k.data)!=null&&M.success?n(R=>R.map(w=>w._id===x?{...w,likes:k.data.data.likes,isLiked:k.data.data.isLiked}:w)):(console.error("Like failed:",(j=k.data)==null?void 0:j.message),B.error(((z=k.data)==null?void 0:z.message)||"Failed to like post"))}catch(k){console.error("‚ùå Error toggling like:",k),k.response?(console.error("Response data:",k.response.data),console.error("Response status:",k.response.status),B.error(((T=k.response.data)==null?void 0:T.message)||"Failed to like post. Please try again.")):k.request?B.error("Network error. Please check your connection."):B.error("Failed to like post. Please try again.")}finally{m(k=>{const R=new Set(k);return R.delete(x),R})}};return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"},children:e.jsx(rt,{size:"large"})}):s?e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx(td,{level:2,style:{margin:0},children:"Feed"}),e.jsxs(Z,{children:[e.jsx(L,{type:"primary",onClick:()=>t("/post/create"),children:"Create Post"}),e.jsx(L,{icon:e.jsx($d,{}),onClick:()=>t("/dashboard"),children:"Dashboard"})]})]}),l&&e.jsx(gt,{message:"Error",description:l,type:"error",showIcon:!0,closable:!0,onClose:()=>c(null),style:{marginBottom:"1rem"}}),r.length===0&&!o?e.jsx(V,{children:e.jsxs(Ue,{description:"No posts yet",image:Ue.PRESENTED_IMAGE_SIMPLE,children:[e.jsx(ri,{type:"secondary",children:"Your feed will show posts from users you follow"}),e.jsx("br",{}),e.jsx(L,{type:"link",onClick:()=>t("/discover"),style:{marginTop:"1rem"},children:"Discover users to follow"})]})}):e.jsx(Z,{direction:"vertical",size:"large",style:{width:"100%"},children:r.map(h=>{var x,P,S;return e.jsx(V,{style:{width:"100%"},children:e.jsxs(Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(Z,{children:[e.jsx(We,{src:(x=h.author)==null?void 0:x.avatarUrl,icon:e.jsx(Mt,{})}),e.jsxs("div",{children:[e.jsx(ri,{strong:!0,children:((P=h.author)==null?void 0:P.name)||"Anonymous"}),e.jsx("br",{}),e.jsx(ri,{type:"secondary",style:{fontSize:"12px"},children:new Date(h.createdAt).toLocaleDateString()})]})]}),h.title&&e.jsx(td,{level:4,style:{margin:0},children:h.title}),h.bio&&e.jsx(v2,{style:{marginBottom:((S=h.tags)==null?void 0:S.length)>0?"8px":"0"},children:h.bio}),h.tags&&h.tags.length>0&&e.jsx("div",{style:{marginBottom:"12px"},children:h.tags.map((M,j)=>e.jsxs(le,{style:{marginBottom:"4px"},children:["#",M]},j))}),h.imageUrl&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",backgroundColor:"#000",borderRadius:"8px",overflow:"hidden"},children:e.jsx("img",{src:h.imageUrl.startsWith("http")?h.imageUrl:`${"http://localhost:7000/api".replace("/api","")}${h.imageUrl}`,alt:"Post",style:{width:"100%",maxWidth:"614px",height:"auto",display:"block",cursor:"pointer",objectFit:"contain"},onError:M=>{console.error("Failed to load post image:",h.imageUrl),M.target.style.display="none"},onClick:()=>{h.instagramRedirectUrl&&window.open(h.instagramRedirectUrl,"_blank")}})}),e.jsxs(Z,{children:[e.jsx(L,{type:"text",icon:h.isLiked?e.jsx(Sf,{style:{color:"#ff4d4f"}}):e.jsx(ws,{}),onClick:M=>y(M,h._id,h.likes,h.isLiked),style:{color:h.isLiked?"#ff4d4f":void 0},disabled:!h._id||u.has(h._id),loading:u.has(h._id),children:h.likes||0}),e.jsx(L,{type:"text",icon:e.jsx(Mt,{}),children:h.comments||0}),e.jsx(L,{type:"text",icon:e.jsx(it,{}),children:h.views||0}),e.jsx(L,{type:"text",icon:e.jsx(Oa,{}),children:"Share"})]})]})},h._id)})})]}):e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:e.jsx(gt,{message:"Authentication Required",description:"Please log in to view your feed.",type:"warning",showIcon:!0,action:e.jsx(L,{size:"small",onClick:()=>t("/login"),children:"Login"})})})};function S2(s,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in s)){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(s,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(s)}function Lu(s,t){return new Promise(function(r,n){let o;return k2(s).then(function(i){try{return o=i,r(new Blob([t.slice(0,2),o,t.slice(2)],{type:"image/jpeg"}))}catch(l){return n(l)}},n)})}const k2=s=>new Promise((t,r)=>{const n=new FileReader;n.addEventListener("load",({target:{result:o}})=>{const i=new DataView(o);let l=0;if(i.getUint16(l)!==65496)return r("not a valid JPEG");for(l+=2;;){const c=i.getUint16(l);if(c===65498)break;const u=i.getUint16(l+2);if(c===65505&&i.getUint32(l+4)===1165519206){const m=l+10;let d;switch(i.getUint16(m)){case 18761:d=!0;break;case 19789:d=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(m+2,d)!==42)return r("TIFF header contains invalid version");const f=i.getUint32(m+4,d),g=m+f+2+12*i.getUint16(m+f,d);for(let y=m+f+2;y<g;y+=12)if(i.getUint16(y,d)==274){if(i.getUint16(y+2,d)!==3)return r("Orientation data type is invalid");if(i.getUint32(y+4,d)!==1)return r("Orientation data count is invalid");i.setUint16(y+8,1,d);break}return t(o.slice(l,l+2+u))}l+=2+u}return t(new Blob)}),n.readAsArrayBuffer(s)});var wo={},C2={get exports(){return wo},set exports(s){wo=s}};(function(s){var t,r,n={};C2.exports=n,n.parse=function(o,i){for(var l=n.bin.readUshort,c=n.bin.readUint,u=0,m={},d=new Uint8Array(o),f=d.length-4;c(d,f)!=101010256;)f--;u=f,u+=4;var g=l(d,u+=4);l(d,u+=2);var y=c(d,u+=2),h=c(d,u+=4);u+=4,u=h;for(var x=0;x<g;x++){c(d,u),u+=4,u+=4,u+=4,c(d,u+=4),y=c(d,u+=4);var P=c(d,u+=4),S=l(d,u+=4),M=l(d,u+2),j=l(d,u+4);u+=6;var z=c(d,u+=8);u+=4,u+=S+M+j,n._readLocal(d,z,m,y,P,i)}return m},n._readLocal=function(o,i,l,c,u,m){var d=n.bin.readUshort,f=n.bin.readUint;f(o,i),d(o,i+=4),d(o,i+=2);var g=d(o,i+=2);f(o,i+=2),f(o,i+=4),i+=4;var y=d(o,i+=8),h=d(o,i+=2);i+=2;var x=n.bin.readUTF8(o,i,y);if(i+=y,i+=h,m)l[x]={size:u,csize:c};else{var P=new Uint8Array(o.buffer,i);if(g==0)l[x]=new Uint8Array(P.buffer.slice(i,i+c));else{if(g!=8)throw"unknown compression method: "+g;var S=new Uint8Array(u);n.inflateRaw(P,S),l[x]=S}}},n.inflateRaw=function(o,i){return n.F.inflate(o,i)},n.inflate=function(o,i){return o[0],o[1],n.inflateRaw(new Uint8Array(o.buffer,o.byteOffset+2,o.length-6),i)},n.deflate=function(o,i){i==null&&(i={level:6});var l=0,c=new Uint8Array(50+Math.floor(1.1*o.length));c[l]=120,c[l+1]=156,l+=2,l=n.F.deflateRaw(o,c,l,i.level);var u=n.adler(o,0,o.length);return c[l+0]=u>>>24&255,c[l+1]=u>>>16&255,c[l+2]=u>>>8&255,c[l+3]=u>>>0&255,new Uint8Array(c.buffer,0,l+4)},n.deflateRaw=function(o,i){i==null&&(i={level:6});var l=new Uint8Array(50+Math.floor(1.1*o.length)),c=n.F.deflateRaw(o,l,c,i.level);return new Uint8Array(l.buffer,0,c)},n.encode=function(o,i){i==null&&(i=!1);var l=0,c=n.bin.writeUint,u=n.bin.writeUshort,m={};for(var d in o){var f=!n._noNeed(d)&&!i,g=o[d],y=n.crc.crc(g,0,g.length);m[d]={cpr:f,usize:g.length,crc:y,file:f?n.deflateRaw(g):g}}for(var d in m)l+=m[d].file.length+30+46+2*n.bin.sizeUTF8(d);l+=22;var h=new Uint8Array(l),x=0,P=[];for(var d in m){var S=m[d];P.push(x),x=n._writeHeader(h,x,d,S,0)}var M=0,j=x;for(var d in m)S=m[d],P.push(x),x=n._writeHeader(h,x,d,S,1,P[M++]);var z=x-j;return c(h,x,101010256),x+=4,u(h,x+=4,M),u(h,x+=2,M),c(h,x+=2,z),c(h,x+=4,j),x+=4,x+=2,h.buffer},n._noNeed=function(o){var i=o.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},n._writeHeader=function(o,i,l,c,u,m){var d=n.bin.writeUint,f=n.bin.writeUshort,g=c.file;return d(o,i,u==0?67324752:33639248),i+=4,u==1&&(i+=2),f(o,i,20),f(o,i+=2,0),f(o,i+=2,c.cpr?8:0),d(o,i+=2,0),d(o,i+=4,c.crc),d(o,i+=4,g.length),d(o,i+=4,c.usize),f(o,i+=4,n.bin.sizeUTF8(l)),f(o,i+=2,0),i+=2,u==1&&(i+=2,i+=2,d(o,i+=6,m),i+=4),i+=n.bin.writeUTF8(o,i,l),u==0&&(o.set(g,i),i+=g.length),i},n.crc={table:function(){for(var o=new Uint32Array(256),i=0;i<256;i++){for(var l=i,c=0;c<8;c++)1&l?l=3988292384^l>>>1:l>>>=1;o[i]=l}return o}(),update:function(o,i,l,c){for(var u=0;u<c;u++)o=n.crc.table[255&(o^i[l+u])]^o>>>8;return o},crc:function(o,i,l){return 4294967295^n.crc.update(4294967295,o,i,l)}},n.adler=function(o,i,l){for(var c=1,u=0,m=i,d=i+l;m<d;){for(var f=Math.min(m+5552,d);m<f;)u+=c+=o[m++];c%=65521,u%=65521}return u<<16|c},n.bin={readUshort:function(o,i){return o[i]|o[i+1]<<8},writeUshort:function(o,i,l){o[i]=255&l,o[i+1]=l>>8&255},readUint:function(o,i){return 16777216*o[i+3]+(o[i+2]<<16|o[i+1]<<8|o[i])},writeUint:function(o,i,l){o[i]=255&l,o[i+1]=l>>8&255,o[i+2]=l>>16&255,o[i+3]=l>>24&255},readASCII:function(o,i,l){for(var c="",u=0;u<l;u++)c+=String.fromCharCode(o[i+u]);return c},writeASCII:function(o,i,l){for(var c=0;c<l.length;c++)o[i+c]=l.charCodeAt(c)},pad:function(o){return o.length<2?"0"+o:o},readUTF8:function(o,i,l){for(var c,u="",m=0;m<l;m++)u+="%"+n.bin.pad(o[i+m].toString(16));try{c=decodeURIComponent(u)}catch{return n.bin.readASCII(o,i,l)}return c},writeUTF8:function(o,i,l){for(var c=l.length,u=0,m=0;m<c;m++){var d=l.charCodeAt(m);if(!(4294967168&d))o[i+u]=d,u++;else if(!(4294965248&d))o[i+u]=192|d>>6,o[i+u+1]=128|d>>0&63,u+=2;else if(!(4294901760&d))o[i+u]=224|d>>12,o[i+u+1]=128|d>>6&63,o[i+u+2]=128|d>>0&63,u+=3;else{if(4292870144&d)throw"e";o[i+u]=240|d>>18,o[i+u+1]=128|d>>12&63,o[i+u+2]=128|d>>6&63,o[i+u+3]=128|d>>0&63,u+=4}}return u},sizeUTF8:function(o){for(var i=o.length,l=0,c=0;c<i;c++){var u=o.charCodeAt(c);if(!(4294967168&u))l++;else if(!(4294965248&u))l+=2;else if(!(4294901760&u))l+=3;else{if(4292870144&u)throw"e";l+=4}}return l}},n.F={},n.F.deflateRaw=function(o,i,l,c){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],m=n.F.U,d=n.F._goodIndex;n.F._hash;var f=n.F._putsE,g=0,y=l<<3,h=0,x=o.length;if(c==0){for(;g<x;)f(i,y,g+(O=Math.min(65535,x-g))==x?1:0),y=n.F._copyExact(o,g,O,i,y+8),g+=O;return y>>>3}var P=m.lits,S=m.strt,M=m.prev,j=0,z=0,T=0,k=0,R=0,w=0;for(x>2&&(S[w=n.F._hash(o,0)]=0),g=0;g<x;g++){if(R=w,g+1<x-2){w=n.F._hash(o,g+1);var b=g+1&32767;M[b]=S[w],S[w]=b}if(h<=g){(j>14e3||z>26697)&&x-g>100&&(h<g&&(P[j]=g-h,j+=2,h=g),y=n.F._writeBlock(g==x-1||h==x?1:0,P,j,k,o,T,g-T,i,y),j=z=k=0,T=g);var C=0;g<x-2&&(C=n.F._bestMatch(o,g,M,R,Math.min(u[2],x-g),u[3]));var O=C>>>16,F=65535&C;if(C!=0){F=65535&C;var N=d(O=C>>>16,m.of0);m.lhst[257+N]++;var E=d(F,m.df0);m.dhst[E]++,k+=m.exb[N]+m.dxb[E],P[j]=O<<23|g-h,P[j+1]=F<<16|N<<8|E,j+=2,h=g+O}else m.lhst[o[g]]++;z++}}for(T==g&&o.length!=0||(h<g&&(P[j]=g-h,j+=2,h=g),y=n.F._writeBlock(1,P,j,k,o,T,g-T,i,y),j=0,z=0,j=z=k=0,T=g);7&y;)y++;return y>>>3},n.F._bestMatch=function(o,i,l,c,u,m){var d=32767&i,f=l[d],g=d-f+32768&32767;if(f==d||c!=n.F._hash(o,i-g))return 0;for(var y=0,h=0,x=Math.min(32767,i);g<=x&&--m!=0&&f!=d;){if(y==0||o[i+y]==o[i+y-g]){var P=n.F._howLong(o,i,g);if(P>y){if(h=g,(y=P)>=u)break;g+2<P&&(P=g+2);for(var S=0,M=0;M<P-2;M++){var j=i-g+M+32768&32767,z=j-l[j]+32768&32767;z>S&&(S=z,f=j)}}}g+=(d=f)-(f=l[d])+32768&32767}return y<<16|h},n.F._howLong=function(o,i,l){if(o[i]!=o[i-l]||o[i+1]!=o[i+1-l]||o[i+2]!=o[i+2-l])return 0;var c=i,u=Math.min(o.length,i+258);for(i+=3;i<u&&o[i]==o[i-l];)i++;return i-c},n.F._hash=function(o,i){return(o[i]<<8|o[i+1])+(o[i+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(o,i,l,c,u,m,d,f,g){var y,h,x,P,S,M,j,z,T,k=n.F.U,R=n.F._putsF,w=n.F._putsE;k.lhst[256]++,h=(y=n.F.getTrees())[0],x=y[1],P=y[2],S=y[3],M=y[4],j=y[5],z=y[6],T=y[7];var b=32+(g+3&7?8-(g+3&7):0)+(d<<3),C=c+n.F.contSize(k.fltree,k.lhst)+n.F.contSize(k.fdtree,k.dhst),O=c+n.F.contSize(k.ltree,k.lhst)+n.F.contSize(k.dtree,k.dhst);O+=14+3*j+n.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var F=0;F<286;F++)k.lhst[F]=0;for(F=0;F<30;F++)k.dhst[F]=0;for(F=0;F<19;F++)k.ihst[F]=0;var N=b<C&&b<O?0:C<O?1:2;if(R(f,g,o),R(f,g+1,N),g+=3,N==0){for(;7&g;)g++;g=n.F._copyExact(u,m,d,f,g)}else{var E,_;if(N==1&&(E=k.fltree,_=k.fdtree),N==2){n.F.makeCodes(k.ltree,h),n.F.revCodes(k.ltree,h),n.F.makeCodes(k.dtree,x),n.F.revCodes(k.dtree,x),n.F.makeCodes(k.itree,P),n.F.revCodes(k.itree,P),E=k.ltree,_=k.dtree,w(f,g,S-257),w(f,g+=5,M-1),w(f,g+=5,j-4),g+=4;for(var A=0;A<j;A++)w(f,g+3*A,k.itree[1+(k.ordr[A]<<1)]);g+=3*j,g=n.F._codeTiny(z,k.itree,f,g),g=n.F._codeTiny(T,k.itree,f,g)}for(var v=m,H=0;H<l;H+=2){for(var q=i[H],Y=q>>>23,ne=v+(8388607&q);v<ne;)g=n.F._writeLit(u[v++],E,f,g);if(Y!=0){var U=i[H+1],$=U>>16,D=U>>8&255,I=255&U;w(f,g=n.F._writeLit(257+D,E,f,g),Y-k.of0[D]),g+=k.exb[D],R(f,g=n.F._writeLit(I,_,f,g),$-k.df0[I]),g+=k.dxb[I],v+=Y}}g=n.F._writeLit(256,E,f,g)}return g},n.F._copyExact=function(o,i,l,c,u){var m=u>>>3;return c[m]=l,c[m+1]=l>>>8,c[m+2]=255-c[m],c[m+3]=255-c[m+1],m+=4,c.set(new Uint8Array(o.buffer,i,l),m),u+(l+4<<3)},n.F.getTrees=function(){for(var o=n.F.U,i=n.F._hufTree(o.lhst,o.ltree,15),l=n.F._hufTree(o.dhst,o.dtree,15),c=[],u=n.F._lenCodes(o.ltree,c),m=[],d=n.F._lenCodes(o.dtree,m),f=0;f<c.length;f+=2)o.ihst[c[f]]++;for(f=0;f<m.length;f+=2)o.ihst[m[f]]++;for(var g=n.F._hufTree(o.ihst,o.itree,7),y=19;y>4&&o.itree[1+(o.ordr[y-1]<<1)]==0;)y--;return[i,l,g,u,d,y,c,m]},n.F.getSecond=function(o){for(var i=[],l=0;l<o.length;l+=2)i.push(o[l+1]);return i},n.F.nonZero=function(o){for(var i="",l=0;l<o.length;l+=2)o[l+1]!=0&&(i+=(l>>1)+",");return i},n.F.contSize=function(o,i){for(var l=0,c=0;c<i.length;c++)l+=i[c]*o[1+(c<<1)];return l},n.F._codeTiny=function(o,i,l,c){for(var u=0;u<o.length;u+=2){var m=o[u],d=o[u+1];c=n.F._writeLit(m,i,l,c);var f=m==16?2:m==17?3:7;m>15&&(n.F._putsE(l,c,d,f),c+=f)}return c},n.F._lenCodes=function(o,i){for(var l=o.length;l!=2&&o[l-1]==0;)l-=2;for(var c=0;c<l;c+=2){var u=o[c+1],m=c+3<l?o[c+3]:-1,d=c+5<l?o[c+5]:-1,f=c==0?-1:o[c-1];if(u==0&&m==u&&d==u){for(var g=c+5;g+2<l&&o[g+2]==u;)g+=2;(y=Math.min(g+1-c>>>1,138))<11?i.push(17,y-3):i.push(18,y-11),c+=2*y-2}else if(u==f&&m==u&&d==u){for(g=c+5;g+2<l&&o[g+2]==u;)g+=2;var y=Math.min(g+1-c>>>1,6);i.push(16,y-3),c+=2*y-2}else i.push(u,0)}return l>>>1},n.F._hufTree=function(o,i,l){var c=[],u=o.length,m=i.length,d=0;for(d=0;d<m;d+=2)i[d]=0,i[d+1]=0;for(d=0;d<u;d++)o[d]!=0&&c.push({lit:d,f:o[d]});var f=c.length,g=c.slice(0);if(f==0)return 0;if(f==1){var y=c[0].lit;return g=y==0?1:0,i[1+(y<<1)]=1,i[1+(g<<1)]=1,1}c.sort(function(z,T){return z.f-T.f});var h=c[0],x=c[1],P=0,S=1,M=2;for(c[0]={lit:-1,f:h.f+x.f,l:h,r:x,d:0};S!=f-1;)h=P!=S&&(M==f||c[P].f<c[M].f)?c[P++]:c[M++],x=P!=S&&(M==f||c[P].f<c[M].f)?c[P++]:c[M++],c[S++]={lit:-1,f:h.f+x.f,l:h,r:x};var j=n.F.setDepth(c[S-1],0);for(j>l&&(n.F.restrictDepth(g,l,j),j=l),d=0;d<f;d++)i[1+(g[d].lit<<1)]=g[d].d;return j},n.F.setDepth=function(o,i){return o.lit!=-1?(o.d=i,i):Math.max(n.F.setDepth(o.l,i+1),n.F.setDepth(o.r,i+1))},n.F.restrictDepth=function(o,i,l){var c=0,u=1<<l-i,m=0;for(o.sort(function(f,g){return g.d==f.d?f.f-g.f:g.d-f.d}),c=0;c<o.length&&o[c].d>i;c++){var d=o[c].d;o[c].d=i,m+=u-(1<<l-d)}for(m>>>=l-i;m>0;)(d=o[c].d)<i?(o[c].d++,m-=1<<i-d-1):c++;for(;c>=0;c--)o[c].d==i&&m<0&&(o[c].d--,m++);m!=0&&console.log("debt left")},n.F._goodIndex=function(o,i){var l=0;return i[16|l]<=o&&(l|=16),i[8|l]<=o&&(l|=8),i[4|l]<=o&&(l|=4),i[2|l]<=o&&(l|=2),i[1|l]<=o&&(l|=1),l},n.F._writeLit=function(o,i,l,c){return n.F._putsF(l,c,i[o<<1]),c+i[1+(o<<1)]},n.F.inflate=function(o,i){var l=Uint8Array;if(o[0]==3&&o[1]==0)return i||new l(0);var c=n.F,u=c._bitsF,m=c._bitsE,d=c._decodeTiny,f=c.makeCodes,g=c.codes2map,y=c._get17,h=c.U,x=i==null;x&&(i=new l(o.length>>>2<<3));for(var P,S,M=0,j=0,z=0,T=0,k=0,R=0,w=0,b=0,C=0;M==0;)if(M=u(o,C,1),j=u(o,C+1,2),C+=3,j!=0){if(x&&(i=n.F._check(i,b+(1<<17))),j==1&&(P=h.flmap,S=h.fdmap,R=511,w=31),j==2){z=m(o,C,5)+257,T=m(o,C+5,5)+1,k=m(o,C+10,4)+4,C+=14;for(var O=0;O<38;O+=2)h.itree[O]=0,h.itree[O+1]=0;var F=1;for(O=0;O<k;O++){var N=m(o,C+3*O,3);h.itree[1+(h.ordr[O]<<1)]=N,N>F&&(F=N)}C+=3*k,f(h.itree,F),g(h.itree,F,h.imap),P=h.lmap,S=h.dmap,C=d(h.imap,(1<<F)-1,z+T,o,C,h.ttree);var E=c._copyOut(h.ttree,0,z,h.ltree);R=(1<<E)-1;var _=c._copyOut(h.ttree,z,T,h.dtree);w=(1<<_)-1,f(h.ltree,E),g(h.ltree,E,P),f(h.dtree,_),g(h.dtree,_,S)}for(;;){var A=P[y(o,C)&R];C+=15&A;var v=A>>>4;if(!(v>>>8))i[b++]=v;else{if(v==256)break;var H=b+v-254;if(v>264){var q=h.ldef[v-257];H=b+(q>>>3)+m(o,C,7&q),C+=7&q}var Y=S[y(o,C)&w];C+=15&Y;var ne=Y>>>4,U=h.ddef[ne],$=(U>>>4)+u(o,C,15&U);for(C+=15&U,x&&(i=n.F._check(i,b+(1<<17)));b<H;)i[b]=i[b++-$],i[b]=i[b++-$],i[b]=i[b++-$],i[b]=i[b++-$];b=H}}}else{7&C&&(C+=8-(7&C));var D=4+(C>>>3),I=o[D-4]|o[D-3]<<8;x&&(i=n.F._check(i,b+I)),i.set(new l(o.buffer,o.byteOffset+D,I),b),C=D+I<<3,b+=I}return i.length==b?i:i.slice(0,b)},n.F._check=function(o,i){var l=o.length;if(i<=l)return o;var c=new Uint8Array(Math.max(l<<1,i));return c.set(o,0),c},n.F._decodeTiny=function(o,i,l,c,u,m){for(var d=n.F._bitsE,f=n.F._get17,g=0;g<l;){var y=o[f(c,u)&i];u+=15&y;var h=y>>>4;if(h<=15)m[g]=h,g++;else{var x=0,P=0;h==16?(P=3+d(c,u,2),u+=2,x=m[g-1]):h==17?(P=3+d(c,u,3),u+=3):h==18&&(P=11+d(c,u,7),u+=7);for(var S=g+P;g<S;)m[g]=x,g++}}return u},n.F._copyOut=function(o,i,l,c){for(var u=0,m=0,d=c.length>>>1;m<l;){var f=o[m+i];c[m<<1]=0,c[1+(m<<1)]=f,f>u&&(u=f),m++}for(;m<d;)c[m<<1]=0,c[1+(m<<1)]=0,m++;return u},n.F.makeCodes=function(o,i){for(var l,c,u,m,d=n.F.U,f=o.length,g=d.bl_count,y=0;y<=i;y++)g[y]=0;for(y=1;y<f;y+=2)g[o[y]]++;var h=d.next_code;for(l=0,g[0]=0,c=1;c<=i;c++)l=l+g[c-1]<<1,h[c]=l;for(u=0;u<f;u+=2)(m=o[u+1])!=0&&(o[u]=h[m],h[m]++)},n.F.codes2map=function(o,i,l){for(var c=o.length,u=n.F.U.rev15,m=0;m<c;m+=2)if(o[m+1]!=0)for(var d=m>>1,f=o[m+1],g=d<<4|f,y=i-f,h=o[m]<<y,x=h+(1<<y);h!=x;)l[u[h]>>>15-i]=g,h++},n.F.revCodes=function(o,i){for(var l=n.F.U.rev15,c=15-i,u=0;u<o.length;u+=2){var m=o[u]<<i-o[u+1];o[u]=l[m]>>>c}},n.F._putsE=function(o,i,l){l<<=7&i;var c=i>>>3;o[c]|=l,o[c+1]|=l>>>8},n.F._putsF=function(o,i,l){l<<=7&i;var c=i>>>3;o[c]|=l,o[c+1]|=l>>>8,o[c+2]|=l>>>16},n.F._bitsE=function(o,i,l){return(o[i>>>3]|o[1+(i>>>3)]<<8)>>>(7&i)&(1<<l)-1},n.F._bitsF=function(o,i,l){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)&(1<<l)-1},n.F._get17=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)},n.F._get25=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16|o[3+(i>>>3)]<<24)>>>(7&i)},n.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var o=n.F.U,i=0;i<32768;i++){var l=i;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,o.rev15[i]=(l>>>16|l<<16)>>>17}function c(u,m,d){for(;m--!=0;)u.push(0,d)}for(i=0;i<32;i++)o.ldef[i]=o.of0[i]<<3|o.exb[i],o.ddef[i]=o.df0[i]<<4|o.dxb[i];c(o.fltree,144,8),c(o.fltree,112,9),c(o.fltree,24,7),c(o.fltree,8,8),n.F.makeCodes(o.fltree,9),n.F.codes2map(o.fltree,9,o.flmap),n.F.revCodes(o.fltree,9),c(o.fdtree,32,5),n.F.makeCodes(o.fdtree,5),n.F.codes2map(o.fdtree,5,o.fdmap),n.F.revCodes(o.fdtree,5),c(o.itree,19,0),c(o.ltree,286,0),c(o.dtree,30,0),c(o.ttree,320,0)}()})();var A2=S2({__proto__:null,default:wo},[wo]);const Ps=function(){var s={nextZero(d,f){for(;d[f]!=0;)f++;return f},readUshort:(d,f)=>d[f]<<8|d[f+1],writeUshort(d,f,g){d[f]=g>>8&255,d[f+1]=255&g},readUint:(d,f)=>16777216*d[f]+(d[f+1]<<16|d[f+2]<<8|d[f+3]),writeUint(d,f,g){d[f]=g>>24&255,d[f+1]=g>>16&255,d[f+2]=g>>8&255,d[f+3]=255&g},readASCII(d,f,g){let y="";for(let h=0;h<g;h++)y+=String.fromCharCode(d[f+h]);return y},writeASCII(d,f,g){for(let y=0;y<g.length;y++)d[f+y]=g.charCodeAt(y)},readBytes(d,f,g){const y=[];for(let h=0;h<g;h++)y.push(d[f+h]);return y},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,f,g){let y,h="";for(let x=0;x<g;x++)h+=`%${s.pad(d[f+x].toString(16))}`;try{y=decodeURIComponent(h)}catch{return s.readASCII(d,f,g)}return y}};function t(d,f,g,y){const h=f*g,x=i(y),P=Math.ceil(f*x/8),S=new Uint8Array(4*h),M=new Uint32Array(S.buffer),{ctype:j}=y,{depth:z}=y,T=s.readUshort;if(j==6){const q=h<<2;if(z==8)for(var k=0;k<q;k+=4)S[k]=d[k],S[k+1]=d[k+1],S[k+2]=d[k+2],S[k+3]=d[k+3];if(z==16)for(k=0;k<q;k++)S[k]=d[k<<1]}else if(j==2){const q=y.tabs.tRNS;if(q==null){if(z==8)for(k=0;k<h;k++){var R=3*k;M[k]=255<<24|d[R+2]<<16|d[R+1]<<8|d[R]}if(z==16)for(k=0;k<h;k++)R=6*k,M[k]=255<<24|d[R+4]<<16|d[R+2]<<8|d[R]}else{var w=q[0];const Y=q[1],ne=q[2];if(z==8)for(k=0;k<h;k++){var b=k<<2;R=3*k,M[k]=255<<24|d[R+2]<<16|d[R+1]<<8|d[R],d[R]==w&&d[R+1]==Y&&d[R+2]==ne&&(S[b+3]=0)}if(z==16)for(k=0;k<h;k++)b=k<<2,R=6*k,M[k]=255<<24|d[R+4]<<16|d[R+2]<<8|d[R],T(d,R)==w&&T(d,R+2)==Y&&T(d,R+4)==ne&&(S[b+3]=0)}}else if(j==3){const q=y.tabs.PLTE,Y=y.tabs.tRNS,ne=Y?Y.length:0;if(z==1)for(var C=0;C<g;C++){var O=C*P,F=C*f;for(k=0;k<f;k++){b=F+k<<2;var N=3*(E=d[O+(k>>3)]>>7-((7&k)<<0)&1);S[b]=q[N],S[b+1]=q[N+1],S[b+2]=q[N+2],S[b+3]=E<ne?Y[E]:255}}if(z==2)for(C=0;C<g;C++)for(O=C*P,F=C*f,k=0;k<f;k++)b=F+k<<2,N=3*(E=d[O+(k>>2)]>>6-((3&k)<<1)&3),S[b]=q[N],S[b+1]=q[N+1],S[b+2]=q[N+2],S[b+3]=E<ne?Y[E]:255;if(z==4)for(C=0;C<g;C++)for(O=C*P,F=C*f,k=0;k<f;k++)b=F+k<<2,N=3*(E=d[O+(k>>1)]>>4-((1&k)<<2)&15),S[b]=q[N],S[b+1]=q[N+1],S[b+2]=q[N+2],S[b+3]=E<ne?Y[E]:255;if(z==8)for(k=0;k<h;k++){var E;b=k<<2,N=3*(E=d[k]),S[b]=q[N],S[b+1]=q[N+1],S[b+2]=q[N+2],S[b+3]=E<ne?Y[E]:255}}else if(j==4){if(z==8)for(k=0;k<h;k++){b=k<<2;var _=d[A=k<<1];S[b]=_,S[b+1]=_,S[b+2]=_,S[b+3]=d[A+1]}if(z==16)for(k=0;k<h;k++){var A;b=k<<2,_=d[A=k<<2],S[b]=_,S[b+1]=_,S[b+2]=_,S[b+3]=d[A+2]}}else if(j==0)for(w=y.tabs.tRNS?y.tabs.tRNS:-1,C=0;C<g;C++){const q=C*P,Y=C*f;if(z==1)for(var v=0;v<f;v++){var H=(_=255*(d[q+(v>>>3)]>>>7-(7&v)&1))==255*w?0:255;M[Y+v]=H<<24|_<<16|_<<8|_}else if(z==2)for(v=0;v<f;v++)H=(_=85*(d[q+(v>>>2)]>>>6-((3&v)<<1)&3))==85*w?0:255,M[Y+v]=H<<24|_<<16|_<<8|_;else if(z==4)for(v=0;v<f;v++)H=(_=17*(d[q+(v>>>1)]>>>4-((1&v)<<2)&15))==17*w?0:255,M[Y+v]=H<<24|_<<16|_<<8|_;else if(z==8)for(v=0;v<f;v++)H=(_=d[q+v])==w?0:255,M[Y+v]=H<<24|_<<16|_<<8|_;else if(z==16)for(v=0;v<f;v++)_=d[q+(v<<1)],H=T(d,q+(v<<1))==w?0:255,M[Y+v]=H<<24|_<<16|_<<8|_}return S}function r(d,f,g,y){const h=i(d),x=Math.ceil(g*h/8),P=new Uint8Array((x+1+d.interlace)*y);return f=d.tabs.CgBI?o(f,P):n(f,P),d.interlace==0?f=l(f,d,0,g,y):d.interlace==1&&(f=function(M,j){const z=j.width,T=j.height,k=i(j),R=k>>3,w=Math.ceil(z*k/8),b=new Uint8Array(T*w);let C=0;const O=[0,0,4,0,2,0,1],F=[0,4,0,2,0,1,0],N=[8,8,8,4,4,2,2],E=[8,8,4,4,2,2,1];let _=0;for(;_<7;){const v=N[_],H=E[_];let q=0,Y=0,ne=O[_];for(;ne<T;)ne+=v,Y++;let U=F[_];for(;U<z;)U+=H,q++;const $=Math.ceil(q*k/8);l(M,j,C,q,Y);let D=0,I=O[_];for(;I<T;){let J=F[_],Q=C+D*$<<3;for(;J<z;){var A;if(k==1&&(A=(A=M[Q>>3])>>7-(7&Q)&1,b[I*w+(J>>3)]|=A<<7-((7&J)<<0)),k==2&&(A=(A=M[Q>>3])>>6-(7&Q)&3,b[I*w+(J>>2)]|=A<<6-((3&J)<<1)),k==4&&(A=(A=M[Q>>3])>>4-(7&Q)&15,b[I*w+(J>>1)]|=A<<4-((1&J)<<2)),k>=8){const te=I*w+J*R;for(let ee=0;ee<R;ee++)b[te+ee]=M[(Q>>3)+ee]}Q+=k,J+=H}D++,I+=v}q*Y!=0&&(C+=Y*(1+$)),_+=1}return b}(f,d)),f}function n(d,f){return o(new Uint8Array(d.buffer,2,d.length-6),f)}var o=function(){const d={H:{}};return d.H.N=function(f,g){const y=Uint8Array;let h,x,P=0,S=0,M=0,j=0,z=0,T=0,k=0,R=0,w=0;if(f[0]==3&&f[1]==0)return g||new y(0);const b=d.H,C=b.b,O=b.e,F=b.R,N=b.n,E=b.A,_=b.Z,A=b.m,v=g==null;for(v&&(g=new y(f.length>>>2<<5));P==0;)if(P=C(f,w,1),S=C(f,w+1,2),w+=3,S!=0){if(v&&(g=d.H.W(g,R+(1<<17))),S==1&&(h=A.J,x=A.h,T=511,k=31),S==2){M=O(f,w,5)+257,j=O(f,w+5,5)+1,z=O(f,w+10,4)+4,w+=14;let q=1;for(var H=0;H<38;H+=2)A.Q[H]=0,A.Q[H+1]=0;for(H=0;H<z;H++){const U=O(f,w+3*H,3);A.Q[1+(A.X[H]<<1)]=U,U>q&&(q=U)}w+=3*z,N(A.Q,q),E(A.Q,q,A.u),h=A.w,x=A.d,w=F(A.u,(1<<q)-1,M+j,f,w,A.v);const Y=b.V(A.v,0,M,A.C);T=(1<<Y)-1;const ne=b.V(A.v,M,j,A.D);k=(1<<ne)-1,N(A.C,Y),E(A.C,Y,h),N(A.D,ne),E(A.D,ne,x)}for(;;){const q=h[_(f,w)&T];w+=15&q;const Y=q>>>4;if(!(Y>>>8))g[R++]=Y;else{if(Y==256)break;{let ne=R+Y-254;if(Y>264){const J=A.q[Y-257];ne=R+(J>>>3)+O(f,w,7&J),w+=7&J}const U=x[_(f,w)&k];w+=15&U;const $=U>>>4,D=A.c[$],I=(D>>>4)+C(f,w,15&D);for(w+=15&D;R<ne;)g[R]=g[R++-I],g[R]=g[R++-I],g[R]=g[R++-I],g[R]=g[R++-I];R=ne}}}}else{7&w&&(w+=8-(7&w));const q=4+(w>>>3),Y=f[q-4]|f[q-3]<<8;v&&(g=d.H.W(g,R+Y)),g.set(new y(f.buffer,f.byteOffset+q,Y),R),w=q+Y<<3,R+=Y}return g.length==R?g:g.slice(0,R)},d.H.W=function(f,g){const y=f.length;if(g<=y)return f;const h=new Uint8Array(y<<1);return h.set(f,0),h},d.H.R=function(f,g,y,h,x,P){const S=d.H.e,M=d.H.Z;let j=0;for(;j<y;){const z=f[M(h,x)&g];x+=15&z;const T=z>>>4;if(T<=15)P[j]=T,j++;else{let k=0,R=0;T==16?(R=3+S(h,x,2),x+=2,k=P[j-1]):T==17?(R=3+S(h,x,3),x+=3):T==18&&(R=11+S(h,x,7),x+=7);const w=j+R;for(;j<w;)P[j]=k,j++}}return x},d.H.V=function(f,g,y,h){let x=0,P=0;const S=h.length>>>1;for(;P<y;){const M=f[P+g];h[P<<1]=0,h[1+(P<<1)]=M,M>x&&(x=M),P++}for(;P<S;)h[P<<1]=0,h[1+(P<<1)]=0,P++;return x},d.H.n=function(f,g){const y=d.H.m,h=f.length;let x,P,S,M;const j=y.j;for(var z=0;z<=g;z++)j[z]=0;for(z=1;z<h;z+=2)j[f[z]]++;const T=y.K;for(x=0,j[0]=0,P=1;P<=g;P++)x=x+j[P-1]<<1,T[P]=x;for(S=0;S<h;S+=2)M=f[S+1],M!=0&&(f[S]=T[M],T[M]++)},d.H.A=function(f,g,y){const h=f.length,x=d.H.m.r;for(let P=0;P<h;P+=2)if(f[P+1]!=0){const S=P>>1,M=f[P+1],j=S<<4|M,z=g-M;let T=f[P]<<z;const k=T+(1<<z);for(;T!=k;)y[x[T]>>>15-g]=j,T++}},d.H.l=function(f,g){const y=d.H.m.r,h=15-g;for(let x=0;x<f.length;x+=2){const P=f[x]<<g-f[x+1];f[x]=y[P]>>>h}},d.H.M=function(f,g,y){y<<=7&g;const h=g>>>3;f[h]|=y,f[h+1]|=y>>>8},d.H.I=function(f,g,y){y<<=7&g;const h=g>>>3;f[h]|=y,f[h+1]|=y>>>8,f[h+2]|=y>>>16},d.H.e=function(f,g,y){return(f[g>>>3]|f[1+(g>>>3)]<<8)>>>(7&g)&(1<<y)-1},d.H.b=function(f,g,y){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16)>>>(7&g)&(1<<y)-1},d.H.Z=function(f,g){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16)>>>(7&g)},d.H.i=function(f,g){return(f[g>>>3]|f[1+(g>>>3)]<<8|f[2+(g>>>3)]<<16|f[3+(g>>>3)]<<24)>>>(7&g)},d.H.m=function(){const f=Uint16Array,g=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=d.H.m;for(var g=0;g<32768;g++){let h=g;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,f.r[g]=(h>>>16|h<<16)>>>17}function y(h,x,P){for(;x--!=0;)h.push(0,P)}for(g=0;g<32;g++)f.q[g]=f.S[g]<<3|f.T[g],f.c[g]=f.p[g]<<4|f.z[g];y(f._,144,8),y(f._,112,9),y(f._,24,7),y(f._,8,8),d.H.n(f._,9),d.H.A(f._,9,f.J),d.H.l(f._,9),y(f.$,32,5),d.H.n(f.$,5),d.H.A(f.$,5,f.h),d.H.l(f.$,5),y(f.Q,19,0),y(f.C,286,0),y(f.D,30,0),y(f.v,320,0)}(),d.H.N}();function i(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function l(d,f,g,y,h){let x=i(f);const P=Math.ceil(y*x/8);let S,M;x=Math.ceil(x/8);let j=d[g],z=0;if(j>1&&(d[g]=[0,0,1][j-2]),j==3)for(z=x;z<P;z++)d[z+1]=d[z+1]+(d[z+1-x]>>>1)&255;for(let T=0;T<h;T++)if(S=g+T*P,M=S+T+1,j=d[M-1],z=0,j==0)for(;z<P;z++)d[S+z]=d[M+z];else if(j==1){for(;z<x;z++)d[S+z]=d[M+z];for(;z<P;z++)d[S+z]=d[M+z]+d[S+z-x]}else if(j==2)for(;z<P;z++)d[S+z]=d[M+z]+d[S+z-P];else if(j==3){for(;z<x;z++)d[S+z]=d[M+z]+(d[S+z-P]>>>1);for(;z<P;z++)d[S+z]=d[M+z]+(d[S+z-P]+d[S+z-x]>>>1)}else{for(;z<x;z++)d[S+z]=d[M+z]+c(0,d[S+z-P],0);for(;z<P;z++)d[S+z]=d[M+z]+c(d[S+z-x],d[S+z-P],d[S+z-x-P])}return d}function c(d,f,g){const y=d+f-g,h=y-d,x=y-f,P=y-g;return h*h<=x*x&&h*h<=P*P?d:x*x<=P*P?f:g}function u(d,f,g){g.width=s.readUint(d,f),f+=4,g.height=s.readUint(d,f),f+=4,g.depth=d[f],f++,g.ctype=d[f],f++,g.compress=d[f],f++,g.filter=d[f],f++,g.interlace=d[f],f++}function m(d,f,g,y,h,x,P,S,M){const j=Math.min(f,h),z=Math.min(g,x);let T=0,k=0;for(let _=0;_<z;_++)for(let A=0;A<j;A++)if(P>=0&&S>=0?(T=_*f+A<<2,k=(S+_)*h+P+A<<2):(T=(-S+_)*f-P+A<<2,k=_*h+A<<2),M==0)y[k]=d[T],y[k+1]=d[T+1],y[k+2]=d[T+2],y[k+3]=d[T+3];else if(M==1){var R=d[T+3]*.00392156862745098,w=d[T]*R,b=d[T+1]*R,C=d[T+2]*R,O=y[k+3]*(1/255),F=y[k]*O,N=y[k+1]*O,E=y[k+2]*O;const v=1-R,H=R+O*v,q=H==0?0:1/H;y[k+3]=255*H,y[k+0]=(w+F*v)*q,y[k+1]=(b+N*v)*q,y[k+2]=(C+E*v)*q}else if(M==2)R=d[T+3],w=d[T],b=d[T+1],C=d[T+2],O=y[k+3],F=y[k],N=y[k+1],E=y[k+2],R==O&&w==F&&b==N&&C==E?(y[k]=0,y[k+1]=0,y[k+2]=0,y[k+3]=0):(y[k]=w,y[k+1]=b,y[k+2]=C,y[k+3]=R);else if(M==3){if(R=d[T+3],w=d[T],b=d[T+1],C=d[T+2],O=y[k+3],F=y[k],N=y[k+1],E=y[k+2],R==O&&w==F&&b==N&&C==E)continue;if(R<220&&O>20)return!1}return!0}return{decode:function(f){const g=new Uint8Array(f);let y=8;const h=s,x=h.readUshort,P=h.readUint,S={tabs:{},frames:[]},M=new Uint8Array(g.length);let j,z=0,T=0;const k=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(g[R]!=k[R])throw"The input is not a PNG file!";for(;y<g.length;){const _=h.readUint(g,y);y+=4;const A=h.readASCII(g,y,4);if(y+=4,A=="IHDR")u(g,y,S);else if(A=="iCCP"){for(var w=y;g[w]!=0;)w++;h.readASCII(g,y,w-y),g[w+1];const v=g.slice(w+2,y+_);let H=null;try{H=n(v)}catch{H=o(v)}S.tabs[A]=H}else if(A=="CgBI")S.tabs[A]=g.slice(y,y+4);else if(A=="IDAT"){for(R=0;R<_;R++)M[z+R]=g[y+R];z+=_}else if(A=="acTL")S.tabs[A]={num_frames:P(g,y),num_plays:P(g,y+4)},j=new Uint8Array(g.length);else if(A=="fcTL"){T!=0&&((E=S.frames[S.frames.length-1]).data=r(S,j.slice(0,T),E.rect.width,E.rect.height),T=0);const v={x:P(g,y+12),y:P(g,y+16),width:P(g,y+4),height:P(g,y+8)};let H=x(g,y+22);H=x(g,y+20)/(H==0?100:H);const q={rect:v,delay:Math.round(1e3*H),dispose:g[y+24],blend:g[y+25]};S.frames.push(q)}else if(A=="fdAT"){for(R=0;R<_-4;R++)j[T+R]=g[y+R+4];T+=_-4}else if(A=="pHYs")S.tabs[A]=[h.readUint(g,y),h.readUint(g,y+4),g[y+8]];else if(A=="cHRM")for(S.tabs[A]=[],R=0;R<8;R++)S.tabs[A].push(h.readUint(g,y+4*R));else if(A=="tEXt"||A=="zTXt"){S.tabs[A]==null&&(S.tabs[A]={});var b=h.nextZero(g,y),C=h.readASCII(g,y,b-y),O=y+_-b-1;if(A=="tEXt")N=h.readASCII(g,b+1,O);else{var F=n(g.slice(b+2,b+2+O));N=h.readUTF8(F,0,F.length)}S.tabs[A][C]=N}else if(A=="iTXt"){S.tabs[A]==null&&(S.tabs[A]={}),b=0,w=y,b=h.nextZero(g,w),C=h.readASCII(g,w,b-w);const v=g[w=b+1];var N;g[w+1],w+=2,b=h.nextZero(g,w),h.readASCII(g,w,b-w),w=b+1,b=h.nextZero(g,w),h.readUTF8(g,w,b-w),O=_-((w=b+1)-y),v==0?N=h.readUTF8(g,w,O):(F=n(g.slice(w,w+O)),N=h.readUTF8(F,0,F.length)),S.tabs[A][C]=N}else if(A=="PLTE")S.tabs[A]=h.readBytes(g,y,_);else if(A=="hIST"){const v=S.tabs.PLTE.length/3;for(S.tabs[A]=[],R=0;R<v;R++)S.tabs[A].push(x(g,y+2*R))}else if(A=="tRNS")S.ctype==3?S.tabs[A]=h.readBytes(g,y,_):S.ctype==0?S.tabs[A]=x(g,y):S.ctype==2&&(S.tabs[A]=[x(g,y),x(g,y+2),x(g,y+4)]);else if(A=="gAMA")S.tabs[A]=h.readUint(g,y)/1e5;else if(A=="sRGB")S.tabs[A]=g[y];else if(A=="bKGD")S.ctype==0||S.ctype==4?S.tabs[A]=[x(g,y)]:S.ctype==2||S.ctype==6?S.tabs[A]=[x(g,y),x(g,y+2),x(g,y+4)]:S.ctype==3&&(S.tabs[A]=g[y]);else if(A=="IEND")break;y+=_,h.readUint(g,y),y+=4}var E;return T!=0&&((E=S.frames[S.frames.length-1]).data=r(S,j.slice(0,T),E.rect.width,E.rect.height)),S.data=r(S,M,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(f){const g=f.width,y=f.height;if(f.tabs.acTL==null)return[t(f.data,g,y,f).buffer];const h=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const x=g*y*4,P=new Uint8Array(x),S=new Uint8Array(x),M=new Uint8Array(x);for(let z=0;z<f.frames.length;z++){const T=f.frames[z],k=T.rect.x,R=T.rect.y,w=T.rect.width,b=T.rect.height,C=t(T.data,w,b,f);if(z!=0)for(var j=0;j<x;j++)M[j]=P[j];if(T.blend==0?m(C,w,b,P,g,y,k,R,0):T.blend==1&&m(C,w,b,P,g,y,k,R,1),h.push(P.buffer.slice(0)),T.dispose!=0){if(T.dispose==1)m(S,w,b,P,g,y,k,R,0);else if(T.dispose==2)for(j=0;j<x;j++)P[j]=M[j]}}return h},_paeth:c,_copyTile:m,_bin:s}}();(function(){const{_copyTile:s}=Ps,{_bin:t}=Ps,r=Ps._paeth;var n={table:function(){const w=new Uint32Array(256);for(let b=0;b<256;b++){let C=b;for(let O=0;O<8;O++)1&C?C=3988292384^C>>>1:C>>>=1;w[b]=C}return w}(),update(w,b,C,O){for(let F=0;F<O;F++)w=n.table[255&(w^b[C+F])]^w>>>8;return w},crc:(w,b,C)=>4294967295^n.update(4294967295,w,b,C)};function o(w,b,C,O){b[C]+=w[0]*O>>4,b[C+1]+=w[1]*O>>4,b[C+2]+=w[2]*O>>4,b[C+3]+=w[3]*O>>4}function i(w){return Math.max(0,Math.min(255,w))}function l(w,b){const C=w[0]-b[0],O=w[1]-b[1],F=w[2]-b[2],N=w[3]-b[3];return C*C+O*O+F*F+N*N}function c(w,b,C,O,F,N,E){E==null&&(E=1);const _=O.length,A=[];for(var v=0;v<_;v++){const I=O[v];A.push([I>>>0&255,I>>>8&255,I>>>16&255,I>>>24&255])}for(v=0;v<_;v++){let I=4294967295;for(var H=0,q=0;q<_;q++){var Y=l(A[v],A[q]);q!=v&&Y<I&&(I=Y,H=q)}}const ne=new Uint32Array(F.buffer),U=new Int16Array(b*C*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(v=0;v<$.length;v++)$[v]=255*(($[v]+.5)/16-.5);for(let I=0;I<C;I++)for(let J=0;J<b;J++){var D;v=4*(I*b+J),E!=2?D=[i(w[v]+U[v]),i(w[v+1]+U[v+1]),i(w[v+2]+U[v+2]),i(w[v+3]+U[v+3])]:(Y=$[4*(3&I)+(3&J)],D=[i(w[v]+Y),i(w[v+1]+Y),i(w[v+2]+Y),i(w[v+3]+Y)]),H=0;let Q=16777215;for(q=0;q<_;q++){const re=l(D,A[q]);re<Q&&(Q=re,H=q)}const te=A[H],ee=[D[0]-te[0],D[1]-te[1],D[2]-te[2],D[3]-te[3]];E==1&&(J!=b-1&&o(ee,U,v+4,7),I!=C-1&&(J!=0&&o(ee,U,v+4*b-4,3),o(ee,U,v+4*b,5),J!=b-1&&o(ee,U,v+4*b+4,1))),N[v>>2]=H,ne[v>>2]=O[H]}}function u(w,b,C,O,F){F==null&&(F={});const{crc:N}=n,E=t.writeUint,_=t.writeUshort,A=t.writeASCII;let v=8;const H=w.frames.length>1;let q,Y=!1,ne=33+(H?20:0);if(F.sRGB!=null&&(ne+=13),F.pHYs!=null&&(ne+=21),F.iCCP!=null&&(q=pako.deflate(F.iCCP),ne+=21+q.length+4),w.ctype==3){for(var U=w.plte.length,$=0;$<U;$++)w.plte[$]>>>24!=255&&(Y=!0);ne+=8+3*U+4+(Y?8+1*U+4:0)}for(var D=0;D<w.frames.length;D++)H&&(ne+=38),ne+=(te=w.frames[D]).cimg.length+12,D!=0&&(ne+=4);ne+=12;const I=new Uint8Array(ne),J=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)I[$]=J[$];if(E(I,v,13),v+=4,A(I,v,"IHDR"),v+=4,E(I,v,b),v+=4,E(I,v,C),v+=4,I[v]=w.depth,v++,I[v]=w.ctype,v++,I[v]=0,v++,I[v]=0,v++,I[v]=0,v++,E(I,v,N(I,v-17,17)),v+=4,F.sRGB!=null&&(E(I,v,1),v+=4,A(I,v,"sRGB"),v+=4,I[v]=F.sRGB,v++,E(I,v,N(I,v-5,5)),v+=4),F.iCCP!=null){const ee=13+q.length;E(I,v,ee),v+=4,A(I,v,"iCCP"),v+=4,A(I,v,"ICC profile"),v+=11,v+=2,I.set(q,v),v+=q.length,E(I,v,N(I,v-(ee+4),ee+4)),v+=4}if(F.pHYs!=null&&(E(I,v,9),v+=4,A(I,v,"pHYs"),v+=4,E(I,v,F.pHYs[0]),v+=4,E(I,v,F.pHYs[1]),v+=4,I[v]=F.pHYs[2],v++,E(I,v,N(I,v-13,13)),v+=4),H&&(E(I,v,8),v+=4,A(I,v,"acTL"),v+=4,E(I,v,w.frames.length),v+=4,E(I,v,F.loop!=null?F.loop:0),v+=4,E(I,v,N(I,v-12,12)),v+=4),w.ctype==3){for(E(I,v,3*(U=w.plte.length)),v+=4,A(I,v,"PLTE"),v+=4,$=0;$<U;$++){const ee=3*$,re=w.plte[$],se=255&re,he=re>>>8&255,fe=re>>>16&255;I[v+ee+0]=se,I[v+ee+1]=he,I[v+ee+2]=fe}if(v+=3*U,E(I,v,N(I,v-3*U-4,3*U+4)),v+=4,Y){for(E(I,v,U),v+=4,A(I,v,"tRNS"),v+=4,$=0;$<U;$++)I[v+$]=w.plte[$]>>>24&255;v+=U,E(I,v,N(I,v-U-4,U+4)),v+=4}}let Q=0;for(D=0;D<w.frames.length;D++){var te=w.frames[D];H&&(E(I,v,26),v+=4,A(I,v,"fcTL"),v+=4,E(I,v,Q++),v+=4,E(I,v,te.rect.width),v+=4,E(I,v,te.rect.height),v+=4,E(I,v,te.rect.x),v+=4,E(I,v,te.rect.y),v+=4,_(I,v,O[D]),v+=2,_(I,v,1e3),v+=2,I[v]=te.dispose,v++,I[v]=te.blend,v++,E(I,v,N(I,v-30,30)),v+=4);const ee=te.cimg;E(I,v,(U=ee.length)+(D==0?0:4)),v+=4;const re=v;A(I,v,D==0?"IDAT":"fdAT"),v+=4,D!=0&&(E(I,v,Q++),v+=4),I.set(ee,v),v+=U,E(I,v,N(I,re,v-re)),v+=4}return E(I,v,0),v+=4,A(I,v,"IEND"),v+=4,E(I,v,N(I,v-4,4)),v+=4,I.buffer}function m(w,b,C){for(let O=0;O<w.frames.length;O++){const F=w.frames[O];F.rect.width;const N=F.rect.height,E=new Uint8Array(N*F.bpl+N);F.cimg=y(F.img,N,F.bpp,F.bpl,E,b,C)}}function d(w,b,C,O,F){const N=F[0],E=F[1],_=F[2],A=F[3],v=F[4],H=F[5];let q=6,Y=8,ne=255;for(var U=0;U<w.length;U++){const X=new Uint8Array(w[U]);for(var $=X.length,D=0;D<$;D+=4)ne&=X[D+3]}const I=ne!=255,J=function(pe,je,ae,Ce,Te,Ie){const Ae=[];for(var we=0;we<pe.length;we++){const Ne=new Uint8Array(pe[we]),ot=new Uint32Array(Ne.buffer);var Be;let Oe=0,Ct=0,ut=je,tt=ae,at=Ce?1:0;if(we!=0){const Ws=Ie||Ce||we==1||Ae[we-2].dispose!=0?1:2;let Xs=0,ps=1e9;for(let qs=0;qs<Ws;qs++){var $e=new Uint8Array(pe[we-1-qs]);const fn=new Uint32Array(pe[we-1-qs]);let fs=je,mt=ae,ks=-1,er=-1;for(let Is=0;Is<ae;Is++)for(let zs=0;zs<je;zs++)ot[Ve=Is*je+zs]!=fn[Ve]&&(zs<fs&&(fs=zs),zs>ks&&(ks=zs),Is<mt&&(mt=Is),Is>er&&(er=Is));ks==-1&&(fs=mt=ks=er=0),Te&&((1&fs)==1&&fs--,(1&mt)==1&&mt--);const gn=(ks-fs+1)*(er-mt+1);gn<ps&&(ps=gn,Xs=qs,Oe=fs,Ct=mt,ut=ks-fs+1,tt=er-mt+1)}$e=new Uint8Array(pe[we-1-Xs]),Xs==1&&(Ae[we-1].dispose=2),Be=new Uint8Array(ut*tt*4),s($e,je,ae,Be,ut,tt,-Oe,-Ct,0),at=s(Ne,je,ae,Be,ut,tt,-Oe,-Ct,3)?1:0,at==1?g(Ne,je,ae,Be,{x:Oe,y:Ct,width:ut,height:tt}):s(Ne,je,ae,Be,ut,tt,-Oe,-Ct,0)}else Be=Ne.slice(0);Ae.push({rect:{x:Oe,y:Ct,width:ut,height:tt},img:Be,blend:at,dispose:0})}if(Ce)for(we=0;we<Ae.length;we++){if((_e=Ae[we]).blend==1)continue;const Ne=_e.rect,ot=Ae[we-1].rect,Oe=Math.min(Ne.x,ot.x),Ct=Math.min(Ne.y,ot.y),ut={x:Oe,y:Ct,width:Math.max(Ne.x+Ne.width,ot.x+ot.width)-Oe,height:Math.max(Ne.y+Ne.height,ot.y+ot.height)-Ct};Ae[we-1].dispose=1,we-1!=0&&f(pe,je,ae,Ae,we-1,ut,Te),f(pe,je,ae,Ae,we,ut,Te)}let Xe=0;if(pe.length!=1)for(var Ve=0;Ve<Ae.length;Ve++){var _e;Xe+=(_e=Ae[Ve]).rect.width*_e.rect.height}return Ae}(w,b,C,N,E,_),Q={},te=[],ee=[];if(O!=0){const X=[];for(D=0;D<J.length;D++)X.push(J[D].img.buffer);const pe=function(Te){let Ie=0;for(var Ae=0;Ae<Te.length;Ae++)Ie+=Te[Ae].byteLength;const we=new Uint8Array(Ie);let Be=0;for(Ae=0;Ae<Te.length;Ae++){const $e=new Uint8Array(Te[Ae]),Xe=$e.length;for(let Ve=0;Ve<Xe;Ve+=4){let _e=$e[Ve],Ne=$e[Ve+1],ot=$e[Ve+2];const Oe=$e[Ve+3];Oe==0&&(_e=Ne=ot=0),we[Be+Ve]=_e,we[Be+Ve+1]=Ne,we[Be+Ve+2]=ot,we[Be+Ve+3]=Oe}Be+=Xe}return we.buffer}(X),je=x(pe,O);for(D=0;D<je.plte.length;D++)te.push(je.plte[D].est.rgba);let ae=0;for(D=0;D<J.length;D++){const Ce=(se=J[D]).img.length;var re=new Uint8Array(je.inds.buffer,ae>>2,Ce>>2);ee.push(re);const Te=new Uint8Array(je.abuf,ae,Ce);H&&c(se.img,se.rect.width,se.rect.height,te,Te,re),se.img.set(Te),ae+=Ce}}else for(U=0;U<J.length;U++){var se=J[U];const X=new Uint32Array(se.img.buffer);var he=se.rect.width;for($=X.length,re=new Uint8Array($),ee.push(re),D=0;D<$;D++){const pe=X[D];if(D!=0&&pe==X[D-1])re[D]=re[D-1];else if(D>he&&pe==X[D-he])re[D]=re[D-he];else{let je=Q[pe];if(je==null&&(Q[pe]=je=te.length,te.push(pe),te.length>=300))break;re[D]=je}}}const fe=te.length;for(fe<=256&&v==0&&(Y=fe<=2?1:fe<=4?2:fe<=16?4:8,Y=Math.max(Y,A)),U=0;U<J.length;U++){(se=J[U]).rect.x,se.rect.y,he=se.rect.width;const X=se.rect.height;let pe=se.img;new Uint32Array(pe.buffer);let je=4*he,ae=4;if(fe<=256&&v==0){je=Math.ceil(Y*he/8);var ke=new Uint8Array(je*X);const Ce=ee[U];for(let Te=0;Te<X;Te++){D=Te*je;const Ie=Te*he;if(Y==8)for(var me=0;me<he;me++)ke[D+me]=Ce[Ie+me];else if(Y==4)for(me=0;me<he;me++)ke[D+(me>>1)]|=Ce[Ie+me]<<4-4*(1&me);else if(Y==2)for(me=0;me<he;me++)ke[D+(me>>2)]|=Ce[Ie+me]<<6-2*(3&me);else if(Y==1)for(me=0;me<he;me++)ke[D+(me>>3)]|=Ce[Ie+me]<<7-1*(7&me)}pe=ke,q=3,ae=1}else if(I==0&&J.length==1){ke=new Uint8Array(he*X*3);const Ce=he*X;for(D=0;D<Ce;D++){const Te=3*D,Ie=4*D;ke[Te]=pe[Ie],ke[Te+1]=pe[Ie+1],ke[Te+2]=pe[Ie+2]}pe=ke,q=2,ae=3,je=3*he}se.img=pe,se.bpl=je,se.bpp=ae}return{ctype:q,depth:Y,plte:te,frames:J}}function f(w,b,C,O,F,N,E){const _=Uint8Array,A=Uint32Array,v=new _(w[F-1]),H=new A(w[F-1]),q=F+1<w.length?new _(w[F+1]):null,Y=new _(w[F]),ne=new A(Y.buffer);let U=b,$=C,D=-1,I=-1;for(let Q=0;Q<N.height;Q++)for(let te=0;te<N.width;te++){const ee=N.x+te,re=N.y+Q,se=re*b+ee,he=ne[se];he==0||O[F-1].dispose==0&&H[se]==he&&(q==null||q[4*se+3]!=0)||(ee<U&&(U=ee),ee>D&&(D=ee),re<$&&($=re),re>I&&(I=re))}D==-1&&(U=$=D=I=0),E&&((1&U)==1&&U--,(1&$)==1&&$--),N={x:U,y:$,width:D-U+1,height:I-$+1};const J=O[F];J.rect=N,J.blend=1,J.img=new Uint8Array(N.width*N.height*4),O[F-1].dispose==0?(s(v,b,C,J.img,N.width,N.height,-N.x,-N.y,0),g(Y,b,C,J.img,N)):s(Y,b,C,J.img,N.width,N.height,-N.x,-N.y,0)}function g(w,b,C,O,F){s(w,b,C,O,F.width,F.height,-F.x,-F.y,2)}function y(w,b,C,O,F,N,E){const _=[];let A,v=[0,1,2,3,4];N!=-1?v=[N]:(b*O>5e5||C==1)&&(v=[0]),E&&(A={level:0});const H=A2;for(var q=0;q<v.length;q++){for(let U=0;U<b;U++)h(F,w,U,O,C,v[q]);_.push(H.deflate(F,A))}let Y,ne=1e9;for(q=0;q<_.length;q++)_[q].length<ne&&(Y=q,ne=_[q].length);return _[Y]}function h(w,b,C,O,F,N){const E=C*O;let _=E+C;if(w[_]=N,_++,N==0)if(O<500)for(var A=0;A<O;A++)w[_+A]=b[E+A];else w.set(new Uint8Array(b.buffer,E,O),_);else if(N==1){for(A=0;A<F;A++)w[_+A]=b[E+A];for(A=F;A<O;A++)w[_+A]=b[E+A]-b[E+A-F]+256&255}else if(C==0){for(A=0;A<F;A++)w[_+A]=b[E+A];if(N==2)for(A=F;A<O;A++)w[_+A]=b[E+A];if(N==3)for(A=F;A<O;A++)w[_+A]=b[E+A]-(b[E+A-F]>>1)+256&255;if(N==4)for(A=F;A<O;A++)w[_+A]=b[E+A]-r(b[E+A-F],0,0)+256&255}else{if(N==2)for(A=0;A<O;A++)w[_+A]=b[E+A]+256-b[E+A-O]&255;if(N==3){for(A=0;A<F;A++)w[_+A]=b[E+A]+256-(b[E+A-O]>>1)&255;for(A=F;A<O;A++)w[_+A]=b[E+A]+256-(b[E+A-O]+b[E+A-F]>>1)&255}if(N==4){for(A=0;A<F;A++)w[_+A]=b[E+A]+256-r(0,b[E+A-O],0)&255;for(A=F;A<O;A++)w[_+A]=b[E+A]+256-r(b[E+A-F],b[E+A-O],b[E+A-F-O])&255}}}function x(w,b){const C=new Uint8Array(w),O=C.slice(0),F=new Uint32Array(O.buffer),N=P(O,b),E=N[0],_=N[1],A=C.length,v=new Uint8Array(A>>2);let H;if(C.length<2e7)for(var q=0;q<A;q+=4)H=S(E,Y=C[q]*(1/255),ne=C[q+1]*(1/255),U=C[q+2]*(1/255),$=C[q+3]*(1/255)),v[q>>2]=H.ind,F[q>>2]=H.est.rgba;else for(q=0;q<A;q+=4){var Y=C[q]*.00392156862745098,ne=C[q+1]*(1/255),U=C[q+2]*(1/255),$=C[q+3]*(1/255);for(H=E;H.left;)H=M(H.est,Y,ne,U,$)<=0?H.left:H.right;v[q>>2]=H.ind,F[q>>2]=H.est.rgba}return{abuf:O.buffer,inds:v,plte:_}}function P(w,b,C){C==null&&(C=1e-4);const O=new Uint32Array(w.buffer),F={i0:0,i1:w.length,bst:null,est:null,tdst:0,left:null,right:null};F.bst=T(w,F.i0,F.i1),F.est=k(F.bst);const N=[F];for(;N.length<b;){let _=0,A=0;for(var E=0;E<N.length;E++)N[E].est.L>_&&(_=N[E].est.L,A=E);if(_<C)break;const v=N[A],H=j(w,O,v.i0,v.i1,v.est.e,v.est.eMq255);if(v.i0>=H||v.i1<=H){v.est.L=0;continue}const q={i0:v.i0,i1:H,bst:null,est:null,tdst:0,left:null,right:null};q.bst=T(w,q.i0,q.i1),q.est=k(q.bst);const Y={i0:H,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:v.bst.N-q.bst.N},E=0;E<16;E++)Y.bst.R[E]=v.bst.R[E]-q.bst.R[E];for(E=0;E<4;E++)Y.bst.m[E]=v.bst.m[E]-q.bst.m[E];Y.est=k(Y.bst),v.left=q,v.right=Y,N[A]=q,N.push(Y)}for(N.sort((_,A)=>A.bst.N-_.bst.N),E=0;E<N.length;E++)N[E].ind=E;return[F,N]}function S(w,b,C,O,F){if(w.left==null)return w.tdst=function(q,Y,ne,U,$){const D=Y-q[0],I=ne-q[1],J=U-q[2],Q=$-q[3];return D*D+I*I+J*J+Q*Q}(w.est.q,b,C,O,F),w;const N=M(w.est,b,C,O,F);let E=w.left,_=w.right;N>0&&(E=w.right,_=w.left);const A=S(E,b,C,O,F);if(A.tdst<=N*N)return A;const v=S(_,b,C,O,F);return v.tdst<A.tdst?v:A}function M(w,b,C,O,F){const{e:N}=w;return N[0]*b+N[1]*C+N[2]*O+N[3]*F-w.eMq}function j(w,b,C,O,F,N){for(O-=4;C<O;){for(;z(w,C,F)<=N;)C+=4;for(;z(w,O,F)>N;)O-=4;if(C>=O)break;const E=b[C>>2];b[C>>2]=b[O>>2],b[O>>2]=E,C+=4,O-=4}for(;z(w,C,F)>N;)C-=4;return C+4}function z(w,b,C){return w[b]*C[0]+w[b+1]*C[1]+w[b+2]*C[2]+w[b+3]*C[3]}function T(w,b,C){const O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F=[0,0,0,0],N=C-b>>2;for(let E=b;E<C;E+=4){const _=w[E]*.00392156862745098,A=w[E+1]*(1/255),v=w[E+2]*(1/255),H=w[E+3]*(1/255);F[0]+=_,F[1]+=A,F[2]+=v,F[3]+=H,O[0]+=_*_,O[1]+=_*A,O[2]+=_*v,O[3]+=_*H,O[5]+=A*A,O[6]+=A*v,O[7]+=A*H,O[10]+=v*v,O[11]+=v*H,O[15]+=H*H}return O[4]=O[1],O[8]=O[2],O[9]=O[6],O[12]=O[3],O[13]=O[7],O[14]=O[11],{R:O,m:F,N}}function k(w){const{R:b}=w,{m:C}=w,{N:O}=w,F=C[0],N=C[1],E=C[2],_=C[3],A=O==0?0:1/O,v=[b[0]-F*F*A,b[1]-F*N*A,b[2]-F*E*A,b[3]-F*_*A,b[4]-N*F*A,b[5]-N*N*A,b[6]-N*E*A,b[7]-N*_*A,b[8]-E*F*A,b[9]-E*N*A,b[10]-E*E*A,b[11]-E*_*A,b[12]-_*F*A,b[13]-_*N*A,b[14]-_*E*A,b[15]-_*_*A],H=v,q=R;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],ne=0,U=0;if(O!=0)for(let D=0;D<16&&(Y=q.multVec(H,Y),U=Math.sqrt(q.dot(Y,Y)),Y=q.sml(1/U,Y),!(D!=0&&Math.abs(U-ne)<1e-9));D++)ne=U;const $=[F*A,N*A,E*A,_*A];return{Cov:v,q:$,e:Y,L:ne,eMq255:q.dot(q.sml(255,$),Y),eMq:q.dot(Y,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var R={multVec:(w,b)=>[w[0]*b[0]+w[1]*b[1]+w[2]*b[2]+w[3]*b[3],w[4]*b[0]+w[5]*b[1]+w[6]*b[2]+w[7]*b[3],w[8]*b[0]+w[9]*b[1]+w[10]*b[2]+w[11]*b[3],w[12]*b[0]+w[13]*b[1]+w[14]*b[2]+w[15]*b[3]],dot:(w,b)=>w[0]*b[0]+w[1]*b[1]+w[2]*b[2]+w[3]*b[3],sml:(w,b)=>[w*b[0],w*b[1],w*b[2],w*b[3]]};Ps.encode=function(b,C,O,F,N,E,_){F==null&&(F=0),_==null&&(_=!1);const A=d(b,C,O,F,[!1,!1,!1,0,_,!1]);return m(A,-1),u(A,C,O,N,E)},Ps.encodeLL=function(b,C,O,F,N,E,_,A){const v={ctype:0+(F==1?0:2)+(N==0?0:4),depth:E,frames:[]},H=(F+N)*E,q=H*C;for(let Y=0;Y<b.length;Y++)v.frames.push({rect:{x:0,y:0,width:C,height:O},img:new Uint8Array(b[Y]),blend:0,dispose:1,bpp:Math.ceil(H/8),bpl:Math.ceil(q/8)});return m(v,0,!0),u(v,C,O,_,A)},Ps.encode.compress=d,Ps.encode.dither=c,Ps.quantize=x,Ps.quantize.getKDtree=P,Ps.quantize.getNearest=S})();const Wu={toArrayBuffer(s,t){const r=s.width,n=s.height,o=r<<2,i=s.getContext("2d").getImageData(0,0,r,n),l=new Uint32Array(i.data.buffer),c=(32*r+31)/32<<2,u=c*n,m=122+u,d=new ArrayBuffer(m),f=new DataView(d),g=1<<20;let y,h,x,P,S=g,M=0,j=0,z=0;function T(w){f.setUint16(j,w,!0),j+=2}function k(w){f.setUint32(j,w,!0),j+=4}function R(w){j+=w}T(19778),k(m),R(4),k(122),k(108),k(r),k(-n>>>0),T(1),T(32),k(3),k(u),k(2835),k(2835),R(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function w(){for(;M<n&&S>0;){for(P=122+M*c,y=0;y<o;)S--,h=l[z++],x=h>>>24,f.setUint32(P+y,h<<8|x),y+=4;M++}z<l.length?(S=g,setTimeout(w,Wu._dly)):t(d)}()},toBlob(s,t){this.toArrayBuffer(s,r=>{t(new Blob([r],{type:"image/bmp"}))})},_dly:9};var ns={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},P2={[ns.CHROME]:16384,[ns.FIREFOX]:11180,[ns.DESKTOP_SAFARI]:16384,[ns.IE]:8192,[ns.IOS]:4096,[ns.ETC]:8192};const Ll=typeof window<"u",qu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,So=Ll&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),T2=(Ll||qu)&&(So&&So.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Hu=(Ll||qu)&&(So&&So.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Wl(s,t,r=Date.now()){return new Promise(n=>{const o=s.split(","),i=o[0].match(/:(.*?);/)[1],l=globalThis.atob(o[1]);let c=l.length;const u=new Uint8Array(c);for(;c--;)u[c]=l.charCodeAt(c);const m=new Blob([u],{type:i});m.name=t,m.lastModified=r,n(m)})}function Vu(s){return new Promise((t,r)=>{const n=new Hu;n.onload=()=>t(n.result),n.onerror=o=>r(o),n.readAsDataURL(s)})}function Gu(s){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=o=>r(o),n.src=s})}function Rr(){if(Rr.cachedResult!==void 0)return Rr.cachedResult;let s=ns.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?s=ns.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?s=ns.IOS:/Safari/i.test(t)?s=ns.DESKTOP_SAFARI:/Firefox/i.test(t)?s=ns.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(s=ns.IE),Rr.cachedResult=s,Rr.cachedResult}function Ju(s,t){const r=Rr(),n=P2[r];let o=s,i=t,l=o*i;const c=o>i?i/o:o/i;for(;l>n*n;){const u=(n+o)/2,m=(n+i)/2;u<m?(i=m,o=m*c):(i=u*c,o=u),l=o*i}return{width:o,height:i}}function Lo(s,t){let r,n;try{if(r=new OffscreenCanvas(s,t),n=r.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),n=r.getContext("2d")}return r.width=s,r.height=t,[r,n]}function Yu(s,t){const{width:r,height:n}=Ju(s.width,s.height),[o,i]=Lo(r,n);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,o.width,o.height)),i.drawImage(s,0,0,o.width,o.height),o}function xo(){return xo.cachedResult!==void 0||(xo.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xo.cachedResult}function ko(s,t={}){return new Promise(function(r,n){let o,i;var l=function(){try{return i=Yu(o,t.fileType||s.type),r([o,i])}catch(u){return n(u)}},c=function(u){try{var m=function(d){try{throw d}catch(f){return n(f)}};try{let d;return Vu(s).then(function(f){try{return d=f,Gu(d).then(function(g){try{return o=g,function(){try{return l()}catch(y){return n(y)}}()}catch(y){return m(y)}},m)}catch(g){return m(g)}},m)}catch(d){m(d)}}catch(d){return n(d)}};try{if(xo()||[ns.DESKTOP_SAFARI,ns.MOBILE_SAFARI].includes(Rr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(s).then(function(u){try{return o=u,l()}catch{return c()}},c)}catch{c()}})}function Co(s,t,r,n,o=1){return new Promise(function(i,l){let c;if(t==="image/png"){let m,d,f;return m=s.getContext("2d"),{data:d}=m.getImageData(0,0,s.width,s.height),f=Ps.encode([d.buffer],s.width,s.height,4096*o),c=new Blob([f],{type:t}),c.name=r,c.lastModified=n,u.call(this)}{let m=function(){return u.call(this)};if(t==="image/bmp")return new Promise(d=>Wu.toBlob(s,d)).then((function(d){try{return c=d,c.name=r,c.lastModified=n,m.call(this)}catch(f){return l(f)}}).bind(this),l);{let d=function(){return m.call(this)};if(typeof OffscreenCanvas=="function"&&s instanceof OffscreenCanvas)return s.convertToBlob({type:t,quality:o}).then((function(f){try{return c=f,c.name=r,c.lastModified=n,d.call(this)}catch(g){return l(g)}}).bind(this),l);{let f;return f=s.toDataURL(t,o),Wl(f,r,n).then((function(g){try{return c=g,d.call(this)}catch(y){return l(y)}}).bind(this),l)}}}function u(){return i(c)}})}function Bs(s){s.width=0,s.height=0}function Kr(){return new Promise(function(s,t){let r,n,o,i;return Kr.cachedResult!==void 0?s(Kr.cachedResult):Wl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return r=l,ko(r).then(function(c){try{return n=c[1],Co(n,r.type,r.name,r.lastModified).then(function(u){try{return o=u,Bs(n),ko(o).then(function(m){try{return i=m[0],Kr.cachedResult=i.width===1&&i.height===2,s(Kr.cachedResult)}catch(d){return t(d)}},t)}catch(m){return t(m)}},t)}catch(u){return t(u)}},t)}catch(c){return t(c)}},t)})}function Ku(s){return new Promise((t,r)=>{const n=new Hu;n.onload=o=>{const i=new DataView(o.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const l=i.byteLength;let c=2;for(;c<l;){if(i.getUint16(c+2,!1)<=8)return t(-1);const u=i.getUint16(c,!1);if(c+=2,u==65505){if(i.getUint32(c+=2,!1)!=1165519206)return t(-1);const m=i.getUint16(c+=6,!1)==18761;c+=i.getUint32(c+4,m);const d=i.getUint16(c,m);c+=2;for(let f=0;f<d;f++)if(i.getUint16(c+12*f,m)==274)return t(i.getUint16(c+12*f+8,m))}else{if((65280&u)!=65280)break;c+=i.getUint16(c,!1)}}return t(-1)},n.onerror=o=>r(o),n.readAsArrayBuffer(s)})}function Qu(s,t){const{width:r}=s,{height:n}=s,{maxWidthOrHeight:o}=t;let i,l=s;return isFinite(o)&&(r>o||n>o)&&([l,i]=Lo(r,n),r>n?(l.width=o,l.height=n/r*o):(l.width=r/n*o,l.height=o),i.drawImage(s,0,0,l.width,l.height),Bs(s)),l}function Zu(s,t){const{width:r}=s,{height:n}=s,[o,i]=Lo(r,n);switch(t>4&&t<9?(o.width=n,o.height=r):(o.width=r,o.height=n),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,n);break;case 4:i.transform(1,0,0,-1,0,n);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,n,0);break;case 7:i.transform(0,-1,-1,0,n,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(s,0,0,r,n),Bs(s),o}function sd(s,t,r=0){return new Promise(function(n,o){let i,l,c,u,m,d,f,g,y,h,x,P,S,M,j,z,T,k,R,w;function b(O=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=O,t.onProgress(Math.min(i,100))}function C(O){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(O,i),100),t.onProgress(i)}return i=r,l=t.maxIteration||10,c=1024*t.maxSizeMB*1024,b(),ko(s,t).then((function(O){try{return[,u]=O,b(),m=Qu(u,t),b(),new Promise(function(F,N){var E;if(!(E=t.exifOrientation))return Ku(s).then((function(A){try{return E=A,_.call(this)}catch(v){return N(v)}}).bind(this),N);function _(){return F(E)}return _.call(this)}).then((function(F){try{return d=F,b(),Kr().then((function(N){try{return f=N?m:Zu(m,d),b(),g=t.initialQuality||1,y=t.fileType||s.type,Co(f,y,s.name,s.lastModified,g).then((function(E){try{{let A=function(){if(l--&&(j>c||j>S)){let H,q;return H=w?.95*R.width:R.width,q=w?.95*R.height:R.height,[T,k]=Lo(H,q),k.drawImage(R,0,0,H,q),g*=y==="image/png"?.85:.95,Co(T,y,s.name,s.lastModified,g).then(function(Y){try{return z=Y,Bs(R),R=T,j=z.size,C(Math.min(99,Math.floor((M-j)/(M-c)*100))),A}catch(ne){return o(ne)}},o)}return[1]},v=function(){return Bs(R),Bs(T),Bs(m),Bs(f),Bs(u),C(100),n(z)};if(h=E,b(),x=h.size>c,P=h.size>s.size,!x&&!P)return C(100),n(h);var _;return S=s.size,M=h.size,j=M,R=f,w=!t.alwaysKeepResolution&&x,(_=(function(H){for(;H;){if(H.then)return void H.then(_,o);try{if(H.pop){if(H.length)return H.pop()?v.call(this):H;H=A}else H=H.call(this)}catch(q){return o(q)}}}).bind(this))(A)}}catch(A){return o(A)}}).bind(this),o)}catch(E){return o(E)}}).bind(this),o)}catch(N){return o(N)}}).bind(this),o)}catch(F){return o(F)}}).bind(this),o)})}const R2=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ni;function I2(s,t){return new Promise((r,n)=>{ni||(ni=function(l){const c=[];return c.push(l),URL.createObjectURL(new Blob(c))}(R2));const o=new Worker(ni);o.addEventListener("message",function(l){if(t.signal&&t.signal.aborted)o.terminate();else if(l.data.progress===void 0){if(l.data.error)return n(new Error(l.data.error)),void o.terminate();r(l.data.file),o.terminate()}else t.onProgress(l.data.progress)}),o.addEventListener("error",n),t.signal&&t.signal.addEventListener("abort",()=>{n(t.signal.reason),o.terminate()}),o.postMessage({file:s,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}function Dt(s,t){return new Promise(function(r,n){let o,i,l,c,u,m;if(o={...t},l=0,{onProgress:c}=o,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof o.useWebWorker!="boolean"||o.useWebWorker,delete o.useWebWorker,o.onProgress=y=>{l=y,typeof c=="function"&&c(l)},!(s instanceof Blob||s instanceof T2))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(s.type))return n(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||m)return sd(s,o).then((function(y){try{return i=y,g.call(this)}catch(h){return n(h)}}).bind(this),n);var d=(function(){try{return g.call(this)}catch(y){return n(y)}}).bind(this),f=function(y){try{return sd(s,o).then(function(h){try{return i=h,d()}catch(x){return n(x)}},n)}catch(h){return n(h)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",I2(s,o).then(function(y){try{return i=y,d()}catch{return f()}},f)}catch{f()}function g(){try{i.name=s.name,i.lastModified=s.lastModified}catch{}try{o.preserveExif&&s.type==="image/jpeg"&&(!o.fileType||o.fileType&&o.fileType===s.type)&&(i=Lu(s,i))}catch{}return r(i)}})}Dt.getDataUrlFromFile=Vu,Dt.getFilefromDataUrl=Wl,Dt.loadImage=Gu,Dt.drawImageInCanvas=Yu,Dt.drawFileInCanvas=ko,Dt.canvasToFile=Co,Dt.getExifOrientation=Ku,Dt.handleMaxWidthOrHeight=Qu,Dt.followExifOrientation=Zu,Dt.cleanupCanvasMemory=Bs,Dt.isAutoOrientationInBrowser=Kr,Dt.approximateBelowMaximumCanvasSizeOfBrowser=Ju,Dt.copyExifWithoutOrientation=Lu,Dt.getBrowserName=Rr,Dt.version="2.0.2";const{TextArea:z2}=ue,{Title:E2,Text:rr}=Fe,_2=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState(null),[o,i]=p.useState(null),[l,c]=p.useState(""),[u,m]=p.useState(""),[d,f]=p.useState(""),[g,y]=p.useState([]),[h,x]=p.useState(""),[P,S]=p.useState(null),[M,j]=p.useState(!1),[z,T]=p.useState(!1),[k,R]=p.useState(null),[w,b]=p.useState(null),[C,O]=p.useState(null),F=async q=>{try{if(q.size>2*1024*1024)return B.error("Image size must be less than 2MB"),!1;B.loading("Compressing image...",0);const ne=await Dt(q,{maxSizeMB:.6,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"});if(ne.size>700*1024){const $=await Dt(ne,{maxSizeMB:.5,useWebWorker:!0});S($)}else S(ne);B.destroy(),B.success(`Image compressed to ${(ne.size/1024).toFixed(0)}KB`);const U=new FileReader;return U.onloadend=()=>{i(U.result)},U.readAsDataURL(ne),n(ne),R(null),!1}catch(Y){return B.destroy(),B.error("Failed to compress image"),console.error("Compression error:",Y),!1}},N=async()=>{var q,Y,ne;if(!r||!l){B.warning("Please upload an image and provide Instagram URL");return}if(!l.includes("instagram.com")){B.error("Please enter a valid Instagram URL");return}try{j(!0),R(null);const U=new FormData;U.append("image",r),U.append("instagramUrl",l),console.log("üîç Verifying images...",{imageSize:r.size,instagramUrl:l});const $=await ie.post("/posts/verify-images",U,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});(q=$.data)!=null&&q.success&&(R({match:$.data.match,difference:$.data.difference,message:$.data.message,phashUploaded:$.data.phashUploaded,phashInstagram:$.data.phashInstagram}),$.data.phashUploaded&&b($.data.phashUploaded),$.data.phashInstagram&&O($.data.phashInstagram),$.data.match?B.success("Images match! You can post now."):B.error(`Images don't match (difference: ${$.data.difference})`))}catch(U){console.error("Verification error:",U);let $="Failed to verify images";U.response?($=((Y=U.response.data)==null?void 0:Y.message)||`Server error: ${U.response.status}`,U.response.status===404?$="Route not found. Please make sure the backend server is running and the route is registered.":U.response.status===401?$="Authentication required. Please log in again.":U.response.status===400&&($=((ne=U.response.data)==null?void 0:ne.message)||"Invalid request. Please check your inputs.")):U.request?$="No response from server. Please check if the backend is running.":$=U.message||"Failed to verify images",B.error($),R({match:!1,message:$})}finally{j(!1)}},E=()=>{h.trim()&&!g.includes(h.trim())&&(y([...g,h.trim()]),x(""))},_=q=>{y(g.filter(Y=>Y!==q))},A=q=>{q.key==="Enter"&&(q.preventDefault(),E())},v=async()=>{var q,Y,ne;if(!r||!l||!(k!=null&&k.match)){B.warning("Please verify images match before posting");return}if(!w||!C){B.warning("Hash values missing. Please verify images again.");return}try{T(!0);const U=new FormData;U.append("image",r),U.append("instagramUrl",l),U.append("phashUploaded",w),U.append("phashInstagram",C),u.trim()&&U.append("title",u.trim()),d.trim()&&U.append("bio",d.trim()),g.length>0&&U.append("tags",JSON.stringify(g)),(q=(await ie.post("/posts",U,{headers:{"Content-Type":"multipart/form-data"}})).data)!=null&&q.success&&(B.success("Post created successfully!"),t("/feed"))}catch(U){console.error("Post creation error:",U),B.error(((ne=(Y=U.response)==null?void 0:Y.data)==null?void 0:ne.message)||"Failed to create post")}finally{T(!1)}},H=r&&l&&(k==null?void 0:k.match);return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:[e.jsx(E2,{level:2,style:{marginBottom:"1.5rem"},children:"Create Post"}),e.jsx(V,{children:e.jsxs(Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(rr,{strong:!0,children:"Upload Image (Max 2MB)"}),e.jsx("br",{}),e.jsx(dr,{accept:"image/*",beforeUpload:F,showUploadList:!1,maxCount:1,children:e.jsx(L,{icon:e.jsx(zl,{}),style:{marginTop:"8px"},children:"Select Image"})}),o&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("img",{src:o,alt:"Preview",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px",border:"1px solid #d9d9d9"}}),e.jsx("br",{}),e.jsxs(rr,{type:"secondary",style:{fontSize:"12px"},children:["Compressed size: ",r?`${(r.size/1024).toFixed(0)}KB`:"N/A"]})]})]}),e.jsxs("div",{children:[e.jsx(rr,{strong:!0,children:"Title (Optional)"}),e.jsx("br",{}),e.jsx(ue,{placeholder:"Enter post title...",value:u,onChange:q=>m(q.target.value),maxLength:200,showCount:!0,style:{marginTop:"8px"}})]}),e.jsxs("div",{children:[e.jsx(rr,{strong:!0,children:"Bio/Description (Optional)"}),e.jsx("br",{}),e.jsx(z2,{placeholder:"Write a caption or description...",value:d,onChange:q=>f(q.target.value),rows:4,maxLength:2e3,showCount:!0,style:{marginTop:"8px"}})]}),e.jsxs("div",{children:[e.jsx(rr,{strong:!0,children:"Tags (Optional)"}),e.jsx("br",{}),e.jsxs(Z.Compact,{style:{width:"100%",marginTop:"8px"},children:[e.jsx(ue,{placeholder:"Add a tag and press Enter",value:h,onChange:q=>x(q.target.value),onPressEnter:A,onKeyPress:A}),e.jsx(L,{icon:e.jsx(hs,{}),onClick:E,disabled:!h.trim(),children:"Add"})]}),g.length>0&&e.jsx("div",{style:{marginTop:"8px"},children:g.map((q,Y)=>e.jsx(le,{closable:!0,onClose:()=>_(q),style:{marginBottom:"4px"},children:q},Y))})]}),e.jsxs("div",{children:[e.jsx(rr,{strong:!0,children:"Instagram Post URL"}),e.jsx("br",{}),e.jsx(ue,{placeholder:"https://www.instagram.com/p/...",prefix:e.jsx(Ef,{}),value:l,onChange:q=>{c(q.target.value),R(null)},style:{marginTop:"8px"}}),e.jsx(rr,{type:"secondary",style:{fontSize:"12px",display:"block",marginTop:"4px"},children:"Paste the Instagram post URL containing the same image"})]}),r&&l&&e.jsx(L,{type:"primary",onClick:N,loading:M,block:!0,children:M?"Verifying Images...":"Verify Images Match"}),k&&e.jsx(gt,{message:k.match?"Images Match!":"Images Don't Match",description:k.message,type:k.match?"success":"error",icon:k.match?e.jsx(Ee,{}):e.jsx(Or,{}),showIcon:!0}),H&&e.jsx(L,{type:"primary",size:"large",onClick:v,loading:z,block:!0,style:{marginTop:"16px"},children:z?"Posting...":"Post"}),!H&&r&&l&&!k&&e.jsx(rr,{type:"secondary",style:{textAlign:"center",display:"block"},children:'Click "Verify Images Match" to enable posting'})]})})]})},{Title:rd,Text:Xn,Paragraph:nd}=Fe,{Option:us}=Pe,O2=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!0),[o,i]=p.useState(null),[l,c]=p.useState([]),[u,m]=p.useState("all"),[d,f]=p.useState("all");p.useEffect(()=>{g(),y()},[]);const g=async()=>{try{n(!0);const j=await ie.get("/banners");j.data.success&&t(j.data.banners)}catch(j){console.error("Failed to fetch banners:",j),B.error("Failed to load banners")}finally{n(!1)}},y=async()=>{try{const j=await ie.get("/banners/user/inventory");j.data.success&&c(j.data.inventory)}catch(j){console.error("Failed to fetch inventory:",j)}},h=async j=>{var z,T;try{i(j),(await ie.post(`/banners/user/purchase/${j}`)).data.success&&(B.success("Banner purchased successfully! üéâ"),y(),g())}catch(k){console.error("Purchase failed:",k),B.error(((T=(z=k.response)==null?void 0:z.data)==null?void 0:T.message)||"Failed to purchase banner")}finally{i(null)}},x=j=>({Common:"#95a5a6",Rare:"#3498db",Epic:"#9b59b6",Legendary:"#f39c12",Mythic:"#e74c3c"})[j]||"#95a5a6",P=j=>j==="Legendary"||j==="Mythic"?e.jsx(Rn,{}):j==="Epic"?e.jsx(Ud,{}):j==="Rare"?e.jsx(Qr,{}):null,S=j=>l.some(z=>z._id===j),M=s.filter(j=>!(u!=="all"&&j.rarity!==u||d!=="all"&&j.category!==d));return r?e.jsxs("div",{style:{textAlign:"center",padding:"100px 20px"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(Xn,{type:"secondary",children:"Loading banners..."})})]}):e.jsxs("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px",padding:"32px",color:"#fff"},children:[e.jsx(rd,{level:2,style:{color:"#fff",margin:0,marginBottom:"8px"},children:"üé® Banner Store"}),e.jsx(nd,{style:{color:"rgba(255,255,255,0.9)",margin:0,fontSize:"16px"},children:"Customize your profile with exclusive banners! Choose from Fire, Ice, Thunder, and more."})]}),e.jsx(V,{style:{marginBottom:"24px",borderRadius:"12px"},children:e.jsxs(ce,{gutter:16,children:[e.jsxs(W,{xs:24,sm:12,children:[e.jsx(Xn,{strong:!0,style:{marginRight:"8px"},children:"Rarity:"}),e.jsxs(Pe,{value:u,onChange:m,style:{width:200},children:[e.jsx(us,{value:"all",children:"All Rarities"}),e.jsx(us,{value:"Common",children:"Common"}),e.jsx(us,{value:"Rare",children:"Rare"}),e.jsx(us,{value:"Epic",children:"Epic"}),e.jsx(us,{value:"Legendary",children:"Legendary"}),e.jsx(us,{value:"Mythic",children:"Mythic"})]})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(Xn,{strong:!0,style:{marginRight:"8px"},children:"Category:"}),e.jsxs(Pe,{value:d,onChange:f,style:{width:200},children:[e.jsx(us,{value:"all",children:"All Categories"}),e.jsx(us,{value:"Fire",children:"Fire"}),e.jsx(us,{value:"Ice",children:"Ice"}),e.jsx(us,{value:"Thunder",children:"Thunder"}),e.jsx(us,{value:"Diamond",children:"Diamond"}),e.jsx(us,{value:"Season",children:"Season"}),e.jsx(us,{value:"Special",children:"Special"})]})]})]})}),M.length===0?e.jsx(Ue,{description:"No banners available"}):e.jsx(ce,{gutter:[16,16],children:M.map(j=>{const z=S(j._id),T=o===j._id;return e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(zt.Ribbon,{text:j.rarity,color:x(j.rarity),style:{fontSize:"12px"},children:e.jsx(V,{hoverable:!z,className:`banner-card banner-${j.effect}`,style:{borderRadius:"12px",overflow:"hidden",border:`2px solid ${x(j.rarity)}`,opacity:z?.7:1},cover:e.jsx("div",{style:{height:"200px",background:`url(${"http://localhost:7000/api".replace("/api","")||"http://localhost:7000"}${j.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:z&&e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0,0,0,0.7)",borderRadius:"20px",padding:"4px 12px",color:"#fff",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ee,{})," Owned"]})}),children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(rd,{level:5,style:{margin:"8px 0",fontSize:"16px"},children:j.name}),j.description&&e.jsx(nd,{type:"secondary",style:{fontSize:"12px",marginBottom:"12px",minHeight:"36px"},ellipsis:{rows:2},children:j.description}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx(le,{color:x(j.rarity),icon:P(j.rarity),children:j.rarity}),j.category&&e.jsx(le,{children:j.category})]}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:x(j.rarity),marginBottom:"12px"},children:["‚Çπ",j.price]}),z?e.jsx(L,{type:"default",block:!0,disabled:!0,icon:e.jsx(Ee,{}),style:{borderRadius:"8px"},children:"Already Owned"}):e.jsx(L,{type:"primary",block:!0,loading:T,onClick:()=>h(j._id),icon:e.jsx(vt,{}),style:{borderRadius:"8px",background:x(j.rarity),borderColor:x(j.rarity)},children:"Purchase"}),j.stock!==-1&&e.jsxs(Xn,{type:"secondary",style:{fontSize:"11px",marginTop:"8px",display:"block"},children:["Stock: ",j.stock," left"]})]})})})},j._id)})})]})},{Title:Ur,Text:kr,Paragraph:od}=Fe,F2=()=>{const{user:s}=qe(),[t,r]=p.useState([]),[n,o]=p.useState(null),[i,l]=p.useState(!0),[c,u]=p.useState(null),[m,d]=p.useState(null);p.useEffect(()=>{f()},[]);const f=async()=>{try{l(!0);const P=await ie.get("/banners/user/inventory");if(P.data.success){r(P.data.inventory);const S=P.data.equippedBanner;o(S),S&&d(null)}}catch(P){console.error("Failed to fetch inventory:",P),B.error("Failed to load inventory")}finally{l(!1)}},g=async P=>{var S,M;try{u(P);const j=await ie.post(`/banners/user/equip/${P}`);if(j.data.success){B.success("Banner equipped successfully! üéâ"),await f();const z=t.find(T=>T._id===P)||j.data.equippedBanner;z&&d(z)}}catch(j){console.error("Equip failed:",j),B.error(((M=(S=j.response)==null?void 0:S.data)==null?void 0:M.message)||"Failed to equip banner")}finally{u(null)}},y=P=>{d(P)},h=async()=>{try{(await ie.post("/banners/user/unequip")).data.success&&(B.success("Banner unequipped"),f())}catch(P){console.error("Unequip failed:",P),B.error("Failed to unequip banner")}},x=P=>({Common:"#95a5a6",Rare:"#3498db",Epic:"#9b59b6",Legendary:"#f39c12",Mythic:"#e74c3c"})[P]||"#95a5a6";return i?e.jsxs("div",{style:{textAlign:"center",padding:"100px 20px"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(kr,{type:"secondary",children:"Loading inventory..."})})]}):e.jsxs("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"16px",padding:"32px",color:"#fff"},children:[e.jsx(Ur,{level:2,style:{color:"#fff",margin:0,marginBottom:"8px"},children:"üéí My Banner Inventory"}),e.jsx(od,{style:{color:"rgba(255,255,255,0.9)",margin:0,fontSize:"16px"},children:"Manage your banners and customize your profile"})]}),n&&e.jsxs(V,{style:{marginBottom:"32px",borderRadius:"16px",border:`3px solid ${x(n.rarity)}`,overflow:"hidden"},children:[e.jsxs(Ur,{level:4,style:{marginBottom:"16px"},children:[e.jsx(Ee,{style:{color:"#52c41a",marginRight:"8px"}}),"Currently Equipped"]}),e.jsxs(ce,{gutter:16,align:"middle",children:[e.jsx(W,{xs:24,md:8,children:e.jsx("div",{style:{height:"200px",borderRadius:"12px",background:`url(${"http://localhost:7000/api".replace("/api","")}${n.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",border:`2px solid ${x(n.rarity)}`}})}),e.jsxs(W,{xs:24,md:16,children:[e.jsx(Ur,{level:3,style:{margin:0,marginBottom:"8px"},children:n.name}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx(le,{color:x(n.rarity),children:n.rarity}),n.category&&e.jsx(le,{children:n.category}),n.effect!=="none"&&e.jsxs(le,{color:"purple",children:[n.effect," effect"]})]}),n.description&&e.jsx(od,{type:"secondary",children:n.description}),e.jsx(L,{danger:!0,onClick:h,style:{marginTop:"12px"},children:"Unequip Banner"})]})]}),e.jsx(ys,{children:"Live Preview"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs(kr,{strong:!0,style:{display:"block",marginBottom:"8px"},children:[e.jsx(Mt,{style:{marginRight:"8px"}}),"Chat Header Preview"]}),e.jsxs("div",{style:{padding:"10px 16px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"12px",background:`url(${"http://localhost:7000/api".replace("/api","")}${n.imageUrl}) center/cover no-repeat`,backgroundSize:"cover",minHeight:"60px",position:"relative",overflow:"hidden",border:`2px solid ${x(n.rarity)}`},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 50%, rgba(0,0,0,0.1) 100%)",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[e.jsx(We,{src:ht(s),icon:e.jsx(Re,{}),size:32,children:nt(s==null?void 0:s.name)}),e.jsxs("div",{style:{flex:1},children:[e.jsx(kr,{strong:!0,style:{fontSize:"14px",display:"block",color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:(s==null?void 0:s.name)||"User Name"}),e.jsx(kr,{type:"secondary",style:{fontSize:"12px",color:"rgba(255,255,255,0.9)",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"Active now"})]})]})]})]})]}),m&&m._id!==(n==null?void 0:n._id)&&e.jsxs(V,{style:{marginBottom:"32px",borderRadius:"16px",border:`2px dashed ${x(m.rarity)}`,overflow:"hidden",background:"#fafafa"},children:[e.jsxs(Ur,{level:4,style:{marginBottom:"16px"},children:["Preview: ",m.name]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{xs:24,md:12,children:e.jsx("div",{style:{height:"200px",borderRadius:"12px",background:`url(${"http://localhost:7000/api".replace("/api","")}${m.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",border:`2px solid ${x(m.rarity)}`}})}),e.jsxs(W,{xs:24,md:12,children:[e.jsxs("div",{style:{padding:"10px 16px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"12px",background:`url(${"http://localhost:7000/api".replace("/api","")}${m.imageUrl}) center/cover no-repeat`,backgroundSize:"cover",minHeight:"60px",position:"relative",overflow:"hidden",border:`2px solid ${x(m.rarity)}`},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 50%, rgba(0,0,0,0.1) 100%)",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[e.jsx(We,{src:ht(s),icon:e.jsx(Re,{}),size:32,children:nt(s==null?void 0:s.name)}),e.jsx("div",{style:{flex:1},children:e.jsx(kr,{strong:!0,style:{fontSize:"14px",display:"block",color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:(s==null?void 0:s.name)||"User Name"})})]})]}),e.jsx(kr,{type:"secondary",style:{display:"block",marginTop:"8px",fontSize:"12px"},children:"This is how it will look in chat header"})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx(L,{type:"primary",block:!0,onClick:()=>g(m._id),loading:c===m._id,style:{background:x(m.rarity),borderColor:x(m.rarity)},children:"Equip This Banner"}),e.jsx(L,{type:"text",block:!0,onClick:()=>d(null),style:{marginTop:"8px"},children:"Close Preview"})]})]}),e.jsxs(Ur,{level:4,style:{marginBottom:"16px"},children:["All Banners (",t.length,")"]}),t.length===0?e.jsx(Ue,{description:"No banners in inventory",image:Ue.PRESENTED_IMAGE_SIMPLE,children:e.jsx(L,{type:"primary",href:"/dashboard/banner-store",children:"Visit Banner Store"})}):e.jsx(ce,{gutter:[16,16],children:t.map(P=>{const S=n&&n._id===P._id,M=c===P._id;return e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(zt.Ribbon,{text:P.rarity,color:x(P.rarity),style:{fontSize:"12px"},children:e.jsx(V,{hoverable:!S,className:`banner-card banner-${P.effect}`,style:{borderRadius:"12px",overflow:"hidden",border:S?`3px solid ${x(P.rarity)}`:`2px solid ${x(P.rarity)}`,opacity:S?1:.9},cover:e.jsx("div",{style:{height:"200px",background:`url(${"http://localhost:7000/api".replace("/api","")||"http://localhost:7000"}${P.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:S&&e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(82, 196, 26, 0.9)",borderRadius:"20px",padding:"4px 12px",color:"#fff",fontSize:"12px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ee,{})," EQUIPPED"]})}),children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Ur,{level:5,style:{margin:"8px 0",fontSize:"16px"},children:P.name}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx(le,{color:x(P.rarity),children:P.rarity}),P.category&&e.jsx(le,{children:P.category})]}),P.purchasedAt&&e.jsxs(kr,{type:"secondary",style:{fontSize:"11px",display:"block",marginBottom:"12px"},children:["Purchased: ",new Date(P.purchasedAt).toLocaleDateString()]}),S?e.jsx(L,{type:"default",block:!0,disabled:!0,icon:e.jsx(Ee,{}),style:{borderRadius:"8px",background:"#f6ffed",borderColor:"#52c41a",color:"#52c41a"},children:"Currently Equipped"}):e.jsxs(e.Fragment,{children:[e.jsx(L,{type:"default",block:!0,onClick:()=>y(P),style:{borderRadius:"8px",marginBottom:"8px"},children:"Preview"}),e.jsx(L,{type:"primary",block:!0,loading:M,onClick:()=>g(P._id),style:{borderRadius:"8px",background:x(P.rarity),borderColor:x(P.rarity)},children:"Equip Banner"})]})]})})})},P._id)})})]})},{Title:oi,Paragraph:id}=Fe,N2=()=>e.jsxs("div",{style:{padding:"2rem",background:"#f5f5f5",minHeight:"100vh"},children:[e.jsx(oi,{level:2,children:"About ITWOS AI"}),e.jsxs(ce,{gutter:[24,24],children:[e.jsx(W,{xs:24,lg:12,children:e.jsxs(V,{children:[e.jsx(oi,{level:3,children:"Our Mission"}),e.jsx(id,{children:"We're building the future of web applications with cutting-edge technology and user-focused design. Our platform combines the power of AI, real-time communication, and modern web technologies."})]})}),e.jsx(W,{xs:24,lg:12,children:e.jsxs(V,{children:[e.jsx(oi,{level:3,children:"Our Technology"}),e.jsx(id,{children:"Built with React, Node.js, MongoDB, Socket.IO, and many other modern technologies. We focus on security, performance, and user experience."})]})})]})]}),{Title:ad,Paragraph:M2}=Fe,$2=()=>{const s=t=>{B.success("Message sent successfully!")};return e.jsxs("div",{style:{padding:"2rem",background:"#f5f5f5",minHeight:"100vh"},children:[e.jsx(ad,{level:2,children:"Contact Us"}),e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsx(V,{children:e.jsxs(Row,{gutter:[24,24],children:[e.jsxs(Col,{xs:24,lg:12,children:[e.jsx(ad,{level:3,children:"Get in Touch"}),e.jsxs(M2,{children:[e.jsx(as,{})," Email: contact@itwos.ai",e.jsx("br",{}),e.jsx(Ss,{})," Phone: +1 (555) 123-4567",e.jsx("br",{}),e.jsx(Fr,{})," Address: 123 Tech Street, Silicon Valley"]})]}),e.jsx(Col,{xs:24,lg:12,children:e.jsxs(G,{onFinish:s,layout:"vertical",children:[e.jsx(G.Item,{name:"name",label:"Name",rules:[{required:!0}],children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"message",label:"Message",rules:[{required:!0}],children:e.jsx(ue.TextArea,{rows:4})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",block:!0,children:"Send Message"})})]})})]})})})]})},{Title:B2,Paragraph:D2,Text:ld}=Fe,U2=()=>{const[s,t]=p.useState(!1),{adminLogin:r,isAuthenticated:n,user:o}=qe(),{message:i}=$t.useApp(),l=Je();p.useEffect(()=>{n&&(o==null?void 0:o.role)==="admin"&&l("/admin/dashboard",{replace:!0})},[n,o,l]);const c=async u=>{t(!0);try{(await r(u)).success&&l("/admin/dashboard",{replace:!0})}catch(m){console.error("Admin login error:",m),i.error("Network error. Please try again.")}finally{t(!1)}};return e.jsx($t,{children:e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #001529 0%, #1890ff 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsx(ce,{justify:"center",style:{width:"100%"},children:e.jsx(W,{xs:24,sm:20,md:16,lg:12,xl:8,children:e.jsxs(V,{style:{width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",borderRadius:"16px",border:"none"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx(Bd,{style:{fontSize:"3rem",color:"#1890ff",marginBottom:"1rem"}}),e.jsx(B2,{level:2,style:{marginBottom:"0.5rem",color:"#1890ff"},children:"üîê Admin Access"}),e.jsx(D2,{style:{color:"#666",fontSize:"1.1rem"},children:"Sign in to access the admin dashboard"})]}),e.jsx(gt,{message:"Admin Credentials",description:"Use admin@itwos.ai / admin123 to login",type:"info",showIcon:!0,style:{marginBottom:"1.5rem"}}),e.jsxs(G,{name:"adminLogin",onFinish:c,autoComplete:"off",layout:"vertical",size:"large",children:[e.jsx(G.Item,{name:"email",label:"Admin Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(ue,{prefix:e.jsx(Re,{style:{color:"#1890ff"}}),placeholder:"Enter admin email",style:{borderRadius:"8px"}})}),e.jsx(G.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(ue.Password,{prefix:e.jsx(bt,{style:{color:"#1890ff"}}),placeholder:"Enter admin password",style:{borderRadius:"8px"},iconRender:u=>u?e.jsx(Fd,{}):e.jsx(Od,{})})}),e.jsx(G.Item,{children:e.jsx(L,{type:"primary",htmlType:"submit",loading:s,size:"large",style:{width:"100%",height:"48px",borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #722ed1 100%)",border:"none",fontSize:"16px",fontWeight:"600"},children:s?"Signing In...":"Access Admin Panel"})})]}),e.jsx(ys,{style:{margin:"1.5rem 0"},children:e.jsx(ld,{style:{color:"#999"},children:"Or"})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(ld,{style:{color:"#666"},children:["Regular user?"," ",e.jsx(It,{to:"/login",style:{color:"#1890ff",fontWeight:"600",textDecoration:"none"},children:"Sign in as user"})]})}),e.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:e.jsx(It,{to:"/",style:{color:"#1890ff",fontSize:"14px"},children:"‚Üê Back to Homepage"})})]})})})})})},{Title:L2,Text:wt}=Fe,cd=()=>{const{user:s}=qe(),t=Je(),[r,n]=p.useState(!0),[o,i]=p.useState(null),[l,c]=p.useState({users:{},products:{},orders:{},prebooks:{},chat:{}}),[u,m]=p.useState({users:[],orders:[],prebooks:[]}),d=async()=>{var S,M,j,z;try{n(!0),i(null);const T=await ie.get("/admin/dashboard");if((S=T.data)!=null&&S.success&&((M=T.data)!=null&&M.data)){const{users:k,products:R,orders:w,prebooks:b,recent:C,chat:O}=T.data.data;c({users:k||{},products:R||{},orders:w||{},prebooks:b||{},chat:O||{}}),m({users:(C==null?void 0:C.users)||[],orders:(C==null?void 0:C.orders)||[],prebooks:(C==null?void 0:C.prebooks)||[]})}else throw new Error("Invalid response format")}catch(T){console.error("Error loading dashboard data:",T),i(((z=(j=T.response)==null?void 0:j.data)==null?void 0:z.message)||T.message||"Failed to load dashboard data")}finally{n(!1)}};p.useEffect(()=>{s&&d()},[s]);const f=()=>{d()},g=S=>{t(S)},y=S=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(S/100),h=S=>new Intl.NumberFormat("en-IN").format(S||0),x=p.useMemo(()=>[{title:"User",dataIndex:"name",key:"name",render:(S,M)=>e.jsxs(Z,{children:[e.jsx(We,{src:ht(M),icon:e.jsx(Re,{}),style:{backgroundColor:a.colors.primary},children:nt(M)}),e.jsxs("div",{children:[e.jsx(wt,{strong:!0,style:{color:a.colors.text.primary},children:S||M.email}),e.jsx("br",{}),e.jsx(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.tiny},children:M.email})]})]})},{title:"Status",dataIndex:"isOnline",key:"status",render:S=>e.jsx(le,{color:S?a.colors.success:a.colors.text.secondary,children:S?"Online":"Offline"})},{title:"Joined",dataIndex:"createdAt",key:"createdAt",render:S=>e.jsx(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:S?new Date(S).toLocaleDateString():"-"})}],[]),P=p.useMemo(()=>[{title:"Order ID",dataIndex:"_id",key:"_id",render:S=>e.jsx(wt,{strong:!0,style:{color:a.colors.text.primary},children:S?S.substring(0,8):"-"})},{title:"Customer",dataIndex:["buyer","name"],key:"customer",render:(S,M)=>{var j;return S||((j=M.buyer)==null?void 0:j.email)||"-"}},{title:"Product",dataIndex:["product","title"],key:"product",render:S=>S||"-"},{title:"Amount",dataIndex:"amount",key:"amount",render:S=>e.jsx(wt,{strong:!0,style:{color:a.colors.success},children:S?y(S):"-"})},{title:"Status",dataIndex:"status",key:"status",render:S=>{const M={paid:a.colors.success,created:a.colors.warning,cancelled:a.colors.error};return e.jsx(le,{color:M[S]||a.colors.text.secondary,children:(S==null?void 0:S.toUpperCase())||"-"})}},{title:"Date",dataIndex:"createdAt",key:"date",render:S=>e.jsx(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:S?new Date(S).toLocaleDateString():"-"})}],[]);return r?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",flexDirection:"column",gap:a.spacing.md},children:[e.jsx(rt,{size:"large"}),e.jsx(wt,{type:"secondary",children:"Loading dashboard data..."})]}):o?e.jsx(gt,{message:"Error Loading Dashboard",description:o,type:"error",showIcon:!0,action:e.jsx(L,{size:"small",onClick:f,children:"Retry"}),style:{margin:a.spacing.lg}}):e.jsxs("div",{className:"admin-dashboard",style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh"},children:[e.jsx("style",{children:`
          .admin-dashboard .ant-statistic-content-value,
          .admin-dashboard .ant-statistic-content {
            color: #1F2937 !important;
          }
          .admin-dashboard .ant-card .ant-statistic-content-value {
            color: #1F2937 !important;
          }
        `}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:a.spacing.xl},children:[e.jsx(L2,{level:2,style:{margin:0,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold},children:"Dashboard Overview"}),e.jsx(L,{icon:e.jsx(Mr,{}),onClick:f,loading:r,children:"Refresh"})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:[e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Total Users"}),value:h(l.users.totalUsers),prefix:e.jsx(Re,{style:{color:a.colors.primary}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}}),e.jsx("div",{style:{marginTop:a.spacing.sm},children:e.jsxs(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:[e.jsx(Zr,{style:{color:a.colors.success,marginRight:4}}),h(l.users.newUsersToday)," new today"]})})]})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:[e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Total Products"}),value:h(l.products.totalProducts),prefix:e.jsx(jo,{style:{color:a.colors.primary}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}}),e.jsx("div",{style:{marginTop:a.spacing.sm},children:e.jsxs(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:[h(l.products.publishedProducts)," published"]})})]})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:[e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Total Orders"}),value:h(l.orders.totalOrders),prefix:e.jsx(vt,{style:{color:a.colors.primary}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}}),e.jsx("div",{style:{marginTop:a.spacing.sm},children:e.jsxs(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:[h(l.orders.pendingOrders)," pending"]})})]})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:[e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Total Revenue"}),value:y(l.orders.totalRevenue||0),prefix:e.jsx(kt,{style:{color:a.colors.success}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}}),e.jsx("div",{style:{marginTop:a.spacing.sm},children:e.jsxs(wt,{type:"secondary",style:{fontSize:a.typography.fontSize.small},children:[y(l.orders.todayRevenue||0)," today"]})})]})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginTop:a.spacing.md},children:[e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Active Users"}),value:h(l.users.activeUsers),prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Low Stock Products"}),value:h(l.products.lowStockProducts),prefix:e.jsx(Ld,{style:{color:a.colors.warning}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Completed Orders"}),value:h(l.orders.completedOrders),prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:"#1F2937",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,lg:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`,background:"#FFFFFF"},children:e.jsx(ve,{title:e.jsx(wt,{style:{color:a.colors.text.secondary},children:"Total Prebooks"}),value:h(l.prebooks.total),prefix:e.jsx(Ze,{style:{color:a.colors.primary}}),valueStyle:{color:"#000000",fontSize:a.typography.fontSize.h2,fontWeight:a.typography.fontWeight.semibold}})})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginTop:a.spacing.lg},children:[e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(Ir,{style:{color:a.colors.primary}}),e.jsx(wt,{strong:!0,style:{color:a.colors.text.primary},children:"Recent Users"})]}),extra:e.jsx(L,{type:"link",onClick:()=>g("/admin/users"),children:"View All"}),style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`},children:u.users.length>0?e.jsx(Pt,{dataSource:u.users,columns:x,pagination:!1,size:"small",rowKey:"_id"}):e.jsx(Ue,{description:"No recent users",image:Ue.PRESENTED_IMAGE_SIMPLE})})}),e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(vt,{style:{color:a.colors.success}}),e.jsx(wt,{strong:!0,style:{color:a.colors.text.primary},children:"Recent Orders"})]}),extra:e.jsx(L,{type:"link",onClick:()=>g("/admin/orders"),children:"View All"}),style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`},children:u.orders.length>0?e.jsx(Pt,{dataSource:u.orders,columns:P,pagination:!1,size:"small",rowKey:"_id"}):e.jsx(Ue,{description:"No recent orders",image:Ue.PRESENTED_IMAGE_SIMPLE})})})]}),e.jsx(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginTop:a.spacing.lg},children:e.jsx(W,{xs:24,children:e.jsx(V,{title:e.jsx(wt,{strong:!0,style:{color:a.colors.text.primary},children:"Quick Actions"}),style:{borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`},children:e.jsxs(Z,{wrap:!0,children:[e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>t("/admin/products/new"),style:{backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Add Product"}),e.jsx(L,{icon:e.jsx(Ir,{}),onClick:()=>t("/admin/users"),children:"Manage Users"}),e.jsx(L,{icon:e.jsx(vt,{}),onClick:()=>t("/admin/orders"),children:"View Orders"}),e.jsx(L,{icon:e.jsx(it,{}),onClick:()=>t("/admin/analytics"),children:"View Analytics"})]})})})})]})},{Title:W2,Paragraph:bb,Text:eo}=Fe,q2=()=>{const[s,t]=p.useState("testing"),[r,n]=p.useState(null),[o,i]=p.useState(null),l=async()=>{var c,u;t("testing"),i(null);try{const m=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken");if(!m){i("No authentication token found"),t("error");return}console.log("Testing API with token:",m.substring(0,20)+"...");const d=await pt.get("http://localhost:7000/api/admin/dashboard",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});console.log("API Response:",d.data),n(d.data),t("success")}catch(m){console.error("API Test Error:",m),i(((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||m.message||"Unknown error"),t("error")}};return p.useEffect(()=>{l()},[]),e.jsx("div",{style:{padding:"2rem"},children:e.jsxs(V,{children:[e.jsx(W2,{level:2,children:"Admin API Test"}),e.jsxs(Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(eo,{strong:!0,children:"API Status:"}),e.jsx("br",{}),s==="testing"&&e.jsx(rt,{}),s==="success"&&e.jsx(eo,{style:{color:"green"},children:"‚úÖ API Working"}),s==="error"&&e.jsx(eo,{style:{color:"red"},children:"‚ùå API Error"})]}),o&&e.jsx(gt,{message:"API Error",description:o,type:"error",showIcon:!0}),r&&e.jsxs("div",{children:[e.jsx(eo,{strong:!0,children:"API Response Data:"}),e.jsx("pre",{style:{background:"#f5f5f5",padding:"1rem",borderRadius:"4px",overflow:"auto",maxHeight:"400px"},children:JSON.stringify(r,null,2)})]}),e.jsxs(Z,{children:[e.jsx(L,{type:"primary",onClick:l,children:"Test API Again"}),e.jsx(L,{onClick:()=>window.location.href="/admin/dashboard",children:"Go to Dashboard"})]})]})]})})},{Title:H2,Paragraph:V2,Text:Cr}=Fe,{Search:G2}=ue,{Option:ct}=Pe,J2=()=>{console.log("üîÑ UserManagement: Component mounting...");const[s,t]=p.useState([]),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,c]=p.useState(null),[u,m]=p.useState(null),[d,f]=p.useState(!1),[g,y]=p.useState(!1),[h,x]=p.useState(!1),[P]=G.useForm(),[S]=G.useForm(),{user:M,isAuthenticated:j}=qe();Je();const[z,T]=p.useState({totalUsers:0,activeUsers:0,newUsersToday:0,blockedUsers:0,onlineUsers:0,offlineUsers:0,last30DaysUsers:0,totalSpent:0,topSpenders:[]}),[k,R]=p.useState(""),[w,b]=p.useState("all"),[C,O]=p.useState("all");p.useEffect(()=>{F(),N()},[]);const F=async()=>{var I,J,Q,te;n(!0);try{console.log("üîÑ UserManagement: Loading users...");const ee=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),re=await fetch("http://localhost:7000/api/admin/users?limit=100",{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});if(console.log("üîÑ UserManagement: Response status:",re.status),re.ok){const se=await re.json();console.log("üîÑ UserManagement: API Response:",se),t(((I=se.data)==null?void 0:I.users)||[]),console.log("‚úÖ UserManagement: Fetched real users:",((Q=(J=se.data)==null?void 0:J.users)==null?void 0:Q.length)||0),console.log("‚úÖ UserManagement: Users data:",(te=se.data)==null?void 0:te.users)}else{console.error("‚ùå UserManagement: Failed to fetch users:",re.status);const se=await re.text();console.error("‚ùå UserManagement: Error response:",se),t([])}}catch(ee){console.error("‚ùå UserManagement: Failed to fetch users:",ee),t([])}finally{n(!1)}},N=async()=>{var I;try{console.log("üîÑ UserManagement: Loading stats...");const J=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),Q=await fetch("http://localhost:7000/api/admin/users?limit=100",{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if(Q.ok){const ee=((I=(await Q.json()).data)==null?void 0:I.users)||[],re=new Date().toDateString(),se=new Date;se.setDate(se.getDate()-30);const he={totalUsers:ee.length,activeUsers:ee.filter(fe=>fe.isOnline).length,newUsersToday:ee.filter(fe=>new Date(fe.createdAt).toDateString()===re).length,blockedUsers:ee.filter(fe=>!fe.isOnline).length,onlineUsers:ee.filter(fe=>fe.isOnline).length,offlineUsers:ee.filter(fe=>!fe.isOnline).length,last30DaysUsers:ee.filter(fe=>new Date(fe.createdAt)>=se).length,totalSpent:ee.reduce((fe,ke)=>fe+(ke.totalSpent||0),0),topSpenders:ee.filter(fe=>(fe.totalSpent||0)>0).sort((fe,ke)=>(ke.totalSpent||0)-(fe.totalSpent||0)).slice(0,5)};T(he),console.log("‚úÖ UserManagement: Fetched real stats:",he)}else console.error("‚ùå UserManagement: Failed to fetch stats:",Q.status),T({totalUsers:0,activeUsers:0,newUsersToday:0,blockedUsers:0})}catch(J){console.error("‚ùå UserManagement: Failed to fetch stats:",J),T({totalUsers:0,activeUsers:0,newUsersToday:0,blockedUsers:0})}},E=I=>{m(I),f(!0)},_=I=>{c(I),P.setFieldsValue({...I,permissions:I.permissions||["read","write"]}),i(!0)},A=I=>{c(I),y(!0)},v=()=>{x(!0),S.resetFields()},H=async(I,J)=>{try{(await fetch(`http://localhost:7000/api/admin/users/${I}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer mock-token"},body:JSON.stringify({isOnline:!J})})).ok?(B.success(`User ${J?"deactivated":"activated"} successfully`),F(),N()):B.error("Failed to update user status")}catch(Q){console.error("Error updating user status:",Q),B.error("Failed to update user status")}},q=async(I,J)=>{try{console.log("üîÑ Terminating user:",I,"Type:",J);let Q=new Date,te=0;switch(J){case"immediate":te=0;break;case"1month":te=30;break;case"3months":te=90;break;default:te=0}Q.setDate(Q.getDate()+te);const ee={terminationType:J,terminationDate:Q.toISOString(),delayDays:te};console.log("üì§ Termination request:",ee);const re=await fetch(`http://localhost:7000/api/admin/users/${I}/terminate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer mock-token"},body:JSON.stringify(ee)});if(console.log("üì• Termination response status:",re.status),re.ok){const se=await re.json();console.log("‚úÖ Termination successful:",se);const he=J==="immediate"?"User terminated immediately":`User termination scheduled for ${J}`;B.success(he),y(!1),c(null),F(),N()}else{const se=await re.json();console.error("‚ùå Termination failed:",se),B.error(se.message||"Failed to terminate user")}}catch(Q){console.error("‚ùå Error terminating user:",Q),B.error("Failed to terminate user: "+Q.message)}},Y=async I=>{try{(await fetch("http://localhost:7000/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer mock-token"},body:JSON.stringify(I)})).ok?(B.success("User created successfully"),x(!1),S.resetFields(),F(),N()):B.error("Failed to create user")}catch(J){console.error("Error creating user:",J),B.error("Failed to create user")}},ne=I=>{Ke.confirm({title:"Are you sure you want to delete this user?",content:"This action cannot be undone.",onOk:()=>{t(J=>J.filter(Q=>Q._id!==I)),B.success("User deleted successfully")}})},U=async I=>{try{if(l)t(J=>J.map(Q=>Q._id===l._id?{...Q,...I}:Q)),B.success("User updated successfully");else{const J={_id:Date.now().toString(),...I,joinDate:new Date().toISOString().split("T")[0],lastActive:"Just now",purchases:0,totalSpent:0};t(Q=>[...Q,J]),B.success("User created successfully")}i(!1),P.resetFields()}catch{B.error("Failed to save user")}},$=[{title:"User",dataIndex:"name",key:"name",render:(I,J)=>e.jsxs(Z,{children:[e.jsx(We,{src:ht(J),icon:e.jsx(Re,{}),children:nt(J.name)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:I}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:J.email})]})]})},{title:"Role",dataIndex:"role",key:"role",render:I=>{let J=a.colors.primary;return I==="admin"&&(J=a.colors.error),I==="superadmin"&&(J=a.colors.secondary),e.jsx(le,{color:J,style:{borderRadius:a.borderRadius.sm},children:I==="superadmin"?"SUPER ADMIN":I.toUpperCase()})}},{title:"Status",dataIndex:"isOnline",key:"status",render:(I,J)=>J.terminationStatus==="terminated"?e.jsx(le,{color:"red",children:"TERMINATED"}):J.terminationStatus==="pending"?e.jsx(le,{color:"orange",children:"PENDING TERMINATION"}):J.isActive===!1?e.jsx(le,{color:"gray",children:"INACTIVE"}):e.jsx(le,{color:I?a.colors.success:a.colors.text.secondary,style:{borderRadius:a.borderRadius.sm},children:I?"ONLINE":"OFFLINE"})},{title:"Purchases",dataIndex:"purchases",key:"purchases",render:I=>`${(I==null?void 0:I.length)||0} items`},{title:"Total Spent",dataIndex:"totalSpent",key:"totalSpent",render:I=>e.jsx("strong",{style:{color:a.colors.success},children:D(I||0)})},{title:"Last Active",dataIndex:"lastSeen",key:"lastActive",render:I=>I?new Date(I).toLocaleDateString():"Never"},{title:"Actions",key:"actions",width:250,render:(I,J)=>{const Q=J.terminationStatus==="terminated",te=J.terminationStatus==="pending";return e.jsxs(Z,{wrap:!0,children:[e.jsx(Gt,{title:"View Details",children:e.jsx(L,{size:"small",icon:e.jsx(it,{}),onClick:()=>E(J)})}),!Q&&e.jsx(Gt,{title:"Edit User",children:e.jsx(L,{size:"small",icon:e.jsx(qt,{}),onClick:()=>_(J)})}),!Q&&!te&&e.jsx(Gt,{title:J.isOnline?"Set Offline":"Set Online",children:e.jsx(L,{size:"small",type:J.isOnline?"default":"primary",icon:J.isOnline?e.jsx(ac,{}):e.jsx(Ee,{}),onClick:()=>H(J._id,J.isOnline)})}),!Q&&!te&&e.jsx(Gt,{title:"Terminate User",children:e.jsx(L,{size:"small",danger:!0,icon:e.jsx(_n,{}),onClick:()=>A(J)})}),te&&e.jsx(Gt,{title:"Termination Scheduled",children:e.jsx(L,{size:"small",disabled:!0,icon:e.jsx(Ze,{}),children:"Scheduled"})}),Q&&e.jsx(Gt,{title:"User Terminated",children:e.jsx(L,{size:"small",disabled:!0,icon:e.jsx(_n,{}),children:"Terminated"})}),e.jsx(tn,{title:"Delete User",description:"Are you sure you want to delete this user permanently?",onConfirm:()=>ne(J._id),okText:"Yes",cancelText:"No",children:e.jsx(Gt,{title:"Delete Permanently",children:e.jsx(L,{size:"small",danger:!0,icon:e.jsx(Tt,{})})})})]})}}];console.log("üîÑ UserManagement: Component render - users:",s.length,"loading:",r,"stats:",z);const D=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(I/100);return e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(H2,{level:2,style:{marginBottom:a.spacing.sm,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(Ir,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"User Management"]}),e.jsx(V2,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.body},children:"Manage users, roles, and permissions across your platform."})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Users"}),value:z.totalUsers,prefix:e.jsx(Ir,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Online Users"}),value:z.onlineUsers,prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Offline Users"}),value:z.offlineUsers,prefix:e.jsx(ac,{style:{color:a.colors.text.secondary}}),valueStyle:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Last 30 Days"}),value:z.last30DaysUsers,prefix:e.jsx(Ds,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Spent"}),value:D(z.totalSpent||0),prefix:e.jsx(kt,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,md:4,lg:3,children:e.jsx(V,{hoverable:!0,style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Cr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"New Today"}),value:z.newUsersToday,prefix:e.jsx(Ze,{style:{color:a.colors.warning}}),valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})})]}),z.topSpenders&&z.topSpenders.length>0&&e.jsx(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:e.jsx(W,{span:24,children:e.jsx(V,{title:e.jsxs(e.Fragment,{children:[e.jsx(zo,{})," Top Spenders"]}),hoverable:!0,children:e.jsx(ce,{gutter:[16,16],children:z.topSpenders.map((I,J)=>e.jsx(W,{xs:24,sm:12,md:8,lg:6,children:e.jsx(V,{size:"small",hoverable:!0,onClick:()=>E(I),style:{cursor:"pointer"},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(Z,{children:[e.jsx(We,{src:ht(I),icon:e.jsx(Re,{}),children:nt(I.name)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:I.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:I.email})]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#fa8c16"},children:["$",(I.totalSpent||0).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Rank #",J+1]})]})]})})},I._id))})})})}),e.jsx(V,{title:e.jsxs(Z,{children:[e.jsx(Ir,{style:{color:a.colors.primary}}),e.jsx(Cr,{strong:!0,style:{color:a.colors.text.primary},children:"Users Management"})]}),extra:e.jsxs(Z,{wrap:!0,children:[e.jsx(G2,{placeholder:"Search users...",value:k,onChange:I=>R(I.target.value),style:{width:200},prefix:e.jsx(Kt,{}),allowClear:!0}),e.jsxs(Pe,{placeholder:"Filter by status",value:w,onChange:b,style:{width:150},children:[e.jsx(ct,{value:"all",children:"All Status"}),e.jsx(ct,{value:"online",children:"Online"}),e.jsx(ct,{value:"offline",children:"Offline"})]}),e.jsxs(Pe,{placeholder:"Filter by role",value:C,onChange:O,style:{width:150},children:[e.jsx(ct,{value:"all",children:"All Roles"}),e.jsx(ct,{value:"user",children:"User"}),e.jsx(ct,{value:"admin",children:"Admin"}),e.jsx(ct,{value:"superadmin",children:"Super Admin"})]}),e.jsx(L,{type:"primary",icon:e.jsx(Ks,{}),onClick:v,style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Add User"})]}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(Pt,{columns:$,dataSource:s,loading:r,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})}),e.jsx(Ke,{title:l?"Edit User":"Add User",open:o,onCancel:()=>i(!1),footer:null,width:600,children:e.jsxs(G,{form:P,layout:"vertical",onFinish:U,children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter name"}],children:e.jsx(ue,{placeholder:"Enter full name"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"}],children:e.jsx(ue,{type:"email",placeholder:"Enter email"})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"phone",label:"Phone",children:e.jsx(ue,{placeholder:"Enter phone number"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"country",label:"Country",children:e.jsx(ue,{placeholder:"Enter country"})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:e.jsxs(Pe,{placeholder:"Select role",children:[e.jsx(ct,{value:"user",children:"User"}),e.jsx(ct,{value:"admin",children:"Admin"})]})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(Pe,{placeholder:"Select status",children:[e.jsx(ct,{value:"active",children:"Active"}),e.jsx(ct,{value:"inactive",children:"Inactive"}),e.jsx(ct,{value:"blocked",children:"Blocked"})]})})})]}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",children:l?"Update User":"Add User"}),e.jsx(L,{onClick:()=>i(!1),children:"Cancel"})]})})]})}),e.jsx(Ke,{title:e.jsxs(Z,{children:[e.jsx(Re,{}),"User Details"]}),open:d,onCancel:()=>f(!1),footer:[e.jsx(L,{onClick:()=>f(!1),children:"Close"},"close"),e.jsx(L,{type:"primary",onClick:()=>{f(!1),_(u)},children:"Edit User"},"edit")],width:800,children:u&&e.jsxs(Yt,{defaultActiveKey:"basic",children:[e.jsx(Yt.TabPane,{tab:"Basic Info",children:e.jsxs(Ye,{bordered:!0,column:2,children:[e.jsx(Ye.Item,{label:"Name",span:2,children:e.jsxs(Z,{children:[e.jsx(We,{src:ht(u),icon:e.jsx(Re,{}),children:nt(u.name)}),u.name]})}),e.jsx(Ye.Item,{label:"Email",children:u.email}),e.jsx(Ye.Item,{label:"Role",children:e.jsx(le,{color:u.role==="admin"?"red":u.role==="superadmin"?"purple":"blue",children:u.role==="superadmin"?"SUPER ADMIN":u.role.toUpperCase()})}),e.jsx(Ye.Item,{label:"Status",children:e.jsx(le,{color:u.isOnline?"green":"orange",children:u.isOnline?"ONLINE":"OFFLINE"})}),e.jsx(Ye.Item,{label:"Last Active",children:u.lastSeen?new Date(u.lastSeen).toLocaleString():"Never"}),e.jsx(Ye.Item,{label:"Created At",span:2,children:new Date(u.createdAt).toLocaleString()})]})},"basic"),e.jsx(Yt.TabPane,{tab:"Activity",children:e.jsxs(Wn,{children:[e.jsx(Wn.Item,{color:"green",children:e.jsxs(Z,{children:[e.jsx(Ee,{}),e.jsx("span",{children:"User registered"}),e.jsx(le,{children:new Date(u.createdAt).toLocaleDateString()})]})}),e.jsx(Wn.Item,{color:"blue",children:e.jsxs(Z,{children:[e.jsx(Ze,{}),e.jsx("span",{children:"Last seen"}),e.jsx(le,{children:u.lastSeen?new Date(u.lastSeen).toLocaleDateString():"Never"})]})}),e.jsx(Wn.Item,{color:"orange",children:e.jsxs(Z,{children:[e.jsx(kt,{}),e.jsxs("span",{children:["Total spent: $",(u.totalSpent||0).toLocaleString()]})]})})]})},"activity"),e.jsxs(Yt.TabPane,{tab:"Permissions",children:[e.jsx(gt,{message:"User Permissions",description:"Manage user access and permissions",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(G,{layout:"vertical",children:[e.jsx(G.Item,{label:"Role Permissions",children:e.jsxs(Pe,{defaultValue:u.role,style:{width:"100%"},children:[e.jsx(ct,{value:"user",children:"User"}),e.jsx(ct,{value:"admin",children:"Admin"}),e.jsx(ct,{value:"superadmin",children:"Super Admin"})]})}),e.jsx(G.Item,{label:"Access Level",children:e.jsxs(Pe,{defaultValue:"standard",style:{width:"100%"},children:[e.jsx(ct,{value:"basic",children:"Basic Access"}),e.jsx(ct,{value:"standard",children:"Standard Access"}),e.jsx(ct,{value:"premium",children:"Premium Access"}),e.jsx(ct,{value:"enterprise",children:"Enterprise Access"})]})})]})]},"permissions")]})}),e.jsx(Ke,{title:e.jsxs(Z,{children:[e.jsx(Ld,{style:{color:"#ff4d4f"}}),"Terminate User"]}),open:g,onCancel:()=>{y(!1),c(null)},footer:[e.jsx(L,{onClick:()=>{y(!1),c(null)},children:"Cancel"},"cancel")],width:600,centered:!0,children:l&&e.jsxs("div",{children:[e.jsx(gt,{message:"Account Termination Warning",description:e.jsxs("div",{children:[e.jsx("p",{children:"You are about to terminate the account for:"}),e.jsxs("p",{children:[e.jsx("strong",{children:l.name})," (",l.email,")"]}),e.jsx("p",{children:"Choose the termination type below:"})]}),type:"warning",showIcon:!0,style:{marginBottom:24}}),e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,md:8,children:e.jsx(V,{hoverable:!0,onClick:()=>q(l._id,"immediate"),style:{border:"2px solid #ff4d4f",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},styles:{body:{padding:"16px"}},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%",textAlign:"center"},children:[e.jsx(_n,{style:{fontSize:"24px",color:"#ff4d4f"}}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Immediate"}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Delete account immediately"}),e.jsx(le,{color:"red",children:"INSTANT"})]})})}),e.jsx(W,{xs:24,sm:12,md:8,children:e.jsx(V,{hoverable:!0,onClick:()=>q(l._id,"1month"),style:{border:"2px solid #fa8c16",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},styles:{body:{padding:"16px"}},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%",textAlign:"center"},children:[e.jsx(Ds,{style:{fontSize:"24px",color:"#fa8c16"}}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"1 Month"}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Delete account after 1 month"}),e.jsx(le,{color:"orange",children:"30 DAYS"})]})})}),e.jsx(W,{xs:24,sm:12,md:8,children:e.jsx(V,{hoverable:!0,onClick:()=>q(l._id,"3months"),style:{border:"2px solid #722ed1",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},styles:{body:{padding:"16px"}},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%",textAlign:"center"},children:[e.jsx(Ds,{style:{fontSize:"24px",color:"#722ed1"}}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"3 Months"}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Delete account after 3 months"}),e.jsx(le,{color:"purple",children:"90 DAYS"})]})})})]}),e.jsx(ys,{}),e.jsx(gt,{message:"Important Notice",description:"The user will receive a notification about their account termination. For delayed terminations, they will have access until the scheduled date.",type:"info",showIcon:!0,style:{marginTop:16}})]})}),e.jsx(Ke,{title:e.jsxs(Z,{children:[e.jsx(Ks,{}),"Add New User"]}),open:h,onCancel:()=>x(!1),footer:null,width:600,children:e.jsxs(G,{form:S,layout:"vertical",onFinish:Y,children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter name"}],children:e.jsx(ue,{placeholder:"Enter full name"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"}],children:e.jsx(ue,{type:"email",placeholder:"Enter email"})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"}],children:e.jsx(ue.Password,{placeholder:"Enter password"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:e.jsxs(Pe,{placeholder:"Select role",children:[e.jsx(ct,{value:"user",children:"User"}),e.jsx(ct,{value:"admin",children:"Admin"}),e.jsx(ct,{value:"superadmin",children:"Super Admin"})]})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"phone",label:"Phone",children:e.jsx(ue,{placeholder:"Enter phone number"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"bio",label:"Bio",children:e.jsx(ue.TextArea,{placeholder:"Enter bio",rows:3})})})]}),e.jsx(G.Item,{name:"permissions",label:"Permissions",children:e.jsxs(Pe,{mode:"multiple",placeholder:"Select permissions",children:[e.jsx(ct,{value:"read",children:"Read"}),e.jsx(ct,{value:"write",children:"Write"}),e.jsx(ct,{value:"delete",children:"Delete"}),e.jsx(ct,{value:"admin",children:"Admin Access"}),e.jsx(ct,{value:"superadmin",children:"Super Admin Access"})]})}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",children:"Create User"}),e.jsx(L,{onClick:()=>x(!1),children:"Cancel"})]})})]})})]})})},{Title:Y2,Paragraph:K2,Text:Lr}=Fe,{Search:Q2}=ue,{Option:Fs}=Pe,Z2=()=>{var A;const[s,t]=p.useState([]),[r,n]=p.useState([]),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[u,m]=p.useState(!1),[d,f]=p.useState(!1),[g,y]=p.useState(null),[h,x]=p.useState(null),[P,S]=p.useState("orders"),{user:M,isAuthenticated:j}=qe();Je();const[z,T]=p.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0,monthlyGrowth:0});p.useEffect(()=>{k(),R(),w()},[]);const k=async()=>{i(!0);try{const v=await F0.getAllPurchases({limit:100});v.data.success&&t(v.data.purchases||[])}catch(v){console.error("Failed to fetch orders:",v),t([])}finally{i(!1)}},R=async()=>{c(!0);try{const v=await vo.getAllPrebooks({limit:100});v.data.success&&n(v.data.data.prebooks||[])}catch(v){console.error("Failed to fetch prebooks:",v),n([])}finally{c(!1)}},w=async()=>{try{const v=await N0.getDashboard();if(v.data.success&&v.data.stats)T({totalOrders:v.data.stats.totalOrders||0,totalRevenue:v.data.stats.totalRevenue||0,pendingOrders:v.data.stats.pendingOrders||0,completedOrders:v.data.stats.completedOrders||0,averageOrderValue:v.data.stats.averageOrderValue||0,monthlyGrowth:v.data.stats.monthlyGrowth||0});else{const H=s.length,q=s.reduce(($,D)=>$+(D.amount||0),0),Y=s.filter($=>$.status==="pending").length,ne=s.filter($=>$.status==="completed").length,U=H>0?q/H:0;T({totalOrders:H,totalRevenue:q,pendingOrders:Y,completedOrders:ne,averageOrderValue:U,monthlyGrowth:0})}}catch(v){console.error("Failed to fetch stats:",v);const H=s.length,q=s.reduce(($,D)=>$+(D.amount||0),0),Y=s.filter($=>$.status==="pending").length,ne=s.filter($=>$.status==="completed").length,U=H>0?q/H:0;T({totalOrders:H,totalRevenue:q,pendingOrders:Y,completedOrders:ne,averageOrderValue:U,monthlyGrowth:0})}},b=v=>{y(v),m(!0)},C=v=>{x(v),f(!0)},O=async(v,H,q)=>{try{(await vo.updatePrebookStatus(v,{status:H,adminNotes:q})).data.success&&(R(),f(!1))}catch(Y){console.error("Failed to update prebook status:",Y)}},F=v=>({completed:a.colors.success,paid:a.colors.success,pending:a.colors.warning,created:a.colors.warning,processing:a.colors.primary,cancelled:a.colors.error,refunded:a.colors.secondary})[v]||a.colors.text.secondary,N=[{title:"Order ID",dataIndex:"orderId",key:"orderId",render:v=>e.jsx("strong",{children:v})},{title:"Customer",dataIndex:"customer",key:"customer",render:v=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:v.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:v.email})]})},{title:"Product",dataIndex:"product",key:"product",render:v=>e.jsxs(Z,{children:[e.jsx("img",{src:v.thumbnail,alt:v.name,style:{width:40,height:40,objectFit:"cover",borderRadius:4}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:v.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["$",v.price]})]})]})},{title:"Amount",dataIndex:"amount",key:"amount",render:v=>e.jsx("strong",{style:{color:a.colors.success},children:_(v||0)})},{title:"Status",dataIndex:"status",key:"status",render:v=>e.jsx(le,{color:F(v),children:v.toUpperCase()})},{title:"Date",dataIndex:"date",key:"date"},{title:"Actions",key:"actions",render:(v,H)=>e.jsxs(Z,{children:[e.jsx(L,{size:"small",icon:e.jsx(it,{}),onClick:()=>b(H),children:"View"}),e.jsx(L,{size:"small",icon:e.jsx(qt,{}),children:"Edit"}),e.jsx(L,{size:"small",icon:e.jsx(ug,{}),children:"Print"})]})}],E=[{title:"Customer",dataIndex:"contactInfo",key:"customer",render:v=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:v.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:v.email})]})},{title:"Product",dataIndex:"productId",key:"product",render:v=>v?v.title:"N/A"},{title:"Project Type",dataIndex:"projectType",key:"projectType",render:v=>v.replace("-"," ").toUpperCase()},{title:"Budget",dataIndex:"budget",key:"budget",render:v=>({"under-5k":"Under $5,000","5k-10k":"$5,000 - $10,000","10k-25k":"$10,000 - $25,000","25k-50k":"$25,000 - $50,000","50k-100k":"$50,000 - $100,000","100k-plus":"$100,000+"})[v]||v},{title:"Timeline",dataIndex:"timeline",key:"timeline",render:v=>`${v} days`},{title:"Status",dataIndex:"status",key:"status",render:v=>{const H={pending:"orange",reviewed:"blue",accepted:"green",rejected:"red",completed:"green"};return e.jsx(le,{color:H[v],children:v.toUpperCase()})}},{title:"Date",dataIndex:"createdAt",key:"date",render:v=>new Date(v).toLocaleDateString()},{title:"Actions",key:"actions",render:(v,H)=>e.jsx(Z,{children:e.jsx(L,{size:"small",icon:e.jsx(it,{}),onClick:()=>C(H),children:"View"})})}],_=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(v/100);return e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(Y2,{level:2,style:{marginBottom:a.spacing.sm,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(kt,{style:{marginRight:a.spacing.sm,color:a.colors.success}}),"Orders & Sales"]}),e.jsx(K2,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.body},children:"Track orders, manage sales, and monitor revenue performance."})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Orders"}),value:z.totalOrders,valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(vt,{style:{color:a.colors.primary}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Revenue"}),value:_(z.totalRevenue||0),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(kt,{style:{color:a.colors.success}}),suffix:e.jsx(Zr,{style:{color:a.colors.success}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Pending Orders"}),value:z.pendingOrders,valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Ze,{style:{color:a.colors.warning}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Completed Orders"}),value:z.completedOrders,valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Ee,{style:{color:a.colors.success}})})})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Average Order Value"}),value:_(z.averageOrderValue||0),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(zo,{style:{color:a.colors.primary}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Lr,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Monthly Growth"}),value:z.monthlyGrowth||0,suffix:"%",valueStyle:{color:z.monthlyGrowth>=0?a.colors.success:a.colors.error,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Zr,{style:{color:z.monthlyGrowth>=0?a.colors.success:a.colors.error}})})})})]}),e.jsx(V,{title:e.jsxs(Z,{children:[e.jsxs(L,{type:P==="orders"?"primary":"default",onClick:()=>S("orders"),style:{borderRadius:a.borderRadius.md,backgroundColor:P==="orders"?a.colors.primary:"transparent",borderColor:P==="orders"?a.colors.primary:a.colors.card.border},children:["Orders (",s.length,")"]}),e.jsxs(L,{type:P==="prebooks"?"primary":"default",onClick:()=>S("prebooks"),style:{borderRadius:a.borderRadius.md,backgroundColor:P==="prebooks"?a.colors.primary:"transparent",borderColor:P==="prebooks"?a.colors.primary:a.colors.card.border},children:["Prebook Requests (",r.length,")"]})]}),extra:e.jsxs(Z,{children:[e.jsx(Q2,{placeholder:`Search ${P}...`,style:{width:200},allowClear:!0}),e.jsxs(Pe,{placeholder:"Filter by status",style:{width:150},children:[e.jsxs(Fs,{value:"all",children:["All ",P==="orders"?"Orders":"Requests"]}),e.jsx(Fs,{value:"pending",children:"Pending"}),e.jsx(Fs,{value:"processing",children:"Processing"}),e.jsx(Fs,{value:"completed",children:"Completed"}),e.jsx(Fs,{value:"cancelled",children:"Cancelled"})]}),e.jsx(L,{icon:e.jsx(Tl,{}),style:{borderRadius:a.borderRadius.md},children:"Export"})]}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:P==="orders"?e.jsx(Pt,{columns:N,dataSource:s,loading:o,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}}):e.jsx(Pt,{columns:E,dataSource:r,loading:l,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})}),e.jsx(Ke,{title:`Order Details - ${g==null?void 0:g.orderId}`,open:u,onCancel:()=>m(!1),footer:null,width:800,children:g&&e.jsx("div",{})}),e.jsx(Ke,{title:"Prebook Request Details",open:d,onCancel:()=>f(!1),footer:null,width:800,children:h&&e.jsxs("div",{children:[e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{span:12,children:e.jsxs(V,{size:"small",title:"Customer Information",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",h.contactInfo.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",h.contactInfo.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",h.contactInfo.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",h.contactInfo.company||"N/A"]})]})}),e.jsx(W,{span:12,children:e.jsxs(V,{size:"small",title:"Project Details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",((A=h.productId)==null?void 0:A.title)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project Type:"})," ",h.projectType.replace("-"," ").toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," ",h.budget==="under-5k"?"Under $5,000":h.budget==="5k-10k"?"$5,000 - $10,000":h.budget==="10k-25k"?"$10,000 - $25,000":h.budget==="25k-50k"?"$25,000 - $50,000":h.budget==="50k-100k"?"$50,000 - $100,000":h.budget==="100k-plus"?"$100,000+":h.budget]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",h.timeline," days"]})]})})]}),h.features&&h.features.length>0&&e.jsx(V,{size:"small",title:"Requested Features",style:{marginTop:16},children:e.jsx(Z,{wrap:!0,children:h.features.map((v,H)=>e.jsx(le,{children:v.replace("-"," ").toUpperCase()},H))})}),h.notes&&e.jsx(V,{size:"small",title:"Additional Notes",style:{marginTop:16},children:e.jsx("p",{children:h.notes})}),e.jsx(V,{size:"small",title:"Admin Actions",style:{marginTop:16},children:e.jsxs(Z,{children:[e.jsxs(Pe,{placeholder:"Update Status",style:{width:150},onChange:v=>{v&&O(h._id,v,"")},children:[e.jsx(Fs,{value:"pending",children:"Pending"}),e.jsx(Fs,{value:"reviewed",children:"Reviewed"}),e.jsx(Fs,{value:"accepted",children:"Accepted"}),e.jsx(Fs,{value:"rejected",children:"Rejected"}),e.jsx(Fs,{value:"completed",children:"Completed"})]}),e.jsx(L,{type:"primary",children:"Update Status"})]})})]})})]})})},{Title:X2,Paragraph:ej,Text:ms}=Fe,{Option:to}=Pe,{RangePicker:tj}=Ao,sj=()=>{const[s,t]=p.useState(!1),[r,n]=p.useState("7d"),{user:o,isAuthenticated:i}=qe();Je();const[l,c]=p.useState({totalRevenue:0,revenueGrowth:0,totalOrders:0,ordersGrowth:0,totalUsers:0,usersGrowth:0,conversionRate:0,conversionGrowth:0});p.useEffect(()=>{u()},[r]);const u=async()=>{t(!0);try{console.log("üîÑ Analytics: Loading analytics data...");const x=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),P=await fetch("http://localhost:7000/api/admin/dashboard",{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(P.ok){const S=await P.json();if(console.log("‚úÖ Analytics: Dashboard data received:",S),S.success&&S.data){const{users:M,orders:j,products:z}=S.data;c({totalRevenue:(j==null?void 0:j.totalRevenue)||0,revenueGrowth:15.2,totalOrders:(j==null?void 0:j.totalOrders)||0,ordersGrowth:8.5,totalUsers:(M==null?void 0:M.totalUsers)||0,usersGrowth:12.3,conversionRate:85.6,conversionGrowth:3.2}),console.log("‚úÖ Analytics: Analytics data updated successfully")}else console.log("‚ùå Analytics: API returned unsuccessful response, using demo data"),c({totalRevenue:12580,revenueGrowth:15.2,totalOrders:156,ordersGrowth:8.5,totalUsers:1247,usersGrowth:12.3,conversionRate:85.6,conversionGrowth:3.2})}else console.error("‚ùå Analytics: Failed to fetch analytics data:",P.status),c({totalRevenue:12580,revenueGrowth:15.2,totalOrders:156,ordersGrowth:8.5,totalUsers:1247,usersGrowth:12.3,conversionRate:85.6,conversionGrowth:3.2})}catch(x){console.error("‚ùå Analytics: Error loading analytics data:",x),c({totalRevenue:12580,revenueGrowth:15.2,totalOrders:156,ordersGrowth:8.5,totalUsers:1247,usersGrowth:12.3,conversionRate:85.6,conversionGrowth:3.2})}finally{t(!1)}},[m]=p.useState([{id:"product-1",name:"E-commerce Website Template",sales:45,revenue:44955,growth:12.5},{id:"product-2",name:"Portfolio Website Template",sales:32,revenue:19168,growth:8.3},{id:"product-3",name:"Blog Website Template",sales:28,revenue:11172,growth:15.7},{id:"product-4",name:"Corporate Website Template",sales:25,revenue:19975,growth:6.2},{id:"product-5",name:"Landing Page Template",sales:20,revenue:5980,growth:22.1}]),[d]=p.useState([{id:"traffic-1",source:"Google Search",visitors:45.2,percentage:45.2},{id:"traffic-2",source:"Direct Traffic",visitors:28.7,percentage:28.7},{id:"traffic-3",source:"Social Media",visitors:15.3,percentage:15.3},{id:"traffic-4",source:"Email Marketing",visitors:8.1,percentage:8.1},{id:"traffic-5",source:"Referrals",visitors:2.7,percentage:2.7}]),[f]=p.useState([{id:"activity-1",action:"New user registered",user:"John Doe",time:"2 hours ago",type:"user"},{id:"activity-2",action:"Order completed",user:"Sarah Smith",time:"3 hours ago",type:"order"},{id:"activity-3",action:"Product published",user:"Admin",time:"5 hours ago",type:"product"},{id:"activity-4",action:"Payment received",user:"Mike Johnson",time:"6 hours ago",type:"payment"},{id:"activity-5",action:"User logged in",user:"Emily Davis",time:"8 hours ago",type:"user"}]),g=[{title:"Product",dataIndex:"name",key:"name",render:x=>e.jsx("strong",{children:x})},{title:"Sales",dataIndex:"sales",key:"sales",render:x=>`${x} units`},{title:"Revenue",dataIndex:"revenue",key:"revenue",render:x=>`$${x.toLocaleString()}`},{title:"Growth",dataIndex:"growth",key:"growth",render:x=>e.jsxs("span",{style:{color:x>0?"#52c41a":"#f5222d"},children:[x>0?"+":"",x,"%"]})}],y=[{title:"Action",dataIndex:"action",key:"action",render:x=>e.jsx("strong",{children:x})},{title:"User",dataIndex:"user",key:"user"},{title:"Time",dataIndex:"time",key:"time"},{title:"Type",dataIndex:"type",key:"type",render:x=>e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",backgroundColor:x==="user"?"#e6f7ff":x==="order"?"#f6ffed":x==="product"?"#fff7e6":"#f9f0ff",color:x==="user"?"#1890ff":x==="order"?"#52c41a":x==="product"?"#fa8c16":"#722ed1"},children:x.toUpperCase()})}],h=x=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(x/100);return e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(X2,{level:2,style:{marginBottom:a.spacing.sm,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(ki,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"Analytics Dashboard"]}),e.jsx(ej,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.body},children:"Monitor performance metrics, track growth, and analyze user behavior."})]}),e.jsx(V,{style:{marginBottom:a.spacing.xl,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsxs(Z,{children:[e.jsx(ms,{style:{color:a.colors.text.primary},children:"Time Range:"}),e.jsxs(Pe,{value:r,onChange:n,style:{width:120},children:[e.jsx(to,{value:"24h",children:"Last 24h"}),e.jsx(to,{value:"7d",children:"Last 7 days"}),e.jsx(to,{value:"30d",children:"Last 30 days"}),e.jsx(to,{value:"90d",children:"Last 90 days"})]}),e.jsx(tj,{}),e.jsx(L,{icon:e.jsx(Nd,{}),style:{borderRadius:a.borderRadius.md},children:"Apply Filters"}),e.jsx(L,{icon:e.jsx(Tl,{}),style:{borderRadius:a.borderRadius.md},children:"Export Report"})]})}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:12,sm:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsx(ve,{title:e.jsx(ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Revenue"}),value:h(l.totalRevenue||0),prefix:e.jsx(kt,{style:{color:a.colors.success}}),suffix:e.jsx(Zr,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}}),e.jsxs("div",{style:{marginTop:a.spacing.sm,fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary},children:["+",l.revenueGrowth||0,"% from last period"]})]})}),e.jsx(W,{xs:12,sm:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsx(ve,{title:e.jsx(ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Orders"}),value:l.totalOrders||0,prefix:e.jsx(vt,{style:{color:a.colors.primary}}),suffix:e.jsx(Zr,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}}),e.jsxs("div",{style:{marginTop:a.spacing.sm,fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary},children:["+",l.ordersGrowth||0,"% from last period"]})]})}),e.jsx(W,{xs:12,sm:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsx(ve,{title:e.jsx(ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Users"}),value:l.totalUsers||0,prefix:e.jsx(Re,{style:{color:a.colors.primary}}),suffix:e.jsx(Zr,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}}),e.jsxs("div",{style:{marginTop:a.spacing.sm,fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary},children:["+",l.usersGrowth||0,"% from last period"]})]})}),e.jsx(W,{xs:12,sm:6,children:e.jsxs(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsx(ve,{title:e.jsx(ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Conversion Rate"}),value:l.conversionRate||0,suffix:"%",prefix:e.jsx(zo,{style:{color:a.colors.warning}}),valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}}),e.jsxs("div",{style:{marginTop:a.spacing.sm,fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary},children:["+",l.conversionGrowth||0,"% from last period"]})]})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsx(ms,{strong:!0,style:{color:a.colors.text.primary},children:"Top Selling Products"}),extra:e.jsx(L,{type:"link",style:{color:a.colors.primary},children:"View All"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(Pt,{dataSource:m,columns:g,pagination:!1,size:"small",rowKey:"id"})})}),e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsx(ms,{strong:!0,style:{color:a.colors.text.primary},children:"Traffic Sources"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:d.map(x=>e.jsxs("div",{style:{marginBottom:a.spacing.md},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:a.spacing.xs},children:[e.jsx(ms,{style:{color:a.colors.text.primary},children:x.source}),e.jsxs(ms,{strong:!0,style:{color:a.colors.text.primary},children:[x.visitors,"%"]})]}),e.jsx(xd,{percent:x.percentage,showInfo:!1,strokeColor:a.colors.primary})]},x.id))})})]}),e.jsx(ce,{style:{marginTop:a.spacing.xl},children:e.jsx(W,{span:24,children:e.jsx(V,{title:e.jsx(ms,{strong:!0,style:{color:a.colors.text.primary},children:"Recent Activity"}),extra:e.jsx(L,{type:"link",style:{color:a.colors.primary},children:"View All"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(Pt,{dataSource:f,columns:y,pagination:!1,size:"small",rowKey:"id"})})})}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginTop:a.spacing.xl},children:[e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsx(ms,{strong:!0,style:{color:a.colors.text.primary},children:"Revenue Trend"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx("div",{style:{height:300,display:"flex",alignItems:"center",justifyContent:"center",background:a.colors.sidebar.background,borderRadius:a.borderRadius.md},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(ki,{style:{fontSize:48,color:a.colors.primary}}),e.jsx("div",{style:{marginTop:a.spacing.md,color:a.colors.text.secondary},children:"Revenue Chart"}),e.jsx("div",{style:{fontSize:a.typography.fontSize.tiny,color:a.colors.text.disabled},children:"Chart visualization would be here"})]})})})}),e.jsx(W,{xs:24,lg:12,children:e.jsx(V,{title:e.jsx(ms,{strong:!0,style:{color:a.colors.text.primary},children:"User Growth"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx("div",{style:{height:300,display:"flex",alignItems:"center",justifyContent:"center",background:a.colors.sidebar.background,borderRadius:a.borderRadius.md},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Re,{style:{fontSize:48,color:a.colors.success}}),e.jsx("div",{style:{marginTop:a.spacing.md,color:a.colors.text.secondary},children:"User Growth Chart"}),e.jsx("div",{style:{fontSize:a.typography.fontSize.tiny,color:a.colors.text.disabled},children:"Chart visualization would be here"})]})})})})]})]})})},{Title:rj,Paragraph:nj,Text:so}=Fe,{Search:oj}=ue,{Option:Ft}=Pe,{TextArea:ij}=ue,{TabPane:ro}=Yt,aj=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,c]=p.useState(null),[u]=G.useForm(),{user:m,isAuthenticated:d}=qe();Je();const[f,g]=p.useState({totalContent:0,publishedContent:0,draftContent:0,totalViews:0});p.useEffect(()=>{h(),y()},[]);const y=async()=>{try{console.log("üîÑ ContentManagement: Loading stats...");const k=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),R=await fetch("http://localhost:7000/api/admin/dashboard",{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(R.ok){const w=await R.json();if(console.log("‚úÖ ContentManagement: Dashboard data received:",w),w.success&&w.data){const{products:b}=w.data;g({totalContent:(b==null?void 0:b.totalProducts)||0,publishedContent:(b==null?void 0:b.publishedProducts)||0,draftContent:(b==null?void 0:b.draftProducts)||0,totalViews:45678}),console.log("‚úÖ ContentManagement: Stats updated successfully")}else console.log("‚ùå ContentManagement: API returned unsuccessful response, using demo data"),g({totalContent:156,publishedContent:134,draftContent:22,totalViews:45678})}else console.error("‚ùå ContentManagement: Failed to fetch stats:",R.status),g({totalContent:156,publishedContent:134,draftContent:22,totalViews:45678})}catch(k){console.error("‚ùå ContentManagement: Error loading stats:",k),g({totalContent:156,publishedContent:134,draftContent:22,totalViews:45678})}},h=async()=>{var k,R;n(!0);try{console.log("üîÑ ContentManagement: Loading content...");const w=localStorage.getItem("accessToken")||localStorage.getItem("token")||localStorage.getItem("adminToken"),b=await fetch("http://localhost:7000/api/products?limit=100",{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(b.ok){const C=await b.json();if(console.log("‚úÖ ContentManagement: Content data received:",C),C.success){const F=(((k=C.data)==null?void 0:k.products)||((R=C.data)==null?void 0:R.content)||C.data||[]).map((N,E)=>{if(!N||typeof N!="object"||Array.isArray(N))return{_id:`fallback-${E}-${Date.now()}`,title:"Untitled",type:"unknown",status:"draft",views:0,category:"Uncategorized",publishDate:null};const _=N._id||N.id||`item-${E}-${Date.now()}`,A=N.type&&typeof N.type=="string"?String(N.type).trim():"unknown",v=N.status&&typeof N.status=="string"?String(N.status).trim():"draft",H=N.views!=null&&!isNaN(Number(N.views))?Number(N.views):0,q=N.category&&typeof N.category=="string"?String(N.category).trim():"Uncategorized",Y=N.title&&typeof N.title=="string"?String(N.title).trim():N.name&&typeof N.name=="string"?String(N.name).trim():"Untitled";return{...N,_id:_,type:A,status:v,views:H,category:q,title:Y,publishDate:N.publishDate||N.createdAt||null}});t(F),console.log("‚úÖ ContentManagement: Content loaded successfully",F.length,"items")}else console.log("‚ùå ContentManagement: API returned unsuccessful response"),t([])}else console.error("‚ùå ContentManagement: Failed to fetch content:",b.status),t([])}catch(w){console.error("‚ùå ContentManagement: Error loading content:",w),B.error("Failed to fetch content"),t([])}finally{n(!1)}},x=k=>{c(k),u.setFieldsValue(k),i(!0)},P=k=>{Ke.confirm({title:"Are you sure you want to delete this content?",content:"This action cannot be undone.",onOk:()=>{t(R=>R.filter(w=>w._id!==k)),B.success("Content deleted successfully")}})},S=(k,R)=>{t(w=>w.map(b=>b._id===k?{...b,status:R}:b)),B.success(`Content ${R} successfully`)},M=async k=>{try{if(l)t(R=>R.map(w=>w._id===l._id?{...w,...k}:w)),B.success("Content updated successfully");else{const R={_id:Date.now().toString(),...k,author:"Admin",publishDate:k.status==="published"?new Date().toISOString().split("T")[0]:null,views:0};t(w=>[...w,R]),B.success("Content created successfully")}i(!1),u.resetFields()}catch{B.error("Failed to save content")}},j=k=>!k||typeof k!="string"?a.colors.text.secondary:{published:a.colors.success,draft:a.colors.warning,archived:a.colors.text.secondary}[k.toLowerCase()]||a.colors.text.secondary,z=k=>!k||typeof k!="string"?e.jsx(Ys,{}):{blog:e.jsx(Ys,{}),article:e.jsx(Ys,{}),guide:e.jsx(Ys,{}),image:e.jsx(Fn,{}),video:e.jsx(Eo,{}),audio:e.jsx(Dd,{})}[k.toLowerCase()]||e.jsx(Ys,{}),T=[{title:"Content",dataIndex:"title",key:"title",render:(k,R)=>{try{if(!R||typeof R!="object")return e.jsx("span",{children:"No data"});const w=k||R.title||R.name||"Untitled",b=R.type&&typeof R.type=="string"?String(R.type).trim():"unknown",C=R.category&&typeof R.category=="string"?String(R.category).trim():"Uncategorized";return e.jsxs(Z,{children:[z(b),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:String(w)}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[b.toUpperCase()," ‚Ä¢ ",C]})]})]})}catch(w){return console.error("Error rendering content cell:",w,{text:k,record:R}),e.jsx("span",{style:{color:"red"},children:"Error rendering"})}}},{title:"Status",dataIndex:"status",key:"status",render:k=>{try{const R=k&&typeof k=="string"?String(k).trim():"unknown";return e.jsx(le,{color:j(R),style:{borderRadius:a.borderRadius.sm},children:R.toUpperCase()})}catch(R){return console.error("Error rendering status:",R,k),e.jsx(le,{color:"default",children:"UNKNOWN"})}}},{title:"Views",dataIndex:"views",key:"views",render:k=>{try{if(k==null||k===void 0)return"0";if(typeof k=="number"&&!isNaN(k))return k.toLocaleString();if(typeof k=="string"){const R=parseInt(k,10);return isNaN(R)?"0":R.toLocaleString()}return"0"}catch(R){return console.error("Error rendering views:",R,k),"0"}}},{title:"Publish Date",dataIndex:"publishDate",key:"publishDate",render:k=>{if(!k)return"Not published";try{return new Date(k).toLocaleDateString()}catch{return k}}},{title:"Actions",key:"actions",render:(k,R)=>e.jsxs(Z,{size:"small",children:[e.jsx(L,{size:"small",icon:e.jsx(it,{}),style:{minHeight:"32px",minWidth:"32px"},children:"View"}),e.jsx(L,{size:"small",icon:e.jsx(qt,{}),onClick:()=>x(R),style:{minHeight:"32px",minWidth:"32px"},children:"Edit"}),e.jsx(L,{size:"small",type:R.status&&R.status==="published"?"default":"primary",onClick:()=>{const w=R.status&&typeof R.status=="string"?R.status:"draft";S(R._id,w==="published"?"draft":"published")},style:{minHeight:"32px"},children:R.status==="published"?"Unpublish":"Publish"}),e.jsx(L,{size:"small",danger:!0,icon:e.jsx(Tt,{}),onClick:()=>P(R._id),style:{minHeight:"32px",minWidth:"32px"},children:"Delete"})]})}];return e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(rj,{level:2,style:{marginBottom:a.spacing.sm,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(Ys,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"Content Management"]}),e.jsx(nj,{style:{fontSize:a.typography.fontSize.body,color:a.colors.text.secondary,lineHeight:a.typography.lineHeight},children:"Manage blog posts, articles, guides, and other content across your platform."})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(so,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Content"}),value:f.totalContent,prefix:e.jsx(Ys,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(so,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Published"}),value:f.publishedContent,prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(so,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Drafts"}),value:f.draftContent,prefix:e.jsx(Ze,{style:{color:a.colors.warning}}),valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(so,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Views"}),value:f.totalViews,prefix:e.jsx(it,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})})]}),e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsxs(Yt,{defaultActiveKey:"all",children:[e.jsxs(ro,{tab:"All Content",children:[e.jsx("div",{style:{marginBottom:a.spacing.lg},children:e.jsxs(Z,{size:"middle",wrap:!0,children:[e.jsx(oj,{placeholder:"Search content...",style:{width:200},allowClear:!0}),e.jsxs(Pe,{placeholder:"Filter by type",style:{width:150},children:[e.jsx(Ft,{value:"all",children:"All Types"}),e.jsx(Ft,{value:"blog",children:"Blog"}),e.jsx(Ft,{value:"article",children:"Article"}),e.jsx(Ft,{value:"guide",children:"Guide"})]}),e.jsxs(Pe,{placeholder:"Filter by status",style:{width:150},children:[e.jsx(Ft,{value:"all",children:"All Status"}),e.jsx(Ft,{value:"published",children:"Published"}),e.jsx(Ft,{value:"draft",children:"Draft"})]}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>i(!0),style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Create Content"})]})}),e.jsx("div",{className:"table-container",children:e.jsx(Pt,{columns:T,dataSource:s,loading:r,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0},className:"table",style:{backgroundColor:"var(--bg-primary)"}})})]},"all"),e.jsx(ro,{tab:"Blog Posts",children:e.jsx(Pt,{columns:T,dataSource:s.filter(k=>k.type==="blog"),loading:r,rowKey:"_id",pagination:!1})},"blog"),e.jsx(ro,{tab:"Articles",children:e.jsx(Pt,{columns:T,dataSource:s.filter(k=>k.type==="article"),loading:r,rowKey:"_id",pagination:!1})},"article"),e.jsx(ro,{tab:"Guides",children:e.jsx(Pt,{columns:T,dataSource:s.filter(k=>k.type==="guide"),loading:r,rowKey:"_id",pagination:!1})},"guide")]})}),e.jsx(Ke,{title:l?"Edit Content":"Create Content",open:o,onCancel:()=>i(!1),footer:null,width:800,children:e.jsxs(G,{form:u,layout:"vertical",onFinish:M,children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"title",label:"Content Title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(ue,{placeholder:"Enter content title"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"type",label:"Content Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(Pe,{placeholder:"Select content type",children:[e.jsx(Ft,{value:"blog",children:"Blog Post"}),e.jsx(Ft,{value:"article",children:"Article"}),e.jsx(Ft,{value:"guide",children:"Guide"}),e.jsx(Ft,{value:"tutorial",children:"Tutorial"})]})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"category",label:"Category",rules:[{required:!0,message:"Please select category"}],children:e.jsxs(Pe,{placeholder:"Select category",children:[e.jsx(Ft,{value:"Tutorial",children:"Tutorial"}),e.jsx(Ft,{value:"Business",children:"Business"}),e.jsx(Ft,{value:"Design",children:"Design"}),e.jsx(Ft,{value:"Technical",children:"Technical"}),e.jsx(Ft,{value:"News",children:"News"})]})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(Pe,{placeholder:"Select status",children:[e.jsx(Ft,{value:"draft",children:"Draft"}),e.jsx(Ft,{value:"published",children:"Published"})]})})})]}),e.jsx(G.Item,{name:"content",label:"Content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(ij,{rows:6,placeholder:"Enter your content here..."})}),e.jsx(G.Item,{name:"tags",label:"Tags",children:e.jsx(Pe,{mode:"tags",placeholder:"Add tags",style:{width:"100%"}})}),e.jsx(G.Item,{name:"featuredImage",label:"Featured Image",children:e.jsx(dr,{listType:"picture-card",showUploadList:!1,beforeUpload:()=>!1,children:e.jsxs("div",{children:[e.jsx(zl,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",children:l?"Update Content":"Create Content"}),e.jsx(L,{onClick:()=>i(!1),children:"Cancel"})]})})]})})]})})},{Title:lj,Paragraph:cj}=Fe,{Search:dd}=ue,{Option:At}=Pe,{TextArea:dj}=ue,{TabPane:ii}=Yt,uj=()=>{const[s,t]=p.useState([]),[r,n]=p.useState([]),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[u,m]=p.useState(null),[d]=G.useForm(),{user:f,isAuthenticated:g}=qe();Je();const[y,h]=p.useState({totalNotifications:1247,sentNotifications:1089,pendingNotifications:23,readRate:78.5});p.useEffect(()=>{x(),P()},[]);const x=async()=>{i(!0);try{t([{_id:"1",title:"Welcome to our platform!",content:"Thank you for joining us. Get started with our amazing features.",type:"welcome",status:"sent",recipients:156,sentDate:"2024-01-15 10:30:00",readCount:134,priority:"high"},{_id:"2",title:"New product available",content:"Check out our latest product release with amazing features.",type:"product",status:"sent",recipients:89,sentDate:"2024-01-14 14:20:00",readCount:67,priority:"medium"},{_id:"3",title:"Maintenance scheduled",content:"We will be performing maintenance on our servers tonight.",type:"maintenance",status:"pending",recipients:0,sentDate:null,readCount:0,priority:"high"},{_id:"4",title:"Payment received",content:"Your payment has been successfully processed.",type:"payment",status:"sent",recipients:45,sentDate:"2024-01-13 16:45:00",readCount:42,priority:"low"}])}catch{B.error("Failed to fetch notifications")}finally{i(!1)}},P=async()=>{try{n([{_id:"1",name:"Welcome Email",subject:"Welcome to our platform!",content:"Thank you for joining us. Get started with our amazing features.",type:"email",status:"active"},{_id:"2",name:"Product Launch",subject:"New product available",content:"Check out our latest product release with amazing features.",type:"email",status:"active"},{_id:"3",name:"Payment Confirmation",subject:"Payment received",content:"Your payment has been successfully processed.",type:"email",status:"active"}])}catch{B.error("Failed to fetch templates")}},S=R=>{t(w=>w.map(b=>b._id===R?{...b,status:"sent",sentDate:new Date().toISOString()}:b)),B.success("Notification sent successfully")},M=R=>{Ke.confirm({title:"Are you sure you want to delete this notification?",content:"This action cannot be undone.",onOk:()=>{t(w=>w.filter(b=>b._id!==R)),B.success("Notification deleted successfully")}})},j=async R=>{try{if(u)t(w=>w.map(b=>b._id===u._id?{...b,...R}:b)),B.success("Notification updated successfully");else{const w={_id:Date.now().toString(),...R,recipients:0,sentDate:null,readCount:0,status:"pending"};t(b=>[...b,w]),B.success("Notification created successfully")}c(!1),d.resetFields()}catch{B.error("Failed to save notification")}},z=R=>({sent:"green",pending:"orange",failed:"red"})[R]||"default",T=[{title:"Title",dataIndex:"title",key:"title",render:(R,w)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:R}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[w.type.toUpperCase()," ‚Ä¢ ",w.priority.toUpperCase()," Priority"]})]})},{title:"Content",dataIndex:"content",key:"content",render:R=>e.jsx("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:R})},{title:"Status",dataIndex:"status",key:"status",render:R=>e.jsx(le,{color:z(R),children:R.toUpperCase()})},{title:"Recipients",dataIndex:"recipients",key:"recipients",render:(R,w)=>e.jsxs("div",{children:[e.jsxs("div",{children:[R," users"]}),w.status==="sent"&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[w.readCount," read (",Math.round(w.readCount/R*100),"%)"]})]})},{title:"Sent Date",dataIndex:"sentDate",key:"sentDate",render:R=>R||"Not sent"},{title:"Actions",key:"actions",render:(R,w)=>e.jsxs(Z,{children:[e.jsx(L,{size:"small",icon:e.jsx(it,{}),children:"View"}),e.jsx(L,{size:"small",icon:e.jsx(qt,{}),onClick:()=>{m(w),d.setFieldsValue(w),c(!0)},children:"Edit"}),w.status==="pending"&&e.jsx(L,{size:"small",type:"primary",icon:e.jsx(lr,{}),onClick:()=>S(w._id),children:"Send"}),e.jsx(L,{size:"small",danger:!0,icon:e.jsx(Tt,{}),onClick:()=>M(w._id),children:"Delete"})]})}],k=[{title:"Name",dataIndex:"name",key:"name",render:R=>e.jsx("strong",{children:R})},{title:"Subject",dataIndex:"subject",key:"subject"},{title:"Type",dataIndex:"type",key:"type",render:R=>e.jsx(le,{color:R==="email"?"blue":"green",children:R.toUpperCase()})},{title:"Status",dataIndex:"status",key:"status",render:R=>e.jsx(le,{color:R==="active"?"green":"gray",children:R.toUpperCase()})},{title:"Actions",key:"actions",render:(R,w)=>e.jsxs(Z,{children:[e.jsx(L,{size:"small",icon:e.jsx(it,{}),children:"View"}),e.jsx(L,{size:"small",icon:e.jsx(qt,{}),children:"Edit"}),e.jsx(L,{size:"small",type:"primary",icon:e.jsx(lr,{}),children:"Use"})]})}];return e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(lj,{level:2,style:{marginBottom:"0.5rem"},children:"üîî Notifications"}),e.jsx(cj,{children:"Manage notifications, templates, and communication with your users."})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"2rem"},children:[e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Notifications",value:y.totalNotifications,prefix:e.jsx(js,{style:{color:"#1890ff"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Sent",value:y.sentNotifications,prefix:e.jsx(lr,{style:{color:"#52c41a"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Pending",value:y.pendingNotifications,prefix:e.jsx(Ze,{style:{color:"#fa8c16"}})})})}),e.jsx(W,{xs:12,sm:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Read Rate",value:y.readRate,suffix:"%",prefix:e.jsx(Ee,{style:{color:"#722ed1"}})})})})]}),e.jsx(V,{children:e.jsxs(Yt,{defaultActiveKey:"notifications",children:[e.jsxs(ii,{tab:"Notifications",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(Z,{children:[e.jsx(dd,{placeholder:"Search notifications...",style:{width:200}}),e.jsxs(Pe,{placeholder:"Filter by status",style:{width:150},children:[e.jsx(At,{value:"all",children:"All Status"}),e.jsx(At,{value:"sent",children:"Sent"}),e.jsx(At,{value:"pending",children:"Pending"}),e.jsx(At,{value:"failed",children:"Failed"})]}),e.jsxs(Pe,{placeholder:"Filter by type",style:{width:150},children:[e.jsx(At,{value:"all",children:"All Types"}),e.jsx(At,{value:"welcome",children:"Welcome"}),e.jsx(At,{value:"product",children:"Product"}),e.jsx(At,{value:"maintenance",children:"Maintenance"}),e.jsx(At,{value:"payment",children:"Payment"})]}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:()=>c(!0),children:"Create Notification"})]})}),e.jsx(Pt,{columns:T,dataSource:s,loading:o,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})]},"notifications"),e.jsxs(ii,{tab:"Templates",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(Z,{children:[e.jsx(dd,{placeholder:"Search templates...",style:{width:200}}),e.jsxs(Pe,{placeholder:"Filter by type",style:{width:150},children:[e.jsx(At,{value:"all",children:"All Types"}),e.jsx(At,{value:"email",children:"Email"}),e.jsx(At,{value:"sms",children:"SMS"}),e.jsx(At,{value:"push",children:"Push"})]}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),children:"Create Template"})]})}),e.jsx(Pt,{columns:k,dataSource:r,loading:o,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})]},"templates"),e.jsx(ii,{tab:"Settings",children:e.jsxs(V,{title:"Notification Settings",size:"small",children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("h4",{children:"Email Settings"}),e.jsxs(G,{layout:"vertical",children:[e.jsx(G.Item,{label:"SMTP Server",children:e.jsx(ue,{placeholder:"smtp.example.com"})}),e.jsx(G.Item,{label:"Port",children:e.jsx(ue,{placeholder:"587"})}),e.jsx(G.Item,{label:"Username",children:e.jsx(ue,{placeholder:"your-email@example.com"})}),e.jsx(G.Item,{label:"Password",children:e.jsx(ue.Password,{placeholder:"Your password"})})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("h4",{children:"Notification Preferences"}),e.jsxs(G,{layout:"vertical",children:[e.jsx(G.Item,{label:"Send welcome emails",children:e.jsx(dt,{defaultChecked:!0})}),e.jsx(G.Item,{label:"Send product updates",children:e.jsx(dt,{defaultChecked:!0})}),e.jsx(G.Item,{label:"Send maintenance notifications",children:e.jsx(dt,{defaultChecked:!0})}),e.jsx(G.Item,{label:"Send payment confirmations",children:e.jsx(dt,{defaultChecked:!0})})]})]}),e.jsx(L,{type:"primary",children:"Save Settings"})]})},"settings")]})}),e.jsx(Ke,{title:u?"Edit Notification":"Create Notification",open:l,onCancel:()=>c(!1),footer:null,width:600,children:e.jsxs(G,{form:d,layout:"vertical",onFinish:j,children:[e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter title"}],children:e.jsx(ue,{placeholder:"Enter notification title"})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(Pe,{placeholder:"Select type",children:[e.jsx(At,{value:"welcome",children:"Welcome"}),e.jsx(At,{value:"product",children:"Product"}),e.jsx(At,{value:"maintenance",children:"Maintenance"}),e.jsx(At,{value:"payment",children:"Payment"}),e.jsx(At,{value:"general",children:"General"})]})})})]}),e.jsx(G.Item,{name:"content",label:"Content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(dj,{rows:4,placeholder:"Enter notification content"})}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"priority",label:"Priority",rules:[{required:!0,message:"Please select priority"}],children:e.jsxs(Pe,{placeholder:"Select priority",children:[e.jsx(At,{value:"low",children:"Low"}),e.jsx(At,{value:"medium",children:"Medium"}),e.jsx(At,{value:"high",children:"High"})]})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"recipients",label:"Recipients",rules:[{required:!0,message:"Please enter recipients"}],children:e.jsx(ue,{type:"number",placeholder:"Number of recipients"})})})]}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",children:u?"Update Notification":"Create Notification"}),e.jsx(L,{onClick:()=>c(!1),children:"Cancel"})]})})]})})]})})},{Title:hj,Paragraph:pj,Text:ai}=Fe,{Option:Wr}=Pe,{TextArea:vb}=ue,fj=()=>{const{user:s}=qe(),[t]=G.useForm(),[r,n]=p.useState(!1),[o,i]=p.useState({siteName:"ITWOS AI Platform",siteDescription:"A comprehensive full-stack platform",maintenanceMode:!1,registrationEnabled:!0,emailNotifications:!0,chatEnabled:!0,maxFileSize:10,allowedFileTypes:["jpg","png","pdf","doc"],emailSettings:{smtpHost:"",smtpPort:587,smtpUser:"",smtpPassword:""}});p.useEffect(()=>{l()},[]);const l=async()=>{n(!0);try{console.log("Loading settings...")}catch(m){console.error("Error loading settings:",m),B.error("Failed to load settings")}finally{n(!1)}},c=async m=>{n(!0);try{console.log("Saving settings:",m),B.success("Settings saved successfully")}catch(d){console.error("Error saving settings:",d),B.error("Failed to save settings")}finally{n(!1)}},u=()=>{t.resetFields(),B.info("Settings reset to default values")};return e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(hj,{level:2,style:{marginBottom:a.spacing.sm,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(hr,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"System Settings"]}),e.jsx(pj,{style:{fontSize:a.typography.fontSize.body,color:a.colors.text.secondary},children:"Configure platform settings and preferences"})]}),e.jsxs(G,{form:t,layout:"vertical",initialValues:o,onFinish:c,style:{maxWidth:"800px"},children:[e.jsxs(V,{title:e.jsx(ai,{strong:!0,style:{color:a.colors.text.primary},children:"General Settings"}),style:{marginBottom:a.spacing.lg,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"siteName",label:"Site Name",rules:[{required:!0,message:"Please enter site name"}],children:e.jsx(ue,{placeholder:"Enter site name"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"siteDescription",label:"Site Description",rules:[{required:!0,message:"Please enter site description"}],children:e.jsx(ue,{placeholder:"Enter site description"})})})]}),e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"maintenanceMode",label:"Maintenance Mode",valuePropName:"checked",children:e.jsx(dt,{})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"registrationEnabled",label:"Allow Registration",valuePropName:"checked",children:e.jsx(dt,{})})})]})]}),e.jsxs(V,{title:e.jsx(ai,{strong:!0,style:{color:a.colors.text.primary},children:"Feature Settings"}),style:{marginBottom:a.spacing.lg,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"emailNotifications",label:"Email Notifications",valuePropName:"checked",children:e.jsx(dt,{})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"chatEnabled",label:"Chat System",valuePropName:"checked",children:e.jsx(dt,{})})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"maxFileSize",label:"Max File Size (MB)",rules:[{required:!0,message:"Please enter max file size"}],children:e.jsx(ue,{type:"number",min:1,max:100})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:"allowedFileTypes",label:"Allowed File Types",children:e.jsxs(Pe,{mode:"multiple",placeholder:"Select file types",style:{width:"100%"},children:[e.jsx(Wr,{value:"jpg",children:"JPG"}),e.jsx(Wr,{value:"png",children:"PNG"}),e.jsx(Wr,{value:"pdf",children:"PDF"}),e.jsx(Wr,{value:"doc",children:"DOC"}),e.jsx(Wr,{value:"docx",children:"DOCX"}),e.jsx(Wr,{value:"txt",children:"TXT"})]})})})]})]}),e.jsxs(V,{title:e.jsx(ai,{strong:!0,style:{color:a.colors.text.primary},children:"Email Configuration"}),style:{marginBottom:a.spacing.lg,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:[e.jsx(gt,{message:"Email Configuration",description:"Configure SMTP settings for sending emails",type:"info",showIcon:!0,style:{marginBottom:a.spacing.md}}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["emailSettings","smtpHost"],label:"SMTP Host",children:e.jsx(ue,{placeholder:"smtp.gmail.com"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["emailSettings","smtpPort"],label:"SMTP Port",children:e.jsx(ue,{type:"number",placeholder:"587"})})})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["emailSettings","smtpUser"],label:"SMTP Username",children:e.jsx(ue,{placeholder:"your-email@gmail.com"})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(G.Item,{name:["emailSettings","smtpPassword"],label:"SMTP Password",children:e.jsx(ue.Password,{placeholder:"Your email password"})})})]})]}),e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",htmlType:"submit",icon:e.jsx(Nn,{}),loading:r,style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Save Settings"}),e.jsx(L,{icon:e.jsx(Mr,{}),onClick:u,style:{borderRadius:a.borderRadius.md},children:"Reset"})]})})]})]})},gj=()=>e.jsx("div",{style:{padding:"2rem",background:"#f5f5f5",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ph,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:e.jsx(It,{to:"/",children:e.jsx(L,{type:"primary",children:"Back Home"})})})});class mj extends yo.Component{constructor(r){super(r);Vt(this,"handleReload",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});Vt(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});Vt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){console.error("üö® ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n});const o={error:r.toString(),errorInfo:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:localStorage.getItem("userId")||"anonymous"};console.error("ErrorBoundary Error Details:",o)}render(){var r,n,o,i,l;return this.state.hasError?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8fafc",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'},children:e.jsxs("div",{style:{maxWidth:"500px",width:"100%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",padding:"40px",textAlign:"center",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:"#fef2f2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",border:"2px solid #fecaca"},children:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"#dc2626",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",color:"#1e293b",margin:"0 0 12px 0",lineHeight:"1.2"},children:"Oops! Something went wrong"}),e.jsx("p",{style:{fontSize:"16px",color:"#64748b",margin:"0 0 16px 0",lineHeight:"1.5"},children:"We're sorry, but something unexpected happened. Our team has been notified and we're working to fix it."}),this.state.error&&e.jsxs("div",{style:{fontSize:"14px",color:"#dc2626",margin:"0 0 32px 0",padding:"12px",backgroundColor:"#fef2f2",borderRadius:"6px",border:"1px solid #fecaca",textAlign:"left",maxHeight:"150px",overflow:"auto"},children:[e.jsx("strong",{children:"Error:"})," ",((r=this.state.error)==null?void 0:r.message)||((n=this.state.error)==null?void 0:n.toString())||"Unknown error"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"120px"},onMouseOver:c=>{c.target.style.backgroundColor="#2563eb"},onMouseOut:c=>{c.target.style.backgroundColor="#3b82f6"},children:"Reload Page"}),e.jsx("button",{onClick:this.handleGoHome,style:{padding:"12px 24px",backgroundColor:"white",color:"#3b82f6",border:"2px solid #3b82f6",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"120px"},onMouseOver:c=>{c.target.style.backgroundColor="#f8fafc"},onMouseOut:c=>{c.target.style.backgroundColor="white"},children:"Go Home"}),e.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"120px"},onMouseOver:c=>{c.target.style.backgroundColor="#059669"},onMouseOut:c=>{c.target.style.backgroundColor="#10b981"},children:"Try Again"})]}),e.jsxs("div",{style:{marginTop:"32px",padding:"16px",backgroundColor:"#f1f5f9",borderRadius:"8px",fontSize:"12px",color:"#64748b",textAlign:"left"},children:[e.jsx("strong",{children:"Error:"})," ",((o=this.state.error)==null?void 0:o.message)||((i=this.state.error)==null?void 0:i.toString())||"Unknown error",e.jsx("br",{}),e.jsx("strong",{children:"Time:"})," ",new Date().toLocaleString(),e.jsx("br",{}),e.jsx("strong",{children:"URL:"})," ",window.location.href,((l=this.state.error)==null?void 0:l.stack)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("details",{style:{marginTop:"8px"},children:[e.jsx("summary",{style:{cursor:"pointer",fontWeight:"500"},children:"Stack Trace"}),e.jsx("pre",{style:{marginTop:"4px",padding:"8px",backgroundColor:"#ffffff",borderRadius:"4px",overflow:"auto",fontSize:"10px",maxHeight:"200px"},children:this.state.error.stack})]})]})]}),!1]})}):this.props.children}}const{Title:xj,Paragraph:yj,Text:wb}=Fe,{TextArea:ud}=ue,{Option:qr}=Pe,jj=()=>{const[s]=G.useForm(),[t,r]=p.useState(!1),[n,o]=p.useState(!1),[i,l]=p.useState(null),[c,u]=p.useState([]),[m,d]=p.useState([]),[f,g]=p.useState([]),[y,h]=p.useState([]),x=["ecommerce","website","web-app","mobile-app","landing-page","portfolio","blog","dashboard","saas","marketplace","social-media","education","healthcare","finance","travel","food","fashion","technology","startup","corporate","nonprofit"],P=["web-development","mobile-development","e-commerce","landing-page","portfolio","blog","dashboard","saas","marketplace","social-platform","education-platform","healthcare-app","finance-app","travel-booking","food-delivery","fashion-ecommerce","tech-startup","corporate-site","nonprofit","entertainment","gaming","real-estate"],S=["React","Vue.js","Angular","Node.js","Express","Next.js","Nuxt.js","Laravel","Django","Flask","Ruby on Rails","Spring Boot","ASP.NET","MongoDB","MySQL","PostgreSQL","Redis","Firebase","Supabase","AWS","Google Cloud","Azure","Docker","Kubernetes","GraphQL","REST API","Microservices","Serverless","JWT","OAuth","Stripe","PayPal","Twilio","SendGrid","Cloudinary","S3","CDN"],M=["John Smith","Sarah Johnson","Mike Chen","Emily Davis","David Wilson","Lisa Brown","Alex Rodriguez","Maria Garcia","James Taylor","Anna Lee","Robert Kim","Jennifer White","Michael Brown","Jessica Miller","Christopher Jones","Amanda Garcia","Daniel Martinez","Ashley Anderson","Matthew Thomas","Stephanie Jackson"],[j,z]=p.useState(null),[T,k]=p.useState(!1),{user:R,isAuthenticated:w}=qe(),b=Je();p.useEffect(()=>{if(!w||(R==null?void 0:R.role)!=="admin"){b("/admin/login");return}},[w,R,b]),p.useEffect(()=>()=>{j&&clearTimeout(j)},[j]);const C=U=>U.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"),O=U=>{const $=U.target.value,D=C($);s.setFieldsValue({slug:D})},F=U=>{const $=U.target.value;j&&clearTimeout(j);try{new URL($)}catch{return}const D=setTimeout(async()=>{k(!0);try{const I=await Xt.generateDescription({websiteUrl:$});if(I.data.success){const{websiteTitle:J}=I.data.data;if(J&&J!=="Untitled"){s.setFieldsValue({title:J,websiteTitle:J});const Q=C(J);s.setFieldsValue({slug:Q}),B.success("Title fetched automatically from website!")}}}catch(I){console.log("Could not auto-fetch title:",I.message)}finally{k(!1)}},1500);z(D)},N=async()=>{var $,D,I,J,Q,te,ee,re;const U=s.getFieldValue("websiteUrl");if(!U){B.error("Please enter a website URL first");return}try{new URL(U)}catch{B.error("Please enter a valid URL (e.g., https://example.com)");return}if(n){B.warning("Description generation is already in progress. Please wait.");return}console.log("Generating description for URL:",U),o(!0);try{const se=await Xt.generateDescription({websiteUrl:U});if(console.log("Description generation response:",se.data),se.data.success){const{websiteTitle:he,descriptionAuto:fe}=se.data.data;s.setFieldsValue({websiteTitle:he,descriptionAuto:fe}),B.success("Description generated successfully!")}else B.error(se.data.message||"Failed to generate description")}catch(se){console.error("Error generating description:",se),console.error("Error response:",($=se.response)==null?void 0:$.data);let he="Failed to generate description. Please try again.";((D=se.response)==null?void 0:D.status)===429?he=`Too many requests. Please wait ${((J=(I=se.response)==null?void 0:I.data)==null?void 0:J.retryAfter)||60} seconds before trying again.`:(te=(Q=se.response)==null?void 0:Q.data)!=null&&te.message?he=se.response.data.message:se.code==="NETWORK_ERROR"?he="Network error. Please check your connection and try again.":se.message.includes("timeout")?he="Request timeout. The website took too long to respond.":((ee=se.response)==null?void 0:ee.status)===401?he="Authentication required. Please log in again.":((re=se.response)==null?void 0:re.status)===403&&(he="Access denied. Admin privileges required."),B.error(he)}finally{o(!1)}},E=async U=>{var $,D;r(!0);try{if(!U.title){B.error("Product title is required");return}if(!U.websiteUrl){B.error("Website URL is required");return}if(!U.developerName){B.error("Developer name is required");return}if(!U.price){B.error("Price is required");return}const I=new FormData;Object.keys(U).forEach(Q=>{U[Q]!==void 0&&U[Q]!==null&&Q!=="status"&&(Array.isArray(U[Q])?I.append(Q,JSON.stringify(U[Q])):I.append(Q,U[Q]))}),I.append("status","draft"),i?(console.log("‚úÖ Adding thumbnail file to FormData:",{name:i.name,size:i.size,type:i.type,lastModified:i.lastModified}),I.append("thumbnail",i)):console.log("‚ùå No thumbnail file to add"),c.length>0&&I.append("screenshots",JSON.stringify(c)),I.append("tags",JSON.stringify(m)),I.append("categories",JSON.stringify(f)),I.append("techStack",JSON.stringify(y)),console.log("Submitting product with data:",{title:U.title,websiteUrl:U.websiteUrl,developerName:U.developerName,price:U.price,hasThumbnail:!!i,thumbnailFile:i,screenshotsCount:c.length,screenshots:c}),console.log("üöÄ Submitting product to API..."),console.log("üì§ FormData being sent:",{hasThumbnail:I.has("thumbnail"),thumbnailFile:I.get("thumbnail"),formDataKeys:Array.from(I.keys())});const J=await Xt.createProduct(I);console.log("üì° API Response:",J.data),J.data.success?(B.success("Product created successfully!"),console.log("‚úÖ Product created with data:",J.data.data),b("/admin/products")):(console.log("‚ùå Product creation failed:",J.data.message),B.error(J.data.message||"Failed to create product"))}catch(I){console.error("Error creating product:",I),(D=($=I.response)==null?void 0:$.data)!=null&&D.message?B.error(`Failed to create product: ${I.response.data.message}`):B.error("Failed to create product. Please try again.")}finally{r(!1)}},_=async()=>{var $,D,I,J,Q,te,ee,re;const U=s.getFieldsValue();r(!0);try{if(!U.title){B.error("Product title is required for preview");return}if(!U.websiteUrl){B.error("Website URL is required for preview");return}try{new URL(U.websiteUrl)}catch{B.error("Please enter a valid website URL");return}const se=new FormData;Object.keys(U).forEach(fe=>{U[fe]!==void 0&&U[fe]!==null&&fe!=="status"&&se.append(fe,U[fe])}),se.append("previewSaved","true"),se.append("status","draft"),U.price||se.append("price","0"),U.developerName||se.append("developerName","TBD"),i&&se.append("thumbnail",i),c.length>0&&se.append("screenshots",JSON.stringify(c)),se.append("tags",JSON.stringify(m)),se.append("categories",JSON.stringify(f)),se.append("techStack",JSON.stringify(y));const he=await Xt.createProduct(se);he.data.success?B.success("Product saved as preview!"):B.error(he.data.message||"Failed to save preview")}catch(se){console.error("Error saving preview:",se),console.error("Error response:",($=se.response)==null?void 0:$.data);let he="Failed to save preview. Please try again.";(I=(D=se.response)==null?void 0:D.data)!=null&&I.message?he=se.response.data.message:(Q=(J=se.response)==null?void 0:J.data)!=null&&Q.errors?he=`Validation error: ${se.response.data.errors.join(", ")}`:((te=se.response)==null?void 0:te.status)===401?he="Authentication required. Please log in again.":((ee=se.response)==null?void 0:ee.status)===403?he="Access denied. Admin privileges required.":((re=se.response)==null?void 0:re.status)===400?he="Invalid data. Please check your inputs.":se.code==="NETWORK_ERROR"?he="Network error. Please check your connection.":se.message.includes("timeout")&&(he="Request timeout. Please try again."),B.error(he)}finally{r(!1)}},A=async()=>{var $,D,I,J,Q,te,ee,re;const U=s.getFieldsValue();r(!0);try{if(!U.title){B.error("Product title is required for publishing");return}if(!U.websiteUrl){B.error("Website URL is required for publishing");return}if(!U.developerName){B.error("Developer name is required for publishing");return}if(!U.price||U.price<=0){B.error("Valid price is required for publishing");return}try{new URL(U.websiteUrl)}catch{B.error("Please enter a valid website URL");return}if(!w||(R==null?void 0:R.role)!=="admin"){B.error("You must be logged in as an admin to publish products");return}const se=new FormData;Object.keys(U).forEach(fe=>{U[fe]!==void 0&&U[fe]!==null&&fe!=="status"&&se.append(fe,U[fe])}),se.append("previewSaved","true"),se.append("status","published"),i&&se.append("thumbnail",i),c.length>0&&se.append("screenshots",JSON.stringify(c)),se.append("tags",JSON.stringify(m)),se.append("categories",JSON.stringify(f)),se.append("techStack",JSON.stringify(y));const he=await Xt.createProduct(se);he.data.success?(B.success("Product published successfully! It will now appear on the homepage and product listing page."),b("/products")):B.error(he.data.message||"Failed to publish product")}catch(se){console.error("Error publishing product:",se),console.error("Error response:",($=se.response)==null?void 0:$.data);let he="Failed to publish product. Please try again.";(I=(D=se.response)==null?void 0:D.data)!=null&&I.message?he=se.response.data.message:(Q=(J=se.response)==null?void 0:J.data)!=null&&Q.errors?he=`Validation error: ${se.response.data.errors.join(", ")}`:((te=se.response)==null?void 0:te.status)===401?(he="Authentication required. Please log in again.",b("/login")):((ee=se.response)==null?void 0:ee.status)===403?he="Access denied. Admin privileges required.":((re=se.response)==null?void 0:re.status)===400?he="Invalid data. Please check your inputs.":se.code==="NETWORK_ERROR"?he="Network error. Please check your connection.":se.message.includes("timeout")&&(he="Request timeout. Please try again."),B.error(he)}finally{r(!1)}},v=U=>{const{file:$,fileList:D}=U;if(console.log("üîç Thumbnail upload info:",{file:{name:$.name,size:$.size,type:$.type,status:$.status,originFileObj:!!$.originFileObj,rawFile:$.rawFile},fileList:D.length}),$.status==="uploading"){console.log("‚è≥ File is uploading...");return}if($.status==="done"||$.status==="removed")$.status==="done"?(console.log("‚úÖ File upload completed"),l($.originFileObj||$),B.success("Thumbnail uploaded successfully")):(console.log("üóëÔ∏è File removed"),l(null),B.info("Thumbnail removed"));else if($.status==="error")console.log("‚ùå File upload failed"),B.error("Thumbnail upload failed");else{console.log("üìÅ File selected, processing...");const I=$.originFileObj||$.rawFile||$;I&&I instanceof File?(console.log("‚úÖ File object found, setting thumbnail file"),l(I),B.success("Thumbnail selected successfully")):(console.log("‚ö†Ô∏è No valid file object found:",{originFileObj:$.originFileObj,rawFile:$.rawFile,file:$,isFile:$ instanceof File}),B.warning("File selection failed - invalid file object"))}},H=U=>{const{file:$,fileList:D}=U;if(console.log("üîç Screenshots upload info:",{file:{name:$.name,size:$.size,type:$.type,status:$.status,originFileObj:!!$.originFileObj,rawFile:$.rawFile},fileList:D.length}),$.status==="uploading"){console.log("‚è≥ Screenshot is uploading...");return}if($.status==="done"){console.log("‚úÖ Screenshot upload completed");const I=[...c,$.originFileObj||$];u(I),B.success("Screenshot uploaded successfully")}else if($.status==="error")console.log("‚ùå Screenshot upload failed"),B.error("Screenshot upload failed");else{console.log("üìÅ Screenshot selected, processing...");const I=$.originFileObj||$.rawFile||$;if(I&&I instanceof File){console.log("‚úÖ Screenshot file object found, adding to screenshots");const J=[...c,I];u(J),B.success("Screenshot selected successfully")}else console.log("‚ö†Ô∏è No valid screenshot file object found:",{originFileObj:$.originFileObj,rawFile:$.rawFile,file:$,isFile:$ instanceof File}),B.warning("Screenshot selection failed - invalid file object")}},q=U=>{d(m.filter($=>$!==U))},Y=U=>{g(f.filter($=>$!==U))},ne=U=>{h(y.filter($=>$!==U))};return!w||(R==null?void 0:R.role)!=="admin"?e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You must be logged in as an admin to access this page."}),e.jsx(L,{type:"primary",onClick:()=>b("/login"),children:"Go to Login"})]}):e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:"2rem",minHeight:"100vh"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx(xj,{level:2,children:"Add New Product"}),e.jsx(yj,{children:"Create a new product listing with website preview and prebook functionality."})]}),e.jsx(G,{form:s,layout:"vertical",onFinish:E,initialValues:{currency:"USD",trending:!1,status:"draft"},children:e.jsxs("div",{style:{display:"flex",gap:"24px",height:"calc(100vh - 200px)",flexDirection:window.innerWidth<768?"column":"row"},children:[e.jsxs("div",{style:{flex:"1",overflowY:"auto",paddingRight:window.innerWidth<768?"0":"12px",maxHeight:window.innerWidth<768?"none":"calc(100vh - 200px)"},children:[e.jsxs(V,{title:"Product Information",style:{marginBottom:"1.5rem"},children:[e.jsx(gt,{message:"Auto-Fetch Feature",description:"When you enter a website URL, the product title will be automatically fetched from the website's title tag. This helps speed up product creation.",type:"info",showIcon:!0,style:{marginBottom:"1rem"}}),e.jsx(G.Item,{name:"title",label:"Product Title",rules:[{required:!0,message:"Please enter product title"}],children:e.jsx(ue,{placeholder:"Enter product title (or will be auto-filled from website URL)",onChange:O,suffix:T?e.jsx(rt,{size:"small"}):null})}),e.jsx(G.Item,{name:"slug",label:"URL Slug",children:e.jsx(ue,{placeholder:"Auto-generated from title",disabled:!0})}),e.jsx(G.Item,{name:"websiteUrl",label:"Website URL",rules:[{required:!0,message:"Please enter website URL"},{type:"url",message:"Please enter a valid URL"}],children:e.jsx(ue,{placeholder:"https://example.com",prefix:e.jsx(vs,{}),onChange:F})}),e.jsx(G.Item,{name:"websiteTitle",label:"Website Title",children:e.jsx(ue,{placeholder:"Auto-generated from website"})}),e.jsx(G.Item,{name:"websiteLink",label:"Website Link",children:e.jsx(ue,{placeholder:"https://example.com",prefix:e.jsx(Il,{})})})]}),e.jsxs(V,{title:"Description",style:{marginBottom:"1.5rem"},children:[e.jsx(gt,{message:"Auto-generate description from website",description:"Click the button below to automatically scrape and generate a description from the website URL.",type:"info",showIcon:!0,style:{marginBottom:"1rem"}}),e.jsx(L,{type:"primary",icon:e.jsx(vs,{}),onClick:N,loading:n,style:{marginBottom:"1rem"},children:"Generate Description from Website"}),e.jsx(G.Item,{name:"descriptionAuto",label:"Auto-generated Description",children:e.jsx(ud,{rows:6,placeholder:"Description will be generated automatically"})}),e.jsx(G.Item,{name:"descriptionManual",label:"Manual Description",extra:"Override auto-generated description if needed",children:e.jsx(ud,{rows:6,placeholder:"Enter custom description"})})]}),e.jsxs(V,{title:"Product Images",style:{marginBottom:"1.5rem"},children:[i&&e.jsx(gt,{message:"Thumbnail Selected",description:`File: ${i.name} (${Math.round(i.size/1024)}KB)`,type:"success",showIcon:!0,style:{marginBottom:"16px"}}),e.jsx(G.Item,{name:"thumbnail",label:"Thumbnail Image",rules:[{required:!0,message:"Please upload thumbnail"}],children:e.jsx(dr,{name:"thumbnail",listType:"picture-card",showUploadList:!0,beforeUpload:U=>(console.log("üîç Before upload file:",{name:U.name,size:U.size,type:U.type,isFile:U instanceof File}),!1),onChange:v,fileList:i?[{uid:"1",name:i.name||"thumbnail",status:"done",url:URL.createObjectURL(i),thumbUrl:URL.createObjectURL(i)}]:[],onRemove:()=>(console.log("üóëÔ∏è Removing thumbnail file"),l(null),!0),accept:"image/*",maxCount:1,customRequest:({file:U,onSuccess:$})=>{console.log("üîß Custom request called with file:",U),setTimeout(()=>{$("ok")},0)},children:e.jsxs("div",{children:[e.jsx(hs,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),c.length>0&&e.jsx(gt,{message:"Screenshots Selected",description:`${c.length} screenshot(s) selected`,type:"info",showIcon:!0,style:{marginBottom:"16px"}}),e.jsx(G.Item,{name:"screenshots",label:"Screenshots",children:e.jsx(dr,{name:"screenshots",listType:"picture-card",multiple:!0,showUploadList:!0,beforeUpload:U=>(console.log("üîç Before screenshots upload:",{name:U.name,size:U.size,type:U.type,isFile:U instanceof File}),!1),onChange:H,fileList:c.map((U,$)=>({uid:$.toString(),name:U.name||`screenshot-${$}`,status:"done",url:URL.createObjectURL(U),thumbUrl:URL.createObjectURL(U)})),onRemove:U=>{console.log("üóëÔ∏è Removing screenshot:",U.uid);const $=parseInt(U.uid);return u(D=>{const I=[...D];return I.splice($,1),I}),!0},accept:"image/*",maxCount:5,customRequest:({file:U,onSuccess:$})=>{console.log("üîß Custom screenshot request called with file:",U),setTimeout(()=>{$("ok")},0)},children:e.jsxs("div",{children:[e.jsx(hs,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})]}),e.jsx(V,{title:"Pricing",style:{marginBottom:"1.5rem"},children:e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"price",label:"Price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(pi,{style:{width:"100%"},placeholder:"0.00",min:0,step:.01,formatter:U=>`$ ${U}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:U=>U.replace(/\$\s?|(,*)/g,"")})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"currency",label:"Currency",children:e.jsxs(Pe,{children:[e.jsx(qr,{value:"USD",children:"USD"}),e.jsx(qr,{value:"EUR",children:"EUR"}),e.jsx(qr,{value:"GBP",children:"GBP"})]})})})]})}),e.jsxs(V,{title:"Tags and Categories",style:{marginBottom:"1.5rem"},children:[e.jsxs(G.Item,{label:"Tags",children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx(Z,{wrap:!0,children:m.map(U=>e.jsx(le,{closable:!0,onClose:()=>q(U),color:"blue",children:U},U))})}),e.jsx(Pe,{mode:"multiple",placeholder:"Select tags",style:{width:"100%"},value:m,onChange:d,options:x.map(U=>({label:U,value:U})),showSearch:!0,filterOption:(U,$)=>$.label.toLowerCase().includes(U.toLowerCase())})]}),e.jsxs(G.Item,{label:"Categories",children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx(Z,{wrap:!0,children:f.map(U=>e.jsx(le,{closable:!0,onClose:()=>Y(U),color:"green",children:U},U))})}),e.jsx(Pe,{mode:"multiple",placeholder:"Select categories",style:{width:"100%"},value:f,onChange:g,options:P.map(U=>({label:U,value:U})),showSearch:!0,filterOption:(U,$)=>$.label.toLowerCase().includes(U.toLowerCase())})]}),e.jsxs(G.Item,{label:"Tech Stack",children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx(Z,{wrap:!0,children:y.map(U=>e.jsx(le,{closable:!0,onClose:()=>ne(U),color:"purple",children:U},U))})}),e.jsx(Pe,{mode:"multiple",placeholder:"Select tech stack",style:{width:"100%"},value:y,onChange:h,options:S.map(U=>({label:U,value:U})),showSearch:!0,filterOption:(U,$)=>$.label.toLowerCase().includes(U.toLowerCase())})]})]}),e.jsx(V,{title:"Developer Information",style:{marginBottom:"1.5rem"},children:e.jsx(G.Item,{name:"developerName",label:"Developer Name",rules:[{required:!0,message:"Please select developer name"}],children:e.jsx(Pe,{placeholder:"Select developer name",style:{width:"100%"},showSearch:!0,filterOption:(U,$)=>$.children.toLowerCase().includes(U.toLowerCase()),options:M.map(U=>({label:U,value:U}))})})}),e.jsxs(V,{title:"Settings",children:[e.jsx(G.Item,{name:"trending",label:"Trending",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{name:"status",label:"Status",children:e.jsxs(Pe,{children:[e.jsx(qr,{value:"draft",children:"Draft"}),e.jsx(qr,{value:"published",children:"Published"}),e.jsx(qr,{value:"archived",children:"Archived"})]})})]})]}),e.jsxs("div",{style:{width:window.innerWidth<768?"100%":"350px",position:window.innerWidth<768?"static":"sticky",top:"0",height:"fit-content",maxHeight:window.innerWidth<768?"none":"calc(100vh - 200px)",overflowY:"auto",order:window.innerWidth<768?"-1":"0"},children:[e.jsx(V,{title:"Actions",style:{marginBottom:"1.5rem"},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(L,{type:"default",icon:e.jsx(it,{}),onClick:()=>{const U=s.getFieldValue("websiteUrl");if(U){const $=window.open(U,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,status=no");$?$.focus():B.error("Popup blocked. Please allow popups for this site.")}else B.error("Please enter a website URL first")},style:{width:"100%"},block:!0,children:"Preview Website"}),e.jsx(L,{type:"default",icon:e.jsx(Nn,{}),onClick:_,loading:t,style:{width:"100%"},block:!0,children:"Save as Preview"}),e.jsx(L,{type:"primary",icon:e.jsx(Nn,{}),htmlType:"submit",loading:t,style:{width:"100%"},block:!0,children:"Create Product (Draft)"}),e.jsx(L,{type:"primary",icon:e.jsx(it,{}),onClick:A,loading:t,style:{width:"100%",background:"#52c41a",borderColor:"#52c41a"},block:!0,children:"Publish Product"})]})}),e.jsxs(V,{title:"Status",children:[e.jsx(G.Item,{name:"previewSaved",label:"Preview Saved",valuePropName:"checked",children:e.jsx(dt,{disabled:!0})}),e.jsx(gt,{message:"Publishing",description:"When you publish a product, it will immediately appear on the homepage and be visible to all users.",type:"info",showIcon:!0,style:{marginTop:"1rem"}})]})]})]})})]})})},{Title:Ar,Text:Rt,Paragraph:hd}=Fe,{Search:bj}=ue,{Option:Ns}=Pe,{TabPane:no}=Yt,vj=()=>{var fe,ke,me;const{user:s,isAuthenticated:t}=qe(),r=Je(),{message:n}=$t.useApp(),[o,i]=p.useState([]),[l,c]=p.useState(!0),[u,m]=p.useState(null),[d,f]=p.useState(""),[g,y]=p.useState("all"),[h,x]=p.useState("all"),[P,S]=p.useState({current:1,pageSize:10,total:0}),[M,j]=p.useState([]),[z,T]=p.useState(!1),[k,R]=p.useState(!1),[w,b]=p.useState(null),[C,O]=p.useState(null),[F]=G.useForm(),[N,E]=p.useState({totalProducts:0,publishedProducts:0,draftProducts:0,trendingProducts:0,previewSavedProducts:0,totalRevenue:0});p.useEffect(()=>{const X=setTimeout(()=>{_()},100);return()=>clearTimeout(X)},[P.current,P.pageSize]),p.useEffect(()=>{if(t&&(s==null?void 0:s.role)==="admin"){console.log("Admin authenticated, fetching products...");const X=setTimeout(()=>{_()},100);return()=>clearTimeout(X)}},[t,s]);const _=async()=>{var X,pe,je,ae,Ce,Te,Ie,Ae,we,Be,$e,Xe,Ve,_e,Ne,ot;if(l){console.log("Products fetch already in progress, skipping...");return}c(!0),m(null);try{const Oe=localStorage.getItem("adminToken")||localStorage.getItem("accessToken")||localStorage.getItem("token"),Ct=localStorage.getItem("adminUser");if(console.log("Fetching admin products...",{isAuthenticated:t,userRole:s==null?void 0:s.role,hasToken:!!Oe,hasAdminUser:!!Ct,tokenLength:(Oe==null?void 0:Oe.length)||0,pagination:P.current,pageSize:P.pageSize}),!Oe){console.error("No admin token found - redirecting to login"),n.error("Authentication required. Please log in as admin."),r("/admin/login"),c(!1);return}if(!t||(s==null?void 0:s.role)!=="admin")if(Ct)try{if(JSON.parse(Ct).role==="admin")console.log("Found admin user in localStorage, proceeding with admin API call");else{console.warn("Stored user is not admin, redirecting to login"),r("/admin/login"),c(!1);return}}catch(at){console.error("Error parsing admin user:",at),r("/admin/login"),c(!1);return}else{console.warn("No admin authentication found - redirecting to login"),n.error("Admin authentication required."),r("/admin/login"),c(!1);return}const ut={page:P.current,limit:P.pageSize,...d&&d.trim()!==""&&{q:d.trim()},...g!=="all"&&{status:g},...h!=="all"&&{trending:h==="true"}};console.log("Admin products params:",ut);const tt=await Xt.getAdminProducts(ut);if(console.log("Admin products response:",tt.data),tt.data.success){console.log("‚úÖ Admin products API call successful!");const at=((X=tt.data.data)==null?void 0:X.products)||[],Ws=((pe=tt.data.data)==null?void 0:pe.pagination)||{};(!at||at.length===0)&&console.warn("No products returned from API"),i(at),S(mt=>({...mt,total:Ws.total||at.length}));const Xs=at.filter(mt=>mt.status==="published").length,ps=at.filter(mt=>mt.status==="draft").length,qs=at.filter(mt=>mt.trending).length,fn=at.filter(mt=>mt.previewSaved).length,fs=at.reduce((mt,ks)=>mt+(ks.price||0),0);E({totalProducts:Ws.total||at.length,publishedProducts:Xs,draftProducts:ps,trendingProducts:qs,previewSavedProducts:fn,totalRevenue:fs}),console.log("Products fetched successfully:",at.length,"items")}else{console.error("Admin products API returned unsuccessful response:",tt.data);const at=tt.data.message||"Failed to fetch products. Please try again.";m(at),n.error(at),i([]),E({totalProducts:0,publishedProducts:0,draftProducts:0,trendingProducts:0,previewSavedProducts:0,totalRevenue:0})}}catch(Oe){m(((ae=(je=Oe.response)==null?void 0:je.data)==null?void 0:ae.message)||Oe.message||"Failed to fetch products"),console.error("Error fetching products:",Oe),console.error("Error response:",(Ce=Oe.response)==null?void 0:Ce.data),console.error("Error status:",(Te=Oe.response)==null?void 0:Te.status),console.error("Error message:",Oe.message),((Ie=Oe.response)==null?void 0:Ie.status)===401?(console.error("Authentication failed (401) - clearing tokens and redirecting"),localStorage.removeItem("accessToken"),localStorage.removeItem("token"),localStorage.removeItem("adminToken"),localStorage.removeItem("user"),localStorage.removeItem("adminUser"),n.error("Authentication failed. Please log in again."),r("/admin/login")):((Ae=Oe.response)==null?void 0:Ae.status)===403?(console.error("Access denied (403) - Admin privileges required"),n.error("Access denied. Admin privileges required."),r("/admin/login")):((we=Oe.response)==null?void 0:we.status)===500?(console.error("Server error (500):",(Be=Oe.response)==null?void 0:Be.data),n.error("Server error. Please try again later or contact support.")):Oe.code==="ERR_NETWORK"||Oe.code==="NETWORK_ERROR"||!Oe.response?(console.error("Network error:",{code:Oe.code,message:Oe.message,url:($e=Oe.config)==null?void 0:$e.url,baseURL:(Xe=Oe.config)==null?void 0:Xe.baseURL}),n.error("Network error. Please check your connection and ensure the backend server is running at http://localhost:7000")):(console.error("Unknown error:",{status:(Ve=Oe.response)==null?void 0:Ve.status,data:(_e=Oe.response)==null?void 0:_e.data,message:Oe.message}),n.error(`Unable to fetch products: ${((ot=(Ne=Oe.response)==null?void 0:Ne.data)==null?void 0:ot.message)||Oe.message||"Unknown error"}`)),i([])}finally{c(!1)}},A=X=>{f(X),S(pe=>({...pe,current:1})),_()},v=(X,pe)=>{X==="status"?y(pe):X==="trending"&&x(pe),S(je=>({...je,current:1})),_()},H=X=>{S(X)},q=X=>{O(X),R(!0)},Y=X=>{b(X),F.setFieldsValue({title:X.title,price:X.price,status:X.status,trending:X.trending,developerName:X.developerName}),T(!0)},ne=async X=>{try{const pe={...X,title:`${X.title} (Copy)`,slug:`${X.slug}-copy-${Date.now()}`,status:"draft"},je=await Xt.createProduct(pe);je.data.success?(n.success("Product duplicated successfully!"),_()):n.error(je.data.message||"Failed to duplicate product")}catch(pe){console.error("Error duplicating product:",pe),n.error("Failed to duplicate product. Please try again.")}},U=async X=>{var pe,je,ae,Ce,Te,Ie;try{console.log("Updating product:",w._id,X);const Ae=await Xt.updateProduct(w._id,X);console.log("Update response:",Ae.data),Ae.data.success?(n.success("Product updated successfully!"),T(!1),_()):(console.error("Update failed:",Ae.data.message),n.error(Ae.data.message||"Failed to update product"))}catch(Ae){console.error("Error updating product:",Ae),console.error("Error details:",{message:Ae.message,response:(pe=Ae.response)==null?void 0:pe.data,status:(je=Ae.response)==null?void 0:je.status}),(Ce=(ae=Ae.response)==null?void 0:ae.data)!=null&&Ce.message?n.error(`Failed to update product: ${Ae.response.data.message}`):(Ie=(Te=Ae.response)==null?void 0:Te.data)!=null&&Ie.errors?n.error(`Validation error: ${Ae.response.data.errors.join(", ")}`):n.error("Failed to update product. Please try again.")}},$=async X=>{var pe,je,ae;try{console.log("üóëÔ∏è Deleting product:",X),console.log("üóëÔ∏è API URL:","http://localhost:7000/api"),console.log("üóëÔ∏è Full URL:",`http://localhost:7000/api/admin/products/${X}`);const Ce=await Xt.deleteProduct(X);console.log("üóëÔ∏è Delete response:",Ce),Ce.data.success?(n.success("Product deleted successfully!"),_()):n.error(Ce.data.message||"Failed to delete product")}catch(Ce){console.error("Error deleting product:",Ce),console.error("Error details:",(pe=Ce.response)==null?void 0:pe.data),console.error("Error status:",(je=Ce.response)==null?void 0:je.status),console.error("Error URL:",(ae=Ce.config)==null?void 0:ae.url),n.error("Failed to delete product. Please try again.")}},D=async()=>{try{const X=M.map(pe=>Xt.deleteProduct(pe));await Promise.all(X),n.success(`${M.length} products deleted successfully!`),j([]),_()}catch(X){console.error("Error deleting products:",X),n.error("Failed to delete selected products. Please try again.")}},I=async()=>{console.log("Refreshing products...");try{if(!t||(s==null?void 0:s.role)!=="admin"){n.error("Please log in as admin to refresh products.");return}if(!(localStorage.getItem("accessToken")||localStorage.getItem("token"))){n.error("Please log in to access admin features."),r("/admin/login");return}await _(),n.success("Products refreshed successfully!")}catch(X){console.error("Error refreshing products:",X),n.error("Failed to refresh products. Please try again.")}},J=async X=>{try{if(console.log("Saving product as preview:",X.title),!t||(s==null?void 0:s.role)!=="admin"){n.error("Please log in as admin to save products.");return}const pe=localStorage.getItem("accessToken")||localStorage.getItem("token");if(!pe){n.error("Please log in to access admin features."),r("/admin/login");return}const je=await fetch(`http://localhost:7000/api/admin/products/${X._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`},body:JSON.stringify({status:"draft",previewSaved:!0})});if(!je.ok)throw new Error(`HTTP ${je.status}: ${je.statusText}`);const ae=await je.json();ae.success?(n.success("Product saved as preview successfully!"),await _()):n.error(ae.message||"Failed to save product as preview.")}catch(pe){console.error("Error saving product as preview:",pe),n.error("Failed to save product as preview. Please try again.")}},Q=async X=>{try{if(console.log("Publishing product:",X.title),!t||(s==null?void 0:s.role)!=="admin"){n.error("Please log in as admin to publish products.");return}const pe=localStorage.getItem("accessToken")||localStorage.getItem("token");if(!pe){n.error("Please log in to access admin features."),r("/admin/login");return}const je=await fetch(`http://localhost:7000/api/admin/products/${X._id}/publish`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`},body:JSON.stringify({status:"published",notifyUsers:!0,notifyAdmins:!0})});if(!je.ok)throw new Error(`HTTP ${je.status}: ${je.statusText}`);const ae=await je.json();ae.success?(n.success("Product published successfully! Notifications sent to users and admins."),await _()):n.error(ae.message||"Failed to publish product.")}catch(pe){console.error("Error publishing product:",pe),n.error("Failed to publish product. Please try again.")}},te=X=>{const pe={published:"green",draft:"orange",archived:"red"},je=String(X||"unknown");return pe[je]||"default"},ee=X=>{const pe={published:e.jsx(Ee,{}),draft:e.jsx(Ze,{}),archived:e.jsx(rn,{})},je=String(X||"unknown");return pe[je]||e.jsx(Ze,{})},re=X=>[{key:"preview",icon:e.jsx(it,{}),label:"Preview",onClick:()=>q(X)},{key:"edit",icon:e.jsx(qt,{}),label:"Edit",onClick:()=>Y(X)},{key:"savePreview",icon:e.jsx(Ze,{}),label:"Save as Preview",onClick:()=>J(X)},{key:"publish",icon:e.jsx(Ee,{}),label:"Publish Product",onClick:()=>Q(X)},{key:"duplicate",icon:e.jsx(nc,{}),label:"Duplicate",onClick:()=>ne(X)},{key:"view",icon:e.jsx(vs,{}),label:"View Live",onClick:()=>window.open(`/product/${X.slug}`,"_blank")},{type:"divider"},{key:"delete",icon:e.jsx(Tt,{}),label:"Delete",danger:!0,onClick:()=>$(X._id)}],se=[{title:"Product",dataIndex:"title",key:"title",width:300,render:(X,pe)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{flexShrink:0},children:pe.thumbnailUrl?e.jsx(ar,{src:`http://localhost:7000${pe.thumbnailUrl}`,alt:X,width:64,height:64,style:{borderRadius:"12px",objectFit:"cover",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3YODp+9aX7l4xGq9wB4e6B1QKiu9CknTAcXU9UCFJYCH2fAACUI2BuXJFSAYpO0WakQICBxVn8GIC9S34BGyAbJQ8HqkyMwmI2gBZxJAiHA+wW7SDx2BuHQkDo7mDDIIBWj+7G1pC5mNjBZAKqss8QwQrNvzqSTAPRrFElPNYQ2gApi0lTuJUHt6aA2YlGQ9haC+dX1Cew1HEwUGJ9MwJnCrqS60S8HA4JKJYGdSUSALpJ3OsFB7M4cBwJjeQrR4gBGB7w=="}):e.jsx(We,{size:64,icon:e.jsx(vt,{}),style:{borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"15px",marginBottom:"6px",color:"#1f2937",lineHeight:"1.4"},children:X}),e.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Re,{style:{fontSize:"12px"}}),"by ",pe.developerName||"Unknown"]}),e.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"8px"},children:pe.websiteUrl?e.jsxs("a",{href:pe.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"none",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Il,{style:{fontSize:"11px"}}),"Visit Website"]}):e.jsx("span",{style:{color:"#9ca3af"},children:"No website"})}),e.jsx("div",{children:pe.tags&&pe.tags.length>0&&e.jsxs(Z,{size:"small",wrap:!0,children:[pe.tags.slice(0,3).map(je=>e.jsx(le,{size:"small",color:"blue",style:{borderRadius:"4px",fontSize:"11px",padding:"2px 6px"},children:je},je)),pe.tags.length>3&&e.jsxs(le,{size:"small",color:"default",style:{borderRadius:"4px",fontSize:"11px",padding:"2px 6px"},children:["+",pe.tags.length-3]})]})})]})]})},{title:"Status",dataIndex:"status",key:"status",width:140,render:(X,pe)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx(le,{color:te(X),icon:ee(X),style:{borderRadius:"6px",fontSize:"12px",fontWeight:"500",padding:"4px 8px",border:"none"},children:String(X||"unknown").toUpperCase()}),pe.previewSaved&&e.jsx(le,{color:"blue",icon:e.jsx(Ze,{}),size:"small",style:{borderRadius:"4px",fontSize:"10px",fontWeight:"500",padding:"2px 6px",border:"none"},children:"PREVIEW SAVED"})]})},{title:"Price",dataIndex:"price",key:"price",width:100,render:(X,pe)=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669",marginBottom:"2px"},children:["$",X]}),e.jsx("div",{style:{fontSize:"11px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:pe.currency||"USD"})]})},{title:"Trending",dataIndex:"trending",key:"trending",width:100,render:X=>e.jsx("div",{style:{textAlign:"center"},children:X?e.jsx(le,{color:"red",icon:e.jsx(Qr,{}),style:{borderRadius:"6px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",border:"none",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",color:"white"},children:"TRENDING"}):e.jsx(le,{style:{borderRadius:"6px",fontSize:"11px",fontWeight:"500",padding:"4px 8px",border:"1px solid #e5e7eb",background:"#f9fafb",color:"#6b7280"},children:"Normal"})})},{title:"Views",dataIndex:"totalVisits",key:"totalVisits",width:80,render:X=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"4px 8px",background:"#f8fafc",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx(it,{style:{color:"#6b7280",fontSize:"14px"}}),e.jsx(Rt,{style:{fontWeight:"600",color:"#374151",fontSize:"13px"},children:X||0})]})},{title:"Rating",dataIndex:"averageRating",key:"averageRating",width:120,render:(X,pe)=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"4px"},children:e.jsx(_r,{disabled:!0,value:X||0,style:{fontSize:"14px"},allowHalf:!0})}),e.jsxs(Rt,{style:{fontSize:"11px",color:"#6b7280",fontWeight:"500"},children:["(",pe.reviewsCount||0," reviews)"]})]})},{title:"Created",dataIndex:"createdAt",key:"createdAt",width:120,render:X=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"2px"},children:new Date(X).toLocaleDateString()}),e.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",fontWeight:"400"},children:new Date(X).toLocaleTimeString()})]})},{title:"Actions",key:"actions",width:120,render:(X,pe)=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"4px"},children:[e.jsx(Gt,{title:"Preview Product",children:e.jsx(L,{size:"small",icon:e.jsx(it,{}),onClick:()=>q(pe),style:{borderRadius:"6px",border:"1px solid #e5e7eb",background:"#f9fafb",color:"#374151"}})}),e.jsx(Gt,{title:"Edit Product",children:e.jsx(L,{size:"small",icon:e.jsx(qt,{}),onClick:()=>Y(pe),style:{borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white"}})}),e.jsx(Er,{menu:{items:re(pe)},trigger:["click"],children:e.jsx(L,{size:"small",icon:e.jsx(nn,{}),style:{borderRadius:"6px",border:"1px solid #d1d5db",background:"white",color:"#6b7280"}})})]})}],he={selectedRowKeys:M,onChange:j,getCheckboxProps:X=>({name:X.title})};return!t||(s==null?void 0:s.role)!=="admin"?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f5f5f5"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Ar,{level:2,children:"Access Denied"}),e.jsx(Rt,{children:"Please login as an admin to access this page."})]})}):u&&!l&&o.length===0?e.jsx(ts,{userRole:"admin",children:e.jsx("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh"},children:e.jsx(gt,{message:"Error Loading Products",description:u,type:"error",showIcon:!0,action:e.jsx(L,{size:"small",onClick:_,loading:l,children:"Retry"}),style:{marginBottom:a.spacing.lg}})})}):e.jsx($t,{children:e.jsx(ts,{userRole:"admin",children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",maxWidth:"100%",overflow:"hidden",fontFamily:a.typography.fontFamily},children:[e.jsx("div",{style:{marginBottom:a.spacing.xl,background:a.colors.card.background,padding:a.spacing.lg,borderRadius:a.borderRadius.md,boxShadow:a.shadows.md,border:`1px solid ${a.colors.card.border}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:a.spacing.md},children:[e.jsxs("div",{children:[e.jsxs(Ar,{level:2,style:{margin:0,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(vt,{style:{marginRight:a.spacing.md,color:a.colors.primary}}),"Products Management"]}),e.jsx(Rt,{type:"secondary",style:{fontSize:a.typography.fontSize.body,marginTop:a.spacing.sm,display:"block",color:a.colors.text.secondary},children:"Manage your product catalog, view analytics, and track performance"})]}),e.jsx("div",{children:e.jsx(L,{type:"primary",size:"large",icon:e.jsx(hs,{}),onClick:()=>r("/admin/products/new"),style:{borderRadius:a.borderRadius.md,height:"40px",paddingLeft:a.spacing.lg,paddingRight:a.spacing.lg,fontWeight:a.typography.fontWeight.medium,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Add New Product"})})]})}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Products"}),value:N.totalProducts,valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(vt,{style:{color:a.colors.primary}})})})}),e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Published"}),value:N.publishedProducts,valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Ee,{style:{color:a.colors.success}})})})}),e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Draft"}),value:N.draftProducts,valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Ze,{style:{color:a.colors.warning}})})})}),e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Preview Saved"}),value:N.previewSavedProducts,valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Ze,{style:{color:a.colors.primary}})})})}),e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Trending"}),value:N.trendingProducts,valueStyle:{color:a.colors.error,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(Qr,{style:{color:a.colors.error}})})})}),e.jsx(W,{xs:24,sm:12,md:8,lg:4,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsx(ve,{title:e.jsx(Rt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Revenue"}),value:N.totalRevenue,valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold},prefix:e.jsx(kt,{style:{color:a.colors.success}}),precision:2})})})]}),e.jsx(V,{style:{marginBottom:a.spacing.xl,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},styles:{body:{padding:a.spacing.lg}},children:e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],align:"middle",children:[e.jsxs(W,{xs:24,sm:12,md:8,lg:6,children:[e.jsx("div",{style:{marginBottom:a.spacing.sm},children:e.jsx(Rt,{strong:!0,style:{color:a.colors.text.primary,fontSize:a.typography.fontSize.small,fontWeight:a.typography.fontWeight.medium},children:"Search Products"})}),e.jsx(bj,{placeholder:"Search by title, developer, or tags...",allowClear:!0,onSearch:A,style:{width:"100%"},size:"large",prefix:e.jsx(Kt,{style:{color:"#9ca3af"}})})]}),e.jsxs(W,{xs:24,sm:12,md:8,lg:4,children:[e.jsx("div",{style:{marginBottom:a.spacing.sm},children:e.jsx(Rt,{strong:!0,style:{color:a.colors.text.primary,fontSize:a.typography.fontSize.small,fontWeight:a.typography.fontWeight.medium},children:"Status Filter"})}),e.jsxs(Pe,{placeholder:"All Status",style:{width:"100%"},value:g,onChange:X=>v("status",X),size:"large",children:[e.jsx(Ns,{value:"all",children:"All Status"}),e.jsx(Ns,{value:"published",children:"Published"}),e.jsx(Ns,{value:"draft",children:"Draft"}),e.jsx(Ns,{value:"archived",children:"Archived"})]})]}),e.jsxs(W,{xs:24,sm:12,md:8,lg:4,children:[e.jsx("div",{style:{marginBottom:a.spacing.sm},children:e.jsx(Rt,{strong:!0,style:{color:a.colors.text.primary,fontSize:a.typography.fontSize.small,fontWeight:a.typography.fontWeight.medium},children:"Trending Filter"})}),e.jsxs(Pe,{placeholder:"All Products",style:{width:"100%"},value:h,onChange:X=>v("trending",X),size:"large",children:[e.jsx(Ns,{value:"all",children:"All Products"}),e.jsx(Ns,{value:"true",children:"Trending"}),e.jsx(Ns,{value:"false",children:"Normal"})]})]}),e.jsxs(W,{xs:24,sm:12,md:8,lg:6,children:[e.jsx("div",{style:{marginBottom:a.spacing.sm},children:e.jsx(Rt,{strong:!0,style:{color:a.colors.text.primary,fontSize:a.typography.fontSize.small,fontWeight:a.typography.fontWeight.medium},children:"Actions"})}),e.jsxs(Z,{wrap:!0,children:[e.jsx(L,{icon:e.jsx(Mr,{}),onClick:I,loading:l,size:"large",style:{borderRadius:a.borderRadius.md},children:"Refresh"}),M.length>0&&e.jsx(tn,{title:`Delete ${M.length} selected products?`,onConfirm:D,okText:"Yes",cancelText:"No",children:e.jsxs(L,{danger:!0,icon:e.jsx(Tt,{}),size:"large",style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.error,borderColor:a.colors.error},children:["Delete (",M.length,")"]})})]})]})]})}),e.jsxs(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,overflow:"hidden",background:a.colors.card.background},styles:{body:{padding:0}},children:[e.jsx("div",{style:{padding:a.spacing.lg,borderBottom:`1px solid ${a.colors.card.border}`,background:a.colors.sidebar.background},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx(Ar,{level:4,style:{margin:0,color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold},children:"Products List"}),e.jsxs(Rt,{type:"secondary",style:{fontSize:a.typography.fontSize.small,color:a.colors.text.secondary},children:[o.length," products found"]})]}),e.jsx("div",{children:e.jsx(Rt,{type:"secondary",style:{fontSize:a.typography.fontSize.tiny,color:a.colors.text.secondary},children:"Select products to perform bulk actions"})})]})}),u&&o.length>0&&e.jsx(gt,{message:"Warning",description:u,type:"warning",showIcon:!0,closable:!0,onClose:()=>m(null),style:{marginBottom:a.spacing.md}}),e.jsx(Pt,{rowSelection:he,columns:se,dataSource:o,loading:l,rowKey:"_id",locale:{emptyText:l?e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:a.spacing.md,color:a.colors.text.secondary},children:"Loading products..."})]}):e.jsx(Ue,{description:e.jsx("span",{style:{color:a.colors.text.secondary},children:"No products found. Try adjusting your filters or add a new product."})})},pagination:{...P,showSizeChanger:!0,showQuickJumper:!0,showTotal:(X,pe)=>`${pe[0]}-${pe[1]} of ${X} products`,style:{padding:"16px 24px"}},onChange:H,scroll:{x:1200},style:{background:"white"},rowClassName:(X,pe)=>pe%2===0?"table-row-light":"table-row-dark"})]}),e.jsx(Mn,{title:"Product Preview",placement:"right",width:600,open:k,onClose:()=>R(!1),children:C&&e.jsxs("div",{children:[e.jsx("div",{style:{textAlign:"center",marginBottom:"24px"},children:C.thumbnailUrl?e.jsx(ar,{src:`http://localhost:7000${C.thumbnailUrl}`,alt:C.title,width:200,height:150,style:{borderRadius:"8px"}}):e.jsx(We,{size:200,icon:e.jsx(vt,{})})}),e.jsxs(Yt,{defaultActiveKey:"details",children:[e.jsx(no,{tab:"Details",children:e.jsxs(Ye,{column:1,bordered:!0,children:[e.jsx(Ye.Item,{label:"Title",children:C.title}),e.jsx(Ye.Item,{label:"Developer",children:C.developerName}),e.jsxs(Ye.Item,{label:"Price",children:["$",C.price," ",C.currency]}),e.jsx(Ye.Item,{label:"Status",children:e.jsx(le,{color:te(C.status),children:String(C.status||"unknown").toUpperCase()})}),e.jsx(Ye.Item,{label:"Trending",children:C.trending?e.jsx(le,{color:"red",icon:e.jsx(Qr,{}),children:"TRENDING"}):e.jsx(le,{children:"Normal"})}),e.jsx(Ye.Item,{label:"Views",children:C.totalVisits||0}),e.jsxs(Ye.Item,{label:"Rating",children:[e.jsx(_r,{disabled:!0,value:C.averageRating||0}),e.jsxs(Rt,{children:["(",C.reviewsCount||0," reviews)"]})]}),e.jsx(Ye.Item,{label:"Created",children:new Date(C.createdAt).toLocaleDateString()}),e.jsx(Ye.Item,{label:"Updated",children:new Date(C.updatedAt).toLocaleDateString()})]})},"details"),e.jsxs(no,{tab:"Description",children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx(Ar,{level:5,children:"Auto Description"}),e.jsx(hd,{children:C.descriptionAuto||"No auto description available."})]}),e.jsxs("div",{children:[e.jsx(Ar,{level:5,children:"Manual Description"}),e.jsx(hd,{children:C.descriptionManual||"No manual description available."})]})]},"description"),e.jsxs(no,{tab:"Tags & Categories",children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx(Ar,{level:5,children:"Tags"}),e.jsx(Z,{wrap:!0,children:((fe=C.tags)==null?void 0:fe.map(X=>e.jsx(le,{color:"blue",children:X},X)))||e.jsx(Rt,{type:"secondary",children:"No tags"})})]}),e.jsxs("div",{children:[e.jsx(Ar,{level:5,children:"Categories"}),e.jsx(Z,{wrap:!0,children:((ke=C.categories)==null?void 0:ke.map(X=>e.jsx(le,{color:"green",children:X},X)))||e.jsx(Rt,{type:"secondary",children:"No categories"})})]})]},"tags"),e.jsx(no,{tab:"Tech Stack",children:e.jsx(Z,{wrap:!0,children:((me=C.techStack)==null?void 0:me.map(X=>e.jsx(le,{color:"purple",children:X},X)))||e.jsx(Rt,{type:"secondary",children:"No tech stack specified"})})},"tech")]}),e.jsx("div",{style:{marginTop:"24px",textAlign:"center"},children:e.jsxs(Z,{children:[e.jsx(L,{type:"primary",icon:e.jsx(qt,{}),onClick:()=>{R(!1),Y(C)},children:"Edit Product"}),e.jsx(L,{icon:e.jsx(vs,{}),onClick:()=>window.open(`/product/${C.slug}`,"_blank"),children:"View Live"}),e.jsx(L,{icon:e.jsx(nc,{}),onClick:()=>{R(!1),ne(C)},children:"Duplicate"})]})})]})}),e.jsx(Ke,{title:"Edit Product",open:z,onCancel:()=>T(!1),footer:null,width:600,children:e.jsxs(G,{form:F,layout:"vertical",onFinish:U,children:[e.jsx(G.Item,{name:"title",label:"Product Title",rules:[{required:!0,message:"Please enter product title"}],children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"price",label:"Price",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(ue,{type:"number",prefix:"$"})}),e.jsx(G.Item,{name:"developerName",label:"Developer Name",rules:[{required:!0,message:"Please enter developer name"}],children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(Pe,{children:[e.jsx(Ns,{value:"draft",children:"Draft"}),e.jsx(Ns,{value:"published",children:"Published"}),e.jsx(Ns,{value:"archived",children:"Archived"})]})}),e.jsx(G.Item,{name:"trending",label:"Trending",valuePropName:"checked",children:e.jsx(dt,{})}),e.jsx(G.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(Z,{children:[e.jsx(L,{onClick:()=>T(!1),children:"Cancel"}),e.jsx(L,{type:"primary",htmlType:"submit",children:"Update Product"})]})})]})})]})})})},{Title:oo,Paragraph:Hr,Text:Qt}=Fe,{Option:An}=Pe,{TextArea:wj}=ue,{TabPane:Sb}=Yt,Sj=()=>{var Y,ne,U,$,D,I,J,Q,te;const{message:s}=$t.useApp(),[t,r]=p.useState(!1),[n,o]=p.useState([]),[i,l]=p.useState(null),[c,u]=p.useState(!1),[m,d]=p.useState(!1),[f]=G.useForm(),[g,y]=p.useState(!1),[h,x]=p.useState("prebooks"),[P,S]=p.useState([]),[M,j]=p.useState(!1),[z,T]=p.useState({total:0,pending:0,approved:0,rejected:0}),[k,R]=p.useState({total:0,subscriptions:0,products:0,totalAmount:0});p.useEffect(()=>{O(),w()},[]);const w=async()=>{j(!0);try{const ee=localStorage.getItem("adminToken")||localStorage.getItem("token")||localStorage.getItem("accessToken"),re=await fetch("http://localhost:7000/api/payment-tracking?limit=1000",{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});if(re.ok){const se=await re.json();if(se.success&&se.payments){S(se.payments);const he=se.payments.length,fe=se.payments.filter(X=>X.paymentType==="subscription").length,ke=se.payments.filter(X=>X.paymentType==="product").length,me=se.payments.reduce((X,pe)=>X+(pe.amount||0),0);R({total:he,subscriptions:fe,products:ke,totalAmount:me})}}else s.error("Failed to fetch payment tracking")}catch(ee){console.error("Error fetching payment tracking:",ee),s.error("Network error")}finally{j(!1)}},b=async ee=>{try{const re=localStorage.getItem("adminToken")||localStorage.getItem("token")||localStorage.getItem("accessToken"),se=await fetch(`http://localhost:7000/api/payment-tracking/${ee}/request-deletion`,{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(se.ok){const he=await se.json();s.success(he.message||"Deletion requested. 2 more confirmations required."),w()}else s.error("Failed to request deletion")}catch(re){console.error("Error requesting deletion:",re),s.error("Network error")}},C=async ee=>{try{const re=localStorage.getItem("adminToken")||localStorage.getItem("token")||localStorage.getItem("accessToken"),se=await fetch(`http://localhost:7000/api/payment-tracking/${ee}/confirm-deletion`,{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(se.ok){const he=await se.json();s.success(he.message),he.deleted&&s.success("Payment record deleted successfully after 3 confirmations."),w()}else s.error("Failed to confirm deletion")}catch(re){console.error("Error confirming deletion:",re),s.error("Network error")}},O=async()=>{var ee,re,se,he,fe,ke,me,X,pe;r(!0);try{const je=await fetch("http://localhost:7000/api/prebook/admin/all?limit=1000",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")||localStorage.getItem("token")||"mock-token"}`}});if(je.ok){const ae=await je.json();o(((ee=ae.data)==null?void 0:ee.prebooks)||[]);const Ce=((se=(re=ae.data)==null?void 0:re.prebooks)==null?void 0:se.length)||0,Te=((fe=(he=ae.data)==null?void 0:he.prebooks)==null?void 0:fe.filter(we=>we.status==="pending").length)||0,Ie=((me=(ke=ae.data)==null?void 0:ke.prebooks)==null?void 0:me.filter(we=>we.status==="approved").length)||0,Ae=((pe=(X=ae.data)==null?void 0:X.prebooks)==null?void 0:pe.filter(we=>we.status==="rejected").length)||0;T({total:Ce,pending:Te,approved:Ie,rejected:Ae})}else s.error("Failed to fetch prebooks")}catch(je){console.error("Error fetching prebooks:",je),s.error("Network error")}finally{r(!1)}},F=ee=>{l(ee),u(!0)},N=ee=>{l(ee),f.setFieldsValue({status:ee.status,adminNotes:ee.adminNotes||""}),d(!0)},E=async ee=>{try{r(!0);const re=await fetch(`http://localhost:7000/api/prebook/${i._id}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")||localStorage.getItem("token")||"mock-token"}`},body:JSON.stringify({status:ee.status,adminNotes:ee.adminNotes})});if(re.ok)y(!0),s.success(`Prebook ${ee.status} successfully!`),setTimeout(()=>{d(!1),u(!1),l(null),y(!1),O()},1500);else{const se=await re.json();s.error(se.message||"Failed to update status")}}catch(re){console.error("Error updating status:",re),s.error("Network error")}finally{r(!1)}},_=ee=>{switch(ee){case"pending":return a.colors.warning;case"reviewed":return a.colors.primary;case"accepted":return a.colors.success;case"rejected":return a.colors.error;case"completed":return a.colors.secondary;default:return a.colors.text.secondary}},A=ee=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(ee/100),v=ee=>{switch(ee){case"pending":return e.jsx(Ze,{});case"reviewed":return e.jsx(it,{});case"accepted":return e.jsx(Ee,{});case"rejected":return e.jsx(Or,{});case"completed":return e.jsx(Ee,{});default:return null}},H=[{title:"User",dataIndex:["userId","name"],key:"userName",render:(ee,re)=>{var se;return e.jsxs(Z,{children:[e.jsx(Re,{}),e.jsxs("div",{children:[e.jsx("div",{children:ee||"N/A"}),e.jsx(Qt,{type:"secondary",style:{fontSize:"12px"},children:((se=re.userId)==null?void 0:se.email)||"N/A"})]})]})}},{title:"Product",dataIndex:["productId","title"],key:"productTitle",render:(ee,re)=>{var se,he;return e.jsxs(Z,{children:[((se=re.productId)==null?void 0:se.thumbnailUrl)&&e.jsx("img",{src:re.productId.thumbnailUrl,alt:"product",style:{width:40,height:40,objectFit:"cover",borderRadius:"4px"}}),e.jsxs("div",{children:[e.jsx("div",{children:ee||"N/A"}),e.jsxs(Qt,{type:"secondary",style:{fontSize:"12px"},children:["$",((he=re.productId)==null?void 0:he.price)||"N/A"]})]})]})}},{title:"Project Details",key:"projectDetails",render:(ee,re)=>e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(lc,{})," ",re.projectType]}),e.jsxs("div",{children:[e.jsx(kt,{})," ",re.budget]}),e.jsxs("div",{children:[e.jsx(Ds,{})," ",re.timeline," days"]})]})},{title:"Contact Info",key:"contactInfo",render:(ee,re)=>{var se,he,fe;return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(Re,{})," ",((se=re.contactInfo)==null?void 0:se.name)||"N/A"]}),e.jsxs("div",{children:[e.jsx(as,{})," ",((he=re.contactInfo)==null?void 0:he.email)||"N/A"]}),e.jsxs("div",{children:[e.jsx(Ss,{})," ",((fe=re.contactInfo)==null?void 0:fe.phone)||"N/A"]})]})}},{title:"Status",dataIndex:"status",key:"status",render:ee=>e.jsx(le,{color:_(ee),icon:v(ee),style:{borderRadius:a.borderRadius.sm},children:ee==null?void 0:ee.toUpperCase()})},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:ee=>new Date(ee).toLocaleDateString()},{title:"Actions",key:"actions",render:(ee,re)=>e.jsxs(Z,{children:[e.jsx(Gt,{title:"View Details",children:e.jsx(L,{icon:e.jsx(it,{}),onClick:()=>F(re)})}),e.jsx(Gt,{title:"Change Status",children:e.jsx(L,{type:"primary",icon:v(re.status),onClick:()=>N(re),children:re.status==="pending"?"Review":"Update"})})]})}],q=[{title:"User",key:"user",width:200,render:(ee,re)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(We,{src:re.userAvatar,icon:e.jsx(Re,{}),children:re.userName?re.userName.charAt(0).toUpperCase():"U"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:re.userName||"Unknown User"}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:re.userEmail||re.username})]})]})},{title:"Payment Type",key:"paymentType",render:(ee,re)=>{var se;return e.jsx(le,{color:re.paymentType==="subscription"?a.colors.primary:re.paymentType==="product"?a.colors.success:a.colors.warning,style:{borderRadius:a.borderRadius.sm},children:(se=re.paymentType)==null?void 0:se.toUpperCase()})}},{title:"Amount",key:"amount",render:(ee,re)=>e.jsx(Qt,{strong:!0,style:{color:a.colors.success,fontSize:a.typography.fontSize.body},children:A(re.amount||0)})},{title:"Payment Details",key:"paymentDetails",width:250,render:(ee,re)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",marginBottom:"4px"},children:e.jsx(Qt,{code:!0,copyable:!0,style:{fontSize:"11px"},children:re.razorpayPaymentId||"-"})}),re.razorpayOrderId&&e.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Order: ",e.jsx(Qt,{code:!0,style:{fontSize:"11px"},children:re.razorpayOrderId})]}),re.planMonths&&e.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:["Plan: ",re.planMonths," Month",re.planMonths>1?"s":""]})]})},{title:"Status",key:"status",render:(ee,re)=>{var he;const se={completed:a.colors.success,pending:a.colors.warning,failed:a.colors.error,refunded:a.colors.primary,cancelled:a.colors.text.secondary};return e.jsx(le,{color:se[re.status]||a.colors.text.secondary,style:{borderRadius:a.borderRadius.sm},children:(he=re.status)==null?void 0:he.toUpperCase()})}},{title:"Date",key:"createdAt",render:(ee,re)=>e.jsxs("div",{children:[e.jsx("div",{children:new Date(re.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("div",{style:{fontSize:"11px",color:"#666"},children:new Date(re.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})},{title:"Actions",key:"actions",render:(ee,re)=>{const se=re.deletionRequested,he=re.deletionConfirmationCount||0;return e.jsx(Z,{children:se?he<3?e.jsx(tn,{title:`Confirm Deletion (${he}/3)?`,description:`This is confirmation ${he+1} of 3. ${3-he-1} more confirmation(s) needed.`,onConfirm:()=>C(re._id),okText:"Confirm",cancelText:"Cancel",icon:e.jsx(rn,{style:{color:"red"}}),children:e.jsxs(L,{danger:!0,size:"small",icon:e.jsx(rn,{}),children:["Confirm (",he,"/3)"]})}):e.jsx(le,{color:"red",children:"Deleted"}):e.jsx(tn,{title:"Request Deletion?",description:"This will start the 3-step deletion process. You'll need to confirm 2 more times.",onConfirm:()=>b(re._id),okText:"Yes",cancelText:"No",children:e.jsx(L,{danger:!0,size:"small",icon:e.jsx(Tt,{}),children:"Delete"})})})}}];return e.jsx($t,{children:e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsx("div",{style:{marginBottom:a.spacing.xl},children:e.jsxs(oo,{level:2,style:{color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(bs,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"Prebook Management & Payment Tracking"]})}),e.jsx(Yt,{activeKey:h,onChange:x,items:[{key:"prebooks",label:e.jsxs("span",{children:[e.jsx(bs,{})," Prebooks"]}),children:e.jsxs(e.Fragment,{children:[e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Prebooks"}),value:z.total,prefix:e.jsx(bs,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Pending"}),value:z.pending,prefix:e.jsx(Ze,{style:{color:a.colors.warning}}),valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Approved"}),value:z.approved,prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Rejected"}),value:z.rejected,prefix:e.jsx(Or,{style:{color:a.colors.error}}),valueStyle:{color:a.colors.error,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})})]}),e.jsx(V,{title:e.jsx(Qt,{strong:!0,style:{color:a.colors.text.primary},children:"All Prebook Requests"}),extra:e.jsx(L,{type:"primary",onClick:O,icon:e.jsx(bs,{}),style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Refresh"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(rt,{spinning:t,children:e.jsx(Pt,{columns:H,dataSource:n,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(ee,re)=>`${re[0]}-${re[1]} of ${ee} prebooks`}})})})]})},{key:"payments",label:e.jsxs("span",{children:[e.jsx(En,{})," Payment Tracking"]}),children:e.jsxs(e.Fragment,{children:[e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Payments"}),value:k.total,prefix:e.jsx(En,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Subscriptions"}),value:k.subscriptions,prefix:e.jsx(Ee,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Product Purchases"}),value:k.products,prefix:e.jsx(kt,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Qt,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Revenue"}),value:A(k.totalAmount||0),valueStyle:{color:a.colors.error,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})})]}),e.jsx(V,{title:e.jsx(Qt,{strong:!0,style:{color:a.colors.text.primary},children:"Payment Tracking Records"}),extra:e.jsx(L,{type:"primary",onClick:w,icon:e.jsx(En,{}),style:{borderRadius:a.borderRadius.md,backgroundColor:a.colors.primary,borderColor:a.colors.primary},children:"Refresh"}),style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(rt,{spinning:M,children:e.jsx(Pt,{dataSource:P,columns:q,rowKey:"_id",scroll:{x:1200},pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(ee,re)=>`${re[0]}-${re[1]} of ${ee} payment records`}})})})]})}]}),e.jsx(Ke,{title:"Prebook Details",open:c,onCancel:()=>u(!1),footer:[e.jsx(L,{onClick:()=>u(!1),children:"Close"},"close"),e.jsx(L,{type:"primary",loading:t,onClick:()=>{u(!1),N(i)},children:"Change Status"},"status")],width:"90%",style:{maxWidth:"1000px"},children:i&&e.jsxs("div",{children:[e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{title:"User Information",size:"small",children:e.jsx(Hr,{children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(Re,{})," ",e.jsx("strong",{children:"Name:"})," ",((Y=i.userId)==null?void 0:Y.name)||"N/A"]}),e.jsxs("div",{children:[e.jsx(as,{})," ",e.jsx("strong",{children:"Email:"})," ",((ne=i.userId)==null?void 0:ne.email)||"N/A"]}),e.jsxs("div",{children:[e.jsx(Re,{})," ",e.jsx("strong",{children:"Contact:"})," ",((U=i.contactInfo)==null?void 0:U.name)||"N/A"]}),e.jsxs("div",{children:[e.jsx(Ss,{})," ",e.jsx("strong",{children:"Phone:"})," ",(($=i.contactInfo)==null?void 0:$.phone)||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Company:"})," ",((D=i.contactInfo)==null?void 0:D.company)||"N/A"]})]})})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{title:"Project Information",size:"small",children:e.jsx(Hr,{children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Product:"})," ",((I=i.productId)==null?void 0:I.title)||"N/A"]}),e.jsxs("div",{children:[e.jsx(lc,{})," ",e.jsx("strong",{children:"Type:"})," ",i.projectType]}),e.jsxs("div",{children:[e.jsx(kt,{})," ",e.jsx("strong",{children:"Budget:"})," ",i.budget]}),e.jsxs("div",{children:[e.jsx(Ds,{})," ",e.jsx("strong",{children:"Timeline:"})," ",i.timeline," days"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx(le,{color:_(i.status),children:(J=i.status)==null?void 0:J.toUpperCase()})]})]})})})})]}),e.jsxs(ce,{gutter:[16,16],style:{marginTop:"16px"},children:[e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{title:"Payment Information",size:"small",children:e.jsx(Hr,{children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Payment Status:"}),e.jsx(le,{color:i.paymentStatus==="completed"?"green":"orange",children:((Q=i.paymentStatus)==null?void 0:Q.toUpperCase())||"UNPAID"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ‚Çπ",((i.paymentAmount||0)/100).toFixed(2)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Payment ID:"})," ",i.paymentId||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Payment Date:"})," ",i.paymentDate?new Date(i.paymentDate).toLocaleString():"N/A"]})]})})})}),e.jsx(W,{xs:24,sm:12,children:e.jsx(V,{title:"Request Details",size:"small",children:e.jsx(Hr,{children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(i.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Updated:"})," ",new Date(i.updatedAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Request ID:"})," ",i._id]})]})})})})]}),e.jsx(oo,{level:5,children:"Features Requested"}),e.jsx("div",{style:{marginBottom:"16px"},children:(te=i.features)==null?void 0:te.map((ee,re)=>e.jsx(le,{color:"blue",children:ee},re))}),e.jsx(oo,{level:5,children:"Notes"}),e.jsx(Hr,{children:i.notes||"No notes provided"}),i.adminNotes&&e.jsxs(e.Fragment,{children:[e.jsx(oo,{level:5,children:"Admin Notes"}),e.jsx(Hr,{children:i.adminNotes})]})]})}),e.jsxs(Ke,{title:"Update Prebook Status",open:m,onCancel:()=>d(!1),footer:null,width:"90%",style:{maxWidth:"600px"},children:[g&&e.jsxs("div",{style:{textAlign:"center",padding:"20px",background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:"6px",marginBottom:"20px"},children:[e.jsx(Ee,{style:{fontSize:"24px",color:"#52c41a",marginBottom:"8px"}}),e.jsx("div",{style:{color:"#52c41a",fontWeight:"bold"},children:"Status Updated Successfully!"})]}),e.jsxs(G,{form:f,layout:"vertical",onFinish:E,children:[e.jsx(G.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select a status!"}],children:e.jsxs(Pe,{placeholder:"Select status",disabled:g,children:[e.jsx(An,{value:"pending",children:"Pending"}),e.jsx(An,{value:"reviewed",children:"Reviewed"}),e.jsx(An,{value:"accepted",children:"Accepted"}),e.jsx(An,{value:"rejected",children:"Rejected"}),e.jsx(An,{value:"completed",children:"Completed"})]})}),e.jsx(G.Item,{name:"adminNotes",label:"Admin Notes (Optional)",children:e.jsx(wj,{rows:4,placeholder:"Add notes for the user...",disabled:g})}),e.jsx(G.Item,{children:e.jsxs(Z,{children:[e.jsx(L,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(L,{type:"primary",htmlType:"submit",loading:t,disabled:g,children:g?"Updated!":"Update Status"})]})})]})]})]})})},{Title:pd,Text:li}=Fe,{Option:St}=Pe,{TextArea:kj}=ue,Cj=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,c]=p.useState(null),[u,m]=p.useState([]),[d,f]=p.useState(null),[g]=G.useForm();p.useEffect(()=>{y(),h()},[]);const y=async()=>{try{n(!0);const T=await ie.get("/banners/admin/all");T.data.success&&t(T.data.banners)}catch(T){console.error("Failed to fetch banners:",T),B.error("Failed to load banners")}finally{n(!1)}},h=async()=>{try{const T=await ie.get("/banners/admin/stats");T.data.success&&f(T.data.stats)}catch(T){console.error("Failed to fetch stats:",T)}},x=()=>{c(null),m([]),g.resetFields(),i(!0)},P=T=>{c(T),g.setFieldsValue({name:T.name,description:T.description,price:T.price,rarity:T.rarity,effect:T.effect,effectColor:T.effectColor,category:T.category,season:T.season,stock:T.stock,isActive:T.isActive}),m([]),i(!0)},S=async T=>{var k,R;try{(await ie.delete(`/banners/admin/${T}`)).data.success&&(B.success("Banner deleted successfully"),y(),h())}catch(w){console.error("Delete failed:",w),B.error(((R=(k=w.response)==null?void 0:k.data)==null?void 0:R.message)||"Failed to delete banner")}},M=async()=>{var T,k;try{const R=await g.validateFields(),w=new FormData;Object.keys(R).forEach(C=>{R[C]!==void 0&&R[C]!==null&&w.append(C,R[C])}),u.length>0&&u[0].originFileObj&&w.append("image",u[0].originFileObj);let b;l?b=await ie.put(`/banners/admin/${l._id}`,w,{headers:{"Content-Type":"multipart/form-data"}}):b=await ie.post("/banners/admin/create",w,{headers:{"Content-Type":"multipart/form-data"}}),b.data.success&&(B.success(`Banner ${l?"updated":"created"} successfully`),i(!1),y(),h())}catch(R){console.error("Submit failed:",R),B.error(((k=(T=R.response)==null?void 0:T.data)==null?void 0:k.message)||`Failed to ${l?"update":"create"} banner`)}},j=T=>({Common:"default",Rare:"blue",Epic:"purple",Legendary:"gold",Mythic:"red"})[T]||"default",z=[{title:"Preview",dataIndex:"imageUrl",key:"imageUrl",width:100,render:T=>e.jsx("img",{src:`${"http://localhost:7000/api".replace("/api","")||"http://localhost:7000"}${T}`,alt:"Banner",style:{width:"80px",height:"50px",objectFit:"cover",borderRadius:"4px"}})},{title:"Name",dataIndex:"name",key:"name",sorter:(T,k)=>T.name.localeCompare(k.name)},{title:"Price",dataIndex:"price",key:"price",render:T=>`‚Çπ${T}`,sorter:(T,k)=>T.price-k.price},{title:"Rarity",dataIndex:"rarity",key:"rarity",render:T=>e.jsx(le,{color:j(T),children:T}),filters:[{text:"Common",value:"Common"},{text:"Rare",value:"Rare"},{text:"Epic",value:"Epic"},{text:"Legendary",value:"Legendary"},{text:"Mythic",value:"Mythic"}],onFilter:(T,k)=>k.rarity===T},{title:"Category",dataIndex:"category",key:"category",render:T=>e.jsx(le,{children:T})},{title:"Effect",dataIndex:"effect",key:"effect",render:T=>T!=="none"?e.jsx(le,{color:"purple",children:T}):e.jsx(li,{type:"secondary",children:"None"})},{title:"Stock",dataIndex:"stock",key:"stock",render:T=>T===-1?e.jsx(le,{color:"green",children:"Unlimited"}):e.jsx(li,{children:T})},{title:"Purchases",dataIndex:"purchaseCount",key:"purchaseCount",sorter:(T,k)=>T.purchaseCount-k.purchaseCount},{title:"Status",dataIndex:"isActive",key:"isActive",render:T=>T?e.jsx(le,{color:"success",icon:e.jsx(Ee,{}),children:"Active"}):e.jsx(le,{color:"error",icon:e.jsx(Or,{}),children:"Inactive"}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(T,k)=>k.isActive===T},{title:"Actions",key:"actions",width:120,render:(T,k)=>e.jsxs(Z,{children:[e.jsx(L,{type:"link",icon:e.jsx(qt,{}),onClick:()=>P(k)}),e.jsx(tn,{title:"Delete banner?",description:"This will remove the banner from all users' inventories.",onConfirm:()=>S(k._id),okText:"Yes",cancelText:"No",children:e.jsx(L,{type:"link",danger:!0,icon:e.jsx(Tt,{})})})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(pd,{level:2,children:"üé® Banner Management"}),d&&e.jsxs(ce,{gutter:16,style:{marginBottom:"24px"},children:[e.jsx(W,{span:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Banners",value:d.totalBanners})})}),e.jsx(W,{span:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Active Banners",value:d.activeBanners})})}),e.jsx(W,{span:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Purchases",value:d.totalPurchases})})}),e.jsx(W,{span:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Revenue",value:d.totalPurchases*100,prefix:"‚Çπ"})})})]}),e.jsxs(V,{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between"},children:[e.jsx(pd,{level:4,style:{margin:0},children:"All Banners"}),e.jsx(L,{type:"primary",icon:e.jsx(hs,{}),onClick:x,children:"Create Banner"})]}),e.jsx(Pt,{columns:z,dataSource:s,rowKey:"_id",loading:r,pagination:{pageSize:10}})]}),e.jsx(Ke,{title:l?"Edit Banner":"Create New Banner",open:o,onOk:M,onCancel:()=>i(!1),width:700,okText:l?"Update":"Create",children:e.jsxs(G,{form:g,layout:"vertical",children:[e.jsx(G.Item,{name:"name",label:"Banner Name",rules:[{required:!0,message:"Please enter banner name"}],children:e.jsx(ue,{placeholder:"e.g., Fire Dragon Banner"})}),e.jsx(G.Item,{name:"description",label:"Description",children:e.jsx(kj,{rows:3,placeholder:"Banner description..."})}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"price",label:"Price (‚Çπ)",rules:[{required:!0,message:"Please enter price"}],children:e.jsx(pi,{min:0,style:{width:"100%"}})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"stock",label:"Stock (-1 for unlimited)",initialValue:-1,children:e.jsx(pi,{min:-1,style:{width:"100%"}})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"rarity",label:"Rarity",rules:[{required:!0,message:"Please select rarity"}],children:e.jsxs(Pe,{children:[e.jsx(St,{value:"Common",children:"Common"}),e.jsx(St,{value:"Rare",children:"Rare"}),e.jsx(St,{value:"Epic",children:"Epic"}),e.jsx(St,{value:"Legendary",children:"Legendary"}),e.jsx(St,{value:"Mythic",children:"Mythic"})]})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"category",label:"Category",rules:[{required:!0,message:"Please select category"}],children:e.jsxs(Pe,{children:[e.jsx(St,{value:"Fire",children:"Fire"}),e.jsx(St,{value:"Ice",children:"Ice"}),e.jsx(St,{value:"Thunder",children:"Thunder"}),e.jsx(St,{value:"Diamond",children:"Diamond"}),e.jsx(St,{value:"Season",children:"Season"}),e.jsx(St,{value:"Special",children:"Special"}),e.jsx(St,{value:"Default",children:"Default"})]})})})]}),e.jsxs(ce,{gutter:16,children:[e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"effect",label:"Visual Effect",initialValue:"none",children:e.jsxs(Pe,{children:[e.jsx(St,{value:"none",children:"No Effect"}),e.jsx(St,{value:"glow",children:"Glow"}),e.jsx(St,{value:"fire",children:"Fire"}),e.jsx(St,{value:"neon",children:"Neon"}),e.jsx(St,{value:"ice",children:"Ice"}),e.jsx(St,{value:"thunder",children:"Thunder"}),e.jsx(St,{value:"sparkle",children:"Sparkle"}),e.jsx(St,{value:"animated",children:"Animated"})]})})}),e.jsx(W,{span:12,children:e.jsx(G.Item,{name:"effectColor",label:"Effect Color",initialValue:"#FFD700",children:e.jsx(ue,{type:"color"})})})]}),e.jsx(G.Item,{name:"season",label:"Season (optional)",children:e.jsx(ue,{placeholder:"e.g., Season 12"})}),e.jsx(G.Item,{name:"isActive",label:"Status",initialValue:!0,children:e.jsxs(Pe,{children:[e.jsx(St,{value:!0,children:"Active"}),e.jsx(St,{value:!1,children:"Inactive"})]})}),e.jsxs(G.Item,{label:"Banner Image",children:[e.jsx(dr,{listType:"picture-card",fileList:u,onChange:({fileList:T})=>m(T),beforeUpload:()=>!1,maxCount:1,children:u.length===0&&e.jsxs("div",{children:[e.jsx(zl,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})}),!l&&e.jsx(li,{type:"secondary",children:"Required for new banners. Recommended: 800x400px"})]})]})})]})},{Title:Aj,Paragraph:Pj,Text:Ms}=Fe,{Option:ci}=Pe,{RangePicker:kb}=Ao,Tj=()=>{var w,b,C,O,F,N;const{user:s,isAuthenticated:t,isLoading:r}=qe(),{message:n}=$t.useApp(),o=Je(),[i,l]=p.useState(!1),[c,u]=p.useState([]),[m,d]=p.useState({totalPayments:0,totalAmount:0,completedPayments:0,pendingPayments:0,failedPayments:0}),[f,g]=p.useState({status:"",dateRange:null,search:""}),[y,h]=p.useState(null),[x,P]=p.useState(!1),S=async()=>{var E;l(!0);try{const _=localStorage.getItem("adminToken")||localStorage.getItem("token"),A=await fetch("http://localhost:7000/api/prebook?limit=1000",{headers:{Authorization:`Bearer ${_}`}});if(A.ok){const H=((E=(await A.json()).data)==null?void 0:E.prebooks)||[],q=H.filter(I=>I.paymentStatus==="completed");u(q);const Y=q.length,ne=q.reduce((I,J)=>I+(J.paymentAmount||0)/100,0),U=q.filter(I=>I.paymentStatus==="completed").length,$=H.filter(I=>I.paymentStatus==="pending").length,D=H.filter(I=>I.paymentStatus==="failed").length;d({totalPayments:Y,totalAmount:ne,completedPayments:U,pendingPayments:$,failedPayments:D})}else n.error("Failed to fetch payments")}catch(_){console.error("Error fetching payments:",_),n.error("Network error")}finally{l(!1)}};p.useEffect(()=>{t&&(s==null?void 0:s.role)==="admin"?S():!r&&!t&&o("/admin/login")},[t,s,r,o]);const M=E=>{h(E),P(!0)},j=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(E),z=E=>{switch(E){case"completed":return a.colors.success;case"pending":return a.colors.warning;case"failed":return a.colors.error;default:return a.colors.text.secondary}},T=E=>{switch(E){case"completed":return e.jsx(Ee,{});case"pending":return e.jsx(Ze,{});case"failed":return e.jsx(Or,{});default:return e.jsx(Ze,{})}},k=[{title:"Payment ID",dataIndex:"paymentId",key:"paymentId",render:E=>e.jsx(Ms,{code:!0,children:E||"N/A"})},{title:"User",key:"user",render:(E,_)=>{var A,v;return e.jsxs("div",{children:[e.jsx(Ms,{strong:!0,children:((A=_.userId)==null?void 0:A.name)||"Unknown User"}),e.jsx("br",{}),e.jsx(Ms,{type:"secondary",children:((v=_.userId)==null?void 0:v.email)||"N/A"})]})}},{title:"Product",key:"product",render:(E,_)=>{var A;return e.jsxs("div",{children:[e.jsx(Ms,{strong:!0,children:((A=_.productId)==null?void 0:A.title)||"Product Deleted"}),e.jsx("br",{}),e.jsxs(Ms,{type:"secondary",children:["‚Çπ",((_.paymentAmount||0)/100).toFixed(2)]})]})}},{title:"Amount",dataIndex:"paymentAmount",key:"paymentAmount",render:E=>e.jsxs(Ms,{strong:!0,style:{color:"#52c41a"},children:["‚Çπ",((E||0)/100).toFixed(2)]})},{title:"Status",dataIndex:"paymentStatus",key:"paymentStatus",render:E=>e.jsx(le,{color:z(E),icon:T(E),children:(E==null?void 0:E.toUpperCase())||"PENDING"})},{title:"Payment Date",dataIndex:"paymentDate",key:"paymentDate",render:E=>E?new Date(E).toLocaleDateString():"N/A"},{title:"Actions",key:"actions",render:(E,_)=>e.jsx(Z,{children:e.jsx(L,{type:"primary",size:"small",icon:e.jsx(it,{}),onClick:()=>M(_),children:"View Details"})})}],R=c.filter(E=>{var _,A,v,H,q,Y,ne;if(f.status&&E.paymentStatus!==f.status)return!1;if(f.search){const U=f.search.toLowerCase();return((A=(_=E.userId)==null?void 0:_.name)==null?void 0:A.toLowerCase().includes(U))||((H=(v=E.userId)==null?void 0:v.email)==null?void 0:H.toLowerCase().includes(U))||((Y=(q=E.productId)==null?void 0:q.title)==null?void 0:Y.toLowerCase().includes(U))||((ne=E.paymentId)==null?void 0:ne.toLowerCase().includes(U))}return!0});return e.jsxs("div",{style:{padding:a.layout.content.padding,background:a.colors.background,minHeight:"100vh",fontFamily:a.typography.fontFamily},children:[e.jsxs("div",{style:{marginBottom:a.spacing.xl},children:[e.jsxs(Aj,{level:2,style:{color:a.colors.text.primary,fontWeight:a.typography.fontWeight.semibold,fontSize:a.typography.fontSize.h2},children:[e.jsx(kt,{style:{marginRight:a.spacing.sm,color:a.colors.primary}}),"Payment Tracking"]}),e.jsx(Pj,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.body},children:"Monitor all payment transactions and prebook payments"})]}),e.jsxs(ce,{gutter:[a.spacing.md,a.spacing.md],style:{marginBottom:a.spacing.xl},children:[e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Payments"}),value:m.totalPayments,prefix:e.jsx(kt,{style:{color:a.colors.primary}}),valueStyle:{color:a.colors.text.primary,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Total Amount"}),value:j(m.totalAmount||0),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Completed"}),value:m.completedPayments,prefix:e.jsx(Ee,{style:{color:a.colors.success}}),valueStyle:{color:a.colors.success,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{style:{borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsx(ve,{title:e.jsx(Ms,{style:{color:a.colors.text.secondary,fontSize:a.typography.fontSize.small},children:"Pending"}),value:m.pendingPayments,prefix:e.jsx(Ze,{style:{color:a.colors.warning}}),valueStyle:{color:a.colors.warning,fontSize:a.typography.fontSize.h3,fontWeight:a.typography.fontWeight.semibold}})})})]}),e.jsx(V,{style:{marginBottom:a.spacing.xl,borderRadius:a.borderRadius.md,border:`1px solid ${a.colors.card.border}`,boxShadow:a.shadows.md,background:a.colors.card.background},children:e.jsxs(ce,{gutter:[16,16],align:"middle",children:[e.jsx(W,{xs:24,sm:8,md:6,children:e.jsx(ue,{placeholder:"Search payments...",prefix:e.jsx(Kt,{}),value:f.search,onChange:E=>g({...f,search:E.target.value})})}),e.jsx(W,{xs:24,sm:8,md:6,children:e.jsxs(Pe,{placeholder:"Filter by status",style:{width:"100%"},value:f.status,onChange:E=>g({...f,status:E}),allowClear:!0,children:[e.jsx(ci,{value:"completed",children:"Completed"}),e.jsx(ci,{value:"pending",children:"Pending"}),e.jsx(ci,{value:"failed",children:"Failed"})]})}),e.jsx(W,{xs:24,sm:8,md:6,children:e.jsx(L,{icon:e.jsx(Mr,{}),onClick:S,loading:i,children:"Refresh"})})]})}),e.jsx(V,{children:e.jsx(Pt,{columns:k,dataSource:R,rowKey:"_id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(E,_)=>`${_[0]}-${_[1]} of ${E} payments`},scroll:{x:800}})}),e.jsx(Ke,{title:"Payment Details",open:x,onCancel:()=>P(!1),footer:null,width:800,children:y&&e.jsxs("div",{children:[e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{span:12,children:e.jsxs(V,{title:"Payment Information",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Payment ID:"})," ",y.paymentId||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",y.paymentOrderId||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ‚Çπ",((y.paymentAmount||0)/100).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(le,{color:z(y.paymentStatus),children:((w=y.paymentStatus)==null?void 0:w.toUpperCase())||"PENDING"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Date:"})," ",y.paymentDate?new Date(y.paymentDate).toLocaleString():"N/A"]})]})}),e.jsx(W,{span:12,children:e.jsxs(V,{title:"User Information",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",((b=y.userId)==null?void 0:b.name)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",((C=y.userId)==null?void 0:C.email)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User ID:"})," ",((O=y.userId)==null?void 0:O._id)||"N/A"]})]})})]}),e.jsx(ce,{gutter:[16,16],style:{marginTop:"16px"},children:e.jsx(W,{span:24,children:e.jsxs(V,{title:"Product Information",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",((F=y.productId)==null?void 0:F.title)||"Product Deleted"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project Type:"})," ",y.projectType||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," ",y.budget||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",y.timeline||"N/A"," days"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Features:"})," ",((N=y.features)==null?void 0:N.join(", "))||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",y.notes||"N/A"]})]})})})]})})]})},{Title:Pn,Paragraph:Rj,Text:Vr}=Fe,Ij=()=>{var R,w,b,C,O,F,N,E,_,A,v;const{user:s,isAuthenticated:t,isLoading:r}=qe(),{message:n}=$t.useApp(),o=Je(),[i,l]=p.useState(!1),[c,u]=p.useState([]),[m,d]=p.useState([]),[f,g]=p.useState({totalUsers:0,activeUsers:0,totalPrebooks:0,totalPayments:0}),[y,h]=p.useState(null),[x,P]=p.useState(!1),S=async()=>{var H,q,Y,ne;l(!0);try{const U=localStorage.getItem("adminToken")||localStorage.getItem("token")||localStorage.getItem("accessToken"),[$,D,I]=await Promise.all([fetch("http://localhost:7000/api/admin/users?limit=100",{headers:{Authorization:`Bearer ${U}`}}),fetch("http://localhost:7000/api/prebook/admin/all?limit=100",{headers:{Authorization:`Bearer ${U}`}}),fetch("http://localhost:7000/api/admin/orders?limit=100",{headers:{Authorization:`Bearer ${U}`}})]),J=[];let Q=[];if($.ok){const fe=await $.json();Q=fe.users||((H=fe.data)==null?void 0:H.users)||[],d(Q),Q.forEach(ke=>{ke.lastLoginAt&&J.push({id:`login-${ke._id}-${ke.lastLoginAt}`,type:"login",user:{_id:ke._id,name:ke.name,email:ke.email,avatarUrl:ke.avatarUrl||ke.profilePic},product:null,action:"User logged in",status:"completed",paymentStatus:null,amount:null,date:ke.lastLoginAt,details:{loginMethod:ke.googleId?"Google":"Email",lastSeen:ke.lastSeen}})})}if(D.ok){const fe=await D.json();(((q=fe.data)==null?void 0:q.prebooks)||fe.prebooks||[]).forEach(me=>{var X,pe,je,ae,Ce,Te,Ie;J.push({id:`prebook-${me._id}`,type:"prebook",user:{_id:((X=me.userId)==null?void 0:X._id)||me.userId,name:((pe=me.contactInfo)==null?void 0:pe.name)||((je=me.userId)==null?void 0:je.name)||"Unknown",email:((ae=me.contactInfo)==null?void 0:ae.email)||((Ce=me.userId)==null?void 0:Ce.email)||"No email",avatarUrl:((Te=me.userId)==null?void 0:Te.avatarUrl)||((Ie=me.userId)==null?void 0:Ie.profilePic)},product:me.productId||{title:"Custom Project",_id:null},action:"Created prebook request",status:me.status,paymentStatus:me.paymentStatus,amount:me.paymentAmount,date:me.createdAt,details:{projectType:me.projectType,budget:me.budget,timeline:me.timeline,features:me.features,notes:me.notes,contactInfo:me.contactInfo}})})}if(I.ok){const fe=await I.json();(((Y=fe.data)==null?void 0:Y.purchases)||fe.purchases||((ne=fe.data)==null?void 0:ne.orders)||fe.orders||[]).forEach(me=>{var we;const X=me.buyer||me.userId||{},pe=me.product||me.productId||{},je=X._id||X,ae=X.name||"Unknown User",Ce=X.email||"No email",Te=X.avatarUrl||X.profilePic,Ie=pe._id||pe,Ae=pe.title||"Product Deleted";J.push({id:`purchase-${me._id}`,type:"purchase",user:{_id:je,name:ae,email:Ce,avatarUrl:Te},product:{_id:Ie,title:Ae,price:pe.price,thumbnailUrl:pe.thumbnailUrl||((we=pe.images)==null?void 0:we[0])},action:"Purchased product",status:me.status==="paid"?"completed":me.status,paymentStatus:me.status==="paid"?"completed":me.status,amount:me.amount,date:me.createdAt,details:{razorpayOrderId:me.razorpayOrderId,razorpayPaymentId:me.razorpayPaymentId,paymentMethod:me.paymentMethod,currency:me.currency||"INR"}})})}J.sort((fe,ke)=>new Date(ke.date)-new Date(fe.date)),u(J);const te=Q.length,ee=Q.filter(fe=>fe.lastLoginAt).length,re=J.filter(fe=>fe.type==="prebook").length,se=J.filter(fe=>fe.type==="purchase").length,he=J.filter(fe=>fe.type==="prebook"&&fe.paymentStatus==="completed"||fe.type==="purchase"&&(fe.status==="paid"||fe.status==="completed")).length;g({totalUsers:te,activeUsers:ee,totalPrebooks:re,totalPayments:he})}catch(U){console.error("Error fetching user activities:",U),n.error("Failed to fetch user activities")}finally{l(!1)}};p.useEffect(()=>{t&&(s==null?void 0:s.role)==="admin"?S():!r&&!t&&o("/admin/login")},[t,s,r,o]);const M=H=>{h(H),P(!0)},j=H=>{switch(H){case"completed":return"green";case"accepted":return"green";case"pending":return"orange";case"rejected":return"red";case"failed":return"red";default:return"default"}},z=H=>{switch(H){case"completed":return e.jsx(Ee,{});case"accepted":return e.jsx(Ee,{});case"pending":return e.jsx(Ze,{});case"rejected":return e.jsx(Ze,{});default:return e.jsx(Ze,{})}},T=H=>{switch(H){case"prebook":return e.jsx(bs,{});case"purchase":return e.jsx(jo,{});case"payment":return e.jsx(kt,{});case"login":return e.jsx(Re,{});default:return e.jsx(Ze,{})}},k=[{title:"User",key:"user",render:(H,q)=>{var Y,ne,U;return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(We,{src:ht(q.user),icon:e.jsx(Re,{}),style:{marginRight:"8px"},children:nt((Y=q.user)==null?void 0:Y.name)}),e.jsxs("div",{children:[e.jsx(Vr,{strong:!0,children:((ne=q.user)==null?void 0:ne.name)||"Unknown User"}),e.jsx("br",{}),e.jsx(Vr,{type:"secondary",children:((U=q.user)==null?void 0:U.email)||"N/A"})]})]})}},{title:"Activity",key:"activity",render:(H,q)=>{var Y;return e.jsxs("div",{children:[e.jsxs(Z,{children:[T(q.type),e.jsx(Vr,{strong:!0,children:q.action})]}),e.jsx("br",{}),e.jsx(Vr,{type:"secondary",children:((Y=q.product)==null?void 0:Y.title)||"Product Deleted"})]})}},{title:"Status",dataIndex:"status",key:"status",render:(H,q)=>{var Y;return e.jsxs("div",{children:[e.jsx(le,{color:j(H),icon:z(H),children:(H==null?void 0:H.toUpperCase())||"PENDING"}),q.paymentStatus&&e.jsx("div",{style:{marginTop:"4px"},children:e.jsxs(le,{color:q.paymentStatus==="completed"?"green":"orange",children:["Payment: ",(Y=q.paymentStatus)==null?void 0:Y.toUpperCase()]})})]})}},{title:"Amount",key:"amount",render:(H,q)=>{var $;if(!q.amount)return e.jsx(Vr,{type:"secondary",children:"N/A"});const Y=q.amount>1e4?q.amount/100:q.amount,ne=(($=q.details)==null?void 0:$.currency)||"INR",U=ne==="USD"?"$":ne==="EUR"?"‚Ç¨":"‚Çπ";return e.jsxs(Vr,{strong:!0,style:{color:"#52c41a"},children:[U,Y.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})}},{title:"Date",dataIndex:"date",key:"date",render:H=>new Date(H).toLocaleString()},{title:"Actions",key:"actions",render:(H,q)=>e.jsx(Z,{children:e.jsx(L,{type:"primary",size:"small",icon:e.jsx(it,{}),onClick:()=>M(q),children:"View User"})})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Pn,{level:2,children:"User Activities"}),e.jsx(Rj,{type:"secondary",children:"Monitor all user activities including logins, purchases, and prebook requests"})]}),e.jsxs(ce,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Users",value:f.totalUsers,prefix:e.jsx(Re,{})})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Active Users",value:f.activeUsers,prefix:e.jsx(Ee,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Prebooks",value:f.totalPrebooks,prefix:e.jsx(bs,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(W,{xs:24,sm:12,md:6,children:e.jsx(V,{children:e.jsx(ve,{title:"Total Purchases",value:f.totalPayments,prefix:e.jsx(jo,{}),valueStyle:{color:"#52c41a"}})})})]}),e.jsxs(V,{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Pn,{level:4,style:{margin:0},children:"Recent Activities"}),e.jsx(L,{icon:e.jsx(Mr,{}),onClick:S,loading:i,children:"Refresh"})]}),c.length>0?e.jsx(Pt,{columns:k,dataSource:c,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(H,q)=>`${q[0]}-${q[1]} of ${H} activities`},scroll:{x:800}}):e.jsx(Ue,{description:"No activities found",image:Ue.PRESENTED_IMAGE_SIMPLE})]}),e.jsx(Ke,{title:"User Details",open:x,onCancel:()=>P(!1),footer:null,width:800,children:y&&e.jsxs("div",{children:[e.jsx(ce,{gutter:[16,16],children:e.jsx(W,{span:24,children:e.jsx(V,{title:"User Information",size:"small",children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{span:8,children:e.jsx(We,{size:64,src:ht(y.user),icon:e.jsx(Re,{}),children:nt((R=y.user)==null?void 0:R.name)})}),e.jsxs(W,{span:16,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",((w=y.user)==null?void 0:w.name)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",((b=y.user)==null?void 0:b.email)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",((C=y.user)==null?void 0:C.phone)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",((O=y.user)==null?void 0:O.role)||"user"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(le,{color:(F=y.user)!=null&&F.isActive?"green":"red",children:(N=y.user)!=null&&N.isActive?"Active":"Inactive"})]})]})]})})})}),e.jsx(ce,{gutter:[16,16],style:{marginTop:"16px"},children:e.jsx(W,{span:24,children:e.jsxs(V,{title:"Activity Details",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Activity:"})," ",y.action]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",((E=y.product)==null?void 0:E.title)||"Product Deleted"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(le,{color:j(y.status),children:(_=y.status)==null?void 0:_.toUpperCase()})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(y.date).toLocaleString()]}),y.details&&e.jsxs("div",{style:{marginTop:"16px"},children:[y.type==="prebook"&&e.jsxs(e.Fragment,{children:[e.jsx(Pn,{level:5,children:"Project Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project Type:"})," ",y.details.projectType||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," ",y.details.budget||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",y.details.timeline||"N/A"," days"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Features:"})," ",((A=y.details.features)==null?void 0:A.join(", "))||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",y.details.notes||"N/A"]})]}),y.type==="purchase"&&e.jsxs(e.Fragment,{children:[e.jsx(Pn,{level:5,children:"Purchase Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",y.details.razorpayOrderId||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment ID:"})," ",y.details.razorpayPaymentId||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",((v=y.details.paymentMethod)==null?void 0:v.toUpperCase())||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Currency:"})," ",y.details.currency||"INR"]})]}),y.type==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(Pn,{level:5,children:"Login Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Login Method:"})," ",y.details.loginMethod||"Email"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Seen:"})," ",y.details.lastSeen?new Date(y.details.lastSeen).toLocaleString():"N/A"]})]})]})]})})})]})})]})},{Title:fd,Paragraph:zj,Text:Tn}=Fe,{Option:Cb}=Pe,{Search:Ej}=ue,{Sider:_j,Content:Oj}=Zs,Fj=()=>{const[s,t]=p.useState([]),[r,n]=p.useState(!1),[o,i]=p.useState({search:"",category:"",tag:"",priceRange:"",sortBy:"latest"}),[l,c]=p.useState({current:1,pageSize:12,total:0}),[u,m]=p.useState([]),[d,f]=p.useState([]),[g,y]=p.useState(""),[h,x]=p.useState(""),[P,S]=p.useState(!1);p.useEffect(()=>{M(),j(),z()},[o,l.current]);const M=async()=>{n(!0);try{const _=new URLSearchParams({page:l.current,limit:l.pageSize,...o.search&&{search:o.search},...o.category&&{category:o.category},...o.tag&&{tag:o.tag},...o.priceRange&&{minPrice:o.priceRange.split("-")[0],maxPrice:o.priceRange.split("-")[1]},sortBy:o.sortBy});console.log("üîç Fetching products with params:",_.toString());const v=await(await fetch(`http://localhost:7000/api/products?${_}`)).json();console.log("üì¶ Products response:",v),v.success?(t(v.data.products),c(H=>({...H,total:v.data.pagination.total})),console.log("‚úÖ Products loaded successfully:",v.data.products.length)):(console.log("‚ùå API error:",v.message),t([]),c(H=>({...H,total:0})),B.error("Failed to load products. Please try again."))}catch(_){console.error("‚ùå Error fetching products:",_),t([]),c(A=>({...A,total:0})),B.error("Failed to load products. Please check your connection.")}finally{n(!1)}},j=async()=>{try{const A=await(await fetch("http://localhost:7000/api/products/categories/list")).json();A.success&&A.data.categories.length>0?m(A.data.categories):m(["All Categories","Web Development","Mobile Apps","E-commerce","Corporate Websites","Portfolio Sites","Blog Platforms","SaaS Applications","Landing Pages","Admin Dashboards","API Development","UI/UX Design"])}catch(_){console.error("Error fetching categories:",_),m(["All Categories","Web Development","Mobile Apps","E-commerce","Corporate Websites","Portfolio Sites","Blog Platforms","SaaS Applications","Landing Pages","Admin Dashboards","API Development","UI/UX Design"])}},z=async()=>{try{const A=await(await fetch("http://localhost:7000/api/products/tags/list")).json();A.success&&A.data.tags.length>0?f(A.data.tags):f(["All","Trending","Gold","Silver","Platinum","New","Popular","Premium","Featured","Best Seller","Hot","Recommended"])}catch(_){console.error("Error fetching tags:",_),f(["All","Trending","Gold","Silver","Platinum","New","Popular","Premium","Featured","Best Seller","Hot","Recommended"])}},T=_=>{i(A=>({...A,search:_})),c(A=>({...A,current:1}))},k=(_,A)=>{i(v=>({...v,[_]:A})),c(v=>({...v,current:1}))},R=_=>{y(_),k("category",_==="All Categories"?"":_),S(!1)},w=_=>{x(_),k("tag",_==="All"?"":_)},b=_=>{c(A=>({...A,current:_}))},C=_=>({All:"default",Trending:"red",Popular:"blue",New:"green",Premium:"gold",Gold:"gold",Silver:"default",Platinum:"purple",Featured:"cyan","Best Seller":"magenta",Hot:"red",Recommended:"green"})[_]||"default",O=_=>({All:null,Trending:e.jsx(Qr,{}),Gold:e.jsx(Rn,{}),Silver:e.jsx(Ud,{}),Platinum:e.jsx(Rn,{}),New:e.jsx(ir,{}),Popular:e.jsx(it,{}),Premium:e.jsx(Rn,{}),Featured:e.jsx(ir,{}),"Best Seller":e.jsx(Rn,{}),Hot:e.jsx(Qr,{}),Recommended:e.jsx(ir,{})})[_]||null,F=()=>e.jsxs("div",{className:"categories-sidebar",children:[e.jsx("div",{className:"categories-header",children:e.jsx(fd,{level:4,style:{color:"#52c41a",margin:0},children:"Categories"})}),e.jsx("div",{className:"categories-list",children:u.map(_=>e.jsx("div",{className:`category-item ${g===_?"active":""}`,onClick:()=>R(_),children:e.jsx("span",{children:_})},_))})]}),N=()=>e.jsx("div",{className:"tags-filter",children:e.jsx("div",{className:"tags-container",children:d.map(_=>e.jsx(le,{color:h===_?C(_):"default",icon:O(_),className:`tag-item ${h===_?"active":""}`,onClick:()=>w(_),style:{cursor:"pointer",marginBottom:"8px",marginRight:"8px",padding:"6px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:h===_?"bold":"normal",transition:"all 0.3s ease",border:h===_?"2px solid #52c41a":"1px solid #d9d9d9"},children:_},_))})}),E=({product:_})=>{var A,v,H,q,Y,ne;return e.jsx(W,{xs:24,sm:12,lg:8,xl:6,children:e.jsx(V,{hoverable:!0,className:"product-card",style:{borderRadius:"var(--radius-lg)",boxShadow:"var(--elev-1)",overflow:"hidden",transition:"all var(--transition-base)"},cover:e.jsxs("div",{className:"product-image-container",style:{position:"relative",width:"100%",paddingTop:"56.25%",overflow:"hidden",backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("img",{alt:_.title,src:_.thumbnailUrl?`http://localhost:7000${_.thumbnailUrl}`:"/placeholder-image.svg",onError:U=>{U.target.src="/placeholder-image.svg"},className:"product-image",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("div",{className:"product-tags",style:{position:"absolute",top:"var(--space-sm)",left:"var(--space-sm)",display:"flex",gap:"var(--space-xs)",flexWrap:"wrap"},children:(A=_.tags)==null?void 0:A.slice(0,2).map(U=>e.jsx(le,{color:C(U),className:"product-tag",style:{borderRadius:"var(--radius-full)",fontSize:"var(--type-small)",padding:"var(--space-xs) var(--space-sm)",margin:0},children:U},U))}),e.jsxs("div",{className:"product-views",style:{position:"absolute",bottom:"var(--space-sm)",right:"var(--space-sm)",backgroundColor:"var(--bg-overlay)",color:"var(--text-inverse)",padding:"var(--space-xs) var(--space-sm)",borderRadius:"var(--radius-full)",fontSize:"var(--type-small)",display:"flex",alignItems:"center",gap:"var(--space-xs)"},children:[e.jsx(it,{})," ",_.views||0]})]}),actions:[e.jsx(L,{icon:e.jsx(ws,{}),className:"product-action favorite",style:{minHeight:"var(--touch-target-min)",width:"100%",border:"none",borderRadius:0},children:"Save"},"favorite"),e.jsx(It,{to:`/product/${_.slug||_._id}`,children:e.jsx(L,{icon:e.jsx(vt,{}),className:"product-action primary",type:"primary",style:{minHeight:"var(--touch-target-min)",width:"100%",borderRadius:0},children:"Prebook"})},"prebook")],bodyStyle:{padding:"var(--space-md)"},children:e.jsx(V.Meta,{title:e.jsxs("div",{className:"product-title",style:{marginBottom:"var(--space-sm)",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"var(--space-xs)"},children:[e.jsx(Tn,{strong:!0,style:{fontSize:"var(--type-body)",fontWeight:"var(--weight-semibold)",color:"var(--text-primary)",flex:1},children:_.title}),_.category&&e.jsx(le,{color:"blue",style:{fontSize:"var(--type-small)",borderRadius:"var(--radius-full)",margin:0},children:_.category})]}),description:e.jsxs("div",{children:[e.jsx(zj,{style:{color:"var(--text-secondary)",margin:"0 0 var(--space-sm) 0",fontSize:"var(--type-small)",lineHeight:"var(--line-relaxed)"},ellipsis:{rows:2},children:((v=_.description)==null?void 0:v.short)||_.description||"No description available"}),e.jsxs("div",{className:"product-rating",style:{display:"flex",alignItems:"center",gap:"var(--space-xs)",marginBottom:"var(--space-sm)"},children:[e.jsx(ir,{style:{color:"var(--warning)"}}),e.jsx(Tn,{style:{fontSize:"var(--type-small)"},children:((q=(H=_.rating)==null?void 0:H.average)==null?void 0:q.toFixed(1))||"4.5"}),e.jsxs(Tn,{style:{color:"var(--text-tertiary)",fontSize:"var(--type-caption)"},children:["(",((Y=_.rating)==null?void 0:Y.count)||0,")"]})]}),e.jsx("div",{className:"product-price",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs(Tn,{strong:!0,style:{color:"var(--success)",fontSize:"var(--type-h3)"},children:["Prebook: $",((ne=_.prebookAmount)==null?void 0:ne.toLocaleString())||"0"]})}),e.jsx("div",{className:"product-meta",children:e.jsxs(Tn,{type:"secondary",style:{fontSize:"12px"},children:[_.preBookings||0," pre-bookings"]})})]})})})},_._id)};return e.jsxs("div",{className:"products-page",children:[e.jsx("div",{className:"mobile-header",children:e.jsxs("div",{className:"mobile-header-content",children:[e.jsx(fd,{level:2,style:{margin:0,color:"#fff"},children:"Our Products"}),e.jsx(L,{icon:e.jsx(Io,{}),onClick:()=>S(!0),className:"mobile-menu-button"})]})}),e.jsxs(Zs,{className:"products-layout",children:[e.jsx(_j,{width:280,className:"desktop-sidebar",breakpoint:"lg",collapsedWidth:"0",children:e.jsx(F,{})}),e.jsxs(Oj,{className:"products-content",children:[e.jsx("div",{className:"search-section",style:{marginBottom:"var(--space-lg)",padding:"0 var(--container-padding-mobile)"},children:e.jsx(Ej,{placeholder:"Search products...",allowClear:!0,onSearch:T,size:"large",style:{maxWidth:"400px",width:"100%"}})}),e.jsx("div",{className:"tags-section",style:{marginBottom:"var(--space-lg)",padding:"0 var(--container-padding-mobile)"},children:e.jsx(N,{})}),e.jsxs("div",{className:"products-section",style:{padding:"0 var(--container-padding-mobile)"},children:[e.jsx(rt,{spinning:r,children:s.length===0?e.jsx(Ue,{description:"No products found",style:{padding:"var(--space-xxl)",color:"var(--text-secondary)"},children:e.jsx(L,{onClick:()=>{i({search:"",category:"",tag:"",priceRange:"",sortBy:"latest"}),y(""),x("")},style:{minHeight:"var(--touch-target-min)"},children:"Clear Filters"})}):e.jsx(ce,{gutter:[24,24],children:s.map(_=>e.jsx(E,{product:_},_._id))})}),l.total>0&&e.jsx("div",{className:"pagination-section",children:e.jsx(Th,{current:l.current,total:l.total,pageSize:l.pageSize,onChange:b,showSizeChanger:!0,showQuickJumper:!0,showTotal:(_,A)=>`${A[0]}-${A[1]} of ${_} products`})})]})]})]}),e.jsx(Mn,{title:"Categories",placement:"left",onClose:()=>S(!1),open:P,width:280,className:"mobile-drawer",children:e.jsx(F,{})}),e.jsx("style",{jsx:"true",children:`
        .products-page {
          min-height: 100vh;
          background: #f5f5f5;
        }

        .mobile-header {
          display: none;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 1rem;
          position: sticky;
          top: 0;
          z-index: 1000;
        }

        .mobile-header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .mobile-menu-button {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: #fff;
        }

        .products-layout {
          background: #f5f5f5;
          min-height: calc(100vh - 80px);
        }

        .desktop-sidebar {
          background: #fff;
          box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }

        .products-content {
          padding: 2rem;
          background: #f5f5f5;
        }

        .categories-sidebar {
          padding: 1.5rem;
        }

        .categories-header {
          margin-bottom: 1.5rem;
          padding-bottom: 1rem;
          border-bottom: 2px solid #f0f0f0;
        }

        .categories-list {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .category-item {
          padding: 0.75rem 1rem;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.3s ease;
          font-weight: 500;
          color: #666;
        }

        .category-item:hover {
          background: #f0f9ff;
          color: #1890ff;
        }

        .category-item.active {
          background: #52c41a;
          color: #fff;
          font-weight: 600;
        }

        .search-section {
          margin-bottom: 2rem;
          text-align: center;
        }

        .tags-section {
          margin-bottom: 2rem;
          background: #fff;
          padding: 1.5rem;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tags-container {
          display: flex;
          flex-wrap: wrap;
          gap: 0.5rem;
          justify-content: flex-start;
          align-items: center;
        }

        .tag-item {
          transition: all 0.3s ease;
        }

        .tag-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .products-section {
          background: #fff;
          padding: 2rem;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .product-card {
          height: 100%;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          transition: all 0.3s ease;
        }

        .product-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .product-image-container {
          position: relative;
          height: 200px;
          overflow: hidden;
        }

        .product-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
          transform: scale(1.05);
        }

        .product-tags {
          position: absolute;
          top: 12px;
          right: 12px;
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .product-tag {
          font-size: 12px;
          padding: 2px 8px;
          border-radius: 12px;
        }

        .product-views {
          position: absolute;
          bottom: 12px;
          left: 12px;
          background: rgba(0, 0, 0, 0.7);
          color: #fff;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        .product-title {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
        }

        .product-rating {
          display: flex;
          align-items: center;
          margin: 8px 0;
        }

        .product-price {
          margin: 8px 0;
        }

        .product-meta {
          margin-top: 8px;
        }

        .product-action {
          border-radius: 6px;
          font-weight: 500;
        }

        .product-action.favorite {
          color: #ff4d4f;
          border-color: #ff4d4f;
        }

        .product-action.primary {
          background: #52c41a;
          border-color: #52c41a;
          color: #fff;
        }

        .pagination-section {
          margin-top: 2rem;
          text-align: center;
        }

        .mobile-drawer .ant-drawer-body {
          padding: 0;
        }

        @media (max-width: 768px) {
          .mobile-header {
            display: block;
          }

          .desktop-sidebar {
            display: none;
          }

          .products-content {
            padding: 1rem;
          }

          .tags-section {
            padding: 1rem;
          }

          .products-section {
            padding: 1rem;
          }

          .tags-container {
            justify-content: center;
            padding: 0.5rem;
          }

          .tag-item {
            margin: 2px;
            font-size: 12px;
            padding: 4px 12px;
          }
        }

        @media (max-width: 576px) {
          .product-card {
            margin-bottom: 1rem;
          }

          .product-image-container {
            height: 150px;
          }
        }
      `})]})},{Title:As,Text:ft,Paragraph:Gr}=Fe,{TextArea:Nj}=ue,{Option:Zt}=Pe,Mj=()=>{var v,H,q,Y,ne,U;const{slug:s}=gd(),t=Je(),{user:r,isAuthenticated:n,isLoading:o,refreshToken:i}=qe(),{message:l}=$t.useApp(),[c,u]=p.useState(null),[m,d]=p.useState(!0),[f,g]=p.useState(!1),[y,h]=p.useState(!1),[x,P]=p.useState(!1),[S,M]=p.useState(!1),[j,z]=p.useState(null),[T,k]=p.useState(null),[R,w]=p.useState(0),[b]=G.useForm(),C=$=>{if(!$)return"";const D=$.replace(/\D/g,"");return D.startsWith("91")&&D.length===12?`+${D}`:D.length===10?`+91${D}`:D.length===12?`+${D}`:(console.warn("Invalid phone number format:",$),"")};p.useEffect(()=>{s&&!o&&O()},[s,o]);const O=async()=>{var $,D;d(!0);try{const I=await Xt.getProductBySlug(s);if(I.data.success){u(I.data.data.product);try{await Xt.trackVisit(I.data.data.product._id,{ip:"127.0.0.1",userAgent:navigator.userAgent,referrer:document.referrer})}catch(J){console.warn("‚ö†Ô∏è Failed to increment visit count:",J)}}else console.error("‚ùå Product not found:",I.data.message),l.error("Product not found"),t("/products")}catch(I){console.error("‚ùå Error fetching product:",I),console.error("Error details:",{message:I.message,response:($=I.response)==null?void 0:$.data,status:(D=I.response)==null?void 0:D.status}),l.error("Failed to load product"),t("/products")}finally{d(!1)}},F=()=>{if(!n){l.warning("Please log in to prebook this product",3),setTimeout(()=>{t("/login")},1e3);return}g(!0)},N=async $=>{var D,I;h(!0);try{const J={projectType:$.projectType,budget:$.budget,timeline:parseInt($.timeline),features:$.features||[],notes:$.additionalRequirements||"",contactInfo:{name:$.name,email:$.email,phone:$.phone||"",company:$.company||"",preferredContact:$.preferredContact||"email"}},Q=await Xt.createPrebook(c._id,J);if(Q.data.success){l.success("Prebook request created! Opening payment..."),g(!1),b.resetFields();const te={...Q.data.data,product:c};z(te),k(null),w(0),P(!0)}else l.error(Q.data.message||"Failed to submit prebook request")}catch(J){console.error("‚ùå Error submitting prebook:",J),console.error("Error details:",{message:J.message,response:(D=J.response)==null?void 0:D.data,status:(I=J.response)==null?void 0:I.status}),l.error("Failed to submit prebook request. Please try again.")}finally{h(!1)}},E=async()=>{var $;if(!n){l.error("Please login to proceed with payment"),t("/login");return}M(!0),k(null);try{i&&typeof i=="function"?(await i()).success||console.warn("Token refresh failed, proceeding with current token"):console.warn("refreshToken function not available, proceeding with current token")}catch(D){console.warn("Token refresh error:",D)}C((($=j==null?void 0:j.contactInfo)==null?void 0:$.phone)||(r==null?void 0:r.phone)||"");try{const D=document.createElement("script");D.src="https://checkout.razorpay.com/v1/checkout.js",D.onload=async()=>{var I,J,Q,te,ee,re,se,he,fe,ke,me,X,pe,je;try{if(!j||!j._id)throw new Error("Prebook data is missing. Please try creating the prebook request again.");const ae=localStorage.getItem("token")||localStorage.getItem("accessToken");if(!ae)throw new Error("No authentication token found. Please login again.");const Ce=await fetch("http://localhost:7000/api/payments/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({prebookId:j==null?void 0:j._id,amount:100})});if(Ce.status===401){console.error("‚ùå Token expired during payment order creation");try{if(i&&typeof i=="function"){const we=await i();if(we.success){const Be=await fetch("http://localhost:7000/api/payments/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${we.accessToken}`},body:JSON.stringify({prebookId:j._id,amount:100})});if(Be.ok){const $e=await Be.json();if($e.success){const Xe={key:"rzp_live_RUuZIGTpYBor0z",amount:$e.data.amount,currency:$e.data.currency,name:"ITWOS AI",description:`Prebook Fee for ${((I=j==null?void 0:j.product)==null?void 0:I.title)||"Product"}`,image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzE4OTBmZiIvPgo8dGV4dCB4PSIyMCIgeT0iMjYiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JVDwvdGV4dD4KPC9zdmc+",order_id:$e.data.order_id,handler:async function(_e){var Ne,ot,Oe,Ct;try{const ut=localStorage.getItem("token")||localStorage.getItem("accessToken");if(!ut)throw new Error("No authentication token found. Please login again.");const tt=await fetch("http://localhost:7000/api/payments/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ut}`},body:JSON.stringify({razorpay_payment_id:_e.razorpay_payment_id,razorpay_order_id:_e.razorpay_order_id,razorpay_signature:_e.razorpay_signature,prebookId:j._id})});if(tt.status===401){console.error("‚ùå Token expired during payment verification"),l.error("Your session has expired. Please login again."),M(!1);return}const at=await tt.json();at.success?(l.success("Payment successful! Your prebook has been confirmed."),P(!1),t("/user/prebooks",{state:{message:"Prebook confirmed successfully!",type:"success"}})):(console.error("Payment verification failed:",at),l.error(at.message||"Payment verification failed. Please contact support."))}catch(ut){console.error("Payment verification error:",ut);let tt="Payment verification failed. Please try again or contact support.";((Ne=ut.response)==null?void 0:Ne.status)===400?(tt=((ot=ut.response.data)==null?void 0:ot.message)||"Payment verification failed",k(`${tt}. Please try again or contact support.`)):((Oe=ut.response)==null?void 0:Oe.status)===401?(tt="Authentication failed. Please login again and try.",k(tt)):((Ct=ut.response)==null?void 0:Ct.status)===404?(tt="Prebook not found. Please try creating a new prebook.",k(tt)):((ut.code==="NETWORK_ERROR"||!navigator.onLine)&&(tt="Network error. Please check your internet connection and try again."),k(tt)),l.error(tt),M(!1)}},prefill:{name:(r==null?void 0:r.name)||((J=j==null?void 0:j.contactInfo)==null?void 0:J.name)||"",email:(r==null?void 0:r.email)||((Q=j==null?void 0:j.contactInfo)==null?void 0:Q.email)||"",contact:C(((te=j==null?void 0:j.contactInfo)==null?void 0:te.phone)||(r==null?void 0:r.phone)||"")||void 0},notes:{address:"ITWOS AI Office",prebook_id:j==null?void 0:j._id},theme:{color:"#1890ff"},upi:{flow:"collect",vpa:"itwosai@paytm"},customer:{name:(r==null?void 0:r.name)||((ee=j==null?void 0:j.contactInfo)==null?void 0:ee.name)||"",email:(r==null?void 0:r.email)||((re=j==null?void 0:j.contactInfo)==null?void 0:re.email)||"",contact:C(((se=j==null?void 0:j.contactInfo)==null?void 0:se.phone)||(r==null?void 0:r.phone)||"")||void 0},retry:{enabled:!0,max_count:3}},Ve=new window.Razorpay(Xe);Ve.on("payment.failed",function(_e){console.error("Payment failed:",_e.error);const Ne=`Payment failed: ${_e.error.description||"Unknown error"}. Please try again.`;k(Ne),l.error(Ne),M(!1)}),Ve.on("payment.cancel",function(_e){k(null),l.warning("Payment was cancelled. You can try again anytime."),M(!1)}),Ve.open();return}}}}else console.warn("refreshToken function not available for retry")}catch(we){console.error("Token refresh failed:",we)}k("Your session has expired. Please login again and try the payment."),l.error("Session expired. Please login again."),M(!1);return}if(!Ce.ok)throw new Error(`HTTP ${Ce.status}: ${Ce.statusText}`);const Te=await Ce.json();if(!Te.success)throw new Error(Te.message||"Failed to create payment order");const Ie={key:"rzp_live_RUuZIGTpYBor0z",amount:Te.data.amount,currency:Te.data.currency,name:"ITWOS AI",description:`Prebook Fee for ${((he=j==null?void 0:j.product)==null?void 0:he.title)||"Product"}`,image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzE4OTBmZiIvPgo8dGV4dCB4PSIyMCIgeT0iMjYiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JVDwvdGV4dD4KPC9zdmc+",order_id:Te.data.order_id,handler:async function(we){var Be,$e,Xe,Ve;try{const _e=localStorage.getItem("token")||localStorage.getItem("accessToken");if(!_e)throw new Error("No authentication token found. Please login again.");const Ne=await fetch("http://localhost:7000/api/payments/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e}`},body:JSON.stringify({razorpay_payment_id:we.razorpay_payment_id,razorpay_order_id:we.razorpay_order_id,razorpay_signature:we.razorpay_signature,prebookId:j._id})});if(Ne.status===401){console.error("‚ùå Token expired during payment verification"),l.error("Your session has expired. Please login again."),M(!1);return}const ot=await Ne.json();ot.success?(l.success("Payment successful! Your prebook has been confirmed."),P(!1),t("/user/prebooks",{state:{message:"Prebook confirmed successfully!",type:"success"}})):(console.error("Payment verification failed:",ot),l.error(ot.message||"Payment verification failed. Please contact support."))}catch(_e){console.error("Payment verification error:",_e);let Ne="Payment verification failed. Please try again or contact support.";((Be=_e.response)==null?void 0:Be.status)===400?(Ne=(($e=_e.response.data)==null?void 0:$e.message)||"Payment verification failed",k(`${Ne}. Please try again or contact support.`)):((Xe=_e.response)==null?void 0:Xe.status)===401?(Ne="Authentication failed. Please login again and try.",k(Ne)):((Ve=_e.response)==null?void 0:Ve.status)===404?(Ne="Prebook not found. Please try creating a new prebook.",k(Ne)):((_e.code==="NETWORK_ERROR"||!navigator.onLine)&&(Ne="Network error. Please check your internet connection and try again."),k(Ne)),l.error(Ne),M(!1)}},prefill:{name:(r==null?void 0:r.name)||((fe=j==null?void 0:j.contactInfo)==null?void 0:fe.name)||"",email:(r==null?void 0:r.email)||((ke=j==null?void 0:j.contactInfo)==null?void 0:ke.email)||"",contact:C(((me=j==null?void 0:j.contactInfo)==null?void 0:me.phone)||(r==null?void 0:r.phone)||"")||void 0},notes:{address:"ITWOS AI Office",prebook_id:j==null?void 0:j._id},theme:{color:"#1890ff"},upi:{flow:"collect",vpa:"itwosai@paytm"},customer:{name:(r==null?void 0:r.name)||((X=j==null?void 0:j.contactInfo)==null?void 0:X.name)||"",email:(r==null?void 0:r.email)||((pe=j==null?void 0:j.contactInfo)==null?void 0:pe.email)||"",contact:C(((je=j==null?void 0:j.contactInfo)==null?void 0:je.phone)||(r==null?void 0:r.phone)||"")||void 0},retry:{enabled:!0,max_count:3}},Ae=new window.Razorpay(Ie);Ae.on("payment.failed",function(we){console.error("Payment failed:",we.error);const Be=`Payment failed: ${we.error.description||"Unknown error"}. Please try again.`;k(Be),l.error(Be),M(!1)}),Ae.on("payment.cancel",function(we){console.log("Payment cancelled:",we),k(null),l.warning("Payment was cancelled. You can try again anytime."),M(!1)}),Ae.open()}catch(ae){console.error("Order creation error:",ae),l.error("Failed to create payment order. Please try again."),M(!1)}},D.onerror=()=>{l.error("Failed to load payment gateway. Please try again."),M(!1)},document.body.appendChild(D)}catch(D){console.error("Payment error:",D),l.error("Payment failed. Please try again.")}finally{M(!1)}},_=()=>{navigator.share?navigator.share({title:c.title,text:c.descriptionAuto,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),l.success("Link copied to clipboard!"))},A=()=>{l.success("Product saved to favorites!")};return o||m?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:[e.jsx(rt,{size:"large"}),e.jsx("div",{style:{marginTop:"16px",marginLeft:"16px"},children:o?"Loading...":"Loading product..."})]}):c?e.jsx($t,{children:e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx(Rh,{style:{marginBottom:"24px"},items:[{title:e.jsx("span",{onClick:()=>t("/"),style:{cursor:"pointer"},children:"Home"})},{title:e.jsx("span",{onClick:()=>t("/products"),style:{cursor:"pointer"},children:"Products"})},{title:c.title}]}),e.jsxs(ce,{gutter:[24,24],style:{display:window.innerWidth>=768?"flex":"none"},children:[e.jsxs(W,{xs:24,md:8,children:[e.jsx(V,{style:{marginBottom:"16px"},children:c.thumbnailUrl?e.jsx(ar,{src:`http://localhost:7000${c.thumbnailUrl}`,onError:$=>{$.target.src="/placeholder-image.svg"},alt:c.title,style:{width:"100%",borderRadius:"8px"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3YODp+9aX7l4xGq9wB4e6B1QKiu9CknTAcXU9UCFJYCH2fAACUI2BuXJFSAYpO0WakQICBxVn8GIC9S34BGyAbJQ8HqkyMwmI2gBZxJAiHA+wW7SDx2BuHQkDo7mDDIIBWj+7G1pC5mNjBZAKqss8QwQrNvzqSTAPRrFElPNYQ2gApi0lTuJUHt6aA2YlGQ9haC+dX1Cew1HEwUGJ9MwJnCrqS60S8HA4JKJYGdSUSALpJ3OsFB7M4cBwJjeQrR4gBGB7w=="}):e.jsx(We,{size:200,icon:e.jsx(vs,{}),style:{width:"100%",height:"200px"}})}),e.jsx(V,{title:"Analytics",style:{marginBottom:"16px"},children:e.jsx(ve,{title:"Visits (Last 30 days)",value:c.totalVisits||0,prefix:e.jsx(it,{})})}),e.jsx(V,{title:"Website Details",style:{marginBottom:"16px"},children:e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(ft,{strong:!0,children:"Platform:"}),e.jsx("br",{}),e.jsx(ft,{children:c.platform||"Web"})]}),e.jsxs("div",{children:[e.jsx(ft,{strong:!0,children:"Features:"}),e.jsx("br",{}),((v=c.features)==null?void 0:v.map(($,D)=>e.jsx(le,{style:{margin:"2px"},children:$},D)))||e.jsx(ft,{type:"secondary",children:"No features listed"})]})]})}),e.jsx(V,{title:"Developer",style:{marginBottom:"16px"},children:e.jsxs(Z,{children:[e.jsx(We,{icon:e.jsx(Re,{})}),e.jsxs("div",{children:[e.jsx(ft,{strong:!0,children:c.developerName}),e.jsx("br",{}),e.jsx(ft,{type:"secondary",children:"Developer"})]})]})}),e.jsxs(Z,{direction:"vertical",style:{width:"100%"},children:[e.jsx(L,{icon:e.jsx(Oa,{}),onClick:_,style:{width:"100%"},children:"Share"}),e.jsx(L,{icon:e.jsx(ws,{}),onClick:A,style:{width:"100%"},children:"Save"})]})]}),e.jsx(W,{xs:24,md:16,children:e.jsxs(V,{children:[e.jsx(As,{level:1,style:{marginBottom:"16px"},children:c.title}),e.jsx(Z,{wrap:!0,style:{marginBottom:"16px"},children:(H=c.tags)==null?void 0:H.map($=>e.jsx(le,{color:"blue",children:$},$))}),e.jsx(V,{size:"small",style:{marginBottom:"16px"},children:e.jsxs(ce,{gutter:16,align:"middle",children:[e.jsx(W,{children:e.jsx(_r,{disabled:!0,value:c.averageRating||0})}),e.jsx(W,{children:e.jsxs(ft,{children:["(",c.reviewsCount||0," reviews)"]})}),e.jsx(W,{children:e.jsxs(ft,{type:"secondary",children:[c.totalVisits||0," views"]})})]})}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(As,{level:4,children:"Description"}),e.jsx(Gr,{style:{fontSize:"16px",lineHeight:"1.6"},children:c.descriptionAuto||c.descriptionManual||"No description available."})]}),e.jsx(V,{style:{background:"#f6ffed",border:"1px solid #b7eb8f"},children:e.jsxs(ce,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(W,{children:e.jsxs(Z,{direction:"vertical",size:"small",children:[e.jsxs(ft,{strong:!0,style:{fontSize:"24px",color:"#52c41a"},children:["$",c.prebookAmount||0," ",c.currency||"USD"]}),e.jsx(ft,{type:"secondary",children:"Prebook amount"})]})}),e.jsx(W,{children:e.jsx(L,{type:"primary",size:"large",onClick:F,style:{background:"#52c41a",borderColor:"#52c41a",height:"50px",fontSize:"16px",fontWeight:"bold"},children:"Prebook Now"})})]})}),e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#f5f5f5",borderRadius:"6px"},children:e.jsxs(ft,{type:"secondary",children:["Product URL: ",e.jsx(Il,{})," ",window.location.href]})})]})})]}),e.jsxs("div",{style:{display:window.innerWidth<768?"block":"none"},children:[e.jsx(V,{style:{marginBottom:"16px"},children:c.thumbnailUrl?e.jsx(ar,{src:`http://localhost:7000${c.thumbnailUrl}`,onError:$=>{$.target.src="/placeholder-image.svg"},alt:c.title,style:{width:"100%",borderRadius:"8px"}}):e.jsx(We,{size:200,icon:e.jsx(vs,{}),style:{width:"100%",height:"200px"}})}),e.jsxs(V,{children:[e.jsx(As,{level:1,children:c.title}),e.jsx(Z,{wrap:!0,style:{marginBottom:"16px"},children:(q=c.tags)==null?void 0:q.map($=>e.jsx(le,{color:"blue",children:$},$))}),e.jsx(V,{size:"small",style:{marginBottom:"16px"},children:e.jsxs(ce,{gutter:16,align:"middle",children:[e.jsx(W,{children:e.jsx(_r,{disabled:!0,value:c.averageRating||0})}),e.jsx(W,{children:e.jsxs(ft,{children:["(",c.reviewsCount||0," reviews)"]})}),e.jsx(W,{children:e.jsxs(ft,{type:"secondary",children:[c.totalVisits||0," views"]})})]})}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(As,{level:4,children:"Description"}),e.jsx(Gr,{style:{fontSize:"16px",lineHeight:"1.6"},children:c.descriptionAuto||c.descriptionManual||"No description available."})]}),e.jsx(V,{style:{background:"#f6ffed",border:"1px solid #b7eb8f",marginBottom:"16px"},children:e.jsxs(ce,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(W,{children:e.jsxs(ft,{strong:!0,style:{fontSize:"24px",color:"#52c41a"},children:["$",c.prebookAmount||0," ",c.currency||"USD"]})}),e.jsx(W,{children:e.jsx(L,{type:"primary",size:"large",onClick:F,style:{background:"#52c41a",borderColor:"#52c41a",height:"50px",fontSize:"16px",fontWeight:"bold"},children:"Prebook Now"})})]})}),e.jsxs(Z,{style:{width:"100%",justifyContent:"center",marginBottom:"16px"},children:[e.jsx(L,{icon:e.jsx(Oa,{}),onClick:_,children:"Share"}),e.jsx(L,{icon:e.jsx(ws,{}),onClick:A,children:"Save"})]}),e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#f5f5f5",borderRadius:"6px"},children:e.jsxs(ft,{type:"secondary",children:[e.jsx("strong",{children:"Product URL:"})," ",window.location.href]})})]}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"white",padding:"16px",borderTop:"1px solid #d9d9d9",zIndex:1e3,boxShadow:"0 -2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(ce,{gutter:16,align:"middle",children:[e.jsx(W,{flex:"auto",children:e.jsxs(Z,{direction:"vertical",size:"small",children:[e.jsxs(ft,{strong:!0,style:{fontSize:"18px",color:"#52c41a"},children:["$",c.prebookAmount||0," ",c.currency||"USD"]}),e.jsx(ft,{type:"secondary",style:{fontSize:"12px"},children:"Prebook amount"})]})}),e.jsx(W,{children:e.jsx(L,{type:"primary",size:"large",onClick:F,style:{background:"#52c41a",borderColor:"#52c41a",height:"50px",fontSize:"16px",fontWeight:"bold",minWidth:"120px"},children:"Prebook Now"})})]})})]}),e.jsx(Ke,{title:"Prebook Request",open:f,onCancel:()=>g(!1),footer:null,width:800,children:e.jsxs(G,{form:b,layout:"vertical",onFinish:N,children:[e.jsxs(ce,{gutter:24,children:[e.jsxs(W,{xs:24,md:12,children:[e.jsx(As,{level:4,children:"Project Details"}),e.jsx(G.Item,{name:"projectType",label:"What type of website/app do you want?",rules:[{required:!0,message:"Please select project type"}],children:e.jsxs(Pe,{placeholder:"Select project type",children:[e.jsx(Zt,{value:"website",children:"Website"}),e.jsx(Zt,{value:"web-app",children:"Web Application"}),e.jsx(Zt,{value:"mobile-app",children:"Mobile Application"}),e.jsx(Zt,{value:"ecommerce",children:"E-commerce Store"}),e.jsx(Zt,{value:"landing-page",children:"Landing Page"}),e.jsx(Zt,{value:"other",children:"Other"})]})}),e.jsx(G.Item,{name:"features",label:"What features do you need?",rules:[{required:!0,message:"Please select at least one feature"}],children:e.jsx(nr.Group,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(nr,{value:"responsive-design",children:"Responsive Design"}),e.jsx(nr,{value:"seo-optimization",children:"SEO Optimization"}),e.jsx(nr,{value:"user-authentication",children:"User Authentication"}),e.jsx(nr,{value:"payment-integration",children:"Payment Integration"}),e.jsx(nr,{value:"admin-dashboard",children:"Admin Dashboard"}),e.jsx(nr,{value:"mobile-app",children:"Mobile App"})]})})}),e.jsx(G.Item,{name:"budget",label:"How much do you want to spend?",rules:[{required:!0,message:"Please select budget range"}],children:e.jsxs(Pe,{placeholder:"Select budget range",children:[e.jsx(Zt,{value:"under-5k",children:"Under $5,000"}),e.jsx(Zt,{value:"5k-10k",children:"$5,000 - $10,000"}),e.jsx(Zt,{value:"10k-25k",children:"$10,000 - $25,000"}),e.jsx(Zt,{value:"25k-50k",children:"$25,000 - $50,000"}),e.jsx(Zt,{value:"50k-100k",children:"$50,000 - $100,000"}),e.jsx(Zt,{value:"100k-plus",children:"$100,000+"})]})}),e.jsx(G.Item,{name:"timeline",label:"How many days until you want the full website?",rules:[{required:!0,message:"Please enter timeline in days"}],children:e.jsx(ue,{type:"number",placeholder:"Enter number of days (e.g., 30)",min:"1",max:"365"})}),e.jsx(G.Item,{name:"additionalRequirements",label:"Additional requirements",children:e.jsx(Nj,{rows:3,placeholder:"Any additional requirements or notes..."})})]}),e.jsxs(W,{xs:24,md:12,children:[e.jsx(As,{level:4,children:"Contact Information"}),e.jsx(G.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter your name"}],initialValue:r==null?void 0:r.name,children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],initialValue:r==null?void 0:r.email,children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter your phone number"},{pattern:/^(\+91|91|0)?[6-9]\d{9}$/,message:"Please enter a valid Indian phone number"}],initialValue:r==null?void 0:r.phone,children:e.jsx(ue,{placeholder:"Enter 10-digit phone number"})}),e.jsx(G.Item,{name:"company",label:"Company (Optional)",initialValue:r==null?void 0:r.company,children:e.jsx(ue,{})}),e.jsx(G.Item,{name:"preferredContact",label:"Preferred contact method",rules:[{required:!0,message:"Please select preferred contact method"}],children:e.jsxs(Pe,{placeholder:"Select contact method",children:[e.jsx(Zt,{value:"email",children:"Email"}),e.jsx(Zt,{value:"phone",children:"Phone"}),e.jsx(Zt,{value:"whatsapp",children:"WhatsApp"})]})})]})]}),e.jsx(ce,{children:e.jsx(W,{span:24,style:{textAlign:"center",marginTop:"24px"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",loading:y,style:{background:"#52c41a",borderColor:"#52c41a",width:"200px",height:"50px",fontSize:"16px",fontWeight:"bold"},children:"Send Prebook Request"})})})]})}),e.jsx(Ke,{title:"Complete Payment",open:x,onCancel:()=>P(!1),footer:null,width:600,centered:!0,children:j&&e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e.jsx(As,{level:3,children:"Prebook Payment"}),e.jsx(Gr,{type:"secondary",children:"Complete your payment to confirm your prebook request"})]}),e.jsx(V,{style:{marginBottom:"24px"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(ar,{src:((Y=j.product)==null?void 0:Y.thumbnailUrl)||"/placeholder.jpg",alt:(ne=j.product)==null?void 0:ne.title,style:{width:"100%",borderRadius:"8px"},fallback:"/placeholder.jpg"})}),e.jsxs(W,{xs:24,sm:16,children:[e.jsx(As,{level:4,children:(U=j.product)==null?void 0:U.title}),e.jsxs(Gr,{children:[e.jsx(ft,{strong:!0,children:"Project Type: "}),e.jsx(le,{color:"blue",children:j.projectType})]}),e.jsxs(Gr,{children:[e.jsx(ft,{strong:!0,children:"Budget: "}),e.jsx(le,{color:"green",children:j.budget})]}),e.jsxs(Gr,{children:[e.jsx(ft,{strong:!0,children:"Timeline: "}),e.jsxs(le,{color:"orange",children:[j.timeline," days"]})]})]})]})}),e.jsxs(V,{style:{background:"#f6ffed",border:"1px solid #b7eb8f"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx(As,{level:4,style:{color:"#52c41a",margin:0},children:"Prebook Fee"}),e.jsx(ft,{type:"secondary",children:"Secure your project slot"})]}),e.jsx(As,{level:2,style:{color:"#52c41a",margin:0},children:"‚Çπ1"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx(ft,{strong:!0,children:"What you get:"}),e.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[e.jsx("li",{children:"Priority project slot"}),e.jsx("li",{children:"Direct communication with our team"}),e.jsx("li",{children:"Project timeline guarantee"}),e.jsx("li",{children:"Free consultation call"}),e.jsx("li",{children:"Detailed project proposal"})]})]}),T&&e.jsx(gt,{message:"Payment Error",description:T.includes("phone")||T.includes("contact")?"Invalid phone number format. Please update your phone number in the prebook form and try again.":T,type:"error",showIcon:!0,style:{marginBottom:"16px"},action:e.jsx(L,{size:"small",onClick:()=>{k(null),w($=>$+1),E()},disabled:S,children:"Retry"})}),e.jsx(gt,{message:"Secure Payment",description:"Your payment is processed securely through Razorpay. We use industry-standard encryption to protect your data.",type:"info",showIcon:!0,style:{marginBottom:"16px"}}),e.jsx(L,{type:"primary",size:"large",block:!0,loading:S,onClick:E,style:{height:"50px",fontSize:"16px",fontWeight:"bold"},children:S?"Processing...":"Pay ‚Çπ1 & Confirm Prebook"}),R>0&&e.jsxs(ft,{type:"secondary",style:{textAlign:"center",display:"block",marginTop:"8px"},children:["Retry attempt: ",R]}),e.jsx(ft,{type:"secondary",style:{textAlign:"center",display:"block",marginTop:"8px"},children:"üîí Secure payment powered by Razorpay"})]})]})})]})}):e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(As,{level:2,children:"Product Not Found"}),e.jsx(L,{type:"primary",onClick:()=>t("/products"),children:"Back to Products"})]})},{Title:di,Paragraph:ui,Text:_t}=Fe,$j=()=>{var y,h,x,P,S,M,j,z,T;const{message:s}=$t.useApp(),t=Je(),r=cn(),{user:n,isAuthenticated:o}=qe(),[i,l]=p.useState(!1),[c,u]=p.useState(!1),[m,d]=p.useState(null);p.useEffect(()=>{var R;const k=((R=r.state)==null?void 0:R.prebookData)||JSON.parse(localStorage.getItem("prebookData")||"null");k?d(k):(s.error("No prebook data found. Please try again."),t("/products"))},[r.state,t,s]);const f=async()=>{if(!o){s.error("Please login to proceed with payment"),t("/login");return}u(!0);try{const k=document.createElement("script");k.src="https://checkout.razorpay.com/v1/checkout.js",k.onload=async()=>{var R,w,b,C;try{const F=await(await fetch("http://localhost:7000/api/payments/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({prebookId:m._id,amount:100})})).json();if(!F.success)throw new Error(F.message||"Failed to create payment order");const N={key:"rzp_live_RUuZIGTpYBor0z",amount:F.data.amount,currency:F.data.currency,name:"ITWOS AI",description:`Prebook Fee for ${((R=m==null?void 0:m.product)==null?void 0:R.title)||"Product"}`,image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzE4OTBmZiIvPgo8dGV4dCB4PSIyMCIgeT0iMjYiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JVDwvdGV4dD4KPC9zdmc+",order_id:F.data.order_id,handler:async function(_){try{const v=await(await fetch("http://localhost:7000/api/payments/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({razorpay_payment_id:_.razorpay_payment_id,razorpay_order_id:_.razorpay_order_id,razorpay_signature:_.razorpay_signature,prebookId:m._id})})).json();v.success?(s.success("Payment successful! Your prebook has been confirmed."),t("/user/prebooks",{state:{message:"Prebook confirmed successfully!",type:"success"}})):(console.error("Payment verification failed:",v),s.error(v.message||"Payment verification failed. Please contact support."))}catch(A){console.error("Payment verification error:",A),s.error("Network error during payment verification. Please try again.")}},prefill:{name:(n==null?void 0:n.name)||((w=m==null?void 0:m.contactInfo)==null?void 0:w.name)||"",email:(n==null?void 0:n.email)||((b=m==null?void 0:m.contactInfo)==null?void 0:b.email)||"",contact:((C=m==null?void 0:m.contactInfo)==null?void 0:C.phone)||""},notes:{address:"ITWOS AI Office",prebook_id:m==null?void 0:m._id},theme:{color:"#1890ff"}};new window.Razorpay(N).open()}catch(O){console.error("Order creation error:",O),s.error("Failed to create payment order. Please try again."),u(!1)}},k.onerror=()=>{s.error("Failed to load payment gateway. Please try again."),u(!1)},document.body.appendChild(k)}catch(k){console.error("Payment error:",k),s.error("Payment failed. Please try again.")}finally{u(!1)}},g=()=>{t(-1)};return m?e.jsx($t,{children:e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(L,{icon:e.jsx(Al,{}),onClick:g,style:{marginBottom:"16px"},children:"Back"}),e.jsx(di,{level:2,children:"Prebook Preview & Payment"}),e.jsx(ui,{type:"secondary",children:"Review your prebook details and complete payment to confirm your request."})]}),e.jsxs(ce,{gutter:[24,24],children:[e.jsxs(W,{xs:24,lg:16,children:[e.jsx(V,{title:"Product Details",style:{marginBottom:"24px"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:8,children:e.jsx(ar,{src:((y=m.product)==null?void 0:y.thumbnailUrl)||"/placeholder.jpg",alt:(h=m.product)==null?void 0:h.title,style:{width:"100%",borderRadius:"8px"},fallback:"/placeholder.jpg"})}),e.jsxs(W,{xs:24,sm:16,children:[e.jsx(di,{level:4,children:(x=m.product)==null?void 0:x.title}),e.jsxs(ui,{children:[e.jsx(_t,{strong:!0,children:"Price: "}),e.jsxs(_t,{style:{fontSize:"18px",color:"#1890ff"},children:["‚Çπ",((P=m.product)==null?void 0:P.price)||"N/A"]})]}),e.jsxs(ui,{children:[e.jsx(_t,{strong:!0,children:"Description: "}),((S=m.product)==null?void 0:S.description)||"No description available"]})]})]})}),e.jsx(V,{title:"Project Requirements",children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:12,children:e.jsxs(Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Project Type:"}),e.jsx("br",{}),e.jsx(le,{color:"blue",children:m.projectType})]}),e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Budget Range:"}),e.jsx("br",{}),e.jsx(le,{color:"green",children:m.budget})]}),e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Timeline:"}),e.jsx("br",{}),e.jsxs(le,{color:"orange",children:[m.timeline," days"]})]})]})}),e.jsxs(W,{xs:24,sm:12,children:[e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Requested Features:"}),e.jsx("br",{}),e.jsx("div",{style:{marginTop:"8px"},children:(M=m.features)==null?void 0:M.map((k,R)=>e.jsx(le,{color:"purple",style:{margin:"2px"},children:k},R))})]}),m.notes&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx(_t,{strong:!0,children:"Additional Notes:"}),e.jsx("br",{}),e.jsx(_t,{type:"secondary",children:m.notes})]})]})]})})]}),e.jsx(W,{xs:24,lg:8,children:e.jsx(V,{title:"Payment Summary",style:{position:"sticky",top:"24px"},children:e.jsxs(Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsx("div",{style:{background:"#f6ffed",padding:"16px",borderRadius:"8px",border:"1px solid #b7eb8f"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx(_t,{strong:!0,style:{color:"#52c41a"},children:"Prebook Fee"}),e.jsx("br",{}),e.jsx(_t,{type:"secondary",children:"Secure your project slot"})]}),e.jsx(_t,{style:{fontSize:"20px",color:"#52c41a",fontWeight:"bold"},children:"‚Çπ1"})]})}),e.jsxs("div",{children:[e.jsx(di,{level:5,children:"What you get:"}),e.jsx(Wt,{size:"small",dataSource:["Priority project slot","Direct communication with our team","Project timeline guarantee","Free consultation call","Detailed project proposal"],renderItem:k=>e.jsxs(Wt.Item,{children:[e.jsx(Ee,{style:{color:"#52c41a",marginRight:"8px"}}),k]})})]}),e.jsx(gt,{message:"Secure Payment",description:"Your payment is processed securely through Razorpay. We use industry-standard encryption to protect your data.",type:"info",icon:e.jsx(bt,{}),showIcon:!0}),e.jsx(L,{type:"primary",size:"large",block:!0,loading:c,onClick:f,icon:e.jsx(En,{}),style:{height:"50px",fontSize:"16px",fontWeight:"bold"},children:c?"Processing...":"Pay ‚Çπ1 & Confirm Prebook"}),e.jsxs(_t,{type:"secondary",style:{textAlign:"center",display:"block"},children:[e.jsx(bt,{})," Secure payment powered by Razorpay"]})]})})})]}),e.jsx(V,{title:"Contact Information",style:{marginTop:"24px"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsx(W,{xs:24,sm:8,children:e.jsxs(Z,{children:[e.jsx(Re,{}),e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Name"}),e.jsx("br",{}),e.jsx(_t,{children:((j=m.contactInfo)==null?void 0:j.name)||"N/A"})]})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs(Z,{children:[e.jsx(as,{}),e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Email"}),e.jsx("br",{}),e.jsx(_t,{children:((z=m.contactInfo)==null?void 0:z.email)||"N/A"})]})]})}),e.jsx(W,{xs:24,sm:8,children:e.jsxs(Z,{children:[e.jsx(Ss,{}),e.jsxs("div",{children:[e.jsx(_t,{strong:!0,children:"Phone"}),e.jsx("br",{}),e.jsx(_t,{children:((T=m.contactInfo)==null?void 0:T.phone)||"N/A"})]})]})})]})})]})}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(rt,{size:"large"})})},{Title:Bj,Text:jt,Paragraph:Dj}=Fe,Uj=()=>{var f,g,y;const s=Je(),[t]=nh(),[r,n]=p.useState(!0),[o,i]=p.useState(null),l=t.get("prebookId"),c=t.get("paymentId"),u=t.get("orderId");p.useEffect(()=>{l?m():n(!1)},[l]);const m=async()=>{try{const h=await fetch(`http://localhost:7000/api/prebook/${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(h.ok){const x=await h.json();i(x.data)}}catch(h){console.error("Error fetching prebook details:",h)}finally{n(!1)}},d=()=>{s("/dashboard")};return r?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx(rt,{size:"large"})}):e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsx("div",{style:{opacity:1,transform:"translateY(0)",transition:"all 0.6s ease"},children:e.jsxs(V,{style:{borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",border:"none"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{transform:"scale(1)",transition:"all 0.3s ease",animation:"pulse 2s infinite"},children:e.jsx(Ee,{style:{fontSize:"80px",color:"#52c41a",marginBottom:"16px"}})}),e.jsx(Bj,{level:1,style:{color:"#52c41a",marginBottom:"8px"},children:"Payment Successful! üéâ"}),e.jsx(Dj,{style:{fontSize:"18px",color:"#666"},children:"Your prebook request has been submitted and payment has been processed successfully."})]}),e.jsx(V,{title:"Payment Details",style:{marginBottom:"24px"},headStyle:{backgroundColor:"#f8f9fa"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Payment ID:"}),e.jsx("br",{}),e.jsx(jt,{code:!0,children:c||"N/A"})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Order ID:"}),e.jsx("br",{}),e.jsx(jt,{code:!0,children:u||"N/A"})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Amount Paid:"}),e.jsx("br",{}),e.jsxs(jt,{style:{fontSize:"18px",color:"#52c41a"},children:["‚Çπ",o!=null&&o.paymentAmount?(o.paymentAmount/100).toFixed(2):"1.00"]})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Status:"}),e.jsx("br",{}),e.jsx(le,{color:"green",children:"Completed"})]})]})}),o&&e.jsx(V,{title:"Prebook Request Details",style:{marginBottom:"24px"},headStyle:{backgroundColor:"#f8f9fa"},children:e.jsxs(ce,{gutter:[16,16],children:[e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Product:"}),e.jsx("br",{}),e.jsx(jt,{children:((f=o.productId)==null?void 0:f.title)||"N/A"})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Request Date:"}),e.jsx("br",{}),e.jsx(jt,{children:new Date(o.createdAt).toLocaleDateString()})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Your Name:"}),e.jsx("br",{}),e.jsx(jt,{children:((g=o.userId)==null?void 0:g.name)||"N/A"})]}),e.jsxs(W,{xs:24,sm:12,children:[e.jsx(jt,{strong:!0,children:"Email:"}),e.jsx("br",{}),e.jsx(jt,{children:((y=o.userId)==null?void 0:y.email)||"N/A"})]}),e.jsxs(W,{xs:24,children:[e.jsx(jt,{strong:!0,children:"Message:"}),e.jsx("br",{}),e.jsx(jt,{children:o.message||"No additional message"})]})]})}),e.jsx(V,{title:"What's Next?",style:{marginBottom:"24px"},headStyle:{backgroundColor:"#e6f7ff"},children:e.jsxs(Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(jt,{strong:!0,children:"1. Review Process:"}),e.jsx("br",{}),e.jsx(jt,{children:"Your prebook request is now under admin review. You'll be notified once it's approved."})]}),e.jsxs("div",{children:[e.jsx(jt,{strong:!0,children:"2. Dashboard Access:"}),e.jsx("br",{}),e.jsx(jt,{children:"You can view your prebook requests and payment history in your dashboard."})]}),e.jsxs("div",{children:[e.jsx(jt,{strong:!0,children:"3. Notifications:"}),e.jsx("br",{}),e.jsx(jt,{children:"You'll receive real-time notifications about your prebook status updates."})]})]})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(Z,{size:"large",children:[e.jsx(L,{type:"primary",size:"large",icon:e.jsx(it,{}),onClick:d,style:{borderRadius:"8px",height:"48px",paddingLeft:"24px",paddingRight:"24px"},children:"View Dashboard"}),e.jsx(L,{size:"large",icon:e.jsx(Al,{}),onClick:()=>s("/"),style:{borderRadius:"8px",height:"48px",paddingLeft:"24px",paddingRight:"24px"},children:"Back to Home"})]})})]})})})})};function Lj(){return e.jsx(mj,{children:e.jsx(Ih,{theme:{token:{colorPrimary:"#1890ff",borderRadius:8}},children:e.jsx($t,{children:e.jsx(Dh,{children:e.jsx(oh,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:e.jsx("div",{className:"App",children:e.jsxs(ih,{children:[e.jsx(Me,{path:"/",element:e.jsx(gs,{children:e.jsx(J1,{})})}),e.jsx(Me,{path:"/login",element:e.jsx(Q1,{})}),e.jsx(Me,{path:"/register",element:e.jsx(ty,{})}),e.jsx(Me,{path:"/forgot-password",element:e.jsx(sy,{})}),e.jsx(Me,{path:"/about",element:e.jsx(gs,{children:e.jsx(N2,{})})}),e.jsx(Me,{path:"/contact",element:e.jsx(gs,{children:e.jsx($2,{})})}),e.jsx(Me,{path:"/dashboard",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(ry,{})})})}),e.jsx(Me,{path:"/dashboard/products",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(b2,{})})})}),e.jsx(Me,{path:"/profile/:userId",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Gc,{})})}),e.jsx(Me,{path:"/user/:userId",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Gc,{})})}),e.jsx(Me,{path:"/profile",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(ts,{children:e.jsx(e2,{})})})}),e.jsx(Me,{path:"/following",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(ts,{children:e.jsx(s2,{})})})}),e.jsx(Me,{path:"/purchases",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(l2,{})})})}),e.jsx(Me,{path:"/prebooks",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(ts,{children:e.jsx(y2,{})})})}),e.jsx(Me,{path:"/favorites",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(c2,{})})})}),e.jsx(Me,{path:"/chat",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(u2,{})})})}),e.jsx(Me,{path:"/feed",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(w2,{})})})}),e.jsx(Me,{path:"/post/create",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(_2,{})})})}),e.jsx(Me,{path:"/dashboard/banner-store",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(O2,{})})})}),e.jsx(Me,{path:"/dashboard/banner-inventory",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(F2,{})})})}),e.jsx(Me,{path:"/discover",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(h2,{})})})}),e.jsx(Me,{path:"/new-users",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(g2,{})})})}),e.jsx(Me,{path:"/network",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(f2,{})})})}),e.jsx(Me,{path:"/notifications",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(ly,{})})})}),e.jsx(Me,{path:"/wishlist",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(gs,{children:e.jsx(ay,{})})})}),e.jsx(Me,{path:"/messages",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(gs,{children:e.jsx(hy,{})})})}),e.jsx(Me,{path:"/reviews",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(gs,{children:e.jsx(my,{})})})}),e.jsx(Me,{path:"/settings",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(Ut,{children:e.jsx(Ky,{})})})}),e.jsx(Me,{path:"/help",element:e.jsx(Ge,{requiredRole:"user",children:e.jsx(gs,{children:e.jsx(a2,{})})})}),e.jsx(Me,{path:"/products",element:e.jsx(gs,{children:e.jsx(Fj,{})})}),e.jsx(Me,{path:"/product/:slug",element:e.jsx(gs,{children:e.jsx(Mj,{})})}),e.jsx(Me,{path:"/prebook/preview",element:e.jsx(gs,{children:e.jsx($j,{})})}),e.jsx(Me,{path:"/payment/success",element:e.jsx(gs,{children:e.jsx(Uj,{})})}),e.jsx(Me,{path:"/admin/login",element:e.jsx(U2,{})}),e.jsx(Me,{path:"/admin/dashboard",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(cd,{})})})}),e.jsx(Me,{path:"/admin",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(cd,{})})})}),e.jsx(Me,{path:"/admin/api-test",element:e.jsx(q2,{})}),e.jsx(Me,{path:"/admin/users",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(J2,{})})})}),e.jsx(Me,{path:"/admin/orders",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(Z2,{})})})}),e.jsx(Me,{path:"/admin/analytics",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(sj,{})})})}),e.jsx(Me,{path:"/admin/content",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(aj,{})})})}),e.jsx(Me,{path:"/admin/notifications",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(uj,{})})})}),e.jsx(Me,{path:"/admin/settings",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(fj,{})})})}),e.jsx(Me,{path:"/admin/products",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(vj,{})})})}),e.jsx(Me,{path:"/admin/prebooks",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(Sj,{})})})}),e.jsx(Me,{path:"/admin/payments",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(Tj,{})})})}),e.jsx(Me,{path:"/admin/user-activities",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(Ij,{})})})}),e.jsx(Me,{path:"/admin/products/new",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(jj,{})})})}),e.jsx(Me,{path:"/admin/banners",element:e.jsx(Ge,{requiredRole:"admin",children:e.jsx(ss,{children:e.jsx(Cj,{})})})}),e.jsx(Me,{path:"*",element:e.jsx(gs,{children:e.jsx(gj,{})})})]})})})})})})})}console.log("üöÄ Main.jsx loading...");console.log("üì¶ Root element:",document.getElementById("root"));const hi=document.getElementById("root");if(!hi)console.error("‚ùå Root element not found!"),document.body.innerHTML='<div style="padding: 20px; color: red; font-size: 20px;">Error: Root element not found. Please check index.html</div>';else try{const s=fi.createRoot(hi);console.log("‚úÖ Root created successfully"),s.render(yo.createElement(Lj)),console.log("‚úÖ App rendered successfully")}catch(s){console.error("‚ùå Error rendering app:",s),console.error("Error stack:",s.stack),hi.innerHTML=`
      <div style="padding: 20px; color: red; font-family: monospace;">
        <h1>‚ùå Error Loading App</h1>
        <h2>Error Message:</h2>
        <p style="background: #f0f0f0; padding: 10px; border-radius: 4px;">${s.message}</p>
        <h2>Stack Trace:</h2>
        <pre style="background: #f0f0f0; padding: 10px; border-radius: 4px; overflow: auto;">${s.stack}</pre>
        <p style="margin-top: 20px;">Please check the browser console (F12) for more details.</p>
      </div>
    `}
